{"version":3,"sources":["store/board.reducer.js","services/http.service.js","services/user.service.js","store/user.reducer.js","store/app.reducer.js","store/store.js","assets/img/hero.png","cmps/Home/HomeProfile.jsx","assets/img/reactRedux.jpg","assets/img/nodejs.png","assets/img/mongo.png","assets/img/socket.jpg","assets/img/express.png","pages/Homepage.jsx","assets/img/rbdnd.png","services/socket.service.js","cmps/Workspace/BoardPreview.jsx","cmps/Workspace/BoardAddPalette.jsx","cmps/Workspace/BoardPreviewAdd.jsx","cmps/Workspace/BoardList.jsx","cmps/LoaderSpinner.jsx","services/util.service.js","services/board.service.js","store/board.actions.js","pages/Workspace.jsx","services/event-bus.service.js","store/user.actions.js","cmps/MemberPopup.jsx","store/app.actions.js","cmps/MemberPreview.jsx","cmps/MemberList.jsx","cmps/Popover/PopoverMemberPreview.jsx","cmps/MembersAddToBoard.jsx","cmps/BoardHeader.jsx","cmps/Group/AddNewGroup.jsx","cmps/TaskPreview/TaskLabels.jsx","cmps/TaskPreview/TaskDetailsPreview.jsx","cmps/TaskPreview/TaskDatePreview.jsx","cmps/TaskPreview/TaskActions.jsx","cmps/TaskPreview/TaskPreviewEdit.jsx","cmps/TaskPreview.jsx","cmps/TaskPreviewList.jsx","services/cloudinary-service.js","cmps/MediaRecord.jsx","cmps/Group/GroupFooter.jsx","cmps/Group/HeaderTitle.jsx","cmps/Group/GroupActions.jsx","cmps/GroupDetails.jsx","cmps/GroupList.jsx","pages/BoardApp.jsx","cmps/TaskHeader.jsx","cmps/TaskCardCover.jsx","cmps/TaskDescription.jsx","cmps/Popover/Popover.jsx","cmps/CheckDeletePopover.jsx","cmps/EditAttachmentPopover.jsx","cmps/TaskAttachmentPreview.jsx","cmps/TaskAttachment.jsx","cmps/TodoPreview.jsx","cmps/TodoList.jsx","cmps/TodoAdd.jsx","cmps/ProgressBar.jsx","cmps/TaskChecklistPreview.jsx","cmps/TaskChecklist.jsx","cmps/AddComment.jsx","cmps/ActivityPreview.jsx","cmps/ActivitiesList.jsx","cmps/TaskActivities.jsx","cmps/TaskActionsMenu.jsx","cmps/TaskHeaderLabels.jsx","cmps/TaskHeaderMembers.jsx","cmps/TaskHeaderDate.jsx","cmps/TaskHeaderDetails.jsx","pages/TaskDetails.jsx","pages/LoginSignup.jsx","cmps/Dashboard/BarChart.jsx","cmps/Dashboard/DoughnutChart.jsx","cmps/Dashboard/ActivityChart.jsx","cmps/Dashboard/Dashboard.jsx","routes.js","cmps/AppHeader.jsx","cmps/Popover/PopoverLabelPreview.jsx","cmps/Popover/PopoverLabelsListPreview.jsx","cmps/ColorPalette.jsx","cmps/Popover/PopoverLabelCreateEdit.jsx","cmps/Popover/PopoverLabels.jsx","cmps/Popover/PopoverMembers.jsx","cmps/Popover/PopoverChecklist.jsx","cmps/Popover/PopoverDate.jsx","cmps/Popover/PopoverAttachment.jsx","cmps/Popover/PopoverCover.jsx","cmps/Popover/PopoverMoveCopy.jsx","cmps/Popover/PopoverMenu.jsx","cmps/TaskPreview/TaskMenuPreview.jsx","cmps/Popover/PopoverMenuArchive.jsx","cmps/Popover/PopoverMenuBackground.jsx","cmps/Popover/PopoverNotification.jsx","cmps/Popover/PopoverMenuSearchCard.jsx","cmps/Popover/PopoverDynamicCmp.jsx","root-cmp.jsx","serviceWorkerRegistration.js","index.js"],"names":["initialState","boards","board","filterBy","search","labels","members","areLabelsExpanded","BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","params","res","console","log","dir","response","status","sessionStorage","clear","STORAGE_KEY_LOGGEDIN_USER","userService","login","logout","signup","getLoggedinUser","JSON","parse","getItem","getUsers","users","userCred","user","_saveLocalUser","setItem","stringify","loggedinUser","currTaskDetails","isDragDisabled","popover","pos","posX","posY","type","isOpen","isMenu","rootReducer","combineReducers","boardModule","state","action","newState","map","_id","filter","boardId","userModule","appModule","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","HomeProfile","props","className","src","imgUrl","alt","name","href","ghUrl","target","liUrl","Homepage","onClick","history","push","heroImg","reactImg","nodeImg","expressImg","socketImg","mongoImg","Component","socketService","socket","setup","io","on","eventName","cb","off","removeAllListeners","emit","terminate","createSocketService","review","BoardPreview","saveBoard","onToggleStar","newBoard","isFavorite","err","to","style","background","bgImg","bgClr","title","color","BoardAddPalette","setBgClr","setBgImg","useState","selected","setSelected","border","htmlFor","id","value","ev","backgroundSize","BoardPreviewAdd","setTitle","isEditMode","toggleEditMode","boardMode","onChange","placeholder","preventDefault","trim","onAdd","setCreateShown","BoardList","onRemove","idx","starred","LoaderSpinner","height","width","timeout","utilService","makeId","length","txt","possible","i","charAt","Math","floor","random","makeLorem","size","words","getRandomIntInclusive","min","max","ceil","delay","ms","Promise","resolve","setTimeout","timeSince","date","seconds","Date","interval","APP_ID","boardService","query","getById","save","updateTask","group","task","groupNeedToUpdate","groups","find","currGroup","groupIndex","indexOf","taskNeedToUpdate","tasks","currTask","taskIndex","addTask","removeTask","addGroup","removeGroup","createActivity","activityType","activity","createdAt","now","byMember","updateTaskByIds","queryPhotos","get","photos","results","updatedBoard","savedBoard","taskTitle","groupId","audioUrl","videoUrl","newTask","isWeb","media","findIndex","taskId","groupIdx","newGroup","taskIdx","taskToFind","loadBoards","dispatch","loadBoard","Error","addBoard","addActivity","activities","saveTaskDetails","setFilterBy","_Workspace","componentDidMount","this","some","removeBoard","mapDispatchToProps","remove","Workspace","connect","eventBusService","listener","callListener","detail","addEventListener","removeEventListener","dispatchEvent","CustomEvent","showUserMsg","showErrorMsg","onLogin","credentials","myBus","onLogout","then","catch","MemberPopup","member","togglePopOpen","isInHeader","isInBoardList","removeUserFromBoard","userIdx","mmbr","splice","position","top","left","inset","backgroundColor","zIndex","fullname","toUpperCase","username","setCurrTaskDetails","toggleDragDisable","setPosition","togglePopover","setPopover","setPopoverMenu","MemberPreview","isInPreview","isPopOpen","pageX","pageY","MemberList","isInDetails","event","PopoverMemberPreview","selectedMembersIds","toggleMemberCheck","marginInlineEnd","includes","_MembersAddToBoard","handleSearch","e","setState","prevState","boardUsers","addUserToBoard","password","getFilteredUsers","every","filteredUsers","componentDidUpdate","prevProps","forceUpdate","setMembersPopup","toLowerCase","MembersAddToBoard","BoardHeader","isTitleEdit","setTitleEdit","setWidth","isMembersPopup","spanRef","useRef","useEffect","current","offsetWidth","onSubmit","ref","autoFocus","onBlur","updateTitle","handleText","minWidth","alignItems","stopPropagation","AddNewGroup","withRouter","match","isClicked","setIsClicked","btnText","setBtnText","toggleIsClicked","toggleExpandLabels","TaskLabels","labelIds","boardLabels","labelId","label","TaskDetailsPreview","isDone","icon","TaskDatePreview","isMouseOver","setMouseOver","setIsDone","toggleIsDone","dueDate","onMouseEnter","noHover","onMouseLeave","toLocaleDateString","undefined","month","day","_TaskActions","selectedAction","componentWillUnmount","isPopoverOpen","setActiveAction","parentElement","dataset","sendToArchive","isArchive","toggleMenu","popoverDispatch","menuPos","taskUrl","TaskActions","TaskPreviewEdit","getChecklistData","description","comments","attachments","checklists","todos","doneTodos","editTitle","setEditTitle","updateTaskName","borderRadius","bgUrl","objectFit","maxHeight","bgColor","marginBottom","TaskPreview","index","isMenuShown","toggleMenuShown","setMenuPos","getBoundingClientRect","right","innerHeight","bottom","calcPos","forEach","checklist","todo","coverMode","draggableId","provided","innerRef","draggableProps","dragHandleProps","zIndx","boxShadow","onDrag","controls","TaskPreviewList","filteredTasks","orgIdx","taskMembersIds","droppableId","droppableProps","visibilty","opacity","cloudinaryService","uploadFile","blob","CLOUD_NAME","PRESET_NAME","UPLOAD_URL","formData","FormData","append","files","fetch","body","json","error","_MediaRecord","record","isOverlay","startRecording","stopRecording","onStop","setMediaType","secure_url","setOverlay","StyledFab","styled","Fab","setAudioPath","maxWidth","padding","isFlipped","countdownTime","mimeType","constraints","audio","video","resizeMode","exact","ideal","aspectRatio","onRecordingComplete","strokeColor","Grid","item","container","justify","xs","display","flexDirection","justifyContent","React","MediaRecord","GroupFooter","setTaskTitle","mediaType","setType","onAddTask","ids","scrollToBottom","HeaderTitle","groupTitle","saveTitle","grpIdx","grp","GroupActions","GroupDetails","isAddNew","elRef","innerWidth","scrollTo","scrollHeight","behavior","snapshot","fontSize","GroupList","direction","_BoardApp","isMenuOpen","currentTarget","_loadBoard","loadUsers","clearBoard","setCurrentTarget","onDragEnd","result","destination","source","handleDrag","droppableIdStart","droppableIdEnd","droppableIndexStart","droppableIndexEnd","tempBoard","groupStart","groupEnd","BoardApp","TaskHeader","setTaksDetailsTitle","taskList","onKeyDown","key","textDecoration","fontWeight","TaskCardCover","TaskDescription","onSaveDescription","updateTaskDetails","handleChange","onToggleEdit","onEditMode","selectedInput","focus","input","_Popover","visible","contentEl","toggleVisibility","onSetPopoverPos","elRect","setPopoverPos","getContentStyles","transition","children","el","Popover","_CheckDeletePopover","typeTitle","substr","CheckDeletePopover","EditAttachmentPopover","urlName","attachment","onAttachmentUpdate","updateAttachment","attachName","class","_TaskAttachmentPreview","isPopover","isEditPopover","toggleBgUrl","toggleEditPopover","removeAttach","attachs","currAttach","setCover","removeCover","pathname","TaskAttachmentPreview","TaskAttachment","Fragment","_TodoPreview","todoTitle","onToggleEditMode","onSaveTodo","onToggleTodoIsDone","onRemoveTodo","onUndoChange","TodoPreview","TodoList","TodoAdd","onTodoAdd","addTodo","clearState","ProgressBar","completed","doneTodosCalc","parseInt","_TaskChecklistPreview","checklistIdx","todoIdx","currTodo","isDoneTodos","removeChecklist","TaskChecklistPreview","_TaskChecklist","TaskChecklist","AddComment","onAddComment","addComment","ActivityPreview","isShowActivities","selectNotification","isNotRead","isNotify","activityToShow","ActivitiesList","CommAndAct","TaskActivities","onToggleComments","getTaskCommentsAndActivitiesSorted","sort","b","comment","_TaskActionsMenu","joinTask","toggleIsArchive","deleteTask","loggedinUserIsJoin","TaskActionsMenu","TaskHeaderLabels","TaskHeaderMembers","_TaskHeaderDate","formatedDate","isTaskDone","dueDateFormat","onToggleTaskDone","currYear","getFullYear","dueYear","strDate","toLocaleString","hour","minute","hour12","toLocaleUpperCase","getDueStatus","dueStatus","dueMsg","TaskHeaderDate","_TaskHeaderDetails","selectedMembers","selectedLabels","selectedDate","TaskHeaderDetails","_TaskDetails","listId","list","toggleOverlay","goBack","boardMemberIds","currGroupIdx","overflowY","toggleTaskDone","TaskDetails","onSignup","LoginSignup","setUsername","setPassword","setFullname","isLogin","setIsLogin","onSuccess","profileObj","givenName","googleId","imageUrl","clientId","buttonText","onFailure","cookiePolicy","BarChart","taskPerMember","currMember","Object","keys","datasets","values","borderColor","borderWidth","options","scales","x","ticks","font","family","y","elements","bar","responsive","plugins","text","datalabels","anchor","align","offset","legend","maintainAspectRatio","DoughnutChart","labelsData","labelCounts","j","k","calcTasksByLabel","boxWidth","boxHeight","ActivityChart","membersActivity","indexAxis","grid","routes","path","component","isExact","taskDetails","archivedTasks","overDueTasks","doneTasks","doneChecklists","inTodos","inDoneTodos","getTaskDetails","AppHeader","userNotifications","isCreateShown","onAddBoard","isOnBoard","location","pointerEvents","PopoverLabelPreview","labelsId","toggleLabelCheck","toggleIsEditCreate","setLabelEdit","isFilter","isLabelFilterSelected","lineHeight","PopoverLabelsListPreview","toggleIsCreate","ColorPalette","colors","gradients","selectedColor","isGradient","isImages","colorCode","gradient","photo","backgroundImage","urls","regular","backgroundPosition","backgroundRepeat","full","PopoverLabelCreateEdit","onSubmitEditLabel","submitLabel","onSubmitCreate","submitCreateLabel","onRemoveLabel","removeLabel","_PopoverLabels","isEditCreate","updatedLabelsId","currLabelId","currLabel","PopoverLabels","_PopoverMembers","updatedMembers","PopoverMembers","_PopoverChecklist","handlechange","onAddChecklist","newList","PopoverChecklist","_PopoverDate","onSaveDueDate","onRemoveDate","utils","DateFnsUtils","DatePicker","autoOk","variant","openTo","PopoverDate","_PopoverAttachment","webUrlSrc","webUrlName","attach","original_filename","asset_id","onAttachmentClick","startsWith","accept","PopoverAttachment","_PopoverCover","isHeaderSelected","isFullSelected","selectedPhoto","setHeaderSelected","setFullSelected","removeFile","attachId","marginTop","alignSelf","PopoverCover","_PopoverMoveCopy","selectedGroup","selectedBoard","selectedPosition","handleBoardChange","handleGroupChange","submitMoveSameBoard","isCopy","fromGroup","fromGroupIdx","fromTask","fromTaskIdx","toGroupIdx","submitMoveAnotherBoard","currBoard","fromBoardIdx","toBoardIdx","toGroup","FormControl","InputLabel","Select","inputProps","MenuProps","disableScrollLock","MenuItem","disableUnderline","Array","from","PopoverMoveCopy","_PopoverMenu","PopoverMenu","TaskMenuPreview","_PopoverMenuArchive","flat","taskGroup","PopoverMenuArchive","_PopoverMenuBackground","PopoverMenuBackground","_PopoverNotification","setNotifications","userTasks","notify","NotifyUpdate","notifyIdx","currNotify","PopoverNotification","_PopoverMenuSearchCard","currMemeberId","PopoverMenuSearchCard","PopoverDynamicCmp","RootCmp","route","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","ReactDOM","render","StrictMode","document","getElementById","URL","process","origin","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.25eca278.chunk.js","sourcesContent":["const initialState = {\r\n    boards: [],\r\n    board: null,\r\n    filterBy: {\r\n        search: '',\r\n        labels: [],\r\n        members: []\r\n    },\r\n    areLabelsExpanded: false\r\n}\r\nexport function boardReducer(state = initialState, action) {\r\n    var newState = state\r\n    var boards\r\n    // var board\r\n    switch (action.type) {\r\n        case 'SET_BOARDS':\r\n            newState = { ...state, boards: action.boards }\r\n            break\r\n        case 'SET_BOARD':\r\n            newState = { ...state, board: action.board }\r\n            break\r\n        case 'SAVE_BOARD':\r\n            boards = state.boards.map(board => (board._id === action.board._id) ? action.board : board)\r\n            newState = { ...state, boards, board: { ...action.board } }\r\n            break\r\n        case 'ADD_BOARD':\r\n            newState = { ...state, boards: [...state.boards, action.board] }\r\n            break\r\n        case 'SET_FILTER':\r\n            newState = { ...state, filterBy: { ...state.filterBy, ...action.filterBy } }\r\n            break\r\n        case 'REMOVE_BOARD':\r\n            boards = state.boards.filter(board => board._id !== action.boardId)\r\n            newState = { ...state, boards }\r\n            break\r\n        case 'TOGGLE_LABELS':\r\n            newState = { ...state, areLabelsExpanded: !state.areLabelsExpanded }\r\n            break\r\n\r\n        // case 'UNDO_REMOVE_BOARD':\r\n        //     if (state.lastRemovedBoard) {\r\n        //         newState = { ...state, boards: [...state.boards, state.lastRemovedBoard], lastRemovedBoard: null}\r\n        //     }\r\n        //     break\r\n        default:\r\n    }\r\n    // For debug:\r\n    // console.log('Prev State:', state)\r\n    console.log('Action:', action)\r\n    console.log('New State:', newState)\r\n    return newState\r\n\r\n}\r\n","import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'GET', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data,\r\n            params: (method === 'GET') ? data : null\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            sessionStorage.clear();\r\n            // window.location.assign('/')\r\n        }\r\n        throw err\r\n    }\r\n}","import { httpService } from './http.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\nconst DB_KEY = 'user'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    getUsers,\r\n}\r\n\r\nasync function getUsers() {\r\n    const users = httpService.get('user')\r\n    return users\r\n}\r\n\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _saveLocalUser(user)\r\n\r\n}\r\n\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return user\r\n}\r\n\r\nasync function logout() {\r\n    return await httpService.post('auth/logout')\r\n\r\n}\r\n\r\nfunction _saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER) || 'null')\r\n}\r\n","import { userService } from '../services/user.service.js'\r\n\r\n\r\nconst initialState = {\r\n    loggedinUser:userService.getLoggedinUser(),\r\n    users: [],\r\n}\r\nexport function userReducer(state = initialState, action) {\r\n    var newState = state;\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            newState = { ...state, loggedinUser: action.user }\r\n            break;\r\n\r\n        case 'SET_USERS':\r\n            newState = { ...state, users: action.users }\r\n            break;\r\n\r\n        default:\r\n    }\r\n    // For debug:\r\n    // window.userState = newState;\r\n    // console.log('State:', newState);\r\n    return newState;\r\n\r\n}\r\n","const initialState = {\n    currTaskDetails: null,\n    isDragDisabled: false,\n    popover: {\n        pos: {\n            posX: -1,\n            posY: -1,\n            type: ''\n        },\n        isOpen: false,\n        isMenu: false\n    }\n}\nexport function appReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_TASK_DETAILS':\n            return { ...state, currTaskDetails: { ...action.currTaskDetails } }\n        case 'TOGGLE_DRAGGING':\n            return { ...state, isDragDisabled: !state.isDragDisabled }\n        case 'SET_POSITION':\n            const popover = { ...state.popover, pos: { ...action.pos } }\n            // const popoverDeepCopy = JSON.parse(JSON.stringify(popover))\n            return { ...state, popover }\n        case 'TOGGLE_POPOVER':\n            return { ...state, popover: { ...state.popover, isOpen: !state.popover.isOpen } }\n        case 'SET_POPOVER':\n            return { ...state, popover: { ...state.popover, isOpen: action.isOpen } }\n        case 'SET_POPOVER_MENU':\n            return { ...state, popover: { ...state.popover, isOpen: false, isMenu: action.isMenu } }\n        default:\n            return state\n    }\n}\n","// const { createStore, applyMiddleware, combineReducers, compose } = Redux\r\n// const thunk = ReduxThunk.default\r\n\r\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\n\r\nimport { boardReducer } from './board.reducer.js'\r\nimport { userReducer } from './user.reducer.js'\r\nimport { appReducer } from './app.reducer.js'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    boardModule: boardReducer,\r\n    userModule: userReducer,\r\n    appModule: appReducer,\r\n    // systemModule: systemReducer,\r\n    // reviewModule: reviewReducer,\r\n})\r\n\r\n\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n// window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__();\r\n// Lets wire up thunk and also redux-dev-tools:\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/hero.e8878a54.png\";","import GitHubIcon from '@mui/icons-material/GitHub';\r\nimport LinkedInIcon from '@mui/icons-material/LinkedIn';\r\nexport function HomeProfile(props) {\r\n  return (\r\n    <div className=\"home-profile\">\r\n      <div className=\"profile-details\">\r\n        <img className=\"profile-img\" src={props.imgUrl} alt=\"profile\"/>\r\n        <h2>{props.name}</h2>\r\n        <div className=\"links\">\r\n          <a href={props.ghUrl} target=\"blank\">\r\n            <GitHubIcon />\r\n          </a>\r\n          <a href={props.liUrl} target=\"blank\">\r\n          <LinkedInIcon />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/reactRedux.595c174b.jpg\";","export default __webpack_public_path__ + \"static/media/nodejs.7e291bae.png\";","export default __webpack_public_path__ + \"static/media/mongo.95e41129.png\";","export default __webpack_public_path__ + \"static/media/socket.6a73d0d3.jpg\";","export default __webpack_public_path__ + \"static/media/express.167f6d66.png\";","import React, { Component } from \"react\";\r\nimport heroImg from \"../assets/img/hero.png\";\r\nimport { HomeProfile } from \"../cmps/Home/HomeProfile\";\r\nimport reactImg from \"../assets/img/reactRedux.jpg\"\r\nimport nodeImg from \"../assets/img/nodejs.png\";\r\nimport mongoImg from \"../assets/img/mongo.png\";\r\nimport socketImg from \"../assets/img/socket.jpg\";\r\nimport expressImg from \"../assets/img/express.png\";\r\nimport rbdndImg from \"../assets/img/rbdnd.png\";\r\n\r\nexport class Homepage extends Component {\r\n  render() {\r\n    return (\r\n      <section className=\"homepage\">\r\n        <div className=\"hero flex main-layout\">\r\n          <div className=\"hero-content flex column\">\r\n            <h1>\r\n              <span>Trellex</span> helps teams move work forward.\r\n            </h1>\r\n            <p>\r\n              Collaborate, manage projects, and reach new productivity peaks.\r\n              From high rises to the home office, the way your team works is\r\n              unique—accomplish it all with Trellex.\r\n            </p>\r\n            <button onClick={() => this.props.history.push(\"/workspace\")}>\r\n              To Demo\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <img src={heroImg} className=\"hero-img\" alt=\"\"/>\r\n          </div>\r\n        </div>\r\n        <section className=\"about main-layout\">\r\n            <h1>Made with</h1>\r\n          <div className=\"tech flex align-center\">\r\n              <img src={reactImg} alt=\"logo\" className=\"tech-logo\"/>\r\n              <img src={nodeImg} alt=\"logo\" className=\"tech-logo\"/>\r\n              <img src={expressImg} alt=\"logo\" className=\"tech-logo\"/>\r\n              <img src={socketImg} alt=\"logo\" className=\"tech-logo\"/>\r\n              <img src={mongoImg} alt=\"logo\" className=\"tech-logo\"/>\r\n              <img src={rbdndImg} alt=\"logo\" className=\"tech-logo\"/>\r\n          </div>\r\n          <h1>Created by</h1>\r\n          <div className=\" profiles-wrapper flex\">\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C5603AQG9slGN5Fgxug/profile-displayphoto-shrink_800_800/0/1516840011642?e=1639008000&v=beta&t=xThiLyo5L33mzpMZwW4bejYp6AOxWmN5mkVMSYDzg1w\"\r\n              ghUrl=\"https://github.com/bcd82\"\r\n              liUrl=\"https://www.linkedin.com/in/barak-sidi-4632003a/\"\r\n              name=\"Barak Sidi\"\r\n            />\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C4E03AQFlupY8tXNbnA/profile-displayphoto-shrink_800_800/0/1622442415599?e=1639008000&v=beta&t=7jgIHBeZftuCwkVx-HtY1tbwtcJnPRLebgx4LLUtZU0\"\r\n              ghUrl=\"https://github.com/Tomerre1\"\r\n              liUrl=\"https://www.linkedin.com/in/tomer-revah-software-engineering/\"\r\n              name=\"Tomer Revah\"\r\n            />\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C4D03AQEEFClr3HeA9w/profile-displayphoto-shrink_800_800/0/1575055172966?e=1639008000&v=beta&t=n8WEpc1GPYeK78vRTmU6_Q4p2hvWL-AGQLpDxW5DVKk\"\r\n              ghUrl=\"https://github.com/matan3857\"\r\n              liUrl=\"https://www.linkedin.com/in/matan-levi-561115199/\"\r\n              name=\"Matan Levi\"\r\n            />\r\n          </div>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,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\"","import io from 'socket.io-client'\r\n\r\nexport const SOCKET_EMIT_USER_WATCH = 'user-watch';\r\nexport const SOCKET_EVENT_USER_UPDATED = 'user-updated';\r\nexport const SOCKET_EVENT_REVIEW_ADDED = 'review-added';\r\nexport const SOCKET_EVENT_REVIEW_ABOUT_YOU = 'review-about-you';\r\n\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n// export const socketService = createDummySocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n// var socketIsReady = false;\r\nsocketService.setup()\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket = null;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb=null) {\r\n      if (!socket) return;\r\n      if (!cb) socket.removeAllListeners(eventName)\r\n      else socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    listenersMap,\r\n    setup() {\r\n      listenersMap = {}\r\n    },\r\n    terminate() {\r\n      this.setup()\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return\r\n      if (!cb) delete listenersMap[eventName]\r\n      else listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      })\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  window.listenersMap = listenersMap;\r\n  return socketService\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log('Socket Test - Expected Puk, Actual:', x)}\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('mama', cb)\r\n// socketService.emit('baba', 'Puk')\r\n// socketService.off('baba', cb)\r\n\r\n\r\nsocketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, review => {\r\n  console.log('Review about me!', review);\r\n  \r\n})\r\n\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n\r\nexport function BoardPreview(props) {\r\n  const { board, saveBoard } = props;\r\n\r\n  const onToggleStar = async () => {\r\n    const newBoard = { ...board };\r\n    newBoard.isFavorite = !newBoard.isFavorite;\r\n    try {\r\n      saveBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(\"error setting favorite\", err);\r\n    }\r\n  };\r\n  return (\r\n    <article className=\"board-preview\">\r\n      <Link to={`/board/${board._id}`}>\r\n        <div\r\n          className=\"board-content\"\r\n          style={{\r\n            background: board.style.bgImg\r\n              ? `url(${board.style.bgImg})`\r\n              : board.style.bgClr,\r\n          }}\r\n        ></div>\r\n        <p className=\"board-title\">{board.title}</p>\r\n      </Link>\r\n      <div className={`hover-actions flex ${board?.isFavorite ? 'show' :''}`}>\r\n     \r\n       {board?.isFavorite ? <StarBorderIcon className=\"action-icon\"  style={{color:'gold'}} onClick={onToggleStar}/> : <StarBorderIcon className=\"action-icon\" onClick={onToggleStar} />}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import {useState} from 'react'\r\n\r\nexport function BoardAddPalette({ setBgClr, setBgImg, bgClr, bgImg }) {\r\n\r\n    const [selected,setSelected] = useState(\"linear-gradient(to bottom, #000000, #434343\")\r\n    \r\n    \r\n    const clrs = [\r\n        \"linear-gradient(to bottom, #000000, #434343)\",\r\n        \"linear-gradient(to right, #2980b9, #2c3e50)\",\r\n        \"linear-gradient(to right, #3494e6, #ec6ead)\",\r\n        \"linear-gradient(to left, #2f7336, #aa3a38)\",\r\n        \"linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)\",\r\n        \"linear-gradient(to bottom, #e52d27, #b31217)\",\r\n    ];\r\n\r\n    const imgs = [\r\n    \"https://www.incimages.com/uploaded_files/image/1920x1080/getty_509107562_2000133320009280346_351827.jpg\",\r\n    \"http://all4desktop.com/data_images/original/4238112-background.jpg\",\r\n    \"https://c.pxhere.com/photos/4f/ee/candy_toppings_sweet_colorful_sugar-883692.jpg!d\",\r\n    \"http://www.pngmagic.com/product_images/creative-banner-design-background-images.jpg\",\r\n    \"https://cdn.wallpapersafari.com/22/29/fdqrYk.jpg\",\r\n    \"https://img2.goodfon.com/wallpaper/nbig/2/73/texture-lines-colours-cveta.jpg\"\r\n    \r\n];\r\n\r\n  return (\r\n    <div className=\"palettes\">\r\n      <div className=\"clrs\">\r\n        {clrs.map((color) => {\r\n          return (\r\n            <label\r\n              key={color}\r\n              className=\"flex align-center justify-center palette-icon\"\r\n              style={{ background: color , border: selected === color ? '2px solid white' : ''}}\r\n              name=\"label-color\"\r\n              htmlFor={`color-${color}`}\r\n            >\r\n              <input\r\n                type=\"radio\"\r\n                name=\"color\"\r\n                id={`color-${color}`}\r\n                value={color}\r\n                onClick={(ev) =>{ \r\n                    setBgClr(ev.target.value)\r\n                    setBgImg('')\r\n                    setSelected(ev.target.value)\r\n\r\n                }}\r\n              />\r\n           \r\n            </label>\r\n          );\r\n        })}\r\n        <div className=\"imgs\">\r\n          {imgs.map((imgUrl) => {\r\n            return (\r\n              <label\r\n                key={imgUrl}\r\n                className=\"flex align-center justify-center palette-icon\"\r\n                style={{\r\n                  background: `url(${imgUrl})`,\r\n                  backgroundSize: \"cover\",\r\n                  border: selected === imgUrl ? '2px solid white' : ''\r\n                }}\r\n                name=\"label-color\"\r\n                htmlFor={`color-${imgUrl}`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"color\"\r\n                  id={`color-${imgUrl}`}\r\n                  value={imgUrl}\r\n                  onClick={(ev) =>{ \r\n                      setBgImg(ev.target.value)\r\n                      setSelected(ev.target.value)\r\n                \r\n                }}\r\n                />\r\n          \r\n              </label>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { BoardAddPalette } from \"../Workspace/BoardAddPalette\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\n\r\nexport function BoardPreviewAdd(props) {\r\n  const [bgClr, setBgClr] = useState(\r\n    \"linear-gradient(to bottom, #000000, #434343)\"\r\n  );\r\n  const [bgImg, setBgImg] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [isEditMode, toggleEditMode] = useState(false);\r\n  // const [bgClrs, setBgClrs] = useState([]);\r\n  // if(props.boardMode === true) toggleEditMode(true)\r\n  return (\r\n    <article className={`board-preview-add ${props.boardMode ? 'on-board' : ''}`}>\r\n      <div\r\n        className=\"board-content flex column\"\r\n        style={{\r\n          background: `${bgImg ? `url(${bgImg})` : bgClr} center`,\r\n        }}\r\n      >\r\n        {!isEditMode && !props.boardMode ? (\r\n          <div\r\n            className=\"add-inactive\"\r\n            onClick={() => toggleEditMode(!isEditMode)}\r\n          >\r\n            <p>Add a board</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"add-active fade-in\">\r\n            <div className=\"title-box flex\">\r\n              <form>\r\n                <input\r\n                  className=\"board-title\"\r\n                  value={title}\r\n                  onChange={(ev) => setTitle(ev.target.value)}\r\n                  placeholder=\"New board title\"\r\n                />\r\n                <button\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    if (!title.trim()) return;\r\n                    props.onAdd(title, bgClr, bgImg);\r\n                    setBgClr(\"linear-gradient(to bottom, #000000, #434343)\");\r\n                    setBgImg(\"\");\r\n                    setTitle(\"\");\r\n                    toggleEditMode();\r\n                  }}\r\n                >\r\n                  Create\r\n                </button>\r\n              </form>\r\n              <button\r\n                className=\"closer\"\r\n                onClick={() =>\r\n                  !props.boardMode\r\n                    ? toggleEditMode(!isEditMode)\r\n                    : props.setCreateShown(false)\r\n                }\r\n              >\r\n                <CloseIcon />\r\n              </button>\r\n            </div>\r\n            <div className=\"color-box\">\r\n              <BoardAddPalette\r\n                bgClr={bgClr}\r\n                setBgClr={setBgClr}\r\n                setBgImg={setBgImg}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BoardPreview } from \"./BoardPreview\";\r\nimport { BoardPreviewAdd } from \"./BoardPreviewAdd\";\r\nexport function BoardList(props) {\r\n  const { boards, onAdd, onRemove } = props;\r\n\r\n  return (\r\n    <div className=\"board-list\">\r\n      {boards &&\r\n        boards.map((board, idx) => (\r\n          <BoardPreview\r\n            board={board}\r\n            key={idx}\r\n            onRemove={onRemove}\r\n            saveBoard={props.saveBoard}\r\n          />\r\n        ))}\r\n\r\n      {!props.starred && <BoardPreviewAdd onAdd={onAdd} />}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\n\r\nexport  function LoaderSpinner() {\r\n    return (\r\n        <Loader\r\n        type=\"Grid\"\r\n        color=\"#0079bf\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} \r\n        className=\"loader fade-in\"\r\n      />\r\n    )\r\n}\r\n","export const utilService = {\r\n    makeId,\r\n    makeLorem,\r\n    getRandomIntInclusive,\r\n    delay,\r\n    timeSince\r\n}\r\n\r\nfunction makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return txt;\r\n}\r\n\r\nfunction makeLorem(size = 100) {\r\n    var words = ['The sky', 'above', 'the port', 'was', 'the color of television', 'tuned', 'to', 'a dead channel', '.', 'All', 'this happened', 'more or less', '.', 'I', 'had', 'the story', 'bit by bit', 'from various people', 'and', 'as generally', 'happens', 'in such cases', 'each time', 'it', 'was', 'a different story', '.', 'It', 'was', 'a pleasure', 'to', 'burn'];\r\n    var txt = '';\r\n    while (size > 0) {\r\n        size--;\r\n        txt += words[Math.floor(Math.random() * words.length)] + ' ';\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction getRandomIntInclusive(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive \r\n}\r\n\r\nfunction delay(ms = 1500) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms)\r\n    })\r\n}\r\n\r\nfunction timeSince(date)  {\r\n    var seconds = Math.floor((new Date() - date) / 1000);\r\n\r\n    var interval = seconds / 31536000;\r\n\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a year ago\";\r\n        return Math.floor(interval) + \" years ago\";\r\n    }\r\n    interval = seconds / 2592000;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a month ago\";\r\n        return Math.floor(interval) + \" months ago\";\r\n    }\r\n    interval = seconds / 86400;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a day ago\";\r\n        return Math.floor(interval) + \" days ago\";\r\n    }\r\n    interval = seconds / 3600;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"an hour ago\";\r\n        return Math.floor(interval) + \" hours ago\";\r\n    }\r\n    interval = seconds / 60;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"an minute ago\";\r\n        return Math.floor(interval) + \" minutes ago\";\r\n    }\r\n    if (Math.floor(seconds) === 0) return \"a few seconds ago\";\r\n    return Math.floor(seconds) + \" seconds ago\";\r\n}\r\n\r\n","\r\nimport { socketService } from '../services/socket.service'\r\nimport { utilService } from './util.service.js'\r\nimport { httpService } from './http.service.js'\r\nimport { userService } from './user.service'\r\nimport axios from 'axios'\r\n\r\nconst APP_ID = 'IwjSlLYB-kEXeOlDvuifDixGryX1CK64CwapeKeJC8w'\r\nconst STORAGE_KEY = 'board'\r\n\r\nexport const boardService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    // remove,\r\n    updateTask,\r\n    addTask,\r\n    removeTask,\r\n    addGroup,\r\n    removeGroup,\r\n    createActivity,\r\n    updateTaskByIds,\r\n    queryPhotos\r\n}\r\n\r\nasync function query() {\r\n    // const res = await axios.get('http://localhost:3030/api/toy', { params: filterBy })\r\n    // return res.data\r\n    const boards = await httpService.get('board')\r\n    return boards\r\n}\r\n// async function query() {\r\n//     let boards = await storageService.query(STORAGE_KEY)\r\n//     if (boards.length) return boards\r\n//     console.log('no local storage found')\r\n//     localStorage.setItem('board', JSON.stringify(demoBoards))\r\n//     return demoBoards\r\n// }\r\n\r\nasync function queryPhotos(query = 'random') {\r\n    const photos = await axios.get(`https://api.unsplash.com/search/photos/?query=${query}&client_id=${APP_ID}`)\r\n    return photos.data.results\r\n}\r\n\r\n// function getById(boardId) {\r\n//     return storageService.get(STORAGE_KEY, boardId)\r\n// }\r\nasync function getById(boardId) {\r\n    // const res = await axios.get(`http://localhost:3030/api/toy/${toyId}`)\r\n    // return res.data\r\n    const board = await httpService.get(`board/${boardId}`)\r\n    return board\r\n}\r\n\r\n\r\n\r\n// async function remove(boardId) {\r\n//     try {\r\n//         return storageService.remove(STORAGE_KEY, boardId)\r\n//     } catch (err) {\r\n//         console.log('couldnt remove board', err)\r\n//     }\r\n// }\r\n\r\nasync function save(board) {\r\n    if (board._id) {\r\n        const updatedBoard = await httpService.put('board', board)\r\n        socketService.emit(\"board-change\")\r\n        return updatedBoard\r\n        // return storageService.put(STORAGE_KEY, board)\r\n    } else {\r\n        const newBoard = {\r\n            \"title\": board.title,\r\n            \"createdAt\": Date.now(),\r\n            \"createdBy\": userService.getLoggedinUser(),\r\n            \"groups\": [],\r\n            \"tasks\": [],\r\n            \"labels\": [],\r\n            \"activities\": [],\r\n            \"members\": [],\r\n            \"style\": {\r\n                \"bgClr\": board.style.bgClr,\r\n                \"bgImg\": board.style.bgImg\r\n            },\r\n        }\r\n        const savedBoard = await httpService.post('board', newBoard)\r\n        socketService.emit(\"board-change\")\r\n        return savedBoard\r\n        // return storageService.post(STORAGE_KEY, newBoard)\r\n    }\r\n}\r\n\r\n\r\nfunction createActivity(activityType, currTask, txt = null) {\r\n    const task = {\r\n        id: currTask.id,\r\n        title: currTask.title\r\n    }\r\n    const activity = {\r\n        id: utilService.makeId(),\r\n        createdAt: Date.now(),\r\n        byMember: userService.getLoggedinUser(),\r\n        task,\r\n        type: activityType,\r\n        txt\r\n    }\r\n    return activity\r\n}\r\n\r\nfunction updateTask(board, group, task) {\r\n    const groupNeedToUpdate = board.groups.find(currGroup => currGroup.id === group.id)\r\n    const groupIndex = board.groups.indexOf(groupNeedToUpdate)\r\n    const taskNeedToUpdate = board.groups[groupIndex].tasks.find(currTask => currTask.id === task.id)\r\n    const taskIndex = board.groups[groupIndex].tasks.indexOf(taskNeedToUpdate)\r\n    board.groups[groupIndex].tasks[taskIndex] = task\r\n    return { ...board }\r\n}\r\n\r\n\r\n\r\nasync function addTask(taskTitle, boardId, groupId, audioUrl, videoUrl) {\r\n    if (!taskTitle)\r\n        return\r\n    const newTask =\r\n    {\r\n        \"id\": `t-${utilService.makeId()}`,\r\n        \"title\": taskTitle,\r\n        \"description\": \"\",\r\n        \"createdAt\": Date.now(),\r\n        \"byMember\": userService.getLoggedinUser(),\r\n        \"style\": {},\r\n        \"labelIds\": [],\r\n        \"members\": [],\r\n        \"media\": {},\r\n        \"attachments\": (audioUrl || videoUrl) ? [{\r\n            id: utilService.makeId(),\r\n            name: 'Media url',\r\n            url: (audioUrl) ? audioUrl : videoUrl,\r\n            createdAt: Date.now(),\r\n            isWeb: true\r\n        }] : [],\r\n    }\r\n    if (audioUrl) newTask.media.audioUrl = audioUrl\r\n    else if (videoUrl) newTask.media.videoUrl = videoUrl\r\n\r\n    const board = await getById(boardId)\r\n    const idx = board.groups.findIndex((group) => group.id === groupId)\r\n    board.groups[idx].tasks.push(newTask)\r\n    save(board)\r\n    return board\r\n}\r\n\r\nasync function removeTask(boardId, groupId, taskId) {\r\n    try {\r\n        const board = await getById(boardId)\r\n        const groupIdx = board.groups.findIndex(group => groupId === group.id)\r\n        board.groups[groupIdx].tasks = board.groups[groupIdx].tasks.filter(task => taskId !== task.id)\r\n        save(board)\r\n        return board\r\n    }\r\n\r\n    catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\n\r\nasync function addGroup(boardId, title = \"Untitled group\") {\r\n    if (!boardId) return\r\n    const newGroup = {\r\n        \"id\": `g-${utilService.makeId()}`,\r\n        \"title\": title,\r\n        tasks: [],\r\n        \"style\": {\r\n            bgImg: \"\",\r\n            bgClr: \"\"\r\n        }\r\n    }\r\n    try {\r\n        const board = await getById(boardId)\r\n        board.groups.push(newGroup)\r\n        save(board)\r\n\r\n        return board\r\n    }\r\n    catch (err) {\r\n        console.log('couldnt add group', err)\r\n    }\r\n}\r\n\r\nasync function removeGroup(boardId, groupId) {\r\n    try {\r\n        const board = await getById(boardId)\r\n        board.groups = board.groups.filter(group => group.id !== groupId)\r\n        save(board)\r\n        return board\r\n    }\r\n\r\n    catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\nasync function updateTaskByIds(boardId, groupId, task) {\r\n    const board = await getById(boardId)\r\n    const groupIdx = board.groups.findIndex(group => groupId === group.id)\r\n    const taskIdx = board.groups[groupIdx].tasks.findIndex(taskToFind => taskToFind.id === task.id)\r\n    board.groups[groupIdx].tasks[taskIdx] = task\r\n    save(board)\r\n    return board\r\n\r\n}\r\n\r\n","import { boardService } from '../services/board.service';\r\nimport { socketService } from '../services/socket.service'\r\n\r\nexport const loadBoards = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const boards = await boardService.query()\r\n            // console.log('loading boards',boards)\r\n            dispatch({\r\n                type: \"SET_BOARDS\",\r\n                boards,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant set boards', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const loadBoard = (boardId, filterBy = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.getById(boardId, filterBy)\r\n            // console.log('loading board',board)\r\n            if (board)\r\n                dispatch({\r\n                    type: \"SET_BOARD\",\r\n                    board,\r\n                });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant set board', err)\r\n            throw Error(err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const saveBoard = (board) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const newBoard = await boardService.save(board)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            });\r\n            socketService.emit(\"board-change\")\r\n        }\r\n        catch (err) {\r\n            console.log('cant save board', err)\r\n            // throw Error(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const addBoard = (title = \"new board\", bgClr = \"black\", bgImg) => {\r\n    return async (dispatch) => {\r\n        const board = { title, style: { bgClr, bgImg } }\r\n        try {\r\n            const newBoard = await boardService.save(board)\r\n            dispatch({\r\n                type: \"ADD_BOARD\",\r\n                board: newBoard,\r\n            });\r\n            return newBoard\r\n        }\r\n        catch (err) {\r\n            console.log('cant add board', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const handleDrag = (\r\n    board,\r\n    droppableIdStart,\r\n    droppableIdEnd,\r\n    droppableIndexStart,\r\n    droppableIndexEnd,\r\n    draggableId,\r\n    type\r\n) => {\r\n    return async (dispatch) => {\r\n        const tempBoard = JSON.parse(JSON.stringify(board))\r\n        //drag group\r\n        if (type === 'group') {\r\n            const group = tempBoard.groups.splice(droppableIndexStart, 1)\r\n            tempBoard.groups.splice(droppableIndexEnd, 0, ...group)\r\n        } else {\r\n            if (droppableIdStart === droppableIdEnd) {\r\n                const group = tempBoard.groups.find(group => group.id === droppableIdStart)\r\n                const task = group.tasks.splice(droppableIndexStart, 1)\r\n                group.tasks.splice(droppableIndexEnd, 0, ...task)\r\n            }\r\n            // different group target\r\n            if (droppableIdStart !== droppableIdEnd) {\r\n                // source group\r\n                const groupStart = tempBoard.groups.find(group => group.id === droppableIdStart)\r\n                const task = groupStart.tasks.splice(droppableIndexStart, 1)\r\n                // target group\r\n                const groupEnd = tempBoard.groups.find(group => group.id === droppableIdEnd)\r\n                groupEnd.tasks.splice(droppableIndexEnd, 0, ...task)\r\n            }\r\n        }\r\n        // same group drag\r\n        boardService.save(tempBoard)\r\n        dispatch({\r\n            type: \"SAVE_BOARD\",\r\n            board: tempBoard\r\n        });\r\n\r\n        return\r\n    }\r\n\r\n}\r\n\r\nexport const removeBoard = (boardId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.remove(boardId)\r\n            dispatch({\r\n                type: \"REMOVE_BOARD\",\r\n                boardId: boardId,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant remove board', err)\r\n        }\r\n    }\r\n}\r\nexport const addTask = (taskTitle, boardId, groupId, audioUrl = null, videoUrl = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.addTask(taskTitle, boardId, groupId, audioUrl, videoUrl)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n        }\r\n        catch (err) {\r\n            console.log('cant add task', err)\r\n        }\r\n    }\r\n}\r\nexport const removeTask = (boardId, groupId, taskId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.removeTask(boardId, groupId, taskId)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant remove task', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const addGroup = (boardId, title) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.addGroup(boardId, title)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        } catch (err) {\r\n            console.log('cant add group', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeGroup = (boardId, groupId) => {\r\n    console.log(groupId, boardId)\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.removeGroup(boardId, groupId)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        } catch (err) {\r\n            console.log('cant remove group', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const clearBoard = () => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"SET_BOARD\",\r\n            board: null\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport const toggleExpandLabels = () => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"TOGGLE_LABELS\",\r\n        });\r\n    }\r\n}\r\n\r\nexport const addActivity = (board, currTaskDetails, activityType, txt = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            board.activities.push(boardService.createActivity(activityType, currTaskDetails, txt))\r\n            const newBoard = await boardService.save(board)\r\n            console.log('newBoard:', newBoard)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const saveTaskDetails = (board, currGroup, currTask) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const updatedBoard = boardService.updateTask(board, currGroup, currTask)\r\n            const newBoard = await boardService.save(updatedBoard)\r\n            console.log('newBoard:', newBoard)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n\r\n            // dispatch({\r\n            //     type: \"SET_TASK_DETAILS\",\r\n            //     currTaskDetails: currTask\r\n            // });\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const updateTask = (boardId, groupId, task) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const updatedBoard = await boardService.updateTaskByIds(boardId, groupId, task)\r\n            const newBoard = await boardService.save(updatedBoard)\r\n            console.log('newBoard:', newBoard)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const setFilterBy = (filterBy) => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"SET_FILTER\",\r\n            filterBy\r\n        });\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { socketService } from '../services/socket.service'\r\nimport { BoardList } from \"../cmps/Workspace/BoardList\";\r\nimport { LoaderSpinner } from \"../cmps/LoaderSpinner\";\r\nimport {\r\n  loadBoards,\r\n  addBoard,\r\n  removeBoard,\r\n  saveBoard,\r\n} from \"../store/board.actions\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n\r\nclass _Workspace extends Component {\r\n\r\n  componentDidMount = () => {\r\n    socketService.on(\"new-board-added\", this.props.loadBoards)\r\n    this.props.loadBoards();\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    socketService.off(\"new-board-added\")\r\n    // socketService.terminate()\r\n  }\r\n\r\n  addBoard = async (title, bgClr = \"black\", bgImg = \"\") => {\r\n    if (!title || !title.trim()) return;\r\n    try {\r\n      this.props.addBoard(title, bgClr, bgImg);\r\n      socketService.emit(\"new-board\");\r\n    } catch (err) {\r\n      console.log(\"problem adding board\", err);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { boards } = this.props;\r\n    return (\r\n      <section className=\"workspace-page main-layout flex column\">\r\n        <h1>Your Workspace</h1>\r\n        <h2 className=\"flex align-center\">\r\n          {this.props.boards.some(board => board.isFavorite) && <><StarBorderIcon style={{ height: '35px', width: '35px' }} /> Starred boards</>}\r\n        </h2>\r\n        <div className=\"board-lists flex column\">\r\n            <BoardList\r\n              starred={true}\r\n              boards={boards.filter((board) => board.isFavorite)}\r\n              onAdd={this.addBoard}\r\n              onRemove={this.props.removeBoard}\r\n              saveBoard={this.props.saveBoard}\r\n            />\r\n         \r\n          {boards.length ? (\r\n            <BoardList\r\n              boards={boards.filter((board) => !board.isFavorite)}\r\n              onAdd={this.addBoard}\r\n              onRemove={this.props.removeBoard}\r\n              saveBoard={this.props.saveBoard}\r\n            />\r\n          ) : (\r\n            <LoaderSpinner />\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    boards: state.boardModule.boards,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  loadBoards,\r\n  addBoard,\r\n  removeBoard,\r\n  saveBoard,\r\n};\r\nexport const Workspace = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_Workspace);\r\n","function on(eventName, listener) {\r\n\r\n    const callListener = ({ detail }) => {\r\n        listener(detail);\r\n    };\r\n\r\n    window.addEventListener(eventName, callListener);\r\n\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener);\r\n    };\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\nexport const eventBusService = { on, emit };\r\n\r\nexport function showUserMsg(txt, type = '') {\r\n    eventBusService.emit('show-user-msg', { txt, type })\r\n}\r\nexport function showSuccessMsg(txt) {\r\n    showUserMsg(txt, 'success')\r\n}\r\nexport function showErrorMsg(txt) {\r\n    showUserMsg(txt, 'danger')\r\n}\r\n\r\nwindow.myBus = eventBusService;\r\nwindow.showUserMsg = showUserMsg;\r\n\r\n// eventBusService.on('baba', (x)=>console.log('Hi Baba', x))\r\n// eventBusService.on('baba', (x)=>console.log('Hello Baba Ji', x))\r\n// eventBusService.emit('baba', [5, 8, 11])\r\n// setTimeout(()=>{\r\n//     eventBusService.emit('baba', 17)\r\n// }, 2000)\r\n\r\n/* Listening Component...\r\n    import {eventBusService} from 'path...event-bus-service'\r\n    eventBusService.on('some-event', (dataFromEvent) => {\r\n    do something with dataFromEvent\r\n    })\r\n\r\n   Receiving Component...\r\n    eventBusService.emit('some-event', data)\r\n*/","import { userService } from \"../services/user.service.js\";\r\nimport { showErrorMsg } from '../services/event-bus.service.js'\r\n// import { socketService, SOCKET_EMIT_USER_WATCH, SOCKET_EVENT_USER_UPDATED } from \"../services/socket.service.js\";\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            // dispatch({ type: 'LOADING_START' })\r\n            const users = await userService.getUsers()\r\n            dispatch({ type: 'SET_USERS', users })\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err)\r\n        } finally {\r\n            // dispatch({ type: 'LOADING_DONE' })\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeUser(userId) {\r\n    return async dispatch => {\r\n        try {\r\n            await userService.remove(userId)\r\n            dispatch({ type: 'REMOVE_USER', userId })\r\n        } catch (err) {\r\n            console.log('UserActions: err in removeUser', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function onLogin(credentials) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.login(credentials)\r\n            console.log(user)\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                user\r\n            })\r\n        } catch (err) {\r\n            showErrorMsg('Cannot login')\r\n            console.log('Cannot login', err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function onSignup(credentials) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.signup(credentials)\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                user\r\n            })\r\n\r\n        } catch (err) {\r\n            console.log('error when signing up', err)\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function onLogout() {\r\n    return (dispatch) => {\r\n        userService.logout()\r\n            .then(() => dispatch({\r\n                type: 'SET_USER',\r\n                user: null\r\n            }))\r\n            .catch(err => {\r\n                showErrorMsg('Cannot logout')\r\n                console.log('Cannot logout', err)\r\n            })\r\n    }\r\n}\r\n\r\n// export function loadAndWatchUser(userId) {\r\n//     return async (dispatch) => {\r\n//         try {\r\n//             const user = await userService.getById(userId);\r\n//             dispatch({ type: 'SET_WATCHED_USER', user })\r\n//             socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n//             socketService.off(SOCKET_EVENT_USER_UPDATED)\r\n//             socketService.on(SOCKET_EVENT_USER_UPDATED, user => {\r\n//                 console.log('USER UPADTED FROM SOCKET');\r\n//                 dispatch({ type: 'SET_WATCHED_USER', user })\r\n//             })\r\n//         } catch (err) {\r\n//             showErrorMsg('Cannot load user')\r\n//             console.log('Cannot load user', err)\r\n//         }\r\n//     }\r\n// }\r\n\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogout } from \"../store/user.actions\";\r\nimport { saveBoard } from \"../store/board.actions\";\r\n\r\nconst _MemberPopup = ({\r\n  member,\r\n  togglePopOpen,\r\n  isInHeader,\r\n  isInBoardList,\r\n  onLogout,\r\n  user,\r\n  board,\r\n  saveBoard,\r\n}) => {\r\n  const removeUserFromBoard = async () => {\r\n    // if (member._id === user?._id) {\r\n      const newBoard = JSON.parse(JSON.stringify(board));\r\n      const userIdx = newBoard.members.findIndex(mmbr => mmbr._id === member._id)\r\n      newBoard.members.splice(userIdx, 1);\r\n      try{\r\n        await saveBoard(newBoard);\r\n        togglePopOpen(false);\r\n\r\n      }\r\n      catch(err){\r\n        console.log('error when deleting user from board',err)\r\n      // }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`popup-container flex column`}>\r\n      <div\r\n        className=\"pop-overlay\"\r\n        style={{\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          inset: 0,\r\n          height: \"100vh\",\r\n          width: \"100%\",\r\n          backgroundColor: \"transparent\",\r\n          zIndex: 4,\r\n        }}\r\n        onClick={() => togglePopOpen(false)}\r\n      ></div>\r\n      <div className={`wrap  ${isInHeader ? \"header\" : \"\"}`}>\r\n        <div className=\"member-popup\">\r\n          {member?.imgUrl ? (\r\n            <img src={member.imgUrl} className=\"member-img\" alt=\"member-img\" />\r\n          ) : (\r\n            <div\r\n              className=\"member-img\"\r\n              style={{ background: \"rgb(223, 225, 230)\", color: \"inherit\" }}\r\n            >\r\n              <p className={`member-letter preview`}>\r\n                {member?.fullname?.[0].toUpperCase() || \"\"}\r\n              </p>\r\n            </div>\r\n          )}\r\n          <div className=\"member-info flex column\">\r\n            <p className=\"fullname\">{member.fullname}</p>\r\n            <p className=\"username\">{member.username}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"member-footer\">\r\n          {isInHeader && (\r\n            <p className=\"logout\" onClick={onLogout}>\r\n              Logout\r\n            </p>\r\n          )}\r\n          {isInBoardList && (\r\n            <p className=\"logout\" onClick={removeUserFromBoard}>Remove from board</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onLogout,\r\n  saveBoard,\r\n};\r\nconst mapStateToProps = ({ userModule, boardModule }) => {\r\n  return {\r\n    user: userModule.loggedinUser,\r\n    board: boardModule.board,\r\n  };\r\n};\r\nexport const MemberPopup = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MemberPopup);\r\n","import { boardService } from '../services/board.service';\nimport { socketService } from '../services/socket.service'\n\nexport const setCurrTaskDetails = (currTaskDetails) => {\n    return async (dispatch) => {\n        dispatch({\n            type: \"SET_TASK_DETAILS\",\n            currTaskDetails\n        });\n    }\n}\n\n\nexport const toggleDragDisable = () => {\n    return (dispatch) => {\n        dispatch({\n            type: \"TOGGLE_DRAGGING\",\n        });\n    }\n}\n\nexport const setPosition = ({ pos, type}) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POSITION\",\n            pos: { ...pos, type },\n        })\n    }\n}\n\nexport const togglePopover = () => {\n    return (dispatch) => {\n        dispatch({\n            type: \"TOGGLE_POPOVER\",\n        });\n    }\n}\nexport const setPopover = (isOpen) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POPOVER\",\n            isOpen\n        });\n    }\n}\nexport const setPopoverMenu = (isMenu) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POPOVER_MENU\",\n            isMenu\n        });\n    }\n}\n","import React, { useState } from \"react\";\r\nimport { MemberPopup } from \"./MemberPopup\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu\r\n} from \"../store/app.actions\";\r\n\r\nfunction _MemberPreview({\r\n  member,\r\n  isInPreview,\r\n  isEditMode,\r\n  isInHeader,\r\n  isInBoardList,\r\n  task,\r\n  setPosition,\r\n  setCurrTaskDetails,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n  onLogout,\r\n}) {\r\n  const [isPopOpen, togglePopOpen] = useState(false);\r\n\r\n  const openPop = (ev) => {\r\n    togglePopOpen(!isPopOpen);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <article\r\n        className=\"member-wrapper\"\r\n        onClick={(ev) => {\r\n          ev.preventDefault();\r\n          //   ev.stopPropagation();\r\n          if (isEditMode) return;\r\n          if (isInPreview) {\r\n            setCurrTaskDetails(task);\r\n            setPosition({\r\n              pos: { pageX: ev.pageX, pageY: ev.pageY },\r\n              type: \"MEMBERS\",\r\n            });\r\n            setPopoverMenu(false)\r\n\r\n            togglePopover();\r\n            return;\r\n          }\r\n          openPop(ev);\r\n        }}\r\n      >\r\n        {member?.imgUrl ? (\r\n          <img src={member.imgUrl} className=\"member-img\" alt={member.fullname[0].toUpperCase()} />\r\n        ) : (\r\n          <div\r\n            className=\"member-img\"\r\n            style={{ background: \"rgb(223, 225, 230)\", color: \"inherit\" }}\r\n          >\r\n            <p className={`member-letter ${isInPreview ? \"preview\" : \"\"}`}>\r\n              {member?.fullname?.[0].toUpperCase() || \"\"}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </article>\r\n      {isPopOpen && (\r\n        <MemberPopup\r\n          member={member}\r\n          togglePopOpen={togglePopOpen}\r\n          isInPreview={isInPreview}\r\n          isInHeader={isInHeader}\r\n          isInBoardList={isInBoardList}\r\n          onLogout={onLogout}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu\r\n};\r\nexport const MemberPreview = connect(null, mapDispatchToProps)(_MemberPreview);\r\n","import AddIcon from \"@mui/icons-material/Add\";\r\nimport { MemberPreview } from \"./MemberPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport { setPosition, togglePopover,setPopoverMenu } from \"../store/app.actions\";\r\n\r\nexport function _MemberList(props) {\r\n  const {\r\n    members,\r\n    isInPreview,\r\n    isInDetails,\r\n    isInHeader,\r\n    togglePopover,\r\n    isEditMode,\r\n    isInBoardList,\r\n    task,\r\n  } = props;\r\n  return (\r\n    <div\r\n      className={`members ${isInPreview ? \"preview\" : \"\"}${\r\n        isInHeader ? \"in-header\" : \"\"\r\n      } ${task?.members.length >= 5 ? 'many':''}`}\r\n    >\r\n      {members &&\r\n        members.map((member, idx) => (\r\n          <MemberPreview\r\n            isInPreview={isInPreview}\r\n            isEditMode={isEditMode}\r\n            isInHeader={isInHeader}\r\n            isInBoardList={isInBoardList}\r\n            member={member}\r\n            key={idx}\r\n            task={task}\r\n          />\r\n        ))}\r\n      {isInDetails && (\r\n        <button\r\n          className=\"secondary-btn\"\r\n          onClick={(event) => {\r\n            props.setPosition({\r\n              pos: { pageX: event.pageX, pageY: event.pageY },\r\n              type: \"MEMBERS\",\r\n            });\r\n            togglePopover();\r\n          }}\r\n        >\r\n          <AddIcon />\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currTaskDetails: state.appModule.currTaskDetails,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n  \r\n};\r\n\r\nexport const MemberList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MemberList);\r\n","import React from 'react'\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport function PopoverMemberPreview({ member, selectedMembersIds, toggleMemberCheck }) {\n    return (\n        <li className=\"member-pop-over-preview flex\" onClick={() => { toggleMemberCheck(member) }}>\n            {member.imgUrl &&\n                <img className=\"profile-picture\" style={{ marginInlineEnd: '8px' }} src={member.imgUrl} alt='member photo' />\n            }\n            {!member.imgUrl &&\n                <div className=\"profile-picture\" style={{ background: \"#dfe1e6\", marginInlineEnd: '8px' }}>\n                    <p className=\"profile-picture letter\" >{member.fullname[0]}</p>\n                </div>\n            }\n\n            <span>{member.fullname}</span>\n\n            {selectedMembersIds.includes(member._id) &&\n                <span className=\"icon-check flex\">\n                    <CheckIcon />\n                </span>\n            }\n\n        </li >\n    )\n}\n\n\n","import React, { Component } from \"react\";\r\nimport { PopoverMemberPreview } from \"./Popover/PopoverMemberPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../store/board.actions\";\r\n\r\nexport class _MembersAddToBoard extends Component {\r\n  state = {\r\n    search: \"\",\r\n  };\r\n\r\n  handleSearch = (e) => {\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      search: e.target.value,\r\n    }));\r\n  };\r\n  boardUsers = [];\r\n\r\n  addUserToBoard = async (member) => {\r\n    const { board, saveBoard } = this.props;\r\n    delete member.password;\r\n    const newBoard = { ...board, members: [...board.members, member] };\r\n    await saveBoard(newBoard);\r\n  };\r\n\r\n  getFilteredUsers = () => {\r\n    const { board, users } = this.props;\r\n    const fUsers =\r\n      users.filter((user) =>\r\n        board.members.every((member) => member._id !== user._id)\r\n      ) || [];\r\n    return fUsers;\r\n  };\r\n\r\n  filteredUsers = this.getFilteredUsers();\r\n\r\n  componentDidUpdate = (prevProps) => {\r\n    if (this.props.board.members.length !== prevProps.board.members.length) {\r\n      this.filteredUsers = this.getFilteredUsers();\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, board, currTaskDetails, users, setMembersPopup } =\r\n      this.props;\r\n    const { search } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          className={`overlay show`}\r\n          onClick={() => setMembersPopup(false)}\r\n        ></div>\r\n        <div title={title} className=\" board-member-add flex column\">\r\n          <div className=\"members-popover\">\r\n            <h4>ADD TO BOARD</h4>\r\n            <input\r\n              type=\"search\"\r\n              placeholder=\"Search members\"\r\n              onChange={this.handleSearch}\r\n            />\r\n            <ul className=\"clean-list flex column\">\r\n              {this.filteredUsers.length > 0 ? (\r\n                this.filteredUsers\r\n                  .filter((member) =>\r\n                    member.fullname.toLowerCase().includes(search.toLowerCase())\r\n                  )\r\n                  .map((member, idx) => (\r\n                    <PopoverMemberPreview\r\n                      toggleMemberCheck={() => this.addUserToBoard(member)}\r\n                      member={member}\r\n                      key={idx}\r\n                      selectedMembersIds={\r\n                        this.boardUsers?.map((member) => member._id) || []\r\n                      }\r\n                      members={users}\r\n                    />\r\n                  ))\r\n              ) : (\r\n                <p>No members available</p>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    users: state.userModule.users,\r\n    popover: state.appModule.popover,\r\n    board: state.boardModule.board,\r\n    loggedinUser: state.userModule.loggedinUser,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n};\r\n\r\nexport const MembersAddToBoard = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MembersAddToBoard);\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard, setFilterBy } from \"../store/board.actions\";\r\nimport { MemberList } from \"./MemberList\";\r\nimport { MembersAddToBoard } from \"../cmps/MembersAddToBoard\";\r\nimport MoreHorizOutlinedIcon from \"@mui/icons-material/MoreHorizOutlined\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\nimport BarChartIcon from '@mui/icons-material/BarChart';\r\nimport PersonAddAlt1Icon from '@mui/icons-material/PersonAddAlt1';\r\nimport { Close } from '@mui/icons-material';\r\n\r\nimport {\r\n  togglePopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n} from \"../store/app.actions\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction _BoardHeader(props) {\r\n  const { board, setFilterBy } = props;\r\n  const [isTitleEdit, setTitleEdit] = useState(false);\r\n  const [title, setTitle] = useState(board.title);\r\n  const [width, setWidth] = useState(board.title.length * 9.5);\r\n  const [isMembersPopup, setMembersPopup] = useState(false);\r\n  const spanRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!spanRef) return;\r\n    if (typeof spanRef.current?.offsetWidth === \"number\")\r\n      setWidth(spanRef.current?.offsetWidth);\r\n  }, [title]);\r\n\r\n  const onToggleStar = async () => {\r\n    const newBoard = { ...board };\r\n    newBoard.isFavorite = !newBoard.isFavorite;\r\n    try {\r\n      props.saveBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(\"error setting favorite\", err);\r\n    }\r\n  };\r\n\r\n  const handleText = (ev) => {\r\n    setTitle(ev.target.value);\r\n  };\r\n  const updateTitle = () => {\r\n    const newBoard = { ...board };\r\n    newBoard.title = title.trim();\r\n    setTitle(title.trim());\r\n    props.saveBoard(newBoard);\r\n  };\r\n  if (!board) return <h2>Loading</h2>;\r\n  return (\r\n    <header className={`main-header board-header flex align-center`}>\r\n      <div className=\"header-btn-container flex\">\r\n        {!isTitleEdit ? (\r\n          <h2 className=\"title\" onClick={() => setTitleEdit(true)}>\r\n            {title}\r\n          </h2>\r\n        ) : (\r\n          <form\r\n            onSubmit={(ev) => {\r\n              ev.preventDefault();\r\n            }}\r\n          >\r\n            <span ref={spanRef}>{title}</span>\r\n            <input\r\n              autoFocus\r\n              className={`title ${!title?.length && \"height-adjust\"}`}\r\n              onBlur={() => {\r\n                setTitleEdit(false);\r\n                updateTitle();\r\n              }}\r\n              value={title}\r\n              onChange={(ev) => {\r\n                handleText(ev);\r\n              }}\r\n              style={{\r\n                width: width + 10,\r\n                minWidth: \"40px\",\r\n              }}\r\n            ></input>\r\n          </form>\r\n        )}\r\n        <div className=\"header-btn-container flex\">\r\n          <button className=\"header-btn star\">\r\n            {board.isFavorite ? (\r\n              <StarBorderIcon\r\n                className=\"icon star gold\"\r\n                onClick={onToggleStar}\r\n              />\r\n            ) : (\r\n              <StarBorderIcon className=\"icon star\" onClick={onToggleStar} />\r\n            )}\r\n          </button>\r\n          {board?.members && (\r\n            <MemberList members={board.members} isInBoardList={true} />\r\n          )}\r\n        </div>\r\n        <button\r\n          className=\"header-btn\"\r\n          onClick={() => setMembersPopup(!isMembersPopup)}\r\n        ><PersonAddAlt1Icon className=\"icon\"/>\r\n        </button>\r\n        {isMembersPopup && (\r\n          <MembersAddToBoard setMembersPopup={setMembersPopup} />\r\n        )}\r\n      </div>\r\n      <div className=\"header-btn-container flex \">\r\n        <Link to={`/board/${board._id}/dashboard`} className=\"clean-link\">\r\n          <button className=\"header-btn\"><BarChartIcon className=\"icon\" /> <span className=\"btn-txt\">Dashboard</span></button>\r\n        </Link>\r\n        {(props.filterBy.search || props.filterBy.labels.length > 0 || props.filterBy.members.length > 0) && <div className=\"flex results\">\r\n          <button\r\n            className=\"header-btn btn-results\"\r\n            onClick={(event) => {\r\n              props.setPosition({\r\n                pos: { pageX: event.pageX, pageY: event.pageY },\r\n                type: \"BOARD_FILTER_CARDS\",\r\n              });\r\n              props.setPopoverMenu(true);\r\n              props.togglePopover(false);\r\n            }}\r\n          >\r\n            Change Filter\r\n          </button>\r\n          <span className=\"flex\" style={{ alignItems: 'center', backgroundColor: \"#61bd4f\" }}>\r\n            <Close className=\"icon clean-btn\"\r\n              onClick={(event) => { event.stopPropagation(); setFilterBy({ labels: [], members: [], search: '' }) }}\r\n            />\r\n          </span>\r\n\r\n        </div>\r\n        }\r\n        <button\r\n          className=\"header-btn last-in-row\"\r\n          onClick={(event) => {\r\n            props.setPosition({\r\n              pos: { pageX: event.pageX, pageY: event.pageY },\r\n              type: \"BOARD_SHOW_MENU\",\r\n            });\r\n            props.setPopoverMenu(true);\r\n            props.togglePopover(false);\r\n          }}\r\n        >\r\n          <MoreHorizOutlinedIcon className=\"icon menu\" /> <span className=\"btn-txt\">Show Menu</span>\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  togglePopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n  setFilterBy\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    filterBy: state.boardModule.filterBy,\r\n  };\r\n}\r\nexport const BoardHeader = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_BoardHeader);\r\n","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { addGroup } from \"../../store/board.actions\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Close } from \"@mui/icons-material\";\r\n\r\nfunction _AddNewGroup(props) {\r\n  const boardId = props.match.params.boardId;\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [btnText, setBtnText] = useState(\"Add list\");\r\n  const toggleIsClicked = () => {\r\n    if (isClicked) setTitle(\"\");\r\n    setIsClicked(!isClicked);\r\n  };\r\n\r\n  const addGroup = async () => {\r\n    try {\r\n      if(!title.trim()) return;\r\n      setBtnText(<Loader type=\"Grid\" color={\"white\"} height={14} width={14} />);\r\n      await props.addGroup(boardId, title.trim());\r\n      setBtnText(\"Add list\");\r\n      setTitle(\"\");\r\n      toggleIsClicked();\r\n    } catch (err) {\r\n      setBtnText(\"Add list\");\r\n    }\r\n  };\r\n  // if(isClicked) {\r\n  return (\r\n    <div className=\"add-group-wrapper\">\r\n      {!isClicked ? (\r\n        <article\r\n          className=\"group-details add-new\"\r\n          onClick={() => {\r\n            toggleIsClicked();\r\n          }}\r\n        >\r\n          <div className=\"flex align-center\">\r\n            <AddIcon className=\"icon\" />\r\n            Add a list\r\n          </div>\r\n        </article>\r\n      ) : (\r\n        <form\r\n          onSubmit={(ev) => {\r\n            ev.preventDefault();\r\n          }}\r\n        >\r\n          <div className=\"add-group-active group-details flex column scale-up-ver-top\">\r\n            <input\r\n              value={title}\r\n              placeholder=\"Enter list title...\"\r\n              onChange={(ev) => setTitle(ev.target.value)}\r\n              className=\"group-preview\"\r\n              autoFocus\r\n              // onBlur={toggleIsClicked}\r\n            />\r\n\r\n            <div className={`group-btns flex align-center`}>\r\n              <button\r\n                onClick={addGroup}\r\n                className=\"group-btn save-group-title-btn\"\r\n              >\r\n                {btnText}\r\n              </button>\r\n              <button\r\n                className=\"group-btn close-group-title-btn\"\r\n                onClick={toggleIsClicked}\r\n              >\r\n                <Close />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  addGroup,\r\n};\r\nexport const AddNewGroup = withRouter(\r\n  connect(null, mapDispatchToProps)(_AddNewGroup)\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { toggleExpandLabels } from \"../../store/board.actions\";\r\n\r\nfunction _TaskLabels(props) {\r\n  const { labelIds, boardLabels, areLabelsExpanded, toggleExpandLabels } =\r\n    props\r\n  return (\r\n      <div className=\"task-labels-container flex\">\r\n        {labelIds &&\r\n          labelIds.map((labelId, idx) => {\r\n            const label = boardLabels.find((label) => label.id === labelId);\r\n            if (label)\r\n              return (\r\n                <div\r\n                  className={`label flex justify-center ${\r\n                    areLabelsExpanded ? \"expanded\" : \"\"\r\n                  }`}\r\n                  style={{ background: label.color }}\r\n                  key={idx}\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    toggleExpandLabels();\r\n                  }}\r\n                >\r\n                  <span>{label.title}</span>\r\n                </div>\r\n              );\r\n          })}\r\n      </div>\r\n  );\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    areLabelsExpanded: state.boardModule.areLabelsExpanded,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  toggleExpandLabels,\r\n};\r\nexport const TaskLabels = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskLabels);\r\n","import React from \"react\";\r\n\r\nexport const TaskDetailsPreview = (props) => {\r\n  if (props.txt === \"0/0\") return <></>;\r\n  return (\r\n    <span\r\n      className={` flex align-center ${\r\n        props.isDone ? \"checklist done checklist\" : \"\"\r\n      }`}\r\n    >\r\n      {props.icon}\r\n      {props.txt && <p>{props.txt}</p>}\r\n    </span>\r\n  );\r\n};\r\n","import React, { useState ,useEffect} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../../store/board.actions\";\r\n\r\nimport AccessTimeOutlinedIcon from \"@mui/icons-material/AccessTimeOutlined\";\r\nimport CheckBoxOutlineBlankOutlinedIcon from \"@mui/icons-material/CheckBoxOutlineBlankOutlined\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\n\r\nconst _TaskDatePreview = (props) => {\r\n\r\n  const [isMouseOver, setMouseOver] = useState(false);\r\n  const [isDone, setIsDone] = useState(props.isDone);\r\n\r\n  const toggleIsDone = async (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    setIsDone(!isDone)\r\n    const newBoard = { ...props.board };\r\n    const groupIdx = newBoard.groups.findIndex((group)=>props.groupId === group.id);\r\n    const taskIdx = newBoard.groups[groupIdx].tasks.findIndex((task)=>props.taskId === task.id);\r\n    newBoard.groups[groupIdx].tasks[taskIdx].isDone = !props.isDone\r\n    try {\r\n      await props.saveBoard(newBoard)\r\n    }\r\n    catch(err){\r\n      console.log('cant change task status',err)\r\n      setIsDone(!isDone)\r\n\r\n    }\r\n  };\r\n  useEffect(()=>{\r\n    if(isDone !== props.isDone) {\r\n      setIsDone(props.isDone)\r\n    }\r\n  },[props.isDone,isDone])\r\n  return (\r\n    <span\r\n      className={`due-date ${\r\n        !isDone && props.dueDate < Date.now() ? \"overdue\" : \"\"\r\n      }${isDone ? \"done\" : \"\"} `}\r\n      onMouseEnter={() => setMouseOver(props.noHover ? false : true)}\r\n      onMouseLeave={() => setMouseOver(false)}\r\n      onClick={toggleIsDone}\r\n    >\r\n      {!isDone && (\r\n        <>\r\n          {!isMouseOver ? (\r\n            <AccessTimeOutlinedIcon className=\"icon\" />\r\n          ) : (\r\n            <CheckBoxOutlineBlankOutlinedIcon className=\"icon\" />\r\n          )}\r\n        </>\r\n      )}\r\n      {isDone && (\r\n        <>\r\n          {!isMouseOver ? (\r\n            <CheckBoxOutlinedIcon className=\"icon\" />\r\n          ) : (\r\n            <CheckBoxOutlineBlankOutlinedIcon className=\"icon\" />\r\n          )}\r\n        </>\r\n      )}\r\n      <p>\r\n        {new Date(props.dueDate).toLocaleDateString(undefined, {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        })}\r\n      </p>\r\n    </span>\r\n  );\r\n};\r\nconst mapDispatchToProps = {\r\n  saveBoard\r\n}\r\nfunction mapStateToProps({ boardModule }) {\r\n  return {\r\n    board: boardModule.board,\r\n  };\r\n}\r\nexport const TaskDatePreview = connect(mapStateToProps,mapDispatchToProps)(_TaskDatePreview);\r\n","import { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateTask, addActivity } from \"../../store/board.actions\";\r\nimport {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n} from \"../../store/app.actions\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ArchiveIcon from \"@mui/icons-material/Archive\";\r\nimport PictureInPictureIcon from \"@mui/icons-material/PictureInPicture\";\r\nimport LabelIcon from \"@material-ui/icons/LocalOfferOutlined\";\r\nimport PersonOutlineIcon from \"@mui/icons-material/PersonOutline\";\r\nimport CoverIcon from \"@material-ui/icons/VideoLabel\";\r\nimport CopyIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\r\nimport ScheduleIcon from \"@mui/icons-material/Schedule\";\r\n\r\nclass _TaskActions extends Component {\r\n  state = { selectedAction: \"\" };\r\n\r\n  componentWillUnmount = () => {\r\n    if (this.props.isPopoverOpen) this.props.togglePopover();\r\n    this.setState({ selectedAction: \"\" });\r\n  };\r\n\r\n  setActiveAction = (ev) => {\r\n    ev.stopPropagation();\r\n    this.setState({ selectedAction: ev.target.parentElement.dataset.type });\r\n  };\r\n\r\n  sendToArchive = async () => {\r\n    const newTask = { ...this.props.task };\r\n    newTask.isArchive = true;\r\n    await this.props.addActivity(\r\n      this.props.board,\r\n      this.props.task,\r\n      \"add-to-archive\",\r\n      newTask.title\r\n    );\r\n    try {\r\n      await this.props.updateTask(\r\n        this.props.boardId,\r\n        this.props.groupId,\r\n        newTask\r\n      );\r\n      this.props.toggleMenu();\r\n    } catch (err) {\r\n      console.log(\"error when sending to archive\", err);\r\n    }\r\n  };\r\n\r\n  popoverDispatch = (ev, type) => {\r\n    this.props.task.style = this.props.task.style\r\n      ? this.props.task.style\r\n      : (this.props.task.style = {});\r\n    this.props.setCurrTaskDetails(this.props.task);\r\n    this.props.setPosition({\r\n      pos: { pageX: ev.pageX, pageY: ev.pageY },\r\n      type,\r\n    });\r\n    this.props.togglePopover();\r\n  };\r\n\r\n  render() {\r\n    const { menuPos, toggleMenu, taskUrl } = this.props;\r\n\r\n    return (\r\n      <div className=\"task-actions flex column slide-in-left\" style={menuPos}>\r\n        <Link to={taskUrl} onClick={toggleMenu} className=\"clean-link\">\r\n          <button>\r\n            <PictureInPictureIcon className=\"action-icon\" />\r\n            <p>Open card</p>\r\n          </button>\r\n        </Link>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"labels\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"labels\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"LABELS\");\r\n          }}\r\n        >\r\n          <LabelIcon className=\"action-icon\" />\r\n          <p>Edit labels</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"members\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"members\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"MEMBERS\");\r\n          }}\r\n        >\r\n          <PersonOutlineIcon className=\"action-icon\" />\r\n          <p>Change members</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"cover\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"cover\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"COVER\");\r\n          }}\r\n        >\r\n          <CoverIcon className=\"action-icon\" />\r\n          <p>Change cover</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"move\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"move\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"MOVE\");\r\n          }}\r\n        >\r\n          <ArrowForwardIcon className=\"action-icon\" />\r\n          <p>Move</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"copy\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"copy\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"COPY\");\r\n          }}\r\n        >\r\n          <CopyIcon className=\"action-icon\" />\r\n          <p>Copy</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"date\" && this.props.isPopoverOpen\r\n              ? \"\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"date\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"DATE\");\r\n          }}\r\n        >\r\n          <ScheduleIcon className=\"action-icon\" />\r\n          <p>Edit date</p>\r\n        </button>\r\n        <button onClick={this.sendToArchive}>\r\n          <ArchiveIcon className=\"action-icon\" />\r\n          <p>Archive</p>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  updateTask,\r\n  setPosition,\r\n  setCurrTaskDetails,\r\n  togglePopover,\r\n  addActivity,\r\n};\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isPopoverOpen: state.appModule.popover.isOpen,\r\n    board: state.boardModule.board,\r\n  };\r\n};\r\nexport const TaskActions = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskActions);\r\n","import { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateTask, addActivity } from \"../../store/board.actions\";\r\nimport { TaskLabels } from \"./TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskDetailsPreview\";\r\nimport { TaskDatePreview } from \"./TaskDatePreview\";\r\nimport { MemberList } from \"../MemberList\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\nimport { TaskActions } from \"./TaskActions\";\r\n\r\nexport function _TaskPreviewEdit({\r\n  task,\r\n  groupId,\r\n  boardId,\r\n  boardLabels,\r\n  getChecklistData,\r\n  menuPos,\r\n  toggleMenu,\r\n  updateTask,\r\n  taskUrl,\r\n  addActivity,\r\n  board,\r\n}) {\r\n  const {\r\n    style,\r\n    labelIds,\r\n    dueDate,\r\n    title,\r\n    description,\r\n    comments,\r\n    attachments,\r\n    checklists,\r\n    todos,\r\n    doneTodos,\r\n  } = task;\r\n\r\n  const [editTitle, setEditTitle] = useState(title);\r\n\r\n  const updateTaskName = async () => {\r\n    const newTask = { ...task };\r\n    if (newTask.title === editTitle) return;\r\n    newTask.title = editTitle;\r\n\r\n    try {\r\n      await updateTask(boardId, groupId, newTask);\r\n      toggleMenu();\r\n    } catch (err) {\r\n      console.log(\"error when setting title\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <article\r\n        className=\"task-preview-container edit\"\r\n        style={{ zIndex: 100, borderRadius: 3 }}\r\n      >\r\n        {style?.bgUrl && (\r\n          <img\r\n            className=\"task-cover-img\"\r\n            src={style.bgUrl}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"3px\",\r\n              objectFit: \"contain\",\r\n              maxHeight: 240,\r\n            }}\r\n            alt=\"\"\r\n          />\r\n        )}\r\n\r\n        {style?.bgColor && !style?.bgUrl && (\r\n          <div\r\n            className=\"task-cover\"\r\n            style={{ background: task.style.bgColor }}\r\n          ></div>\r\n        )}\r\n\r\n        <div\r\n          className=\"task-preview clean-link \"\r\n          style={\r\n            style?.bgUrl && {\r\n              position: \"relative\",\r\n              top: \"-8px\",\r\n              marginBottom: \"-8px\",\r\n              borderRadius: \"0 0 3px 3px\",\r\n            }\r\n          }\r\n        >\r\n          {labelIds?.length > 0 && (\r\n            <TaskLabels labelIds={labelIds} boardLabels={boardLabels} />\r\n          )}\r\n          <textarea\r\n            className=\"task-title\"\r\n            value={editTitle}\r\n            autoFocus\r\n            onChange={(ev) => setEditTitle(ev.target.value)}\r\n          />\r\n          <div className=\"task-preview-icons flex align-center\">\r\n            {dueDate && (\r\n              <TaskDatePreview\r\n                dueDate={dueDate}\r\n                isDone={task.isDone}\r\n                taskId={task.id}\r\n                groupId={groupId}\r\n              />\r\n            )}\r\n            {description?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<SubjectOutlinedIcon className=\"icon\" />}\r\n              />\r\n            )}\r\n            {comments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<ChatBubbleOutlineRoundedIcon className=\"icon msg\" />}\r\n                txt={comments.length}\r\n              />\r\n            )}\r\n            {attachments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<AttachFileIcon className=\"icon attach\" />}\r\n                txt={attachments.length}\r\n              />\r\n            )}\r\n            {checklists?.length > 0 && todos !== 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                txt={getChecklistData()}\r\n                isDone={getChecklistData(true)}\r\n              />\r\n            )}\r\n            {task?.members && (\r\n              <MemberList\r\n                members={task.members}\r\n                isInPreview={true}\r\n                isEditMode={true}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </article>\r\n      <button\r\n        className=\"save-btn\"\r\n        onClick={() => {\r\n          updateTaskName();\r\n        }}\r\n      >\r\n        Save\r\n      </button>\r\n      <TaskActions\r\n        toggleMenu={toggleMenu}\r\n        menuPos={menuPos}\r\n        groupId={groupId}\r\n        boardId={boardId}\r\n        task={task}\r\n        taskUrl={taskUrl}\r\n      />\r\n    </>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  updateTask,\r\n  addActivity,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n  };\r\n}\r\nexport const TaskPreviewEdit = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreviewEdit);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { setPopoverMenu } from \"../store/app.actions\";\r\nimport { TaskPreviewEdit } from \"./TaskPreview/TaskPreviewEdit\";\r\nimport { TaskLabels } from \"./TaskPreview/TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskPreview/TaskDetailsPreview\";\r\nimport { toggleDragDisable } from \"../store/app.actions\";\r\nimport { TaskDatePreview } from \"./TaskPreview/TaskDatePreview\";\r\nimport { MemberList } from \"../cmps/MemberList\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\n\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport ModeEditOutlinedIcon from \"@mui/icons-material/ModeEditOutlined\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\n\r\nfunction _TaskPreview(props) {\r\n  const {\r\n    task,\r\n    taskUrl,\r\n    boardLabels,\r\n    groupId,\r\n    boardId,\r\n    index,\r\n    isDragDisabled,\r\n    toggleDragDisable,\r\n  } = props;\r\n  const {\r\n    labelIds,\r\n    title,\r\n    dueDate,\r\n    comments,\r\n    checklists,\r\n    description,\r\n    attachments,\r\n    style,\r\n    media,\r\n  } = task;\r\n\r\n  const [isMenuShown, toggleMenuShown] = useState(false);\r\n  const [menuPos, setMenuPos] = useState();\r\n\r\n  const calcPos = (ev) => {\r\n    if (!ev) return;\r\n    let { top, right, height } =\r\n      ev.target.parentElement.parentElement.getBoundingClientRect();\r\n    console.log(top, right, height, window.innerHeight);\r\n    if (top > window.innerHeight - 318) {\r\n      setMenuPos({\r\n        position: \"absolute\",\r\n        left: `${right}px`,\r\n        bottom: 50,\r\n      });\r\n    } else {\r\n      setMenuPos({\r\n        position: \"fixed\",\r\n        left: `${right}px`,\r\n        top,\r\n      });\r\n    }\r\n  };\r\n  const toggleMenu = (ev) => {\r\n    calcPos(ev);\r\n    toggleMenuShown(!isMenuShown);\r\n    toggleDragDisable();\r\n    props.setPopoverMenu(false);\r\n  };\r\n\r\n  let todos;\r\n  let doneTodos;\r\n\r\n  const getChecklistData = (isDone) => {\r\n    todos = 0;\r\n    doneTodos = 0;\r\n    checklists.forEach((checklist) => {\r\n      todos += checklist.todos.length;\r\n      checklist.todos.forEach((todo) => {\r\n        if (todo.isDone) doneTodos++;\r\n      });\r\n    });\r\n    if (isDone) return todos === doneTodos;\r\n    return `${doneTodos}/${todos}`;\r\n  };\r\n  // full cover image\r\n  if (style?.bgUrl && style?.coverMode === \"full\" && !isMenuShown) {\r\n    return (\r\n      <Draggable\r\n        draggableId={task.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided) => (\r\n          <article\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n          >\r\n            <Link to={taskUrl} className=\"clean-link\">\r\n              <div\r\n                className={`task-preview-container full-cover img`}\r\n                src={style.bgUrl}\r\n              >\r\n                <img className=\"\" src={style.bgUrl} alt=\"\" />\r\n                <div className=\"img-overlay\" />\r\n                <p>{task.title}</p>\r\n                <div\r\n                  className=\"edit-icon\"\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    toggleMenu(ev);\r\n                  }}\r\n                >\r\n                  <ModeEditOutlinedIcon className=\"icon\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </article>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  }\r\n\r\n  // full color cover\r\n  if (style && style?.coverMode === \"full\" && !isMenuShown)\r\n    return (\r\n      <Draggable\r\n        draggableId={task.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided) => (\r\n          <article\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n          >\r\n            <div\r\n              className=\"task-preview-container full-cover\"\r\n              style={{ background: style.bgColor }}\r\n            >\r\n              <Link to={taskUrl} className=\"clean-link\">\r\n                <div className=\"task-preview\">\r\n                  <p>{task.title}</p>\r\n                </div>\r\n              </Link>\r\n              <div className=\"edit-icon\" onClick={toggleMenu}>\r\n                <ModeEditOutlinedIcon className=\"icon\" />\r\n              </div>\r\n            </div>\r\n          </article>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  // normal\r\n  if (!isMenuShown)\r\n    return (\r\n      <>\r\n        <Draggable\r\n          draggableId={task.id}\r\n          index={index}\r\n          isDragDisabled={isDragDisabled}\r\n        >\r\n          {(provided) => (\r\n            <div\r\n              ref={provided.innerRef}\r\n              {...provided.draggableProps}\r\n              {...provided.dragHandleProps}\r\n            >\r\n              <article\r\n                className=\"task-preview-container\"\r\n                style={{ boxShadow: \"none\", zIndex: isMenuShown ? 55 : 0 }}\r\n              >\r\n                {style?.bgUrl && (\r\n                  <Link to={taskUrl} className=\"clean-link\">\r\n                    <img\r\n                      className=\"task-cover-img\"\r\n                      src={style.bgUrl}\r\n                      style={{\r\n                        backgroundColor: \"white\",\r\n                        borderRadius: \"3px\",\r\n                        objectFit: \"cover\",\r\n                        maxHeight: 240,\r\n                      }}\r\n                      alt=\"\"\r\n                    />\r\n                  </Link>\r\n                )}\r\n\r\n                <Link to={taskUrl} className=\"clean-link\">\r\n                  {style?.bgColor && !style?.bgUrl && (\r\n                    <div\r\n                      className=\"task-cover\"\r\n                      style={{ background: task.style.bgColor }}\r\n                    ></div>\r\n                  )}\r\n                  <div\r\n                    className=\"task-preview clean-link \"\r\n                    style={\r\n                      style?.bgUrl && {\r\n                        position: \"relative\",\r\n                        top: \"-8px\",\r\n                        marginBottom: \"-8px\",\r\n                        borderRadius: \"0 0 3px 3px\",\r\n                      }\r\n                    }\r\n                  >\r\n                    {labelIds?.length > 0 && (\r\n                      <TaskLabels\r\n                        labelIds={labelIds}\r\n                        boardLabels={boardLabels}\r\n                      />\r\n                    )}\r\n                    {media?.videoUrl && (\r\n                      <div\r\n                        className=\"video flex\"\r\n                        onDrag={(ev) => ev.stopPropagation()}\r\n                      >\r\n                        <video width={\"100%\"} controls>\r\n                          <source src={task.media.videoUrl} type=\"video/mp4\" />\r\n                        </video>\r\n                      </div>\r\n                    )}\r\n                    {media?.audioUrl && (\r\n                      <div className=\"audio\">\r\n                        <audio controls src={task.media.audioUrl} />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"task-title\">\r\n                      <p>{title}</p>\r\n                    </div>\r\n                    <div className=\"task-preview-icons flex align-center\">\r\n                      {dueDate && (\r\n                        <TaskDatePreview\r\n                          dueDate={dueDate}\r\n                          isDone={task.isDone}\r\n                          taskId={task.id}\r\n                          groupId={groupId}\r\n                        />\r\n                      )}\r\n                      {description?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<SubjectOutlinedIcon className=\"icon desc\" />}\r\n                        />\r\n                      )}\r\n                      {comments?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={\r\n                            <ChatBubbleOutlineRoundedIcon className=\"icon msg\" />\r\n                          }\r\n                          txt={comments.length}\r\n                        />\r\n                      )}\r\n                      {attachments?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<AttachFileIcon className=\"icon attach\" />}\r\n                          txt={attachments.length}\r\n                        />\r\n                      )}\r\n                      {checklists?.length > 0 && todos !== 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                          txt={getChecklistData()}\r\n                          isDone={\r\n                            todos === doneTodos && todos !== 0 ? true : false\r\n                          }\r\n                        />\r\n                      )}\r\n                      {task?.members && (\r\n                        <MemberList\r\n                          members={task.members}\r\n                          isInPreview={true}\r\n                          task={task}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div\r\n                    className=\"edit-icon\"\r\n                    onClick={(ev) => {\r\n                      ev.preventDefault();\r\n                      ev.stopPropagation();\r\n                      toggleMenu(ev);\r\n                    }}\r\n                  >\r\n                    <ModeEditOutlinedIcon className=\"icon\" />\r\n                  </div>\r\n                </Link>\r\n              </article>\r\n            </div>\r\n          )}\r\n        </Draggable>\r\n      </>\r\n    );\r\n  // edit mode\r\n  else\r\n    return (\r\n      <>\r\n        <div\r\n          className={`overlay ${isMenuShown ? \"show\" : \"\"}`}\r\n          onClick={toggleMenu}\r\n          style={{ zIndx: 2 }}\r\n        ></div>\r\n        <TaskPreviewEdit\r\n          task={task}\r\n          getChecklistData={getChecklistData}\r\n          groupId={groupId}\r\n          boardId={boardId}\r\n          boardLabels={boardLabels}\r\n          menuPos={menuPos}\r\n          toggleMenu={toggleMenu}\r\n          taskUrl={taskUrl}\r\n        />\r\n      </>\r\n    );\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isDragDisabled: state.appModule.isDragDisabled,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  toggleDragDisable,\r\n  setPopoverMenu,\r\n};\r\n\r\nexport const TaskPreview = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreview);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { TaskPreview } from \"./TaskPreview\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\n\r\nexport function _TaskPreviewList(props) {\r\n  const { groupId, boardId, boardLabels, tasks, filterBy } = props;\r\n\r\n  let filteredTasks = JSON.parse(JSON.stringify(tasks))\r\n  if (filteredTasks.length) {\r\n    filteredTasks.forEach((task, idx) => task.orgIdx = idx)\r\n    filteredTasks = filteredTasks.filter((task) => task?.isArchive !== true);\r\n  }\r\n\r\n  if (filterBy.search) {\r\n    const search = filterBy.search.toLowerCase()\r\n    filteredTasks = filteredTasks.filter(task => task.title.toLowerCase().includes(search))\r\n  }\r\n\r\n  if (filterBy.labels.length > 0) {\r\n    filteredTasks = filteredTasks.filter(task => task.labelIds.some(labelId => filterBy.labels.every(label => task.labelIds.includes(label))))\r\n  }\r\n\r\n  if (filterBy.members.length > 0) {\r\n    filteredTasks = filteredTasks.filter(task => task.members.some(member => filterBy.members.every(member => {\r\n      const taskMembersIds = task.members.map(member => member._id)\r\n      return taskMembersIds.includes(member)\r\n    })))\r\n  }\r\n\r\n  return (\r\n    <Droppable droppableId={groupId}>\r\n      {(provided) => (\r\n        <div {...provided.droppableProps} ref={provided.innerRef} className=\"task-list\">\r\n          {filteredTasks?.map((task) => (\r\n            <TaskPreview\r\n              task={task}\r\n              key={task.id}\r\n              id={task.id}\r\n              index={task.orgIdx}\r\n              taskUrl={`/board/${boardId}/${groupId}/${task.id}`}\r\n              boardLabels={boardLabels}\r\n              groupId={groupId}\r\n              boardId={boardId}\r\n            />\r\n          ))}\r\n          {provided.placeholder}\r\n          {!filteredTasks.length && <div style={{ visibilty: 'hidden', opacity: '0', height: '1px', width: '1px', color: 'transparent' }}></div>}\r\n        </div>\r\n      )}\r\n    </Droppable>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    filterBy: state.boardModule.filterBy,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n\r\n};\r\n\r\nexport const TaskPreviewList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreviewList);\r\n","export const cloudinaryService = {\n    uploadFile\n}\n\nfunction uploadFile(ev, type = 'image', blob = null) {\n    const CLOUD_NAME = 'dusakec3z'\n    const PRESET_NAME = 'pjprwzkr'\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/${type}/upload`\n\n    const formData = new FormData();\n    // console.log('target', ev.target)\n    (type === 'image') ? formData.append('file', ev.target.files[0]) : formData.append('file', blob)\n    // console.log('ev.target.files[0]):', ev.target.files[0])\n    formData.append('upload_preset', PRESET_NAME);\n    // console.log('formData:', formData)\n\n    return fetch(UPLOAD_URL, {\n        method: 'POST',\n        body: formData\n    })\n        .then(res => res.json())\n        .then(res => {\n            return res\n        })\n        .catch(err => console.error(err))\n}\n\n// const CLOUD_NAME = 'dswmustlv'\n// const PRESET_NAME = 'f7cyi5ho'\n","\nimport React from 'react';\nimport { connect } from 'react-redux'\nimport VideoRecorder from \"react-video-recorder\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { ReactMic } from 'react-mic';\nimport { cloudinaryService } from '../services/cloudinary-service'\nimport { addTask } from '../store/board.actions';\nimport StopIcon from \"@material-ui/icons/Stop\";\nimport Fab from \"@material-ui/core/Fab\";\nimport styled from \"styled-components\";\nimport MicIcon from \"@material-ui/icons/Mic\";\n\n\n\nexport class _MediaRecord extends React.Component {\n    state = {\n        record: false,\n        isOverlay: true\n    };\n\n    componentDidMount() {\n        this.setOverlay(true)\n    }\n\n    compoentWillUnmount() {\n        this.stopRecording()\n    }\n\n    startRecording = () => {\n        this.setState({\n            record: true\n        });\n    };\n\n    stopRecording = () => {\n        this.setState({\n            record: false\n        });\n    };\n\n    onStop = async (blob, type) => {\n        this.props.setMediaType('')\n        const res = await cloudinaryService.uploadFile(null, 'video', type === 'video' ? blob : blob.blob);\n        const url = res.secure_url\n        if (type === 'video') this.props.addTask('Media Video', this.props.boardId, this.props.groupId, null, url)\n        else this.props.addTask('Media Audio', this.props.boardId, this.props.groupId, url, null)\n    }\n\n    setOverlay = (isOverlay) => {\n        this.setState({ isOverlay })\n    }\n\n    render() {\n        const StyledFab = styled(Fab)`\n        position: relative;\n        background-color: ${!this.state.record ? \"#272727\" : \"#8f3934\"};\n        color: white;\n        opacity: 1;\n        margin: 12px;\n        z-index: 3;\n        transition: all 0.2s;\n        :hover {\n          background-color: ${!this.state.record ? \"#272727\" : \"#8f3934\"};\n          opacity: 0.9;\n        }\n      `;\n\n        const { setAudioPath } = this.props;\n        return (\n            <>\n                {\n                    <div className=\"media\" style={{ width: \"100%\", maxWidth: 400, height: 400, padding: '0 20px' }}>\n                        <div className=\"media-container\">\n                            {this.props.type === 'video' && <VideoRecorder\n                                className=\"video-recorder\"\n                                isFlipped={false}\n                                countdownTime={0}\n                                mimeType=\"video/webm;codecs=vp8,opus\"\n                                constraints={{\n                                    audio: true,\n                                    video: {\n                                        resizeMode: \"crop-and-scale\",\n                                        width: { exact: 480, ideal: 480 },\n                                        height: { exact: 640, ideal: 640 },\n                                        aspectRatio: { exact: 0.7500000001, ideal: 0.7500000001 },\n                                    }\n                                }}\n                                onRecordingComplete={(blob) => this.onStop(blob, 'video')}\n                            />}\n                        </div>\n                    </div>\n\n                }\n                {\n                    this.props.type === 'audio' && <div className=\"media\">\n                        <div className=\"media-container\">\n\n                            <ReactMic\n                                record={this.state.record}\n                                className=\"sound-wave\"\n                                onStop={(blob) => this.onStop(blob, 'audio')}\n                                strokeColor=\"white\"\n                                backgroundColor=\"black\"\n                                setAudioPath={setAudioPath}\n                                height={240}\n                                width={370}\n                            />\n                            <Grid item container justify=\"center\" xs={12}>\n                                {!this.state.record && <StyledFab\n                                    onClick={this.startRecording}\n                                    color=\"secondary\" aria-label=\"record\">\n                                    <MicIcon />\n                                </StyledFab>}\n                                {this.state.record && <StyledFab color=\"secondary\" aria-label=\"record\"\n                                    onClick={this.stopRecording}>\n                                    <StopIcon />\n                                </StyledFab>}\n                            </Grid>\n                        </div>\n\n                    </div>\n                }\n                <div className={`overlay ${this.state.isOverlay ? 'show' : ''} `} onClick={() => { this.props.setMediaType('') }} style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}></div>\n            </>\n        );\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    addTask\n};\n\nexport const MediaRecord = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_MediaRecord);\n","import React, { useState } from \"react\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { addTask } from \"../../store/board.actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport VideoCallIcon from \"@mui/icons-material/VideoCall\";\r\nimport MicNoneIcon from \"@mui/icons-material/MicNone\";\r\nimport { MediaRecord } from \"../MediaRecord\";\r\n\r\nexport function _GroupFooter(props) {\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [taskTitle, setTaskTitle] = useState(\"\");\r\n  const [btnText, setBtnText] = useState(\"Add task\");\r\n  const [mediaType, setType] = useState(\"\");\r\n\r\n  const toggleIsClicked = () => {\r\n    setIsClicked(!isClicked);\r\n  };\r\n\r\n  const onAddTask = async () => {\r\n    try {\r\n      if (!taskTitle.trim()) return;\r\n      setBtnText(<Loader type=\"Grid\" color={\"white\"} height={14} width={14} />);\r\n      await props.addTask(\r\n        taskTitle.trim(),\r\n        props.ids.boardId,\r\n        props.ids.groupId\r\n      );\r\n      setTaskTitle(\"\");\r\n      setBtnText(\"Add task\");\r\n      props.scrollToBottom();\r\n    } catch (err) {\r\n      console.log(\"error when saving task\", err);\r\n      setBtnText(\"Add task\");\r\n    }\r\n  };\r\n  const setMediaType = (type) => {\r\n    setType(type);\r\n    type ? props.toggleDragDisable(true) : props.toggleDragDisable(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grp-add-task\">\r\n        {!isClicked ? (\r\n          <div className=\"add-task-inactive flex space-between\">\r\n            <div\r\n              className=\"add-btn flex align-center\"\r\n              onClick={toggleIsClicked}\r\n            >\r\n              <AddIcon className=\"icon\" />\r\n              <p>Add a task</p>\r\n            </div>\r\n            <div className=\"media-btns flex align-center\">\r\n              <VideoCallIcon\r\n                className=\"media-icon\"\r\n                onClick={() => setMediaType(\"video\")}\r\n              />\r\n              <MicNoneIcon\r\n                className=\"media-icon\"\r\n                onClick={() => setMediaType(\"audio\")}\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"add-task-active flex column\">\r\n            <textarea\r\n              value={taskTitle}\r\n              placeholder=\"Enter a title for this task...\"\r\n              onChange={(ev) => setTaskTitle(ev.target.value)}\r\n              className=\"task-preview\"\r\n              onClick={props.scrollToBottom}\r\n            />\r\n\r\n            <div className={`task-btns flex align-center`}>\r\n              <button\r\n                className=\"task-btn save-task-title-btn\"\r\n                onClick={onAddTask}\r\n              >\r\n                {btnText}\r\n              </button>\r\n              <button\r\n                className=\"task-btn close-task-title-btn\"\r\n                onClick={toggleIsClicked}\r\n              >\r\n                <Close />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {mediaType && (\r\n        <MediaRecord\r\n          boardId={props.ids.boardId}\r\n          groupId={props.ids.groupId}\r\n          type={mediaType}\r\n          setMediaType={setMediaType}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addTask,\r\n};\r\n\r\nexport const GroupFooter = connect(null, mapDispatchToProps)(_GroupFooter);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../../store/board.actions\";\r\n\r\nconst _HeaderTitle = (props) => {\r\n  const group = { ...props.group };\r\n  const [groupTitle, setTitle] = useState(group.title);\r\n  useEffect(() => {\r\n    setTitle(props.group.title)\r\n }, [props.group.title]);\r\n\r\n  const saveTitle = async () => {\r\n    const newBoard = { ...props.board };\r\n    const grpIdx = newBoard.groups.findIndex((grp) => group.id === grp.id);\r\n    newBoard.groups[grpIdx].title = groupTitle;\r\n    try {\r\n      await props.saveBoard(newBoard);\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  return (\r\n    <input\r\n      className=\"group-title flex column\"\r\n      value={groupTitle}\r\n      onChange={(ev) => setTitle(ev.target.value)}\r\n      onBlur={saveTitle}\r\n    />\r\n  );\r\n};\r\nfunction mapStateToProps({ boardModule }) {\r\n  return {\r\n    board: boardModule.board,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n};\r\nexport const HeaderTitle = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_HeaderTitle);\r\n","import React from \"react\";\r\nexport function GroupActions(props) {\r\n\r\n  return (\r\n    <div className=\"group-menu\" style={props.menuPos}>\r\n      <h3>List actions</h3>\r\n      <button\r\n        onClick={() => {\r\n          props.removeGroup(props.boardId, props.groupId);\r\n          props.toggleMenuShown(false);\r\n        }}\r\n      >\r\n         Delete list\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AddNewGroup } from \"./Group/AddNewGroup\";\r\nimport { TaskPreviewList } from \"./TaskPreviewList\";\r\nimport { GroupFooter } from \"./Group/GroupFooter\";\r\nimport { HeaderTitle } from \"./Group/HeaderTitle\";\r\nimport { removeGroup } from \"../store/board.actions\";\r\nimport { toggleDragDisable } from \"../store/app.actions\";\r\nimport MoreHorizOutlinedIcon from \"@mui/icons-material/MoreHorizOutlined\";\r\nimport { GroupActions } from \"./Group/GroupActions\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport NaturalDragAnimation from \"natural-drag-animation-rbdnd\";\r\n\r\nconst _GroupDetails = (props) => {\r\n  const {\r\n    group,\r\n    isAddNew,\r\n    boardId,\r\n    boardLabels,\r\n    index,\r\n    isDragDisabled,\r\n    toggleDragDisable,\r\n  } = props;\r\n  const elRef = useRef();\r\n  const [isMenuShown, toggleMenuShown] = useState(false);\r\n  const [menuPos, setMenuPos] = useState({});\r\n\r\n  const toggleMenu = (ev) => {\r\n    let posX = window.innerWidth - ev.pageX > 200 ? ev.pageX : ev.pageX - 200;\r\n    setMenuPos({\r\n      position: \"fixed\",\r\n      top: `${ev.pageY}px`,\r\n      left: `${posX}px`,\r\n    });\r\n    toggleMenuShown(!isMenuShown);\r\n    toggleDragDisable();\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    elRef.current.scrollTo({\r\n      top: elRef.current.scrollHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  if (isAddNew) return <AddNewGroup />;\r\n\r\n  return (\r\n    <div>\r\n      <Draggable\r\n        draggableId={group.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided, snapshot) => (\r\n          <NaturalDragAnimation\r\n            style={provided.draggableProps.style}\r\n            snapshot={snapshot}\r\n          >\r\n            {(style) => (\r\n              <article\r\n                ref={provided.innerRef}\r\n                {...provided.draggableProps}\r\n                {...provided.dragHandleProps}\r\n                // style={style}\r\n                style={{...style}}\r\n\r\n                className=\"group-details flex column\"\r\n              >\r\n                <div className=\"group-header flex space-between align-center\">\r\n                  <HeaderTitle group={group} />\r\n                  <MoreHorizOutlinedIcon\r\n                    fontSize={\"small\"}\r\n                    onClick={toggleMenu}\r\n                    className=\"dots\"\r\n                  />\r\n\r\n                  {isMenuShown && (\r\n                    <GroupActions\r\n                      menuPos={menuPos}\r\n                      removeGroup={props.removeGroup}\r\n                      toggleMenuShown={toggleMenuShown}\r\n                      boardId={boardId}\r\n                      groupId={group.id}\r\n                    />\r\n                  )}\r\n                  <div\r\n                    className={`overlay ${isMenuShown ? \"show\" : \"\"}`}\r\n                    onClick={toggleMenu}\r\n                  />\r\n                </div>\r\n                <div className={`group-main flex column `} ref={elRef}>\r\n                  <TaskPreviewList\r\n                    tasks={group.tasks}\r\n                    boardId={boardId}\r\n                    groupId={group.id}\r\n                    boardLabels={boardLabels}\r\n                    toggleDragDisable={toggleDragDisable}\r\n                  />\r\n                </div>\r\n                <div className=\"group-footer\">\r\n                  <GroupFooter\r\n                    ids={{ groupId: group.id, boardId }}\r\n                    scrollToBottom={scrollToBottom}\r\n                    toggleDragDisable={toggleDragDisable}\r\n                  />\r\n                </div>\r\n              </article>\r\n            )}\r\n          </NaturalDragAnimation>\r\n        )}\r\n      </Draggable>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  removeGroup,\r\n  toggleDragDisable,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isDragDisabled: state.appModule.isDragDisabled,\r\n  };\r\n}\r\nexport const GroupDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_GroupDetails);\r\n","import React from \"react\";\r\nimport { GroupDetails } from \"./GroupDetails\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\n\r\nexport function GroupList(props) {\r\n  const { groups, boardId, boardLabels } = props;\r\n\r\n  return (\r\n    <>\r\n      <Droppable\r\n        droppableId={\"all-groups\"}\r\n        type=\"group\"\r\n        direction={\"horizontal\"}\r\n      >\r\n        {(provided) => (\r\n          <div\r\n            className=\"group-list\"\r\n            {...provided.droppableProps}\r\n            ref={provided.innerRef}\r\n          >\r\n            {groups.map((group, idx) => (\r\n              <div key={group.id}>\r\n                <GroupDetails\r\n                  group={group}\r\n                  boardId={boardId}\r\n                  index={idx}\r\n                  id={group.id}\r\n                  boardLabels={boardLabels}\r\n                />\r\n              </div>\r\n            ))}\r\n            {provided.placeholder}\r\n            <GroupDetails isAddNew={true} />\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { BoardHeader } from \"../cmps/BoardHeader\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogin } from \"../store/user.actions\"\r\nimport { loadBoard, loadBoards, clearBoard, handleDrag, setFilterBy } from \"../store/board.actions\";\r\nimport { loadUsers } from \"../store/user.actions\";\r\nimport { GroupList } from \"../cmps/GroupList\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport { socketService } from '../services/socket.service'\r\nimport { MediaRecord } from '../cmps/MediaRecord'\r\n\r\n\r\nclass _BoardApp extends Component {\r\n  state = {\r\n    isMenuOpen: false,\r\n    currentTarget: null,\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    this.props.setFilterBy({ labels: [], members: [], search: '' })\r\n    const { boardId } = this.props.match.params\r\n    if (!this.props.user) this.props.onLogin({ username: 'guest', password: '1' })\r\n    this._loadBoard();\r\n    if (!this.props.boards.length) this.props.loadBoards()\r\n    this.props.loadUsers();\r\n    socketService.emit('join-board', boardId)\r\n    socketService.on(\"updated-board\", () => { this.props.loadBoard(boardId) })\r\n\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    this.props.clearBoard();\r\n    socketService.off(\"updated-board\")\r\n    this.props.setFilterBy({ labels: [], members: [], search: '' })\r\n\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    if (this.props.match.params?.boardId !== this.props.board?._id) {\r\n      this.props.clearBoard();\r\n      this._loadBoard();\r\n      this.props.loadUsers();\r\n\r\n    }\r\n  };\r\n\r\n  toggleMenu = (ev) => {\r\n    this.setState(prevState => ({ ...prevState, isMenuOpen: !this.state.isMenuOpen }))\r\n    this.setCurrentTarget(ev)\r\n  }\r\n\r\n  setCurrentTarget = (event) => {\r\n    this.setState(prevState => ({ ...prevState, currentTarget: event }))\r\n  }\r\n\r\n  _loadBoard = async () => {\r\n    const id = this.props.match.params.boardId;\r\n    if (!id) this.props.history.push('/workspace')\r\n    if (id) {\r\n      try {\r\n        await this.props.loadBoard(id);\r\n        if (!this.props.board)\r\n          this.props.history.push('/workspace')\r\n\r\n      } catch (err) {\r\n        console.log(\"cant load board\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  onDragEnd = (result) => {\r\n    const { destination, source, draggableId, type } = result;\r\n    if (!destination) return;\r\n    this.props.handleDrag(\r\n      { ...this.props.board },\r\n      source.droppableId,\r\n      destination.droppableId,\r\n      source.index,\r\n      destination.index,\r\n      draggableId,\r\n      type\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { board } = this.props;\r\n    if (!board) return <></>;\r\n    return (<>\r\n      <DragDropContext onDragEnd={this.onDragEnd}>\r\n        <section\r\n          className=\"board-app flex column\"\r\n          style={{\r\n            background: board.style.bgImg\r\n              ? `url(${board.style.bgImg})`\r\n              : board.style.bgClr,\r\n          }}\r\n        >\r\n          <BoardHeader board={{ ...board }} toggleMenu={this.toggleMenu} />\r\n          <GroupList\r\n            groups={[...board.groups]}\r\n            boardId={board._id}\r\n            boardLabels={[...board.labels]}\r\n          />\r\n        </section>\r\n      </DragDropContext>\r\n    </>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    boards: state.boardModule.boards,\r\n    user: state.userModule.loggedinUser\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  loadBoards,\r\n  clearBoard,\r\n  loadUsers,\r\n  handleDrag,\r\n  onLogin,\r\n  setFilterBy\r\n};\r\n\r\nexport const BoardApp = connect(mapStateToProps, mapDispatchToProps)(_BoardApp);\r\n","import React, { useState } from 'react'\nimport VideoLabel from '@mui/icons-material/VideoLabel';\n\nexport function TaskHeader({ taskTitle, setTaksDetailsTitle, taskList }) {\n    const [title, setTitle] = useState(taskTitle);\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        setTaksDetailsTitle(title);\n    }\n\n\n    return (\n        <header className=\"task-header\">\n            <div className=\"header-content\">\n                <div className=\"header-name flex\">\n                    <VideoLabel className=\"LabelSvg\" />\n                    <textarea\n                        style={{ width: '100%' }}\n                        onKeyDown={(ev) => {\n                            if (ev.key === 'Enter') {\n                                ev.preventDefault();\n                            }\n                        }}\n                        onChange={(e) => { setTitle(e.target.value) }}\n                        onBlur={(e) => { setTitle(e.target.value); handleSubmit(e) }}\n                        value={title}>\n                    </textarea>\n                </div>\n                <p className=\"list-name\">in list <span style={{ textDecoration: 'underline', fontWeight: 600 }}>{taskList}</span></p>\n            </div>\n        </header >\n    )\n}\n\n\n","import React from 'react'\nimport VideoLabel from '@mui/icons-material/VideoLabel';\nimport { connect } from 'react-redux';\nimport { setPosition, togglePopover } from '../store/app.actions';\n\n\nexport function _TaskCardCover({ setPosition, currTaskDetails, togglePopover }) {\n    const { bgColor, bgUrl } = currTaskDetails.style\n    return (\n        <div className=\"card-cover flex\" style={{ backgroundColor: bgColor ? bgColor : '' }}>\n            {bgUrl && <img src={bgUrl} style={{ backgroundColor: bgColor ? bgColor : '' }} />}\n            <button className=\"cover-btn flex\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COVER' }); togglePopover() }}><VideoLabel /> Cover</button>\n        </div >\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover\n};\n\nexport const TaskCardCover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskCardCover);\n","import React, { Component } from \"react\";\n// import SubjectIcon from '@material-ui/icons/Subject';\nimport { Close } from '@mui/icons-material';\nimport SubjectIcon from '@mui/icons-material/Subject';\n\n\n\nexport class TaskDescription extends Component {\n    state = {\n        description: '',\n        isEditMode: false\n    }\n\n    componentDidMount() {\n        const description = this.props.currTask.description ? this.props.currTask.description : ''\n        this.setState(prevState => ({ ...prevState, description }))\n    }\n\n    onSaveDescription = () => {\n        const { description } = this.state\n        const { currTask, updateTaskDetails } = this.props\n        currTask.description = description\n        updateTaskDetails(currTask)\n        this.setState({ isEditMode: false })\n    }\n    handleChange = ({ target: { value } }) => {\n        this.setState({ description: value })\n    }\n\n    onToggleEdit = () => {\n        this.setState({ isEditMode: !this.state.isEditMode })\n    }\n    onEditMode = () => {\n        this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    render() {\n        const { isEditMode, description } = this.state\n        return (\n            <div className=\"task-description flex column\">\n                <div className=\"window-modal-title flex align-center\">\n                    <SubjectIcon />\n                    <h3>Description</h3>\n                    <button\n                        className={`task-btns edit-task-description-btn ${!isEditMode ? 'full-opacity' : 'none-opacity'}`}\n                        onClick={() => this.onEditMode()}>\n                        Edit\n                    </button>\n                </div>\n                <div className=\"card-description-edit flex column\">\n                    <textarea onClick={this.onEditMode}\n                        ref={(input) => { this.selectedInput = input; }}\n                        onBlur={this.onSaveDescription}\n                        value={description}\n                        placeholder=\"Add a more detailed description...\"\n                        onChange={this.handleChange}>\n                    </textarea>\n\n                    <div className={`description-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                        <button className='task-btns save-task-description-btn' onClick={() => this.onSaveDescription()}>Save</button>\n                        <button className='task-btns close-task-description-btn' onClick={() => this.onToggleEdit()}><Close /></button>\n                    </div>\n                </div>\n            </div>)\n    }\n\n}","import React from \"react\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport { connect } from \"react-redux\";\nimport { togglePopover, setPosition, setPopover } from '../../store/app.actions'\nexport class _Popover extends React.Component {\n    state = {\n        visible: false,\n        top: 0,\n        left: 0,\n    };\n    contentEl = null;\n\n    componentDidMount() {\n        this.onSetPopoverPos()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.popover !== this.props.popover) {\n            this.onSetPopoverPos()\n        }\n    }\n\n\n    toggleVisibility = () =>\n        this.setState((prevState) => ({ visible: !prevState.visible }));\n\n    onSetPopoverPos = () => {\n        if (!this.contentEl) return\n        const elRect = this.contentEl.getBoundingClientRect()\n        let { left, top } = this.setPopoverPos(elRect)\n        this.setState({ top, left })\n    }\n\n\n    setPopoverPos(elRect) {\n        const { pos } = this.props.popover\n        const { width, height } = elRect\n        let posX = (window.innerWidth - pos.pageX > 200) ? pos.pageX - 200 : pos.pageX - 200;\n        let posY = (window.innerHeight - pos.pageY > 200) ? pos.pageY + 20 : pos.pageY - 200;\n        posX = (posX + width > window.innerWidth) ? window.innerWidth - width - 10 : posX;\n        posY = (posY + height > window.innerHeight) ? window.innerHeight - height - 20 : posY;\n        if (posX < 0) posX = 10;\n        return { left: posX, top: posY }\n    }\n\n\n\n\n    getContentStyles = () => {\n        const { top, left } = this.state;\n        const { title, popover } = this.props\n        return {\n            position: \"fixed\",\n            opacity: 1,\n            top: `${top}px`,\n            left: `${left}px`,\n            transition: \"opacity 0.3s, visibility 0.3s\",\n            backgroundColor: `${(popover.isMenu) ? '#f4f5f7' : '#fff'}`,\n            border: \"1px solid lightgray\",\n            padding: \"15px\",\n            zIndex: 100,\n            padding: \"0 12px 12px\",\n            borderRadius: \"3px\",\n            marginRight: \"4px\",\n            maxWidth: \"100%\",\n            boxShadow: \"0 8px 16px -4px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08)\",\n        };\n    };\n\n    render() {\n        const { title, children, popover } = this.props;\n        return (\n            <>\n                {(popover.isOpen) &&\n                    <>\n                        <div\n\n                            className={`popover ${popover.isMenu ? 'slide-in-right' : ''}`}\n                            ref={(el) => (this.contentEl = el)}\n                            style={this.getContentStyles()}\n                        >\n                            <div className=\"popover-header\">\n                                {/* <h3>{title}</h3> */}\n                                <span>{title}</span>\n                                <button className=\"clean-btn\" onClick={this.props.togglePopover}>\n                                    <CloseIcon />\n                                </button>\n                            </div>\n                            <div className=\"popover-content\">\n                                {children}\n                            </div>\n                        </div>\n                        <div className=\"popover-overlay\" style={{ position: \"fixed\", inset: 0, height: \"100vh\", zIndex: 90 }} onClick={this.props.togglePopover}></div>\n                    </>\n                }\n            </>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    togglePopover,\n    setPosition,\n    setPopover\n};\n\nexport const Popover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_Popover);\n","import React, { Component } from 'react'\nimport { Popover } from './Popover/Popover'\nimport { connect } from 'react-redux'\n\nexport class _CheckDeletePopover extends Component {\n    state = {\n        typeTitle: ''\n    }\n\n    componentDidMount() {\n        this.setState(prevState => ({\n            ...prevState,\n            typeTitle: this.props.typeTitle\n        }))\n    }\n\n    componentWillUnmount() {\n        this.props.togglePopover()\n    }\n\n    render() {\n        const { type, remove } = this.props\n        let { typeTitle } = this.state\n        if (typeTitle.length > 15) typeTitle = typeTitle.substr(1, 15) + '...'\n        const title = `Delete ${typeTitle}?`\n        return (\n            <div className=\"no-back-container\">\n                <Popover title={title} >\n                    <div className=\"no-back\">\n                        <p>Deleting a {type} is permanent and there<br></br>is no way to get it back.</p>\n                        <button className=\"delete-checklist-btn danger-btn\" onClick={() => { remove() }}>Delete {type}</button>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return { }\n}\n\nexport const CheckDeletePopover = connect(mapStateToProps, null)(_CheckDeletePopover)\n","import React, { Component } from 'react'\nimport { Popover } from './Popover/Popover'\n\n\nexport class EditAttachmentPopover extends Component {\n    state = {\n        url: '',\n        urlName: '',\n    }\n\n    componentDidMount = () => {\n        const { attachment } = this.props\n        this.setState(prevState => ({ ...prevState, url: attachment.url, urlName: attachment.name }))\n    }\n\n    componentWillUnmount() {\n        this.props.togglePopover()\n    }\n\n    handleChange = (ev) => {\n        const { value, name } = ev.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    onAttachmentUpdate = () => {\n        const { url, urlName } = this.state\n        this.props.updateAttachment(url, urlName)\n    }\n\n    render() {\n        const { attachment } = this.props\n        const { url, urlName } = this.state\n\n        let attachName = attachment.name\n        if (attachName.length > 15) attachName = attachName.substr(1, 15) + '...'\n\n        const title = `Update ${attachName}`\n        return (\n            <div className=\"edit-attach-container\">\n                <Popover title={title} >\n                    <div className=\"attachment-container\">\n                        {attachment.isWeb &&\n                            <>\n                                <label htmlFor=\"url-upload\">Link</label>\n                                <input type=\"text\" id=\"url-upload\" placeholder=\"Enter link url\" value={url} name='url' onChange={this.handleChange} />\n                            </>\n                        }\n                        <label htmlFor=\"url-name-optional\">Link name (optional)</label>\n                        <input\n                            type=\"text\"\n                            id=\"url-name-optional\"\n                            name=\"urlName\"\n                            value={urlName}\n                            placeholder=\"Enter link name\"\n                            onChange={this.handleChange}\n                        />\n                        <button class=\"primary-btn\" onClick={this.onAttachmentUpdate}>Update</button>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { utilService } from '../services/util.service';\nimport VideoLabel from '@mui/icons-material/VideoLabel';\nimport { CheckDeletePopover } from './CheckDeletePopover'\nimport { EditAttachmentPopover } from './EditAttachmentPopover'\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { Link } from 'react-router-dom';\nimport { saveBoard, saveTaskDetails, addActivity } from '../store/board.actions'\nimport { setPosition, setPopover, setCurrTaskDetails } from '../store/app.actions';\n\n\nexport class _TaskAttachmentPreview extends Component {\n    state = {\n        isPopover: false,\n        isEditPopover: false,\n        bgUrl: null,\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const bgUrl = currTaskDetails.style && currTaskDetails.style.bgUrl\n        this.setState(prevState => ({ ...prevState, bgUrl, currGroup }))\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { currTaskDetails } = this.props\n        const bgUrl = currTaskDetails.style && currTaskDetails.style.bgUrl\n        if (bgUrl !== prevState.bgUrl) {\n            this.setState(prevState => ({ ...prevState, bgUrl }))\n        }\n    }\n\n    toggleBgUrl = () => {\n        this.setState(prevState => ({ ...prevState, bgUrl: !prevState.bgUrl }))\n    }\n\n    togglePopover = () => {\n        this.setState(prevState => ({ ...prevState, isEditPopover: false, isPopover: !prevState.isPopover }))\n    }\n    toggleEditPopover = () => {\n        this.setState(prevState => ({ ...prevState, isPopover: false, isEditPopover: !prevState.isEditPopover }))\n    }\n\n    removeAttach = async () => {\n        const { board, currTaskDetails, saveTaskDetails, addActivity, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const attachs = currTaskDetails.attachments.filter(currAttach => currAttach.id !== attachment.id)\n        currTaskDetails.attachments = attachs\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.togglePopover()\n        addActivity(board, currTaskDetails, 'remove-attachment', attachment.name)\n    }\n\n    setCover = async () => {\n        const { board, saveTaskDetails, currTaskDetails, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.style.bgUrl = attachment.url\n        this.toggleBgUrl()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeCover = async () => {\n        const { board, saveTaskDetails, currTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.style.coverMode = null\n        currTaskDetails.style.bgColor = null\n        currTaskDetails.style.bgUrl = null\n        this.toggleBgUrl()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    updateAttachment = async (url, urlName) => {\n        const { board, saveTaskDetails, currTaskDetails, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        attachment.url = url\n        attachment.name = urlName\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.toggleEditPopover()\n    }\n\n    render() {\n        const { attachment, popover } = this.props\n        const { isPopover, isEditPopover, bgUrl } = this.state\n        const { isWeb } = attachment\n        return (\n            <div className=\"attachment-preview flex\">\n                {(isWeb) ?\n                    <Link className=\"attachment-thumbnail flex\" to={{ pathname: `${attachment.url}` }} target=\"_blank\" title={`${attachment.name}`}>\n                        <AttachFileIcon />\n                    </Link> :\n                    <img src={attachment.url} alt={attachment.name} />\n                }\n                <div className=\"attachment-content\">\n                    <div className=\"attachment-details\">\n                        <span className=\"attachment-title\">{(attachment.name.length > 15) ? attachment.name.substr(1, 15) + '...' : attachment.name}</span>\n                        <div className=\"attachment-actions\">\n                            <span className=\"attachment-date\">Added {utilService.timeSince(attachment.createdAt)}</span>\n                            <button className=\"activity-toggle-btn\" onClick={(event) => {\n                                this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                                this.props.setPopover(true)\n                                this.togglePopover()\n                            }}>\n                                Delete\n                            </button>\n                            <button className=\"activity-toggle-btn\" onClick={(event) => {\n                                this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                                this.props.setPopover(true)\n                                this.toggleEditPopover()\n                            }}>\n                                Edit\n                            </button>\n                        </div>\n\n                        {!isWeb && !bgUrl &&\n                            <span>\n                                <VideoLabel className=\"make-cover-icon\" />\n                                <span onClick={this.setCover}>Make cover</span>\n                            </span>\n                        }\n                        {!isWeb && bgUrl &&\n                            <span>\n                                <VideoLabel className=\"make-cover-icon\" />\n                                <span onClick={this.removeCover}>Remove cover</span>\n                            </span>\n                        }\n\n                    </div>\n                </div>\n                {popover.isOpen && isPopover &&\n                    <CheckDeletePopover\n                        remove={this.removeAttach}\n                        type={'attachment'}\n                        typeTitle={attachment.name}\n                        togglePopover={this.togglePopover}\n                    />\n                }\n                {popover.isOpen && isEditPopover &&\n                    <EditAttachmentPopover\n                        togglePopover={this.toggleEditPopover}\n                        updateAttachment={this.updateAttachment}\n                        attachment={attachment}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    setPosition,\n    setPopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskAttachmentPreview = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskAttachmentPreview);","import React, { Component } from \"react\";\nimport { TaskAttachmentPreview } from './TaskAttachmentPreview'\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { connect } from \"react-redux\";\n\n\nexport function _TaskAttachment({ currTaskDetails }) {\n    if (!currTaskDetails.attachments || !currTaskDetails.attachments.length ) return <React.Fragment></React.Fragment>\n    return (\n        <div className=\"task-attach\">\n            <div className=\"window-modal-title flex align-center\">\n                <AttachFileIcon />\n                <h3>Attachment</h3>\n            </div>\n            <div className=\"attachments\">\n                {currTaskDetails.attachments.map(attachment => {\n                    return <TaskAttachmentPreview\n                        key={attachment.id}\n                        attachment={attachment}\n                    />\n                })}\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n\n};\n\nexport const TaskAttachment = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskAttachment);\n","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { connect } from \"react-redux\";\nimport { addActivity } from '../store/board.actions'\n\nexport class _TodoPreview extends Component {\n\n    state = {\n        todo: null,\n        todoTitle: '',\n        isEditMode: false\n    }\n    selectedInput = null;\n\n    componentDidMount() {\n        const { todo } = this.props\n        this.setState(prevState => ({ ...prevState, todo, todoTitle: todo.title }))\n    }\n\n    handleChange = ({ target: { value } }) => {\n        this.setState(prevState => ({ ...prevState, todo: { ...this.state.todo, title: value } }))\n    }\n\n    onEditMode = () => {\n        if (this.selectedInput) this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    onToggleEditMode = () => {\n        this.setState(prevState => ({ ...prevState, isEditMode: !this.state.isEditMode }))\n    }\n\n    onSaveTodo = () => {\n        const { todo } = this.state\n        this.props.onSaveTodo(todo)\n        this.onToggleEditMode()\n    }\n\n    onToggleTodoIsDone = () => {\n        const { todo } = this.state\n        const { addActivity, board, currTaskDetails } = this.props\n        todo.isDone = !todo.isDone\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.props.onSaveTodo(todo)\n        if (todo.isDone) addActivity(board, currTaskDetails, 'complete-todo', todo.title)\n        else addActivity(board, currTaskDetails, 'incomplete-todo', todo.title)\n    }\n\n    onRemoveTodo = () => {\n        const { todo } = this.state\n        this.props.onRemoveTodo(todo)\n    }\n\n    onUndoChange = () => {\n        const { todo } = this.props\n        const { todoTitle } = this.state\n        todo.title = todoTitle\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.onToggleEditMode()\n    }\n\n    render() {\n        const { todo, isEditMode } = this.state\n        if (!todo) return <div>Loading...</div>\n        const { title } = todo\n\n        return (\n\n            <div className=\"todo-preview-container flex column\">\n                <div className=\"todo-preview flex align-center\">\n                    {todo.isDone && <CheckBoxIcon onClick={this.onToggleTodoIsDone} className=\"todo-check\" />}\n                    {!todo.isDone && <CheckBoxOutlineBlankIcon onClick={this.onToggleTodoIsDone} />}\n                    {isEditMode &&\n                        <textarea onClick={this.onEditMode}\n                            className=\"default-textarea\"\n                            ref={(input) => { this.selectedInput = input; }}\n                            // onBlur={this.onUndoChange}\n                            value={title}\n                            onChange={this.handleChange}>\n                        </textarea>\n                    }\n                    {!isEditMode && <div className=\"checklist-txt-and-btn\">\n                        <span className={`${todo.isDone ? 'done' : ''}`} onClick={this.onEditMode}>{title}</span>\n                        <DeleteIcon className=\"todo-remove-icon\" onClick={this.onRemoveTodo}  />\n                    </div>}\n                </div>\n                <div className={`checklist-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                    <button onClick={this.onSaveTodo} className=\"nch-btn primary-btn\">Save</button>\n                    <Close onClick={this.onUndoChange} className=\"close-btn\" />\n                </div >\n            </div >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    addActivity\n};\n\nexport const TodoPreview = connect(mapStateToProps, mapDispatchToProps)(_TodoPreview);","import { TodoPreview } from './TodoPreview'\nexport function TodoList({ todos, onSaveTodo, onRemoveTodo }) {\n    return (\n        <div className=\"todo-list\">\n            {todos.map(todo => {\n                return <TodoPreview\n                    key={todo.id}\n                    todo={todo}\n                    onSaveTodo={onSaveTodo}\n                    onRemoveTodo={onRemoveTodo}\n                />\n            })}\n        </div>\n    )\n}","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport { utilService } from '../services/util.service'\n\nexport class TodoAdd extends Component {\n    state = {\n        isEditMode: false,\n        todo: {\n            title: ''\n        }\n    }\n    selectedInput = null\n\n    handleChange = (ev) => {\n        const { value } = ev.target\n        this.setState(prevState => ({ ...prevState, todo: { title: value } }))\n    }\n    onToggleEditMode = () => {\n        const { isEditMode } = this.state\n        this.setState(prevState => ({ ...prevState, isEditMode: !isEditMode }))\n    }\n\n    onTodoAdd = () => {\n        const { todo } = this.state\n        if (!todo.title) return\n        todo.id = utilService.makeId()\n        todo.isDone = false\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.props.addTodo(todo)\n        this.clearState()\n    }\n\n    clearState = () => {\n        this.selectedInput.focus()\n        this.setState(prevState => ({ ...prevState, todo: { title: '' } }))\n    }\n\n    render() {\n        const { isEditMode, todo } = this.state\n        return (\n            <div className=\"todo-add-container\">\n                <button\n                    className={`task-btns nch-btn todo-add-btn ${isEditMode ? 'hidden' : 'show'}`}\n                    onClick={() => this.onToggleEditMode()}>\n                    Add an item\n                </button>\n                {isEditMode &&\n                    <div className=\"todo-edit flex column\">\n                        <textarea onClick={this.onEditMode}\n                            ref={(input) => { this.selectedInput = input; }}\n                            // onBlur={this.onToggleEditMode}\n                            autoFocus\n                            value={todo.title}\n                            placeholder=\"Add an item\"\n                            onChange={this.handleChange}>\n                        </textarea>\n\n                        <div className={`todo-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                            <button className='task-btns todo-save-btn' onClick={() => this.onTodoAdd()}>Add</button>\n                            <button className='task-btns todo-close-btn' onClick={() => this.onToggleEditMode()}><Close /></button>\n                        </div>\n                    </div>\n\n                }\n\n            </div>\n        )\n    }\n}","import { Component } from \"react\";\n\n\nexport class ProgressBar extends Component {\n\n    state = {\n        completed: 0,\n        style: {\n            width: '',\n            backgroundColor: ''\n        }\n    }\n\n    componentDidMount = () => {\n        const completed = this.props.doneTodosCalc()\n        const backgroundColor = (completed === 100) ? '#61bd4f' : '#5ba4cf'\n        this.setState(prevState => ({ ...prevState, completed, style: { width: `${completed}%`, backgroundColor } }))\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.state.completed !== this.props.doneTodosCalc()) {\n            const completed = this.props.doneTodosCalc()\n            const backgroundColor = (completed === 100) ? '#61bd4f' : '#5ba4cf'\n            this.setState(prevState => ({ ...prevState, completed, style: { width: `${completed}%`, backgroundColor } }))\n        }\n    }\n\n    render() {\n        const { style, completed } = this.state\n\n        return (\n            <div className=\"checklist-progress\" >\n                <span className=\"checklist-progress-percentage js-checklist-progress-percent\">{parseInt(completed)}%</span>\n                <div className=\"checklist-progress-bar\">\n                    <div className=\"checklist-progress-bar-current js-checklist-progress-bar\" style={style}>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { TodoList } from './TodoList'\nimport { CheckDeletePopover } from './CheckDeletePopover'\nimport { TodoAdd } from './TodoAdd'\nimport CheckBoxOutlinedIcon from '@mui/icons-material/CheckBoxOutlined';\nimport { ProgressBar } from './ProgressBar'\nimport { saveBoard, saveTaskDetails, addActivity } from '../store/board.actions'\nimport { togglePopover } from '../store/app.actions'\nimport { setPosition, setPopover, setCurrTaskDetails } from '../store/app.actions';\n\n\nexport class _TaskChecklistPreview extends Component {\n\n    state = {\n        isPopover: false\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    togglePopover = () => {\n        this.setState(prevState => ({ ...prevState, isPopover: !prevState.isPopover }))\n    }\n\n    onSaveTodo = async (todo) => {\n        const { board, currTaskDetails, checklist, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        const todoIdx = currTaskDetails.checklists[checklistIdx].todos.findIndex((currTodo) => {\n            return currTodo.id === todo.id\n        })\n        currTaskDetails.checklists[checklistIdx].todos[todoIdx] = todo\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    onRemoveTodo = async (todo) => {\n        const { board, currTaskDetails, saveTaskDetails, checklist, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        const todoIdx = currTaskDetails.checklists[checklistIdx].todos.findIndex((currTodo) => {\n            return currTodo.id === todo.id\n        })\n        currTaskDetails.checklists[checklistIdx].todos.splice(todoIdx, 1)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    addTodo = async (todo) => {\n        const { board, currTaskDetails, saveTaskDetails, checklist, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        currTaskDetails.checklists[checklistIdx].todos.push(todo)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    doneTodosCalc = () => {\n        const { checklist } = this.props\n        const { todos } = checklist\n        if (!todos.length) return 0\n\n        let isDoneTodos = 0\n        todos.forEach(todo => {\n            if (todo.isDone) isDoneTodos++\n        })\n        return (isDoneTodos / checklist.todos.length) * 100\n    }\n\n    removeChecklist = async () => {\n        const { board, saveTaskDetails, currTaskDetails, checklist, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        currTaskDetails.checklists.splice(checklistIdx, 1)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.togglePopover()\n        addActivity(board, currTaskDetails, 'remove-checklist')\n    }\n\n    render() {\n        const { checklist, popover } = this.props\n        const { isPopover } = this.state\n        if (!checklist) return <div></div>\n\n        return (\n            <div className=\"task-activities flex column\">\n                <div className=\"window-modal-title flex space-between\">\n                    <div className=\"task-activities-header flex align-center\">\n                        <CheckBoxOutlinedIcon />\n                        <h3>{checklist.title}</h3>\n                    </div>\n                    <button className=\"activity-toggle-btn\" onClick={(event) => {\n                        this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                        this.props.setPopover(true)\n                        this.togglePopover()\n                    }}>\n                        Delete\n                    </button>\n                </div>\n                <ProgressBar doneTodosCalc={this.doneTodosCalc} />\n                <TodoList\n                    todos={checklist.todos}\n                    onSaveTodo={this.onSaveTodo}\n                    onRemoveTodo={this.onRemoveTodo}\n                />\n                {popover.isOpen && isPopover &&\n                    <CheckDeletePopover\n                        remove={this.removeChecklist}\n                        type={'checklist'}\n                        typeTitle={checklist.title}\n                        togglePopover={this.togglePopover}\n                    />\n                }\n                <TodoAdd addTodo={this.addTodo} />\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    setPosition,\n    setPopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskChecklistPreview = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskChecklistPreview);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { TaskChecklistPreview } from './TaskChecklistPreview'\n\n\nexport class _TaskChecklist extends Component {\n\n    state = {\n    }\n\n    render() {\n        const { currTaskDetails } = this.props\n        if (!currTaskDetails.checklists) return <React.Fragment></React.Fragment>\n        return (\n            <div className=\"task-checklists\" >\n                {currTaskDetails.checklists.map(checklist => {\n                    return <TaskChecklistPreview\n                        key={checklist.id}\n                        checklist={checklist}\n                    />\n                })}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\n\nexport const TaskChecklist = connect(mapStateToProps)(_TaskChecklist);","import React, { Component } from 'react';\n\nexport class AddComment extends Component {\n    state = {\n        txt: '',\n        isEditMode: false\n    }\n\n    handleChange = (ev) => {\n        const { value } = ev.target\n        this.setState(prevState => ({ ...prevState, txt: value }))\n    }\n\n    onEditMode = () => {\n        if (this.selectedInput) this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    onAddComment = () => {\n        const { txt } = this.state\n        const { loggedinUser } = this.props\n        this.props.addComment(txt, loggedinUser)\n        this.setState(prevState => ({ ...prevState, txt: '', isEditMode: false }))\n    }\n\n    render() {\n        const { loggedinUser } = this.props\n        const { isEditMode, txt } = this.state\n\n        return (\n            <div className=\"add-comment flex\">\n                <article className=\"member-wrapper\">\n                    {loggedinUser?.imgUrl ? (\n                        <img\n                            src={loggedinUser.imgUrl}\n                            className=\"member-img\"\n                            alt={loggedinUser.fullname[0].toUpperCase()}\n                        />\n                    ) :\n                        (\n                            <div className=\"member-img\" style={{ background: 'rgb(223, 225, 230)', color: 'inherit' }}>\n                                <p className={`member-letter preview`}>{loggedinUser?.fullname?.[0] || ''}</p>\n                            </div>\n                        )}\n                </article>\n\n                <div className=\"comment-frame\">\n                    <textarea onClick={this.onEditMode}\n                        className=\"default-textarea\"\n                        ref={(input) => { this.selectedInput = input; }}\n                        value={txt}\n                        onChange={this.handleChange}\n                        placeholder=\"Write a comment\">\n                    </textarea>\n\n                    {isEditMode && <button\n                        className=\"primary-btn\"\n                        onClick={this.onAddComment}>\n                        Save\n                    </button>}\n\n                </div>\n            </div>\n        )\n    }\n\n}\n","import React, { Component } from 'react'\nimport { utilService } from '../services/util.service';\n\nexport class ActivityPreview extends Component {\n    state = {}\n\n    get activityToShow() {\n        let { activity, currTask } = this.props\n        if (!currTask) currTask = activity.task\n        if (activity.txt && activity.txt.length > 20) activity.txt = activity.txt.substr(1, 12) + '...'\n        switch (activity.type) {\n            case 'due-date-complete':\n                return 'marked the due date complete'\n            case 'due-date-incomplete':\n                return 'marked the due date incomplete'\n            case 'set-date':\n                return `set the due date to of ${currTask.title} to ${activity.txt}`\n            case 'remove-date':\n                return `removed the due date from ${currTask.title}`\n            case 'add-checklist':\n                return `added Checklist to ${currTask.title}`\n            case 'remove-checklist':\n                return `removed Checklist from ${currTask.title}`\n            case 'add-member':\n                return `added ${activity.txt} to ${currTask.title}`\n            case 'remove-member':\n                return `removed ${activity.txt} from ${currTask.title}`\n            case 'add-self':\n                return `joined task ${currTask.title}`\n            case 'remove-self':\n                return `left task ${currTask.title}`\n            case 'add-to-archive':\n                return `archived ${currTask.title}`\n            case 'remove-from-archive':\n                return `returned ${currTask.title} to board `\n            case 'remove-task':\n                return `deleted ${currTask.title} from board`\n            case 'complete-todo':\n                return `completed ${activity.txt} on ${currTask.title}`\n            case 'incomplete-todo':\n                return `marked ${activity.txt} incomplete on ${currTask.title}`\n            case 'remove-attachment':\n                return `deleted the ${activity.txt} attachment from ${currTask.title}`\n            case 'change-title':\n                return `changed task title to ${activity.txt} `\n            default:\n                return ''\n                break;\n        }\n    }\n\n\n    render() {\n        const { activity, isShowActivities, selectNotification } = this.props\n        const { byMember } = activity\n        if (!isShowActivities && activity.type !== 'comment') return <></>\n        return (\n            <div className={`activity-preview-container flex ${activity.isNotRead ? 'unread' : ''} ${activity.isNotify ? 'notify' : ''}`} \n                onClick={activity.isNotify ? ()=>{selectNotification(activity)} : undefined }>\n                <article className=\"member-wrapper\">\n                    {byMember?.imgUrl ? (\n                        <img\n                            src={byMember.imgUrl}\n                            className=\"member-img\"\n                            alt={byMember.fullname[0].toUpperCase()}\n                        />\n                    ) :\n                        (\n                            <div className=\"member-img\" style={{ background: 'rgb(223, 225, 230)', color: 'inherit' }}>\n                                <p className={`member-letter preview`}>{byMember?.fullname?.[0] || ''}</p>\n                            </div>\n                        )}\n                </article>\n\n                {activity.type === 'comment' &&\n                    <div className=\"comment-preview\">\n                        <div className=\"comment-by-user\">\n                            <span className=\"member-name\">{byMember.fullname}</span>\n                            <span className=\"comment-created-at\">{utilService.timeSince(activity.createdAt)}</span>\n                        </div>\n                        <div className=\"comment-content\">\n                            <p className=\"comment-txt\">{activity.txt}</p>\n                        </div>\n                    </div>\n                }\n                {activity.type !== 'comment' &&\n                    <div className=\"activity-preview\">\n                        <div className=\"activity-by-user\">\n                            <span className=\"member-name\">{byMember.fullname}</span>\n                            <span className=\"activity-content\">{this.activityToShow}</span>\n                        </div>\n                        <div className=\"activity-created-at-container\">\n                            <span className=\"activity-created-at\">{utilService.timeSince(activity.createdAt)}</span>\n                        </div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import { ActivityPreview } from './ActivityPreview'\n\nexport function ActivitiesList({ CommAndAct, isShowActivities, currTask, selectNotification }) {\n\n    return (\n        <div className=\"activities-list\">\n            {CommAndAct.map(activity => {\n                return <ActivityPreview key={activity.id} activity={activity} isShowActivities={isShowActivities} currTask={currTask} selectNotification={selectNotification}/>\n            })}\n\n        </div>\n    )\n}","import React, { Component } from 'react';\n\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport { AddComment } from './AddComment'\nimport { ActivitiesList } from './ActivitiesList'\n\nimport { utilService } from '../services/util.service'\n\nexport class TaskActivities extends Component {\n\n\n    state = {\n        isShowActivities: false\n    }\n\n    onToggleComments = () => {\n        this.setState({ isShowActivities: !this.state.isShowActivities })\n    }\n\n    getTaskCommentsAndActivitiesSorted = () => {\n        const { currTask, activities } = this.props\n        let CommAndAct = []\n\n        if (currTask.comments && currTask.comments.length) {\n            CommAndAct.push(...currTask.comments)\n        }\n\n        if (activities && activities.length) {\n            activities.forEach((activity) => {\n                if (activity.task.id === currTask.id) CommAndAct.push(activity)\n            })\n        }\n        if (!CommAndAct.length) return null\n        CommAndAct.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        return CommAndAct\n    }\n\n    addComment = (txt, byMember) => {\n        const { currTask } = this.props\n        if (!currTask.comments) currTask.comments = []\n        const comment = {\n            id: utilService.makeId(),\n            txt,\n            createdAt: Date.now(),\n            type: 'comment',\n            byMember\n        }\n        currTask.comments.push(comment)\n        this.props.updateTaskDetails(currTask)\n    }\n\n\n    render() {\n        const { isShowActivities } = this.state\n        const { currTask, loggedinUser } = this.props\n        const CommAndAct = this.getTaskCommentsAndActivitiesSorted()\n\n        return (\n            <div className=\"task-activities flex column\">\n                <div className=\"window-modal-title flex space-between\">\n                    <div className=\"task-activities-header flex align-center\">\n                        <FormatListBulletedIcon />\n                        <h3>Activity</h3>\n                    </div>\n                    <button className=\"activity-toggle-btn\" onClick={this.onToggleComments}>\n                        {isShowActivities ? 'Hide details' : 'Show details'}\n                    </button>\n                </div>\n                <AddComment currTask={currTask} loggedinUser={loggedinUser} addComment={this.addComment} />\n                {CommAndAct && CommAndAct.length && <ActivitiesList CommAndAct={CommAndAct} isShowActivities={isShowActivities} currTask={currTask}/>}\n            </div>\n        )\n    }\n\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PersonOutlineIcon from '@mui/icons-material/PersonOutline';\nimport LabelIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CheckboxIcon from '@material-ui/icons/CheckBoxOutlined'\nimport CoverIcon from '@material-ui/icons/VideoLabel';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport CopyIcon from '@material-ui/icons/FileCopyOutlined';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport PersonAddAltIcon from '@mui/icons-material/PersonAddAlt';\nimport ScheduleIcon from '@mui/icons-material/Schedule';\nimport ArchiveIcon from '@mui/icons-material/Archive';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport { setPosition, togglePopover, setPopoverMenu } from '../store/app.actions';\nexport class _TaskActionsMenu extends Component {\n    render() {\n        const { joinTask, toggleIsArchive, deleteTask, isArchive, currTaskDetails, loggedinUser, setPosition, togglePopover } = this.props\n        const loggedinUserIsJoin = (currTaskDetails && loggedinUser) ?\n            currTaskDetails.members?.find((member) => member._id === loggedinUser._id) ? true : false || false :\n            null\n        return (\n            <aside className=\"task-details-sidebar flex column full\">\n                <div className=\"actions-wrapper flex\">\n                    {!loggedinUserIsJoin && <div className=\"suggested flex column\">\n                        <h4>SUGGESTED</h4>\n                        <button className=\"secondary-btn action-btn\" onClick={joinTask}>\n                            <div className=\"action-btn-content flex\" >\n                                <PersonOutlineIcon />\n                                <span>Join</span>\n                            </div>\n                        </button>\n                    </div>}\n                    <div className=\"add-to-card flex column\">\n                        <h4>ADD TO CARD</h4>\n\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'MEMBERS' }); togglePopover(); }}>\n                            <div className=\" action-btn-content flex\" >\n                                <PersonAddAltIcon />\n                                <span>Members</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <LabelIcon />\n                                <span>Labels</span>\n                            </div>\n                        </button>\n\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'CHECKLIST' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <CheckboxIcon />\n                                <span>Checklist</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'DATE' }); togglePopover() }}>\n                            <div className=\" action-btn-content flex \" >\n                                <ScheduleIcon />\n                                <span>Date</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'ATTACHMENT' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <AttachFileIcon />\n                                <span>Attachment</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COVER' }); togglePopover() }}>\n                            <div className=\" action-btn-content flex \" >\n                                <CoverIcon />\n                                <span>Cover</span>\n                            </div>\n                        </button>\n                    </div>\n                    <div className=\"actions flex column\">\n                        <h4>ACTIONS</h4>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'MOVE' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <ArrowForwardIcon />\n                                <span>Move</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COPY' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <CopyIcon />\n                                <span>Copy</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={toggleIsArchive}>\n                            <div className=\"action-btn-content flex \" >\n                                {isArchive ? <ArrowBackIcon /> : <ArchiveIcon />}\n                                <span>{isArchive ? 'Return to board' : 'Archive'}</span>\n                            </div>\n                        </button>\n                        {isArchive &&\n                            <button className=\"secondary-btn action-btn danger-btn\" style={{ color: '#fff' }} onClick={deleteTask}>\n                                <div className=\"action-btn-content flex \" >\n                                    <RemoveIcon style={{ color: '#fff' }} />\n                                    <span>Delete</span>\n                                </div>\n                            </button>\n                        }\n                    </div>\n                </div>\n\n            </aside>\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        loggedinUser: state.userModule.loggedinUser,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover,\n    setPopoverMenu\n};\n\nexport const TaskActionsMenu = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskActionsMenu);\n","import { connect } from 'react-redux';\nimport React from 'react'\nimport AddIcon from '@mui/icons-material/Add';\nimport { setPosition, togglePopover } from '../store/app.actions';\n\n\nexport function _TaskHeaderLabels({ currTaskDetails, board, setPosition, togglePopover }) {\n    const labels = board.labels.filter((label) => currTaskDetails.labelIds.includes(label.id))\n    if (labels.length === 0) return <></>\n    return (\n        <div className=\"task-details-header-labels item-container flex column\">\n            <h3 className=\"task-details-header-title\">Labels</h3>\n            <div className=\"labels-container flex wrap\">\n                {labels.map(label => {\n                    return <span\n                        onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover(); }}\n                        key={label.id} className=\"label\" style={{ backgroundColor: label.color }}>\n                        {label.title}\n                    </span>\n                })}\n                <button className=\"secondary-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover(); }}><AddIcon /></button>\n            </div>\n        </div>\n    )\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover\n};\n\nexport const TaskHeaderLabels = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskHeaderLabels);\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { MemberList } from './MemberList'\n\n\nexport function _TaskHeaderMembers({ currTaskDetails }) {\n    if (!currTaskDetails.members||currTaskDetails.members.length === 0) return <></>\n    return (\n        <div className=\"task-details-header-members flex column\">\n            <h4 className=\"task-details-header-title\"> Members</h4>\n            <div className=\"container flex wrap\">\n                <MemberList members={currTaskDetails.members} isInDetails={true} />\n            </div>\n        </div>\n    )\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskHeaderMembers = connect(\n    mapStateToProps,\n    null\n)(_TaskHeaderMembers);\n\n\n","import { connect } from 'react-redux'\nimport React, { Component } from 'react'\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport { saveTaskDetails, addActivity } from '../store/board.actions'\nimport { setPosition, togglePopover, setCurrTaskDetails } from '../store/app.actions';\n\nexport class _TaskHeaderDate extends Component {\n    state = {\n        formatedDate: '',\n        dueDate: null,\n        isTaskDone: false\n    }\n    componentDidMount = () => {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n\n        const dueDate = currTaskDetails.dueDate\n        const isTaskDone = currTaskDetails.isDone\n        const formatedDate = this.dueDateFormat(currTaskDetails.dueDate)\n        this.setState(prevState => ({ ...prevState, formatedDate, dueDate, isTaskDone, currGroup }))\n    }\n\n    componentDidUpdate(prevProps) {\n        const { dueDate } = this.state\n        const { currTaskDetails } = this.props\n        if (dueDate !== currTaskDetails.dueDate) {\n            const dueDate = currTaskDetails.dueDate\n            const formatedDate = this.dueDateFormat(currTaskDetails.dueDate)\n            this.setState(prevState => ({ ...prevState, dueDate, formatedDate }))\n        }\n    }\n\n    onToggleTaskDone = async () => {\n        const isTaskDone = !this.state.isTaskDone\n        this.setState(prevState => ({ ...prevState, isTaskDone }))\n        const { board, saveTaskDetails, currTaskDetails, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.isDone = !currTaskDetails.isDone;\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        if (isTaskDone) addActivity(board, currTaskDetails, 'due-date-complete')\n        else addActivity(board, currTaskDetails, 'due-date-incomplete')\n    }\n\n    dueDateFormat = (dueDate) => {\n        const currYear = new Date().getFullYear()\n        const dueYear = new Date(dueDate).getFullYear()\n        let strDate = ''\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { day: 'numeric' })} `\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { month: 'short' })} at `\n        if (dueYear !== currYear) {\n            strDate += `${dueYear} `\n        }\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { hour: 'numeric', minute: 'numeric', hour12: true }).toLocaleUpperCase()}`\n        return strDate\n    }\n\n    getDueStatus = () => {\n        const now = Date.now()\n        const { currTaskDetails } = this.props\n        let dueStatus = '';\n        if (currTaskDetails.isDone) dueStatus = 'done';\n        else if (now > currTaskDetails.dueDate) dueStatus = 'overdue';\n        else {\n            const timeDiff = currTaskDetails.dueDate - now;\n            if (timeDiff < 86400000) dueStatus = 'due-soon'\n        }\n        return dueStatus\n    }\n\n    get dueMsg() {\n        switch (this.getDueStatus()) {\n            case 'done': return 'COMPLETE';\n            case 'due-soon': return 'DUE SOON';\n            case 'overdue': return 'OVERDUE';\n            default: return ''\n        }\n    }\n\n    render() {\n        const { currTaskDetails, setPosition, togglePopover } = this.props\n        console.log('currTaskDetails', currTaskDetails)\n        const { formatedDate, isTaskDone } = this.state\n        const dueStatus = this.getDueStatus();\n        if (!currTaskDetails.dueDate || currTaskDetails.dueDate.length === 0) return <></>\n\n        return (\n            <div className=\"task-details-header-date item-container flex column\">\n                <h3 className=\"task-details-header-title\">DUE DATE</h3>\n                <div className=\"date-container flex wrap align-center\">\n                    {isTaskDone && <CheckBoxIcon onClick={this.onToggleTaskDone} className=\"todo-check pointer\" />}\n                    {!isTaskDone && <CheckBoxOutlineBlankIcon onClick={this.onToggleTaskDone} className=\"pointer\" />}\n                    <button className=\"secondary-btn date-btn flex align-center\">\n                        <span\n                            className=\"date-context\"\n                            onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'DATE' }); togglePopover(); }}>\n                            {formatedDate}\n                        </span>\n                        <span className=\"drop-down-icon\"><ArrowDropDownIcon /></span>\n                        <span className={`due-msg ${dueStatus}`}>{this.dueMsg}</span>\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    saveTaskDetails,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskHeaderDate = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskHeaderDate);\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { TaskHeaderLabels } from './TaskHeaderLabels'\nimport { TaskHeaderMembers } from './TaskHeaderMembers'\nimport { TaskHeaderDate } from './TaskHeaderDate'\n\nexport class _TaskHeaderDetails extends Component {\n    state = {\n        selectedMembers: null,\n        selectedLabels: null,\n        selectedDate: null,\n    }\n\n    componentDidMount() {\n        const { selectedDate, } = this.props\n        this.setState(prevState => ({\n            ...prevState,\n            selectedDate\n        }))\n    }\n\n    render() {\n        return (\n            <div className=\"task-details-header flex\">\n                <TaskHeaderMembers />\n                <TaskHeaderLabels />\n                <TaskHeaderDate />\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskHeaderDetails = connect(\n    mapStateToProps,\n    null\n)(_TaskHeaderDetails);\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { TaskHeader } from \"../cmps/TaskHeader\";\r\nimport { TaskCardCover } from \"../cmps/TaskCardCover\";\r\nimport { TaskDescription } from \"../cmps/TaskDescription\";\r\nimport { TaskAttachment } from \"../cmps/TaskAttachment\";\r\nimport { TaskChecklist } from \"../cmps/TaskChecklist\";\r\nimport { TaskActivities } from \"../cmps/TaskActivities\";\r\nimport { TaskActionsMenu } from \"../cmps/TaskActionsMenu\";\r\nimport { TaskHeaderDetails } from \"../cmps/TaskHeaderDetails\";\r\nimport { LoaderSpinner } from \"../cmps/LoaderSpinner\";\r\nimport { saveBoard, saveTaskDetails, addActivity, loadBoard } from \"../store/board.actions\";\r\nimport { setCurrTaskDetails, setPopover, setPosition, setPopoverMenu } from '../store/app.actions'\r\nimport { MediaRecord } from '../cmps/MediaRecord'\r\n\r\nexport class _TaskDetails extends Component {\r\n  state = {\r\n    currTask: null,\r\n    currGroup: null\r\n  };\r\n  contentEl = null;\r\n\r\n  componentDidMount = async () => {\r\n    const { boardId, taskId, listId } = this.props.match.params;\r\n    const { board, setCurrTaskDetails, setPopoverMenu } = this.props;\r\n    if (!board) await this.props.loadBoard(boardId)\r\n    const currGroup = this.props.board?.groups.find((list) => list.id === listId);\r\n    const currTask = currGroup?.tasks.find((task) => task.id === taskId);\r\n    setCurrTaskDetails(currTask)\r\n    setPopoverMenu(false)\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      currGroup,\r\n      currTask,\r\n    }));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.setCurrTaskDetails(null)\r\n    this.props.setPosition({ pageX: null, pageY: null, type: null })\r\n    this.props.setPopover(false)\r\n  }\r\n\r\n  updateTaskDetails = async (currTask) => {\r\n    const { currGroup } = this.state;\r\n    const { board, saveTaskDetails } = this.props;\r\n    await saveTaskDetails(board, currGroup, currTask);\r\n  };\r\n\r\n  toggleOverlay = () => {\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  setTaksDetailsTitle = (title) => {\r\n    const { currTaskDetails, setCurrTaskDetails } = this.props;\r\n    currTaskDetails.title = title;\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  };\r\n\r\n  joinTask = async () => {\r\n    const { board, currTaskDetails, loggedinUser, addActivity, setCurrTaskDetails } = this.props;\r\n    let { members } = currTaskDetails;\r\n    members = members || [];\r\n    const boardMemberIds = board.members.map(member => member._id)\r\n    if (!loggedinUser) return\r\n    if (!boardMemberIds.includes(loggedinUser._id)) {\r\n      board.members.push(loggedinUser)\r\n    }\r\n    const selectedMembersIds = members.map((member) => member._id);\r\n    if (!selectedMembersIds.includes(loggedinUser._id)) {\r\n      members.push(loggedinUser);\r\n    }\r\n    currTaskDetails.members = members;\r\n    addActivity(board, currTaskDetails, 'add-self')\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  };\r\n\r\n  deleteTask = async () => {\r\n    const { currGroup } = this.state;\r\n    const { board, currTaskDetails, saveBoard, addActivity } = this.props;\r\n    const currGroupIdx = board.groups.indexOf(currGroup)\r\n    currGroup.tasks = currGroup.tasks.filter((task) => task.id !== currTaskDetails.id);\r\n    board.groups[currGroupIdx] = currGroup\r\n    addActivity(board, currTaskDetails, 'remove-task')\r\n    await saveBoard(board);\r\n    this.props.history.goBack();\r\n  }\r\n\r\n  toggleIsArchive = () => {\r\n    const { board, currTaskDetails, addActivity } = this.props;\r\n    currTaskDetails.isArchive = currTaskDetails?.isArchive || false\r\n    currTaskDetails.isArchive = !currTaskDetails.isArchive;\r\n    addActivity((currTaskDetails.isArchive) ? (board, currTaskDetails, 'add-to-archive') : (board, currTaskDetails, 'remove-from-archive'))\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  }\r\n\r\n  render() {\r\n    const { currGroup } = this.state;\r\n    const { board, currTaskDetails, loggedinUser } = this.props;\r\n    if (!currTaskDetails || !board || !currGroup) return <></>;\r\n\r\n    const { style } = currTaskDetails;\r\n    currTaskDetails.style = (style) ? style : { bgColor: null, bgUrl: null }\r\n    const { bgColor, bgUrl } = currTaskDetails.style\r\n    const { isArchive } = currTaskDetails\r\n\r\n    const taskOverlay = {\r\n      position: \"fixed\",\r\n      inset: 0,\r\n      height: \"100vh\",\r\n      overflowY: \"auto\",\r\n      zIndex: 90,\r\n    };\r\n\r\n    return (\r\n      <div style={taskOverlay}>\r\n        <div\r\n          className=\"overlay show\"\r\n          onClick={() => this.props.history.push(`/board/${board._id}`)}>\r\n        </div>\r\n\r\n        <section className=\"task-details flex column\">\r\n          <button\r\n            onClick={() => this.props.history.push(`/board/${board._id}`)}\r\n            className={`close-task-details ${bgColor ? \"cover\" : \"\"}`}>\r\n            <Close />\r\n          </button>\r\n          {(bgColor || bgUrl) && (<TaskCardCover />)}\r\n\r\n          {isArchive &&\r\n            <div className=\"task-details-archived flex\">\r\n              <i class=\"fas fa-archive icon-sm\"></i>\r\n              <h3>This card is archived.</h3>\r\n            </div>\r\n          }\r\n\r\n          <TaskHeader\r\n            taskTitle={currTaskDetails.title}\r\n            setTaksDetailsTitle={this.setTaksDetailsTitle}\r\n            taskList={board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))?.title || ''}\r\n          />\r\n          <div className=\"task-details-body flex\">\r\n            <div className=\"task-details-main flex column\">\r\n\r\n              <TaskHeaderDetails\r\n                toggleTaskDone={this.toggleTaskDone}\r\n              />\r\n\r\n              <TaskDescription\r\n                currTask={currTaskDetails}\r\n                updateTaskDetails={this.updateTaskDetails}\r\n              />\r\n              <TaskAttachment />\r\n              <TaskChecklist />\r\n              <TaskActivities\r\n                currTask={currTaskDetails}\r\n                loggedinUser={loggedinUser}\r\n                activities={board.activities}\r\n                updateTaskDetails={this.updateTaskDetails}\r\n              />\r\n            </div>\r\n            <TaskActionsMenu\r\n              joinTask={this.joinTask}\r\n              deleteTask={this.deleteTask}\r\n              toggleIsArchive={this.toggleIsArchive}\r\n              isArchive={isArchive}\r\n            />\r\n          </div>\r\n\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    loggedinUser: state.userModule.loggedinUser,\r\n    currTaskDetails: state.appModule.currTaskDetails\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  saveTaskDetails,\r\n  setCurrTaskDetails,\r\n  setPopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n  addActivity,\r\n  loadBoard\r\n};\r\n\r\nexport const TaskDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskDetails);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogin, onSignup } from \"../store/user.actions\";\r\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\r\nimport { GoogleLogin } from \"react-google-login\";\r\n\r\nfunction _LoginSignup(props) {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [fullname, setFullname] = useState(\"\");\r\n  const [isLogin, setIsLogin] = useState(true);\r\n\r\n  const CLIENT_ID =\r\n    \"1066940480428-m4n85h2lafgf2m7v5j7prda0tmigel93.apps.googleusercontent.com\";\r\n\r\n  const onSuccess = async (res) => {\r\n    console.log(\"success\");\r\n    const fullname = res.profileObj.name;\r\n    const username = `${res.profileObj.givenName} `;\r\n    const password = res.profileObj.googleId;\r\n    const imgUrl = res.profileObj.imageUrl;\r\n    isLogin\r\n      ? await props.onLogin({ username, password })\r\n      : await props.onSignup({ username, password, imgUrl, fullname });\r\n    props.history.push(\"/workspace/\");\r\n  };\r\n\r\n  const onFail = (response) => {\r\n    console.log(\"failed\");\r\n    console.dir(response);\r\n  };\r\n\r\n  const onSubmit = async (ev) => {\r\n    ev.preventDefault();\r\n    if (username.trim() && password.trim()) {\r\n      if (!isLogin) {\r\n         props.onSignup({ username, password, fullname, imgUrl: \"\" });\r\n        props.history.push(\"/workspace\");\r\n      } else {\r\n        props.onLogin({ username, password });\r\n        props.history.push(\"/workspace\");\r\n      }\r\n    }\r\n    // props.history.push(\"/workspace\");\r\n  };\r\n  return (\r\n    <div className=\"login-signup  flex column align-center\">\r\n      <div className=\"logo flex \">\r\n        <DashboardIcon className=\"logo-icon\" />\r\n        <h1>Trellex</h1>\r\n      </div>\r\n      <div className=\"login-container flex column\">\r\n        {isLogin ? <p>Log in to Trellex</p> : <p>Sign up</p>}\r\n        <form className=\"flex column\" onSubmit={onSubmit}>\r\n          <input\r\n            type=\"txt\"\r\n            value={username}\r\n            onChange={(ev) => setUsername(ev.target.value)}\r\n            placeholder=\"Enter Username\"\r\n          />\r\n          {!isLogin && (\r\n            <input\r\n              type=\"txt\"\r\n              value={fullname}\r\n              onChange={(ev) => setFullname(ev.target.value)}\r\n              placeholder=\"Enter Full Name\"\r\n            />\r\n          )}\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(ev) => setPassword(ev.target.value)}\r\n            placeholder=\"Enter Password\"\r\n          />\r\n          <button className=\"login-submit\">\r\n            {isLogin ? \"Log me in\" : \"Sign me up\"}\r\n          </button>\r\n          <GoogleLogin\r\n            clientId={CLIENT_ID}\r\n            buttonText={isLogin ? \"Login with Google \": \"Sign up with Google\"}\r\n            onSuccess={onSuccess}\r\n            onFailure={onFail}\r\n            cookiePolicy={\"single_host_origin\"}\r\n          />\r\n        </form>\r\n\r\n        <p onClick={() => setIsLogin(!isLogin)}>\r\n          {isLogin ? \"Or sign up...\" : \"Back to Login\"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  onLogin,\r\n  onSignup,\r\n};\r\nexport const LoginSignup = connect(null, mapDispatchToProps)(_LoginSignup);\r\n","import React from 'react';\nimport { Doughnut } from 'react-chartjs-2';\nimport { Bar } from 'react-chartjs-2';\n\nexport function BarChart({ board }) {\n    const { members } = board\n    const taskPerMember = {}\n    members.forEach(member => {\n        taskPerMember[member.fullname] = 0\n    })\n\n    for (let i = 0; i < members.length; i++) {\n        board.groups.forEach(group => {\n            group.tasks.forEach(task => {\n                if (!task.members || !task.members.length) return\n                task.members.forEach(currMember => {\n                    if (currMember.fullname === members[i].fullname) taskPerMember[currMember.fullname]++\n                })\n            })\n        })\n    }\n\n    const data = {\n        labels: Object.keys(taskPerMember),\n        datasets: [\n            {\n                label: 'Tasks per member',\n                data: Object.values(taskPerMember),\n                backgroundColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)',\n                    'rgba(75, 192, 192, 1)',\n                    'rgba(153, 102, 255, 1)',\n                    'rgba(255, 159, 64, 1)',\n                ],\n                borderColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)',\n                    'rgba(75, 192, 192, 1)',\n                    'rgba(153, 102, 255, 1)',\n                    'rgba(255, 159, 64, 1)',\n                ],\n                borderWidth: 1,\n\n            },\n        ],\n    };\n\n    const options = {\n        scales: {\n            x: {\n              ticks: {\n                color: \"white\",\n                font: {\n                  family: \"Segoe UI\",\n                  size: 15,\n                },\n              },\n            },\n            y: {\n              ticks: {\n                color: \"white\",\n                font: {\n                  family: \"Segoe UI\",\n                  size: 15,\n                },\n              },\n            },\n          },\n        elements: {\n            bar: {\n                borderWidth: 2,\n            },\n        },\n        responsive: true,\n        plugins: {\n            title: {\n                display: true,\n                text: \"Tasks per member\",\n                color: 'rgba(255, 255, 255, 0.897)',\n                font: {\n                    size: '30',\n                    family: 'Segoe UI'\n                }\n            },\n            datalabels: {\n                anchor: \"end\",\n                align: \"end\",\n                offset: -2,\n                color: \"#000000\",\n                font: { size: 12 }\n            },\n            legend: {\n\n                display:false\n\n            }\n        },\n        maintainAspectRatio: false,\n    };\n\n    return (\n        <Bar data={data} options={options} width={250} height={450} />\n    )\n       \n}","import React from 'react';\r\nimport { Doughnut } from 'react-chartjs-2';\r\n\r\nexport function DoughnutChart({ board }) {\r\n\r\n    const calcTasksByLabel = () => {\r\n        const labelIds = board.labels.map(label => label.id);\r\n        const labelCounts = [];\r\n\r\n        for (let i = 0; i < labelIds.length; i++) {\r\n            labelCounts.push(0);\r\n        }\r\n\r\n        for (let i = 0; i < board.groups.length; i++) {\r\n            for (let j = 0; j < board.groups[i].tasks.length; j++) {\r\n                for (let k = 0; k < board.groups[i].tasks[j].labelIds.length; k++) {\r\n                    if (labelIds.includes(board.groups[i].tasks[j].labelIds[k])) {\r\n                        labelCounts[labelIds.indexOf(board.groups[i].tasks[j].labelIds[k])]++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return labelCounts;\r\n    }\r\n\r\n\r\n\r\n    const labelsData = {\r\n        labels: board.labels.map(label => label.title),\r\n        datasets: [\r\n            {\r\n                label: '# of labels',\r\n                data: calcTasksByLabel(),\r\n                backgroundColor: [\r\n                    ...board.labels.map(label => label.color),\r\n                ],\r\n                borderColor: [\r\n                    ...board.labels.map(label => label.color),\r\n                ],\r\n                borderWidth: 3,\r\n            },\r\n        ],\r\n    };\r\n    const options = {\r\n\r\n        responsive: true,\r\n        plugins: {\r\n            title: {\r\n                display: true,\r\n                text: \"Tasks by labels\",\r\n                color: 'rgba(255, 255, 255, 0.897)',\r\n                font: {\r\n                    size: '30',\r\n                    family: 'Segoe UI'\r\n                }\r\n            },\r\n            legend: {\r\n                labels: {\r\n                    color: 'rgba(255, 255, 255, 0.897)',\r\n                    boxWidth: 14,\r\n                    boxHeight:14,\r\n                    // This more specific font property overrides the global property\r\n                    font: {\r\n                        size: 14,\r\n                        family: 'Segoe UI'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        maintainAspectRatio: false,\r\n\r\n    };\r\n\r\n    return (\r\n        <Doughnut\r\n            data={labelsData}\r\n            width={350}\r\n            height={350}\r\n            options={options} />\r\n    )\r\n}","import React from \"react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\n\r\nexport const ActivityChart = ({ membersActivity }) => {\r\n  const data = {\r\n    labels: [...Object.keys(membersActivity)],\r\n    datasets: [\r\n      {\r\n        label: \"Amount\",\r\n        data: [...Object.values(membersActivity)],\r\n        backgroundColor: [\"#c277e0\", \"#61bd4f\", \"#ff9e1a\", \"#334563\"],\r\n        borderColor: [\"#c277e0\", \"darkgreen\", \"#ff9e1a\", \"#334563\"],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options1 = {\r\n    indexAxis: \"x\",\r\n    elements: {\r\n      bar: {\r\n        borderWidth: 2,\r\n      },\r\n    },\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: \"Member activity\",\r\n        color: \"rgba(255, 255, 255, 0.897)\",\r\n        font: {\r\n          size: \"30\",\r\n          family: \"Segoe UI\",\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        ticks: {\r\n          color: \"rgba(255, 255, 255, 0.897)\",\r\n          font: {\r\n            family: \"Segoe UI\",\r\n            size: 15,\r\n          },\r\n        },\r\n      },\r\n      y: {\r\n        ticks: {\r\n          color: \"rgba(255, 255, 255, 0.897)\",\r\n          font: {\r\n            family: \"Segoe UI\",\r\n            size: 15,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      color: \"rgba(255, 255, 255, 0.897)\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"chart-activity\">\r\n      <Bar data={data} options={options1}   height={280}/>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Close } from \"@mui/icons-material\";\nimport { loadBoard } from \"../../store/board.actions\";\nimport { BarChart } from \"./BarChart\";\nimport { DoughnutChart } from \"./DoughnutChart\";\nimport { ActivityChart } from \"./ActivityChart\";\nimport { LoaderSpinner } from \"../LoaderSpinner\";\nimport PeopleIcon from \"@mui/icons-material/People\";\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\nimport ListAltIcon from '@mui/icons-material/ListAlt';\n\nexport function _Dashboard(props) {\n  const onBack = () => {\n    props.history.goBack();\n  };\n\n  useEffect(() => {\n    if (!props?.board) {\n      const { boardId } = props.match.params;\n      props.loadBoard(boardId);\n    }\n  }, [props]);\n  const { board } = props;\n\n  const getTaskDetails = () => {\n    if (!props.board) return;\n    let tasks = 0;\n    let archivedTasks = 0;\n    let overDueTasks = 0;\n    let doneTasks = 0;\n    let checklists = 0;\n    let doneChecklists = 0;\n    let todos = 0;\n    let doneTodos = 0;\n    let membersActivity = {};\n\n    if (board.groups.length) {\n      board?.activities.forEach((activity) => {\n        if(activity.byMember){\n          membersActivity[activity.byMember?.fullname] = membersActivity[\n            activity.byMember.fullname\n          ]\n            ? membersActivity[activity.byMember.fullname] + 1\n            : 1;\n        }\n      });\n      board.groups.forEach((group) => {\n        group?.tasks.forEach((task) => {\n          if (task.checklists) {\n            checklists += task.checklists.length;\n            task.checklists.forEach((checklist) => {\n              let inTodos = checklist.todos.length;\n              let inDoneTodos = 0;\n              todos += checklist.todos.length;\n              checklist.todos.forEach((todo) => {\n                if (todo.isDone) {\n                  doneTodos++;\n                  inDoneTodos++;\n                }\n              });\n              if (inTodos === inDoneTodos) doneChecklists++;\n            });\n          }\n          task.isArchive ? (archivedTasks += 1) : (tasks += 1);\n          doneTasks += task?.isDone ? 1 : 0;\n          overDueTasks += task?.dueDate < Date.now() && !task.isDone ? 1 : 0;\n        });\n      });\n    }\n    return {\n      tasks,\n      archivedTasks,\n      overDueTasks,\n      doneTasks,\n      checklists,\n      doneChecklists,\n      todos,\n      doneTodos,\n      membersActivity,\n    };\n  };\n\n  const taskDetails = getTaskDetails(props);\n  if (!props.board)\n    return (\n      <section className=\"dashboard-overlay flex column \">\n        <LoaderSpinner />\n      </section>\n    );\n  return (\n    <section className=\"dashboard-overlay flex column fade-in\">\n      <button onClick={onBack} class=\"close-btn clean-btn\">\n        <Close />\n      </button>\n      <div className=\"dashboard-container flex column \">\n        <div className=\"header flex column justify-center align-center\">\n          <h1 className=\"dash-title\">{board.title}</h1>\n          <p className=\"date\">\n            Created at {new Date(board.createdAt).toLocaleString()}\n          </p>\n        </div>\n        <div className=\"info-container flex align-center\">\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{board.members?.length}</p>\n              <p className=\"below-num\">\n                <PeopleIcon className=\"icon\" />\n                Members\n              </p>\n            </div>\n          </div>\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{taskDetails.tasks}</p>\n              <p className=\"below-num\">\n                <DashboardIcon className=\"icon\" />\n                Tasks\n              </p>\n            </div>\n            <div className=\"flex column details\">\n              <p className=\"green\">{taskDetails.doneTasks} Completed</p>\n              <p className=\"red\">{taskDetails.overDueTasks} Overdue </p>\n              <p className=\"yellow\">{taskDetails.archivedTasks} Archived </p>\n            </div>\n          </div>\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{taskDetails.checklists}</p>\n              <p className=\"below-num\"><ListAltIcon className=\"icon\"/>{`Checklist${taskDetails.checklists !== 1 ? \"s\" : \"\"}`}</p>\n            </div>\n            <div className=\"flex column details\">\n              <p className=\"green\">{taskDetails.doneChecklists} Completed</p>\n              <p className=\"yellow\">{taskDetails.todos} Todos </p>\n              <p className=\"red\">\n                {taskDetails.todos - taskDetails.doneTodos} Unresolved todos{\" \"}\n              </p>\n            </div>\n          </div>\n        </div>\n        <div className=\"chart-container flex \">\n          <div className=\"chart flex align-center\">\n            <DoughnutChart board={board} />\n          </div>\n          <div className=\"chart flex align-center\">\n            <ActivityChart membersActivity={taskDetails.membersActivity} />\n          </div>\n          <div className=\"chart flex align-center\">\n            <BarChart board={board} />\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    board: state.boardModule.board,\n  };\n}\nconst mapDispatchToProps = {\n  loadBoard,\n};\nexport const Dashboard = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(_Dashboard);\n","import { Homepage } from './pages/Homepage'\r\nimport { Workspace } from './pages/Workspace'\r\nimport { BoardApp } from './pages/BoardApp'\r\nimport { TaskDetails } from './pages/TaskDetails'\r\nimport { LoginSignup } from './pages/LoginSignup'\r\nimport { Dashboard } from './cmps/Dashboard/Dashboard'\r\n\r\n\r\nconst routes = [\r\n    {\r\n        path: '/workspace',\r\n        component: Workspace,\r\n        label: 'Workspace',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/board/:boardId',\r\n        component: BoardApp,\r\n        label: 'Board'\r\n    },\r\n    {\r\n        path: '/board/:boardId/dashboard',\r\n        component: Dashboard,\r\n        label: 'Board',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/board/:boardId/:listId/:taskId',\r\n        component: TaskDetails,\r\n        label: 'Task Details'\r\n    },\r\n    {\r\n        path: '/board/',\r\n        component: BoardApp,\r\n        label: 'Board',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/login',\r\n        component: LoginSignup,\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/',\r\n        component: Homepage,\r\n        label: 'Home 🏠',\r\n        isExact: true\r\n\r\n    },\r\n\r\n]\r\n\r\nexport default routes;","import React, { useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { MemberList } from \"../cmps/MemberList\";\r\nimport { BoardPreviewAdd } from \"./Workspace/BoardPreviewAdd\";\r\nimport { addBoard } from \"../store/board.actions\";\r\nimport HomeOutlinedIcon from \"@mui/icons-material/HomeOutlined\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\r\nimport NotificationsNoneIcon from \"@mui/icons-material/NotificationsNone\";\r\nimport {\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n} from \"../store/app.actions\";\r\n\r\nfunction _AppHeader(props) {\r\n  const [isCreateShown, setCreateShown] = useState(false);\r\n  const onAddBoard = async (title, bgClr, bgImg) => {\r\n    const board = await props.addBoard(title, bgClr, bgImg);\r\n    setCreateShown(false);\r\n    props.history.push(`/board/${board._id}`);\r\n  };\r\n\r\n  const getNotifyCount = () => {\r\n    if (!props.userNotifications) return 0\r\n    const notifyCount = props.userNotifications.reduce((acc, notify) => {\r\n      if (notify.isNotRead) acc++\r\n      return acc;\r\n    }, 0)\r\n    return notifyCount\r\n  };\r\n  const isOnBoard = props.location.pathname.includes(\"board\");\r\n  return (\r\n    <>\r\n      <header\r\n        className={`main-header flex align-center ${isOnBoard ? \"on-board\" : \"\"\r\n          }`}\r\n      >\r\n        <div className=\"header-btn-container flex\">\r\n          <Link to=\"/\" className=\"header-btn\">\r\n            <HomeOutlinedIcon />\r\n          </Link>\r\n          <Link to=\"/workspace\" className=\"header-btn boards\">\r\n            <DashboardIcon className=\"icon\" />\r\n            Boards\r\n          </Link>\r\n        </div>\r\n        <Link to=\"/\" className=\"clean-link\">\r\n          <div className=\"logo\">\r\n            <DashboardIcon className=\"logo-icon\" />\r\n            <h1>Trellex</h1>\r\n          </div>\r\n        </Link>\r\n        {props.user ? (\r\n          <div className=\"header-btn-container flex\">\r\n            <button\r\n              className=\"header-btn\"\r\n              onClick={() => setCreateShown(!isCreateShown)}\r\n            >\r\n              <AddIcon className=\"icon\" />\r\n            </button>\r\n\r\n            <button\r\n              className=\"header-btn notify-btn\"\r\n              style={{\r\n                opacity: isOnBoard ? 1 : 0.4,\r\n                pointerEvents: isOnBoard ? 'auto' : 'none',\r\n              }}\r\n              onClick={(event) => {\r\n                if (!isOnBoard) return\r\n                props.setPosition({\r\n\r\n                  pos: { pageX: event.pageX, pageY: event.pageY },\r\n                  type: \"NOTIFICATION\",\r\n                });\r\n                props.setPopoverMenu(true);\r\n                props.togglePopover();\r\n              }}\r\n            >\r\n              <NotificationsNoneIcon className=\"icon\" />\r\n              {/* {props.userNotifications && props.userNotifications.length > 0 &&\r\n                <div className=\"notify-count\">{props.userNotifications ? getNotifyCount() : 0}</div>\r\n              } */}\r\n\r\n            </button>\r\n            <MemberList members={[props.user]} isInHeader={true} />\r\n          </div>\r\n        ) : (\r\n          <div className=\"header-btn-container flex login\">\r\n            <Link className=\"clean-link\" to=\"/login\">\r\n              <button className=\"header-btn boards\">Login</button>\r\n            </Link>\r\n          </div>\r\n        )}\r\n        <div\r\n          className={`overlay ${isCreateShown ? \"show\" : \"\"}`}\r\n          onClick={() => setCreateShown(false)}\r\n        ></div>\r\n      </header>\r\n      {isCreateShown && (\r\n        <BoardPreviewAdd\r\n          boardMode=\"true\"\r\n          setCreateShown={setCreateShown}\r\n          onAdd={onAddBoard}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.loggedinUser,\r\n    boards: state.boardModule.boards,\r\n    userNotifications: state.userModule.userNotifications,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  addBoard,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n};\r\n\r\nexport const AppHeader = withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(_AppHeader)\r\n);\r\n","import React from 'react'\nimport EditIcon from '@material-ui/icons/Edit';\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport function PopoverLabelPreview({ label, labelsId, toggleLabelCheck, toggleIsEditCreate, setLabelEdit, isFilter, isLabelFilterSelected }) {\n    return (\n        <>\n            {(!isFilter) ?\n                <li className=\"flex\" key={label.id} onClick={() => { toggleLabelCheck(label.id) }}>\n                    <div className=\"label-popover-preview flex\" style={{ backgroundColor: label.color }}>\n                        <span>{label.title}</span>\n                        {labelsId.length > 0 && labelsId.includes(label.id) &&\n                            <span style={{ lineHeight: '1rem' }}>\n                                <CheckIcon style={{ width: '16px', height: '16px' }} />\n                            </span>\n                        }\n                    </div>\n                    <div className=\"flex align-center justify-center\">\n                        <EditIcon style={{ width: '16px', height: '16px', color: '#42526e' }}\n                            onClick={(event) => { event.stopPropagation(); toggleIsEditCreate(); setLabelEdit(label) }} />\n                    </div>\n                </li >\n                :\n                <li className=\"flex\" key={label.id} onClick={() => { toggleLabelCheck(label.id) }}>\n                    <div className=\"label-popover-preview flex\" style={{ backgroundColor: label.color }}>\n                        <span>{label.title}</span>\n                        {labelsId.length > 0 && labelsId.includes(label.id) &&\n                            <span style={{ lineHeight: '1rem' }}>\n                                <CheckIcon style={{ width: '16px', height: '16px' }} />\n                            </span>\n                        }\n                    </div>\n                </li>\n            }\n        </>\n    )\n}\n\n","import React from 'react'\nimport { PopoverLabelPreview } from './PopoverLabelPreview'\n\nexport function PopoverLabelsListPreview({ labelIds, labels, handleChange, toggleIsCreate, toggleLabelCheck, search, setLabelEdit, toggleIsEditCreate }) {\n    return (\n        <div className=\"popover-labels\">\n            <input type=\"search\" placeholder=\"Search Labels\" onChange={handleChange} value={search} />\n            <h4>LABELS</h4>\n            <ul className=\"clean-list\">\n                {labels && labels.length > 0 && labels.filter(label => label.title.toLowerCase().includes(search.toLowerCase()))\n                    .map(label =>\n                        <PopoverLabelPreview\n                            key={label.id}\n                            label={label}\n                            labelsId={labelIds}\n                            toggleLabelCheck={toggleLabelCheck}\n                            toggleIsEditCreate={toggleIsEditCreate}\n                            setLabelEdit={setLabelEdit}\n                            toggleIsCreate={toggleIsCreate}\n\n                        />\n                    )}\n            </ul>\n            <button className=\"secondary-btn\" onClick={toggleIsEditCreate}>Create a new label</button>\n        </div>\n    )\n}\n\n","import CheckIcon from '@material-ui/icons/Check';\nimport React, { useState } from 'react';\nimport { boardService } from '../services/board.service';\n\nexport class ColorPalette extends React.Component {\n\n    state = {\n        photos: null,\n\n    }\n    colors = [\n        '#61bd4f',\n        '#f2d600',\n        '#ff9e1a',\n        '#eb5a46',\n        '#c277e0',\n        '#0279bf',\n        '#52e898',\n        '#ff78cb',\n        '#334563',\n        '#b3bac5',\n    ]\n\n    gradients = [\n        \"linear-gradient(to bottom, #000000, #434343)\",\n        \"linear-gradient(to right, #2980b9, #2c3e50)\",\n        \"linear-gradient(to right, #3494e6, #ec6ead)\",\n        \"linear-gradient(to left, #2f7336, #aa3a38)\",\n        \"linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)\",\n        \"linear-gradient(to bottom, #e52d27, #b31217)\",\n    ]\n\n    async componentDidMount() {\n        const photos = await boardService.queryPhotos();\n        this.setState(prevState => ({ ...prevState, photos }))\n    }\n\n    async componentDidUpdate(prevProps) {\n        if (prevProps.search !== this.props.search) {\n            console.log('%c  this.props.search.length:', 'color: #00000;background: #aaefe5;', this.props.search.length);\n            const photos = await boardService.queryPhotos(this.props.search);\n            this.setState(prevState => ({ ...prevState, photos }))\n        }\n    }\n\n\n    render() {\n        const { handleChange, selectedColor, isGradient, isImages, handleSearch, search } = this.props\n        const { photos } = this.state\n        return <div className=\"color-palette\">\n            {!isImages &&\n                this.colors.map(colorCode => {\n                    return <label key={colorCode} className=\"flex align-center justify-center\" style={{ background: colorCode }} name=\"label-color\" htmlFor={`color-${colorCode}`}>\n                        <input type=\"radio\" name=\"color\" id={`color-${colorCode}`} value={colorCode} onClick={handleChange} />\n                        {selectedColor === colorCode && <CheckIcon key={colorCode} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n            {\n                isGradient && !isImages &&\n                this.gradients.map(gradient => {\n                    return <label key={gradient} className=\"flex align-center justify-center\" style={{ background: gradient }} name=\"label-color\" htmlFor={`gradient-${gradient}`}>\n                        <input type=\"radio\" name=\"color\" id={`gradient-${gradient}`} value={gradient} onClick={handleChange} />\n                        {selectedColor === gradient && <CheckIcon key={gradient} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n            {\n                isImages && photos && photos.map((photo, idx) => {\n                    return <label key={idx} className=\"flex align-center justify-center\" style={{ width: '155px', height: '110px', backgroundImage: `url(${photo.urls.regular}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }} name=\"label-color\" htmlFor={`photo-${idx}`}>\n                        <input type=\"radio\" name=\"color\" id={`photo-${idx}`} value={photo.urls.full} onClick={handleChange} />\n                        {selectedColor === photo.url && <CheckIcon key={idx} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n\n        </div >\n    }\n}","import { Component } from \"react\";\nimport { ColorPalette } from \"../ColorPalette\";\nexport class PopoverLabelCreateEdit extends Component {\n    state = {\n        title: '',\n        color: ''\n    }\n\n    componentDidMount() {\n        const { label } = this.props\n        this.setState({\n            title: label?.title || '',\n            color: label?.color || '',\n            id: label?.id || ''\n        })\n    }\n\n    componentWillUnmount() {\n        this.setState({\n            title: '',\n            color:  '',\n            id:  ''\n        })\n    }\n\n\n    handleChange = ({ target }) => {\n        const { name, value } = target\n        this.setState({ [name]: value })\n    }\n\n    onSubmitEditLabel = () => {\n        if (!this.state.title || !this.state.color) return\n        this.props.submitLabel({ ...this.state })\n    }\n\n    onSubmitCreate = () => {\n        if (!this.state.title || !this.state.color) return\n        this.props.submitCreateLabel({ ...this.state })\n    }\n\n    onRemoveLabel = () => {\n        this.props.removeLabel({ ...this.state })\n    }\n\n    render() {\n        const { title, color } = this.state\n        const { label } = this.props\n        return <>\n            <div className=\"label-add-content\">\n                <label htmlFor=\"label-input\">Name</label>\n                <input\n                    id=\"label-input\"\n                    type=\"text\"\n                    name=\"title\"\n                    value={title}\n                    onChange={this.handleChange}\n                    className=\"pop-over-input\"\n                />\n                <h4>Color</h4>\n                <ColorPalette handleChange={this.handleChange} selectedColor={color} />\n                <div className=\"flex space-between\">\n                    <button className=\"primary-btn\" onClick={this.onSubmitEditLabel} >\n                        {label && label.title ? 'Save' : 'Create'}\n                    </button>\n                    {label.title && <button className=\"danger-btn\" onClick={this.onRemoveLabel}>\n                        Delete\n                    </button>}\n                </div>\n            </div>\n        </>\n    }\n}","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { LoaderSpinner } from '../LoaderSpinner'\nimport { PopoverLabelsListPreview } from './PopoverLabelsListPreview'\nimport { PopoverLabelCreateEdit } from './PopoverLabelCreateEdit'\nimport { saveBoard, saveTaskDetails } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\nexport class _PopoverLabels extends Component {\n    state = {\n        search: '',\n        isEditCreate: false,\n        label: {\n            title: '',\n            color: '',\n        },\n        labels: null,\n        labelIds: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({\n            ...prevState,\n            labels: this.props.board.labels,\n            labelIds: this.props.currTaskDetails.labelIds,\n            currGroup\n        }))\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.isEditCreate) {\n            this.setState(prevState => ({ ...prevState, isEditCreate: false, label: { color: '', title: '' } }))\n        }\n    }\n\n\n    handleChange = (e) => {\n        this.setState(prevState => ({\n            ...prevState,\n            search: e.target.value\n        }))\n    }\n\n    toggleLabelCheck = async (labelId) => {\n        const { currTaskDetails, board, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const updatedLabelsId = (currTaskDetails.labelIds.includes(labelId)) ?\n            currTaskDetails.labelIds.filter(currLabelId => currLabelId !== labelId) :\n            [...currTaskDetails.labelIds, labelId]\n        currTaskDetails.labelIds = updatedLabelsId\n        this.setState(prevState => ({ ...prevState, labelIds: updatedLabelsId }))\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    setLabelEdit = (label) => {\n        this.setState(prevState => ({ ...prevState, label }))\n    }\n\n    submitLabel = async (label) => {\n        const { board, saveBoard } = this.props\n        let labels;\n        if (label.id) {\n            labels = board.labels.map(currLabel => (currLabel.id === label.id) ? label : currLabel)\n        } else {\n            label.id = utilService.makeId()\n            labels = [...board.labels, label]\n        }\n        this.setState(prevState => ({ ...prevState, labels: labels }))\n        this.toggleIsEditCreate()\n        board.labels = labels\n        await saveBoard(board)\n    }\n\n    removeLabel = async (label) => {\n        const { board, saveBoard, currTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const labels = board.labels.filter(currLabel => currLabel.id !== label.id)\n        currTaskDetails.labelIds = currTaskDetails.labelIds.filter(currLabelId => currLabelId !== label.id)\n        this.setState(prevState => ({ ...prevState, labels: labels }))\n        this.toggleIsEditCreate()\n        board.labels = labels\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        await saveBoard(board)\n    }\n\n\n    toggleIsEditCreate = () => {\n        this.setState(prevState => ({ ...prevState, isEditCreate: !this.state.isEditCreate }))\n    }\n\n\n    render() {\n        const { currTaskDetails, title } = this.props\n        const { search, label, labels, isEditCreate, } = this.state\n        if (!currTaskDetails || !labels) return <></>\n        return (\n            <>\n                <Popover title={title} >\n                    {!isEditCreate &&\n                        <PopoverLabelsListPreview\n                            labels={labels}\n                            labelIds={currTaskDetails.labelIds}\n                            search={search}\n                            handleChange={this.handleChange}\n                            toggleLabelCheck={this.toggleLabelCheck}\n                            toggleIsEditCreate={this.toggleIsEditCreate}\n                            setLabelEdit={this.setLabelEdit}\n                        />\n                    }\n                    {isEditCreate && <PopoverLabelCreateEdit label={label} removeLabel={this.removeLabel} submitLabel={this.submitLabel} />}\n                </Popover >\n            </>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    setCurrTaskDetails\n};\n\nexport const PopoverLabels = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverLabels);\n","import React, { Component } from 'react'\nimport { PopoverMemberPreview } from './PopoverMemberPreview'\nimport { Popover } from './Popover'\nimport { connect } from 'react-redux'\nimport { saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\nexport class _PopoverMembers extends Component {\n    state = {\n        search: '',\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({\n            ...prevState,\n            currGroup,\n        }))\n    }\n\n    handleSearch = (e) => {\n        this.setState(prevState => ({\n            ...prevState,\n            search: e.target.value\n        }))\n    }\n\n    toggleMemberCheck = async (member) => {\n        const { board, currTaskDetails, addActivity, loggedinUser, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.members = currTaskDetails?.members || []\n        const selectedMembersIds = currTaskDetails.members.map(member => member._id) || []\n        const updatedMembers = (selectedMembersIds.includes(member._id)) ?\n            currTaskDetails.members.filter(currMember => currMember._id !== member._id) :\n            [...currTaskDetails.members, member]\n        currTaskDetails.members = updatedMembers\n        setCurrTaskDetails(currTaskDetails)\n        this.setState(prevState => ({ ...prevState, selectedMembers: updatedMembers, selectedMembersIds }))\n        if (member._id === loggedinUser._id) {\n            addActivity(board, currTaskDetails, (selectedMembersIds.includes(member._id)) ? 'remove-self' : 'add-self')\n        } else {\n            addActivity(board, currTaskDetails, (selectedMembersIds.includes(member._id)) ? 'remove-member' : 'add-member', member.fullname)\n        }\n        await this.props.saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    render() {\n        const { title, board, currTaskDetails } = this.props\n        const { search } = this.state\n\n        return (\n            <Popover title={title} >\n                <div className=\"members-popover\">\n                    <input type=\"search\" placeholder=\"Search members\" onChange={this.handleSearch} />\n                    <h4>BOARD MEMBERS</h4>\n\n                    <ul className=\"clean-list\">\n                        {board && board.members.length > 0 &&\n                            board.members.filter(member => member.fullname.toLowerCase().includes(search.toLowerCase()))\n                                .map((member, idx) => <PopoverMemberPreview\n                                    toggleMemberCheck={this.toggleMemberCheck}\n                                    member={member}\n                                    selectedMembersIds={currTaskDetails.members?.map(member => member._id) || []}\n                                    members={board.members}\n                                    key={idx}\n                                />)\n                        }\n                    </ul>\n                </div>\n            </Popover >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        popover: state.appModule.popover,\n        board: state.boardModule.board,\n        loggedinUser: state.userModule.loggedinUser,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverMembers = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverMembers);\n","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverChecklist extends Component {\n    state = {\n        txt: ''\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    handlechange = (ev) => {\n        const txt = ev.target.value\n        this.setState(prevState => ({ ...prevState, txt }))\n    }\n\n    clearState = () => {\n        this.setState(prevState => ({ ...prevState, txt: '' }))\n    }\n\n    onAddChecklist = async (ev) => {\n        ev.preventDefault()\n        const { board, saveTaskDetails, currTaskDetails, togglePopover, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n\n        if (!currTaskDetails.checklists) currTaskDetails.checklists = []\n        const newList = {\n            id: utilService.makeId(),\n            title: this.state.txt,\n            todos: []\n        }\n        currTaskDetails.checklists.push(newList)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.clearState()\n        togglePopover()\n        addActivity(board, currTaskDetails, 'add-checklist')\n    }\n\n    render() {\n        const { title } = this.props\n        const { txt } = this.state\n        return (\n            <div className=\"checklist-container\">\n                <Popover title={title} >\n                    <div>\n                        <form className=\"checklist-form\" onSubmit={this.onAddChecklist}>\n                            <label htmlFor=\"checklist\" className=\"pop-over-label\">Title</label>\n                            <input className=\"checklist-input\" id=\"checklist\" type=\"text\" value={txt} onChange={this.handlechange} placeholder=\"Enter a title...\" autoFocus />\n                            <button type=\"submit\" className=\"nch-button add-checklist-btn\">Add</button>\n                        </form>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverChecklist = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverChecklist);\n","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\n\nexport class _PopoverDate extends Component {\n    state = {\n        date: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const date = currTaskDetails.dueDate ? new Date(currTaskDetails.dueDate) : new Date()\n        this.setState(prevState => ({ ...prevState, date, currGroup }))\n    }\n\n    handleChange = (ev) => {\n        this.setState({ date: ev })\n    }\n\n    onSaveDueDate = async (date) => {\n        const { board, togglePopover, saveTaskDetails, currTaskDetails, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.dueDate = date ? Date.parse(date) : null;\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        togglePopover()\n        if (date) addActivity(board, currTaskDetails, 'set-date', this.dueDateFormat(currTaskDetails.dueDate))\n        else addActivity(board, currTaskDetails, 'remove-date')\n    }\n\n    dueDateFormat = (dueDate) => {\n        const currYear = new Date().getFullYear()\n        const dueYear = new Date(dueDate).getFullYear()\n        let strDate = ''\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { day: 'numeric' })} `\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { month: 'short' })} at `\n        if (dueYear !== currYear) {\n            strDate += `${dueYear} `\n        }\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { hour: 'numeric', minute: 'numeric', hour12: true }).toLocaleUpperCase()}`\n        return strDate\n    }\n\n    onRemoveDate = () => {\n        this.onSaveDueDate(null)\n    }\n\n    render() {\n        const { title } = this.props\n        const { date } = this.state\n        return (\n            <div className=\"date-picker-container\">\n                <Popover title={title} >\n                    <div>\n                        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                            <DatePicker\n                                autoOk\n                                variant=\"static\"\n                                value={date}\n                                openTo=\"date\"\n                                onChange={this.handleChange} />\n                        </MuiPickersUtilsProvider>\n                    </div>\n                    <div className=\"btn-container flex column\">\n                        <button className=\"primary-btn\" onClick={() => this.onSaveDueDate(date)} >Save</button>\n                        <button className=\"secondary-btn\" onClick={this.onRemoveDate}>Remove</button>\n                    </div>\n                </Popover >\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverDate = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverDate);\n\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\";\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { cloudinaryService } from '../../services/cloudinary-service'\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\n\nexport class _PopoverAttachment extends Component {\n    state = {\n        webUrlSrc: '',\n        webUrlName: ''\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    uploadFile = async (ev) => {\n        const { board, currTaskDetails, saveTaskDetails, togglePopover, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const { attachments } = currTaskDetails\n        const res = await cloudinaryService.uploadFile(ev)\n        const attach = { name: res.original_filename, id: res.asset_id, createdAt: Date.now(), url: res.secure_url }\n        currTaskDetails.attachments = (attachments) ? [...attachments, attach] : [attach]\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        togglePopover()\n    }\n\n    clearState = () => {\n        this.setState(prevState => ({ ...prevState, webUrlSrc: '', webUrlName: '' }))\n    }\n\n    handleChange = (ev) => {\n        const { value, name } = ev.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    onAttachmentClick = async () => {\n        const { webUrlSrc, webUrlName, currGroup } = this.state\n        const { board, currTaskDetails, saveTaskDetails, togglePopover, setCurrTaskDetails } = this.props\n        const { attachments } = currTaskDetails\n        if (webUrlSrc) {\n            const attach = {\n                id: utilService.makeId(),\n                name: (webUrlName) ? webUrlName : webUrlSrc,\n                url: (webUrlSrc.startsWith('http' || 'https')) ? webUrlSrc : 'https://' + webUrlSrc,\n                createdAt: Date.now(),\n                isWeb: true,\n            }\n            currTaskDetails.attachments = (attachments) ? [...attachments, attach] : [attach]\n            setCurrTaskDetails(currTaskDetails)\n            await saveTaskDetails(board, currGroup, currTaskDetails)\n            this.clearState()\n            togglePopover()\n        }\n    }\n\n    render() {\n        const { title } = this.props\n        const { webUrlSrc, webUrlName } = this.state\n        return (\n            <Popover title={title} >\n                <div className=\"attachment-container\">\n                    <div className=\"upload-preview\" >\n                        <label htmlFor=\"file-upload\">Computer</label>\n                        <input type=\"file\" onChange={this.uploadFile} accept=\"img/*\" id=\"file-upload\" />\n                    </div>\n                    <label htmlFor=\"url-upload\">Attach a link</label>\n                    <input type=\"text\" id=\"url-upload\" placeholder=\"Enter link url\" value={webUrlSrc} name='webUrlSrc' onChange={this.handleChange} />\n                    {webUrlSrc &&\n                        <>\n                            <label htmlFor=\"url-name-optional\">Link name (optional)</label>\n                            <input\n                                type=\"text\"\n                                id=\"url-name-optional\"\n                                name=\"webUrlName\"\n                                value={webUrlName}\n                                placeholder=\"Enter link name\"\n                                onChange={this.handleChange}\n                            />\n                        </>\n                    }\n                    <button class=\"primary-btn\" onClick={this.onAttachmentClick}>Attach</button>\n                </div>\n            </Popover >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverAttachment = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverAttachment);\n\n\n","import React from 'react'\nimport { ColorPalette } from '../ColorPalette'\nimport { cloudinaryService } from '../../services/cloudinary-service'\nimport { Popover } from './Popover'\nimport { connect } from 'react-redux'\nimport { saveTaskDetails } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverCover extends React.Component {\n    state = {\n        isHeaderSelected: null,\n        isFullSelected: false,\n        selectedColor: false,\n        selectedPhoto: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        if (!currTaskDetails.style) {\n            currTaskDetails.style = {\n                coverMode: '',\n                bgColor: null,\n                bgUrl: null\n            }\n        }\n        switch (currTaskDetails.style.coverMode) {\n            case 'header':\n                this.setState(prevState => ({\n                    ...prevState,\n                    isHeaderSelected: true,\n                    selectedColor: currTaskDetails.style?.bgColor || 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n\n                }))\n                break;\n            case 'full':\n                this.setState(prevState => ({\n                    ...prevState,\n                    isFullSelected: true,\n                    selectedColor: currTaskDetails.style?.bgColor || 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n                }))\n                break;\n            default:\n                this.setState(prevState => ({\n                    ...prevState,\n                    selectedColor: 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n                }\n                ))\n                break;\n        }\n    }\n\n    setHeaderSelected = async () => {\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isHeaderSelected: true,\n            isFullSelected: false,\n        }))\n        currTaskDetails.style.coverMode = 'header'\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n\n    }\n\n    setFullSelected = async () => {\n        const { currTaskDetails, board, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isFullSelected: true,\n            isHeaderSelected: false,\n        }))\n        currTaskDetails.style.coverMode = 'full'\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeCover = async () => {\n        const { saveTaskDetails, currTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isFullSelected: false,\n            isHeaderSelected: false,\n        }))\n        currTaskDetails.style.coverMode = null\n        currTaskDetails.style.bgColor = null\n        currTaskDetails.style.bgUrl = null\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n\n    }\n\n    uploadFile = async (ev) => {\n        ev.preventDefault()\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const res = await cloudinaryService.uploadFile(ev)\n        currTaskDetails.style.bgUrl = res.secure_url\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeFile = async (attachId) => {\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const { attachments } = currTaskDetails\n        const attachs = attachments.filter(currAttach => currAttach.id !== attachId)\n        currTaskDetails.attachments = attachs\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    handleChange = async (event) => {\n        const { saveTaskDetails, currTaskDetails, board, setCurrTaskDetails } = this.props\n        const { isFullSelected, isHeaderSelected, currGroup } = this.state\n        const { value } = event.target\n        if (!isFullSelected && !isHeaderSelected) {\n            this.setState(prevState => ({\n                ...prevState,\n                isHeaderSelected: true,\n                selectedColor: value\n            }))\n            currTaskDetails.style.coverMode = 'header'\n        }\n        else {\n            this.setState(prevState => ({\n                ...prevState,\n                selectedColor: value\n            }))\n        }\n        currTaskDetails.style.bgColor = value\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    render() {\n        const { isHeaderSelected, isFullSelected, selectedColor, selectedPhoto } = this.state\n        const { title, currTaskDetails } = this.props\n        const { bgColor, bgUrl } = currTaskDetails.style\n        return (\n            <Popover title={title} >\n                <div className=\"cover-popover\" >\n                    <h4>SIZE</h4>\n                    <div className=\"cover-options flex space-between align-center\">\n                        <div className={`header-cover-preview ${isHeaderSelected ? 'selected' : ''}`} onClick={() => { this.setHeaderSelected() }}>\n                            {(bgUrl) ?\n                                <>\n                                    <div className=\"header-section\" style={{ backgroundImage: `url(${bgUrl}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }}></div>\n                                    <div style={{ padding: '6px 4px 4px 6px', position: 'relative' }}>\n                                        <div className=\"line\" style={{ width: '122px' }}></div>\n                                        <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                        <div className=\"dot\"></div>\n\n                                    </div>\n                                </>\n                                :\n                                <>\n                                    <div className=\"header-section\" style={{ backgroundColor: bgColor }}>\n                                    </div>\n                                    <div style={{ padding: '6px 4px 4px 6px', position: 'relative' }}>\n                                        <div className=\"line\" style={{ width: '122px' }}></div>\n                                        <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                        <div className=\"dot\"></div>\n                                    </div>\n                                </>\n                            }\n                        </div>\n\n                        {(bgUrl) ?\n                            <div onClick={() => this.setFullSelected()} className={`full-cover-preview ${isFullSelected ? 'selected' : ''}`} style={{ display: 'flex', backgroundImage: `url(${bgUrl}`, backgroundSize: 'contain' }}>\n                                <div style={{ padding: '6px 4px 4px 6px', position: 'relative', alignSelf: 'flex-end' }}>\n                                    <div className=\"line\" style={{ width: '122px' }}></div>\n                                    <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                </div>\n                            </div>\n                            :\n                            <div onClick={() => this.setFullSelected()} className={`full-cover-preview ${isFullSelected ? 'selected' : ''}`} style={{ backgroundColor: bgColor, display: 'flex' }}>\n                                <div style={{ padding: '6px 4px 4px 6px', position: 'relative', alignSelf: 'flex-end' }}>\n                                    <div className=\"line\" style={{ width: '122px' }}></div>\n                                    <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                </div>\n                            </div>\n                        }\n\n                    </div>\n                    <div className=\"flex\">\n                        <button className=\"secondary-btn full\" onClick={this.removeCover}>Remove Cover</button>\n                    </div>\n                    <h4>COLOR</h4>\n                    <ColorPalette handleChange={this.handleChange} selectedColor={bgColor} />\n                    <h4>ATTACHMENT</h4>\n                    <div className=\"upload-preview\">\n                        <label className=\"secondary-btn\" htmlFor=\"file-upload\">Upload a cover image</label>\n                        <input type=\"file\" onChange={this.uploadFile} accept=\"img/*\" id=\"file-upload\" />\n                    </div>\n                </div>\n            </Popover >\n        )\n\n    }\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    setCurrTaskDetails\n};\n\nexport const PopoverCover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverCover);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport { setCurrTaskDetails } from '../../store/app.actions'\nimport { saveBoard } from '../../store/board.actions'\nexport class _PopoverMoveCopy extends Component {\n    state = {\n        selectedGroup: null,\n        selectedBoard: null,\n        selectedPosition: null,\n        taskTitle: ''\n\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const task = currGroup.tasks.find(task => currTaskDetails.id === task.id)\n        const selectedPosition = currGroup.tasks.indexOf(task)\n        this.setState(prevState => ({\n            ...prevState,\n            selectedBoard: board,\n            selectedGroup: currGroup,\n            selectedPosition,\n            taskTitle: currTaskDetails.title,\n            currGroup\n        }))\n    }\n\n    handleChange = (e) => {\n        const { value, name } = e.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    handleBoardChange = (e) => {\n        const { value } = e.target\n        const { boards } = this.props\n        const selectedBoard = boards.find(board => board._id === value)\n        this.setState(prevState => ({ ...prevState, selectedBoard }))\n    }\n\n    handleGroupChange = (e) => {\n        const { value } = e.target\n        const { selectedBoard } = this.state\n        const selectedGroup = selectedBoard.groups.find(group => group.id === value)\n        this.setState(prevState => ({ ...prevState, selectedGroup }))\n    }\n\n\n    submitMoveSameBoard = async () => {\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle, currGroup } = this.state\n        const { currTaskDetails, saveBoard, isCopy } = this.props\n        const fromGroup = selectedBoard.groups.find(group => group.id === currGroup.id)\n        const fromGroupIdx = selectedBoard.groups.indexOf(fromGroup)\n        const fromTask = selectedBoard.groups[fromGroupIdx].tasks.find(task => task.id === currTaskDetails.id)\n        const fromTaskIdx = selectedBoard.groups[fromGroupIdx].tasks.indexOf(fromTask)\n        const task = (isCopy) ? { ...currTaskDetails, id: utilService.makeId(), title: taskTitle } :\n            selectedBoard.groups[fromGroupIdx].tasks.splice(fromTaskIdx, 1)\n        const toGroupIdx = selectedBoard.groups.indexOf(selectedGroup)\n        selectedBoard.groups[toGroupIdx].tasks.splice(selectedPosition, 0, isCopy ? task : task[0])\n        this.setState(prevState => ({ ...prevState, currGroup: selectedGroup }))\n        await saveBoard(selectedBoard);\n    }\n\n    submitMoveAnotherBoard = async () => {\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle, currGroup } = this.state\n        const { currTaskDetails, saveBoard, board, boards, isCopy } = this.props\n        const currBoard = boards.find(currBoard => currBoard._id === board._id)\n        const fromBoardIdx = boards.indexOf(currBoard)\n        const fromGroup = boards[fromBoardIdx].groups.find(group => group.id === currGroup.id)\n        const fromGroupIdx = boards[fromBoardIdx].groups.indexOf(fromGroup)\n        const fromTask = boards[fromBoardIdx].groups[fromGroupIdx].tasks.find(task => task.id === currTaskDetails.id)\n        const fromTaskIdx = boards[fromBoardIdx].groups[fromGroupIdx].tasks.indexOf(fromTask)\n        const task = (isCopy) ? { ...currTaskDetails, id: utilService.makeId(), title: taskTitle } : boards[fromBoardIdx].groups[fromGroupIdx].tasks.splice(fromTaskIdx, 1)\n\n        const toBoardIdx = boards.indexOf(selectedBoard)\n        const toGroup = boards[toBoardIdx].groups.find(group => group.id === selectedGroup.id)\n        const toGroupIdx = boards[toBoardIdx].groups.indexOf(toGroup)\n        boards[toBoardIdx].groups[toGroupIdx].tasks.splice(selectedPosition, 0, isCopy ? task : task[0])\n\n        this.setState(prevState => ({ ...prevState, currGroup: selectedGroup, selectedBoard: boards[toBoardIdx] }))\n        await saveBoard(boards[fromBoardIdx])\n        await saveBoard(boards[toBoardIdx])\n\n\n    }\n\n    onSubmit = () => {\n        const { selectedBoard, selectedGroup, taskTitle } = this.state\n        const { board } = this.props\n        if (!selectedBoard || !selectedGroup || !taskTitle) return\n        if (board._id !== selectedBoard._id) this.submitMoveAnotherBoard()\n        else this.submitMoveSameBoard()\n    }\n\n    render() {\n        const { title, boards, isCopy } = this.props\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle } = this.state\n        if (!(selectedBoard)) return <></>\n        return (\n            <Popover title={title} >\n                <div className=\"popover-move-content\">\n                    {isCopy && <>\n                        <label>Title</label>\n                        <input type=\"text\" value={taskTitle} name=\"taskTitle\" onChange={this.handleChange} />\n                        <label>Copy to</label>\n                    </>}\n                    <div className=\"move-section flex wrap column\">\n                        <FormControl variant=\"filled\" className=\"choose-board clean-mui-arrow full\" >\n                            <InputLabel id=\"selectedBoard\">Board</InputLabel>\n                            <Select\n                                labelId=\"selectedBoard\"\n                                id=\"selectedBoard\"\n                                value={selectedBoard._id}\n                                name=\"selectedBoard\"\n                                inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                onChange={this.handleBoardChange}\n                            >\n                                {boards.map(board => <MenuItem value={board._id}>{board.title}</MenuItem>)}\n                            </Select>\n                        </FormControl>\n\n                        <div className=\"flex\">\n                            <FormControl variant=\"filled\" className=\"choose-list clean-mui-arrow full\" >\n                                <InputLabel id=\"selectedGroup\">List</InputLabel>\n                                <Select\n                                    name=\"selectedGroup\"\n                                    labelId=\"selectedGroup\"\n                                    id=\"selectedGroup\"\n                                    value={selectedGroup.id}\n                                    inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                    disableUnderline={true}\n                                    onChange={this.handleGroupChange}\n                                >\n                                    {selectedBoard.groups.map(group => <MenuItem value={group.id}>{group.title}</MenuItem>)}\n                                </Select>\n                            </FormControl>\n                            <FormControl variant=\"filled\" className=\"choose-position clean-mui-arrow \" >\n                                <InputLabel id=\"position-select\">Position</InputLabel>\n                                <Select\n                                    name=\"selectedPosition\"\n                                    labelId=\"position-select\"\n                                    id=\"position-select\"\n                                    value={selectedPosition}\n                                    inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                    disableUnderline={true}\n                                    onChange={this.handleChange}\n                                >\n                                    {(selectedGroup.tasks.length > 0) ?\n                                        Array.from(Array(selectedGroup.tasks.length + 1), (e, i) => <MenuItem value={i}>{i}</MenuItem>) :\n                                        <MenuItem value={0}>{0}</MenuItem>\n                                    }\n                                </Select>\n                            </FormControl>\n                        </div>\n                    </div>\n                    <button className=\"primary-btn\" onClick={this.onSubmit}>{!isCopy ? 'Move' : 'Create card'}</button>\n\n                </div>\n            </Popover >\n\n        )\n\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        boards: state.boardModule.boards,\n        currTaskDetails: state.appModule.currTaskDetails,\n    };\n}\nconst mapDispatchToProps = {\n    setCurrTaskDetails,\n    saveBoard,\n\n};\n\nexport const PopoverMoveCopy = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverMoveCopy);","import { Component } from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ActivitiesList } from \"../ActivitiesList\"\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport RestoreFromTrashIcon from '@mui/icons-material/RestoreFromTrash';\nimport { setPosition } from '../../store/app.actions'\nimport SearchIcon from '@mui/icons-material/Search';\n\n\n\nclass _PopoverMenu extends Component {\n    render() {\n        const { board } = this.props\n        const { title, setPosition } = this.props\n        if (!board) return <div></div>\n        const CommAndAct = board.activities\n        CommAndAct.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        const { bgClr, bgImg } = board.style\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <div className=\"menu-details \">\n                    <ul className=\"clean-list menu-list\">\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_BACKGROUND' }); }}>\n                            {(bgImg) ?\n                                <span className=\"menu-bg-span\" style={{ backgroundImage: `url(${bgImg}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }}></span> :\n                                <span className=\"menu-bg-span\" style={{ background: board.style.bgClr }}></span>\n                            }\n\n                            <span className=\"menu-title\">Change background</span>\n                        </li>\n\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_FILTER_CARDS' }); }}>\n                            <SearchIcon />\n                            <span className=\"menu-title\" >Search cards</span>\n                        </li>\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_ARCHIVE' }); }}>\n                            <RestoreFromTrashIcon />\n                            <span className=\"menu-title\" >Archive</span>\n                        </li>\n                    </ul>\n                    <div className=\"task-activities-header flex align-center\">\n                        <FormatListBulletedIcon />\n                        <h3 className=\"menu-activity\">Activity</h3>\n                    </div>\n                    <ActivitiesList CommAndAct={CommAndAct} isShowActivities={true} currTask={null} />\n\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n\n    }\n}\n\nconst mapDispatchToProps = {\n    setPosition,\n}\n\n\nexport const PopoverMenu = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenu)\n\n{/* <ActivitiesList CommAndAct={CommAndAct} isShowActivities={isShowActivities} currTask={currTask}/> */ }","import { Link } from \"react-router-dom\";\r\nimport { TaskLabels } from \"./TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskDetailsPreview\";\r\nimport { TaskDatePreview } from \"./TaskDatePreview\";\r\nimport { MemberList } from \"../MemberList\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\n\r\nexport function TaskMenuPreview({ task, groupId, boardLabels, taskUrl }) {\r\n  const {\r\n    style,\r\n    labelIds,\r\n    dueDate,\r\n    title,\r\n    description,\r\n    comments,\r\n    attachments,\r\n    checklists,\r\n    media\r\n  } = task;\r\n\r\n  const getChecklistData = (isDone) => {\r\n    let todos = 0;\r\n    let doneTodos = 0;\r\n    checklists.forEach((checklist) => {\r\n      todos += checklist.todos.length;\r\n      checklist.todos.forEach((todo) => {\r\n        if (todo.isDone) doneTodos += 1;\r\n      });\r\n    });\r\n    if (isDone) return todos === doneTodos;\r\n    return `${doneTodos}/${todos}`;\r\n  };\r\n\r\n  return (\r\n    <Link to={taskUrl} className=\"clean-link\">\r\n      <article\r\n        className=\"task-preview-container edit\"\r\n        style={{ borderRadius: 3, minWidth: 240 }}\r\n      >\r\n        {style?.bgUrl && (\r\n          <img\r\n            className=\"task-cover-img\"\r\n            src={style.bgUrl}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"3px\",\r\n              objectFit: \"contain\",\r\n              maxHeight: 240,\r\n            }}\r\n            alt=\"\"\r\n          />\r\n        )}\r\n\r\n        {style?.bgColor && !style?.bgUrl && (\r\n          <div\r\n            className=\"task-cover\"\r\n            style={{ background: task.style.bgColor }}\r\n          ></div>\r\n        )}\r\n\r\n        <div\r\n          className=\"task-preview clean-link \"\r\n          style={\r\n            style?.bgUrl && {\r\n              position: \"relative\",\r\n              top: \"-8px\",\r\n              marginBottom: \"-8px\",\r\n              borderRadius: \"0 0 3px 3px\",\r\n            }\r\n          }\r\n        >\r\n          {labelIds?.length > 0 && (\r\n            <TaskLabels labelIds={labelIds} boardLabels={boardLabels} />\r\n          )}\r\n          {media?.videoUrl && (\r\n            <div className=\"video flex\" onDrag={(ev) => ev.stopPropagation()}>\r\n              <video width={\"100%\"} controls>\r\n                <source src={task.media.videoUrl} type=\"video/mp4\" />\r\n              </video>\r\n            </div>\r\n          )}\r\n          {media?.audioUrl && (\r\n            <div className=\"audio\">\r\n              <audio controls src={task.media.audioUrl} />\r\n            </div>\r\n          )}\r\n          <p className=\"task-title\">{title}</p>\r\n          <div className=\"task-preview-icons flex align-center\">\r\n            {dueDate && (\r\n              <TaskDatePreview\r\n                dueDate={dueDate}\r\n                isDone={task.isDone}\r\n                taskId={task.id}\r\n                groupId={groupId}\r\n                noHover={true}\r\n              />\r\n            )}\r\n            {description?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<SubjectOutlinedIcon className=\"icon\" />}\r\n              />\r\n            )}\r\n            {comments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<ChatBubbleOutlineRoundedIcon className=\"icon msg\" />}\r\n                txt={comments.length}\r\n              />\r\n            )}\r\n            {attachments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<AttachFileIcon className=\"icon attach\" />}\r\n                txt={attachments.length}\r\n              />\r\n            )}\r\n            {checklists?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                txt={getChecklistData()}\r\n                isDone={getChecklistData(true)}\r\n              />\r\n            )}\r\n            {task?.members && (\r\n              <MemberList members={task.members} isInPreview={true} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </article>\r\n    </Link>\r\n  );\r\n}\r\n","import React, { Component } from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { TaskMenuPreview } from \"../TaskPreview/TaskMenuPreview\"\nimport { setPosition } from '../../store/app.actions'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\n\n\n\nclass _PopoverMenuArchive extends React.Component {\n\n\n    render() {\n        const { board, setPosition } = this.props\n        let tasks = board.groups.map(group => group.tasks).flat()\n        tasks = tasks.filter(task => task.isArchive)\n        return <div className=\"board-menu\">\n            <Popover title='Archive'>\n                <div class=\"pop-over-archive\">\n                    <span\n                        class=\"back\"\n                        onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                        <ArrowBackIosIcon />\n                    </span>\n                    <div class=\"card-preview-container\">\n                        {tasks.map(task => {\n                            const taskGroup = board.groups.find(group => group.tasks.some(currTask => currTask.id === task.id));\n                            return <TaskMenuPreview\n                                task={task}\n                                id={task.id}\n                                key={task.id}\n                                index={task.orgIdx}\n                                groupId={taskGroup.id}\n                                boardId={board._id}\n                                boardLabels={board.labels}\n                                taskUrl={`/board/${board._id}/${taskGroup.id}/${task.id}`}\n                            />\n                        })}\n                    </div>\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n\n    }\n}\nconst mapDispatchToProps = {\n    setPosition\n};\n\nexport const PopoverMenuArchive = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuArchive)\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ColorPalette } from '../ColorPalette'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport { setPosition } from '../../store/app.actions'\nimport { saveBoard } from '../../store/board.actions'\n\n\n\nclass _PopoverMenuBackground extends React.Component {\n    state = {\n        search: ''\n    }\n\n    handleChange = (event) => {\n        const { board, saveBoard } = this.props\n        const { value } = event.target\n        if (value.includes('http' || 'https')) {\n            board.style.bgImg = value\n            board.style.bgClr = null\n        }\n        else {\n            board.style.bgClr = value\n            board.style.bgImg = null\n        }\n        saveBoard(board)\n    }\n\n    handleSearch = (event) => {\n        const { value, name } = event.target\n        this.setState(prevState => ({\n            ...prevState,\n            search: value\n        }))\n\n    }\n\n    render() {\n        const { board, title, setPosition } = this.props\n        if (!board) return <></>\n        const { search } = this.state\n\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <span\n                    class=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div class=\"pop-over-background\">\n                    <div class=\"background-styles-container\">\n                        <h4>Colors</h4>\n                        <ColorPalette selectedColor={board.style.bgClr} isGradient={true} handleChange={this.handleChange} />\n                        <h4>Images</h4>\n                        <input type=\"search\" value={search} name=\"search\" onChange={this.handleSearch} />\n                        <ColorPalette selectedColor={board.style.bgClr} isImages={true} search={search} handleSearch={this.handleSearch} handleChange={this.handleChange} />\n\n                    </div>\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n    }\n}\nconst mapDispatchToProps = {\n    saveBoard,\n    setPosition\n};\n\nexport const PopoverMenuBackground = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuBackground)\n","import React, { Component } from \"react\";\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ActivitiesList } from '../ActivitiesList'\nimport { withRouter } from \"react-router\";\n\n\n\n\nclass _PopoverNotification extends React.Component {\n    state = {\n        userNotifications: null,\n        boardId: null\n    }\n\n    componentDidMount = () => {\n        this.setNotifications()\n    }\n\n    setNotifications = () => {\n        const { board } = this.props\n        const { loggedinUser } = this.props\n        if (!board) return\n        const userTasks = []\n        board.groups.forEach(group => {\n            group.tasks.forEach(task => {\n                if (!task.members || !task.members.length) return\n                task.members.forEach(currMember => {\n                    if (currMember._id === loggedinUser._id) userTasks.push(task.id)\n                })\n            })\n        })\n\n        let userNotifications = board.activities.filter(activity => {\n            return userTasks.includes(activity.task.id)\n        })\n\n        userNotifications = JSON.parse(JSON.stringify(userNotifications))\n        userNotifications.forEach(notify => {\n            notify.isNotRead = true;\n            notify.isNotify = true;\n        });\n        userNotifications.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n\n        this.setState(prevState => ({ ...prevState, userNotifications, boardId: board._id }))\n    }\n\n    componentDidUpdate = () => {\n        const { board } = this.props\n        const { boardId } = this.state\n        if (!board) return\n        if (board._id !== boardId) {\n            this.setNotifications()\n        }\n    }\n    selectNotification = (notify) => {\n        const { board } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === notify.task.id))\n        notify.isNotRead = false\n        this.NotifyUpdate(notify)\n        this.props.history.push(`/board/${board._id}/${currGroup.id}/${notify.task.id}`)\n    }\n\n    NotifyUpdate = (notify) => {\n        const { userNotifications } = this.state\n        const notifyIdx = userNotifications.findIndex(currNotify => currNotify.id === notify.id)\n        userNotifications[notifyIdx] = notify\n        this.setState(prevState => ({ ...prevState, userNotifications }))\n    }\n\n    render() {\n        const { title } = this.props\n        const { userNotifications } = this.state\n        if (!userNotifications) return <></>\n\n        return <div className=\"board-menu notification-popover\">\n            <Popover title={title}>\n                <ActivitiesList CommAndAct={userNotifications} isShowActivities={true} currTask={null} selectNotification={this.selectNotification} />\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        loggedinUser: state.userModule.loggedinUser,\n    }\n}\n\nexport const PopoverNotification = withRouter(connect(mapStateToProps, null)(_PopoverNotification))\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ColorPalette } from '../ColorPalette'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport { PopoverLabelPreview } from './PopoverLabelPreview'\nimport { PopoverMemberPreview } from './PopoverMemberPreview'\nimport { setPosition } from '../../store/app.actions'\nimport { loadBoard, setFilterBy } from '../../store/board.actions'\n\n\n\nclass _PopoverMenuSearchCard extends React.Component {\n    state = {\n        filterBy: {\n            search: '',\n            labels: [],\n            members: []\n        }\n    }\n\n    componentDidMount() {\n        console.log('this.props.filterBy.search :>> ', this.props.filterBy.search);\n        this.setState({\n            filterBy: {\n                search: this.props.filterBy?.search || '',\n                labels: this.props.filterBy?.labels || [],\n                members: this.props.filterBy?.members || []\n            }\n        })\n    }\n\n    handleSearch = (event) => {\n        const { loadBoard, board, setFilterBy } = this.props\n        const { value, name } = event.target\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, [name]: value }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n\n\n    toggleLabelCheck = (labelId) => {\n        const { board, loadBoard, setFilterBy } = this.props\n        const { filterBy } = this.state\n        const labels = filterBy.labels.includes(labelId) ? filterBy.labels.filter(currLabelId => currLabelId !== labelId) : [...filterBy.labels, labelId]\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, labels }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    toggleMemberCheck = (member) => {\n        const { board, loadBoard, setFilterBy } = this.props\n        const { filterBy } = this.state\n        const members = filterBy.members.includes(member._id) ? filterBy.members.filter(currMemeberId => currMemeberId !== member._id) : [...filterBy.members, member._id]\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, members }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    render() {\n        const { board, title, setPosition } = this.props\n        if (!board) return <></>\n        const { search, filterBy } = this.state\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <span\n                    class=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div className=\"popover-filter\">\n                    <p>Search by task title</p>\n                    <input type=\"search\" value={filterBy.search} name=\"search\" onChange={this.handleSearch} placeholder=\"Enter task title\" autoFocus />\n                    <hr />\n                    <p>Filter by task labels</p>\n                    {board.labels.map(label => <PopoverLabelPreview key={label.id} label={label} labelsId={filterBy.labels} isFilter={true} toggleLabelCheck={this.toggleLabelCheck} />)}\n                    <hr />\n                    <p>Filter by members</p>\n                    {board.members.map(member => <PopoverMemberPreview key={member.id} member={member} selectedMembersIds={filterBy.members} toggleMemberCheck={this.toggleMemberCheck} />)}\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        filterBy: state.boardModule.filterBy\n    }\n}\nconst mapDispatchToProps = {\n    setPosition,\n    loadBoard,\n    setFilterBy\n};\n\nexport const PopoverMenuSearchCard = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuSearchCard)\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PopoverLabels } from \"./PopoverLabels\";\nimport { PopoverMembers } from \"./PopoverMembers\";\nimport { PopoverChecklist } from \"./PopoverChecklist\";\nimport { PopoverDate } from \"./PopoverDate\";\nimport { PopoverAttachment } from \"./PopoverAttachment\";\nimport { PopoverCover } from \"./PopoverCover\";\nimport { PopoverMoveCopy } from \"./PopoverMoveCopy\";\nimport { PopoverMenu } from \"./PopoverMenu\";\nimport { PopoverMenuArchive } from \"./PopoverMenuArchive\";\nimport { PopoverMenuBackground } from \"./PopoverMenuBackground\"\nimport { PopoverNotification } from \"./PopoverNotification\"\nimport { PopoverMenuSearchCard } from './PopoverMenuSearchCard'\n\n{/* <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover() }}>\n<div className=\"action-btn-content flex \" >\n    <LabelIcon />\n    <span>Labels</span>\n</div>\n</button>\n\n<button onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'CHECKLIST' }); }}>\n<div>\n    <CheckboxIcon />\n    <span>Checklist</span>\n</div>\n</button> */}\n\n\n// export const setPosition = ({ pos, type}) => {\n//     return (dispatch) => {\n//         dispatch({\n//             type: \"SET_POSITION\",\n//             pos: { ...pos, type },\n//         })\n//     }\n// }\n\n\n\nconst _PopoverDynamicCmp = (props) => {\n    const { type } = props.popover.pos;\n    switch (type) {\n        case \"LABELS\":\n            return <PopoverLabels  {...props} title=\"Labels\" />\n\n        case \"MEMBERS\":\n            return <PopoverMembers {...props} title=\"Members\" />\n\n        case \"CHECKLIST\":\n            return <PopoverChecklist {...props} title=\"Checklist\" />\n\n        case \"DATE\":\n            return <PopoverDate {...props} title=\"Date\" />\n\n        case \"ATTACHMENT\":\n            return <PopoverAttachment {...props} title=\"Attach from...\" />\n\n        case \"COVER\":\n            return <PopoverCover {...props} title=\"Cover\" />\n\n        case \"MOVE\":\n            return <PopoverMoveCopy {...props} isCopy={false} title=\"Move to\" />\n\n        case \"COPY\":\n            return <PopoverMoveCopy {...props} isCopy={true} title=\"Copy\" />\n\n        case \"BOARD_SHOW_MENU\":\n            return <PopoverMenu {...props} title=\"Menu\" />\n\n        case \"BOARD_SHOW_ARCHIVE\":\n            return <PopoverMenuArchive {...props} title=\"Archive\" />\n\n        case \"BOARD_SHOW_BACKGROUND\":\n            return <PopoverMenuBackground {...props} title=\"Change background\" />\n\n        case \"BOARD_FILTER_CARDS\":\n            return <PopoverMenuSearchCard {...props} title=\"Search cards\" />\n\n        case \"NOTIFICATION\":\n            return <PopoverNotification {...props} title=\"Notifications\" />\n\n        default:\n            return <></>\n    }\n};\n\nfunction mapStateToProps(state) {\n    return {\n        popover: state.appModule.popover,\n    };\n}\n\nexport const PopoverDynamicCmp = connect(\n    mapStateToProps,\n    null\n)(_PopoverDynamicCmp);\n\n\n// setPopoverPos(elRect) {\n//     const { pos } = this.props.popover\n//     const { width, height } = elRect\n//     let posX = (window.innerWidth - pos.pageX > 200) ? pos.pageX - 200 : pos.pageX - 200;\n//     let posY = (window.innerHeight - pos.pageY > 200) ? pos.pageY + 20 : pos.pageY - 200;\n//     posX = (posX + width > window.innerWidth) ? window.innerWidth - width - 20 : posX;\n//     posY = (posY + height > window.innerHeight) ? window.innerHeight - height - 20 : posY;\n//     return { left: posX, top: posY }\n// }","import React from 'react'\r\n// const { Switch, Route } = ReactRouterDOM\r\nimport { Switch, Route } from 'react-router'\r\n\r\nimport routes from './routes'\r\nimport { AppHeader } from './cmps/AppHeader'\r\nimport { socketService } from './services/socket.service'\r\nimport { PopoverDynamicCmp } from './cmps/Popover/PopoverDynamicCmp'\r\n\r\nexport class RootCmp extends React.Component {\r\n    componentWillUnmount() {\r\n        socketService.terminate()\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <AppHeader />\r\n                <main>\r\n                    {routes.map(route => <Route key={route.path} exact={route.isExact} component={route.component} path={route.path} />)}\r\n                </main>\r\n                <PopoverDynamicCmp />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { store } from './store/store'\nimport { RootCmp } from './root-cmp';\nimport './assets/styles/main.scss';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <RootCmp />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}