{"version":3,"sources":["store/board.reducer.js","services/http.service.js","services/user.service.js","store/user.reducer.js","store/app.reducer.js","store/store.js","assets/img/hero.png","pages/Homepage.jsx","services/socket.service.js","cmps/Workspace/BoardPreview.jsx","cmps/Workspace/BoardAddPalette.jsx","cmps/Workspace/BoardPreviewAdd.jsx","cmps/Workspace/BoardList.jsx","cmps/LoaderSpinner.jsx","services/util.service.js","services/board.service.js","store/board.actions.js","pages/Workspace.jsx","services/event-bus.service.js","store/user.actions.js","cmps/MemberPopup.jsx","store/app.actions.js","cmps/MemberPreview.jsx","cmps/MemberList.jsx","cmps/Popover/PopoverMemberPreview.jsx","cmps/MembersAddToBoard.jsx","cmps/BoardHeader.jsx","cmps/Group/AddNewGroup.jsx","cmps/TaskPreview/TaskLabels.jsx","cmps/TaskPreview/TaskDetailsPreview.jsx","cmps/TaskPreview/TaskDatePreview.jsx","cmps/TaskPreview/TaskActions.jsx","cmps/TaskPreview/TaskPreviewEdit.jsx","cmps/TaskPreview.jsx","cmps/TaskPreviewList.jsx","services/cloudinary-service.js","cmps/MediaRecord.jsx","cmps/Group/GroupFooter.jsx","cmps/Group/HeaderTitle.jsx","cmps/Group/GroupActions.jsx","cmps/GroupDetails.jsx","cmps/GroupList.jsx","pages/BoardApp.jsx","cmps/TaskHeader.jsx","cmps/TaskCardCover.jsx","cmps/TaskDescription.jsx","cmps/Popover/Popover.jsx","cmps/CheckDeletePopover.jsx","cmps/EditAttachmentPopover.jsx","cmps/TaskAttachmentPreview.jsx","cmps/TaskAttachment.jsx","cmps/TodoPreview.jsx","cmps/TodoList.jsx","cmps/TodoAdd.jsx","cmps/ProgressBar.jsx","cmps/TaskChecklistPreview.jsx","cmps/TaskChecklist.jsx","cmps/AddComment.jsx","cmps/ActivityPreview.jsx","cmps/ActivitiesList.jsx","cmps/TaskActivities.jsx","cmps/TaskActionsMenu.jsx","cmps/TaskHeaderLabels.jsx","cmps/TaskHeaderMembers.jsx","cmps/TaskHeaderDate.jsx","cmps/TaskHeaderDetails.jsx","pages/TaskDetails.jsx","pages/LoginSignup.jsx","cmps/Dashboard/BarChart.jsx","cmps/Dashboard/DoughnutChart.jsx","cmps/Dashboard/ActivityChart.jsx","cmps/Dashboard/Dashboard.jsx","routes.js","cmps/AppHeader.jsx","cmps/Popover/PopoverLabelPreview.jsx","cmps/Popover/PopoverLabelsListPreview.jsx","cmps/ColorPalette.jsx","cmps/Popover/PopoverLabelCreateEdit.jsx","cmps/Popover/PopoverLabels.jsx","cmps/Popover/PopoverMembers.jsx","cmps/Popover/PopoverChecklist.jsx","cmps/Popover/PopoverDate.jsx","cmps/Popover/PopoverAttachment.jsx","cmps/Popover/PopoverCover.jsx","cmps/Popover/PopoverMoveCopy.jsx","cmps/Popover/PopoverMenu.jsx","cmps/TaskPreview/TaskMenuPreview.jsx","cmps/Popover/PopoverMenuArchive.jsx","cmps/Popover/PopoverMenuBackground.jsx","cmps/Popover/PopoverNotification.jsx","cmps/Popover/PopoverMenuSearchCard.jsx","cmps/Popover/PopoverDynamicCmp.jsx","root-cmp.jsx","serviceWorkerRegistration.js","index.js"],"names":["initialState","boards","board","filterBy","search","labels","members","areLabelsExpanded","BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","params","res","console","log","dir","response","status","sessionStorage","clear","STORAGE_KEY_LOGGEDIN_USER","userService","login","logout","signup","getLoggedinUser","JSON","parse","getItem","getUsers","users","userCred","user","_saveLocalUser","setItem","stringify","loggedinUser","currTaskDetails","isDragDisabled","popover","pos","posX","posY","type","isOpen","isMenu","rootReducer","combineReducers","boardModule","state","action","newState","map","_id","filter","boardId","userModule","appModule","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Homepage","className","onClick","props","history","push","src","heroImg","alt","Component","socketService","socket","setup","io","on","eventName","cb","off","removeAllListeners","emit","terminate","createSocketService","BoardPreview","saveBoard","onToggleStar","newBoard","isFavorite","err","to","style","background","bgImg","bgClr","title","color","BoardAddPalette","setBgClr","setBgImg","useState","selected","setSelected","border","name","htmlFor","id","value","ev","target","imgUrl","backgroundSize","BoardPreviewAdd","setTitle","isEditMode","toggleEditMode","boardMode","onChange","placeholder","preventDefault","trim","onAdd","setCreateShown","BoardList","onRemove","idx","starred","LoaderSpinner","height","width","timeout","utilService","makeId","length","txt","possible","i","charAt","Math","floor","random","makeLorem","size","words","getRandomIntInclusive","min","max","ceil","delay","ms","Promise","resolve","setTimeout","timeSince","date","seconds","Date","interval","APP_ID","boardService","query","getById","save","updateTask","group","task","groupNeedToUpdate","groups","find","currGroup","groupIndex","indexOf","taskNeedToUpdate","tasks","currTask","taskIndex","addTask","removeTask","addGroup","removeGroup","createActivity","activityType","activity","createdAt","now","byMember","updateTaskByIds","queryPhotos","get","photos","results","updatedBoard","savedBoard","taskTitle","groupId","audioUrl","videoUrl","newTask","isWeb","media","findIndex","taskId","groupIdx","newGroup","taskIdx","taskToFind","loadBoards","dispatch","loadBoard","Error","addBoard","addActivity","activities","saveTaskDetails","setFilterBy","_Workspace","componentDidMount","this","some","removeBoard","mapDispatchToProps","remove","Workspace","connect","eventBusService","listener","callListener","detail","addEventListener","removeEventListener","dispatchEvent","CustomEvent","showUserMsg","showErrorMsg","onLogin","credentials","myBus","onLogout","then","catch","MemberPopup","member","togglePopOpen","isInHeader","isInBoardList","removeUserFromBoard","userIdx","mmbr","splice","position","top","left","inset","backgroundColor","zIndex","fullname","toUpperCase","username","setCurrTaskDetails","toggleDragDisable","setPosition","togglePopover","setPopover","setPopoverMenu","MemberPreview","isInPreview","isPopOpen","pageX","pageY","MemberList","isInDetails","event","PopoverMemberPreview","selectedMembersIds","toggleMemberCheck","marginInlineEnd","includes","_MembersAddToBoard","handleSearch","e","setState","prevState","boardUsers","addUserToBoard","password","getFilteredUsers","every","filteredUsers","componentDidUpdate","prevProps","forceUpdate","setMembersPopup","toLowerCase","MembersAddToBoard","BoardHeader","isTitleEdit","setTitleEdit","setWidth","isMembersPopup","spanRef","useRef","useEffect","current","offsetWidth","onSubmit","ref","autoFocus","onBlur","updateTitle","handleText","minWidth","alignItems","stopPropagation","AddNewGroup","withRouter","match","isClicked","setIsClicked","btnText","setBtnText","toggleIsClicked","toggleExpandLabels","TaskLabels","labelIds","boardLabels","labelId","label","TaskDetailsPreview","isDone","icon","TaskDatePreview","isMouseOver","setMouseOver","setIsDone","toggleIsDone","dueDate","onMouseEnter","noHover","onMouseLeave","toLocaleDateString","undefined","month","day","_TaskActions","selectedAction","componentWillUnmount","isPopoverOpen","setActiveAction","parentElement","dataset","sendToArchive","isArchive","toggleMenu","popoverDispatch","menuPos","taskUrl","TaskActions","TaskPreviewEdit","getChecklistData","description","comments","attachments","checklists","todos","editTitle","setEditTitle","updateTaskName","borderRadius","bgUrl","objectFit","maxHeight","bgColor","marginBottom","TaskPreview","doneTodos","index","isMenuShown","toggleMenuShown","setMenuPos","getBoundingClientRect","right","innerHeight","bottom","calcPos","forEach","checklist","todo","coverMode","draggableId","provided","innerRef","draggableProps","dragHandleProps","zIndx","boxShadow","onDrag","controls","TaskPreviewList","filteredTasks","orgIdx","taskMembersIds","droppableId","droppableProps","visibilty","opacity","cloudinaryService","uploadFile","blob","CLOUD_NAME","PRESET_NAME","UPLOAD_URL","formData","FormData","append","files","fetch","body","json","error","_MediaRecord","record","isOverlay","startRecording","stopRecording","onStop","setMediaType","secure_url","setOverlay","StyledFab","styled","Fab","setAudioPath","maxWidth","padding","isFlipped","countdownTime","mimeType","constraints","audio","video","resizeMode","exact","ideal","aspectRatio","onRecordingComplete","strokeColor","Grid","item","container","justify","xs","display","flexDirection","justifyContent","React","MediaRecord","GroupFooter","setTaskTitle","mediaType","setType","onAddTask","ids","scrollToBottom","HeaderTitle","groupTitle","saveTitle","grpIdx","grp","GroupActions","GroupDetails","isAddNew","elRef","innerWidth","scrollTo","scrollHeight","behavior","snapshot","fontSize","GroupList","direction","_BoardApp","isMenuOpen","currentTarget","_loadBoard","loadUsers","clearBoard","setCurrentTarget","onDragEnd","result","destination","source","handleDrag","droppableIdStart","droppableIdEnd","droppableIndexStart","droppableIndexEnd","tempBoard","groupStart","groupEnd","BoardApp","TaskHeader","setTaksDetailsTitle","taskList","onKeyDown","key","textDecoration","fontWeight","TaskCardCover","TaskDescription","onSaveDescription","updateTaskDetails","handleChange","onToggleEdit","onEditMode","selectedInput","focus","input","_Popover","visible","contentEl","toggleVisibility","onSetPopoverPos","elRect","setPopoverPos","getContentStyles","transition","marginRight","children","el","Popover","_CheckDeletePopover","typeTitle","setIsPopover","setIsEditPopover","substr","CheckDeletePopover","EditAttachmentPopover","urlName","attachment","onAttachmentUpdate","updateAttachment","attachName","_TaskAttachmentPreview","isPopover","isEditPopover","toggleBgUrl","removeAttach","attachs","currAttach","setCover","removeCover","pathname","TaskAttachmentPreview","TaskAttachment","Fragment","_TodoPreview","todoTitle","onToggleEditMode","onSaveTodo","onToggleTodoIsDone","onRemoveTodo","onUndoChange","TodoPreview","TodoList","TodoAdd","onTodoAdd","addTodo","clearState","ProgressBar","completed","doneTodosCalc","parseInt","_TaskChecklistPreview","checklistIdx","todoIdx","currTodo","isDoneTodos","removeChecklist","TaskChecklistPreview","_TaskChecklist","TaskChecklist","AddComment","onAddComment","addComment","ActivityPreview","isShowActivities","selectNotification","isNotRead","isNotify","activityToShow","ActivitiesList","CommAndAct","TaskActivities","onToggleComments","getTaskCommentsAndActivitiesSorted","sort","b","comment","_TaskActionsMenu","joinTask","toggleIsArchive","deleteTask","loggedinUserIsJoin","TaskActionsMenu","TaskHeaderLabels","TaskHeaderMembers","_TaskHeaderDate","formatedDate","isTaskDone","dueDateFormat","onToggleTaskDone","currYear","getFullYear","dueYear","strDate","toLocaleString","hour","minute","hour12","toLocaleUpperCase","getDueStatus","dueStatus","dueMsg","TaskHeaderDate","_TaskHeaderDetails","selectedMembers","selectedLabels","selectedDate","TaskHeaderDetails","_TaskDetails","listId","list","toggleOverlay","goBack","boardMemberIds","currGroupIdx","overflowY","toggleTaskDone","TaskDetails","onSignup","LoginSignup","setUsername","setPassword","setFullname","isLogin","setIsLogin","onSuccess","profileObj","givenName","googleId","imageUrl","clientId","buttonText","onFailure","cookiePolicy","BarChart","taskPerMember","currMember","Object","keys","datasets","values","borderColor","borderWidth","options","scales","x","ticks","font","family","y","elements","bar","responsive","plugins","text","datalabels","anchor","align","offset","legend","maintainAspectRatio","DoughnutChart","labelsData","labelCounts","j","k","calcTasksByLabel","boxWidth","boxHeight","ActivityChart","taskDetails","sortedNames","sortedAmount","indexAxis","grid","routes","path","component","isExact","archivedTasks","overDueTasks","doneTasks","doneChecklists","membersActivity","inTodos","inDoneTodos","sortedActivity","entries","getTaskDetails","AppHeader","userNotifications","isCreateShown","onAddBoard","isOnBoard","location","pointerEvents","PopoverLabelPreview","labelsId","toggleLabelCheck","toggleIsEditCreate","setLabelEdit","isFilter","isLabelFilterSelected","lineHeight","PopoverLabelsListPreview","toggleIsCreate","ColorPalette","colors","gradients","selectedColor","isGradient","isImages","colorCode","gradient","photo","backgroundImage","urls","regular","backgroundPosition","backgroundRepeat","full","PopoverLabelCreateEdit","onSubmitEditLabel","submitLabel","onSubmitCreate","submitCreateLabel","onRemoveLabel","removeLabel","_PopoverLabels","isEditCreate","updatedLabelsId","currLabelId","currLabel","PopoverLabels","_PopoverMembers","updatedMembers","PopoverMembers","_PopoverChecklist","handlechange","onAddChecklist","newList","PopoverChecklist","_PopoverDate","onSaveDueDate","onRemoveDate","utils","DateFnsUtils","DatePicker","autoOk","variant","openTo","PopoverDate","_PopoverAttachment","webUrlSrc","webUrlName","attach","original_filename","asset_id","onAttachmentClick","startsWith","accept","PopoverAttachment","_PopoverCover","isHeaderSelected","isFullSelected","selectedPhoto","setHeaderSelected","setFullSelected","removeFile","attachId","marginTop","alignSelf","PopoverCover","_PopoverMoveCopy","selectedGroup","selectedBoard","selectedPosition","handleBoardChange","handleGroupChange","submitMoveSameBoard","isCopy","fromGroup","fromGroupIdx","fromTask","fromTaskIdx","toGroupIdx","submitMoveAnotherBoard","currBoard","fromBoardIdx","toBoardIdx","toGroup","FormControl","InputLabel","Select","inputProps","MenuProps","disableScrollLock","MenuItem","disableUnderline","Array","from","PopoverMoveCopy","_PopoverMenu","PopoverMenu","TaskMenuPreview","PopoverMenuArchive","flat","taskGroup","_PopoverMenuBackground","PopoverMenuBackground","_PopoverNotification","setNotifications","userTasks","notify","NotifyUpdate","notifyIdx","currNotify","PopoverNotification","_PopoverMenuSearchCard","currMemeberId","PopoverMenuSearchCard","PopoverDynamicCmp","RootCmp","route","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.d6887a23.chunk.js","sourcesContent":["const initialState = {\r\n    boards: [],\r\n    board: null,\r\n    filterBy: {\r\n        search: '',\r\n        labels: [],\r\n        members: []\r\n    },\r\n    areLabelsExpanded: false\r\n}\r\nexport function boardReducer(state = initialState, action) {\r\n    var newState = state\r\n    var boards\r\n    switch (action.type) {\r\n        case 'SET_BOARDS':\r\n            newState = { ...state, boards: action.boards }\r\n            break\r\n        case 'SET_BOARD':\r\n            newState = { ...state, board: action.board }\r\n            break\r\n        case 'SAVE_BOARD':\r\n            boards = state.boards.map(board => (board._id === action.board._id) ? action.board : board)\r\n            newState = { ...state, boards, board: { ...action.board } }\r\n            break\r\n        case 'ADD_BOARD':\r\n            newState = { ...state, boards: [...state.boards, action.board] }\r\n            break\r\n        case 'SET_FILTER':\r\n            newState = { ...state, filterBy: { ...state.filterBy, ...action.filterBy } }\r\n            break\r\n        case 'REMOVE_BOARD':\r\n            boards = state.boards.filter(board => board._id !== action.boardId)\r\n            newState = { ...state, boards }\r\n            break\r\n        case 'TOGGLE_LABELS':\r\n            newState = { ...state, areLabelsExpanded: !state.areLabelsExpanded }\r\n            break\r\n\r\n        // case 'UNDO_REMOVE_BOARD':\r\n        //     if (state.lastRemovedBoard) {\r\n        //         newState = { ...state, boards: [...state.boards, state.lastRemovedBoard], lastRemovedBoard: null}\r\n        //     }\r\n        //     break\r\n        default:\r\n    }\r\n    // For debug:\r\n    // console.log('Prev State:', state)\r\n    return newState\r\n\r\n}\r\n","import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'GET', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data,\r\n            params: (method === 'GET') ? data : null\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            sessionStorage.clear();\r\n            // window.location.assign('/')\r\n        }\r\n        throw err\r\n    }\r\n}","import { httpService } from './http.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    getUsers,\r\n}\r\n\r\nasync function getUsers() {\r\n    const users = httpService.get('user')\r\n    return users\r\n}\r\n\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _saveLocalUser(user)\r\n\r\n}\r\n\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return user\r\n}\r\n\r\nasync function logout() {\r\n    return await httpService.post('auth/logout')\r\n\r\n}\r\n\r\nfunction _saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER) || 'null')\r\n}\r\n","import { userService } from '../services/user.service.js'\r\n\r\n\r\nconst initialState = {\r\n    loggedinUser:userService.getLoggedinUser(),\r\n    users: [],\r\n}\r\nexport function userReducer(state = initialState, action) {\r\n    var newState = state;\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            newState = { ...state, loggedinUser: action.user }\r\n            break;\r\n\r\n        case 'SET_USERS':\r\n            newState = { ...state, users: action.users }\r\n            break;\r\n\r\n        default:\r\n    }\r\n    // For debug:\r\n    // window.userState = newState;\r\n    // console.log('State:', newState);\r\n    return newState;\r\n\r\n}\r\n","const initialState = {\n    currTaskDetails: null,\n    isDragDisabled: false,\n    popover: {\n        pos: {\n            posX: -1,\n            posY: -1,\n            type: ''\n        },\n        isOpen: false,\n        isMenu: false\n    }\n}\nexport function appReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_TASK_DETAILS':\n            return { ...state, currTaskDetails: { ...action.currTaskDetails } }\n        case 'TOGGLE_DRAGGING':\n            return { ...state, isDragDisabled: !state.isDragDisabled }\n        case 'SET_POSITION':\n            const popover = { ...state.popover, pos: { ...action.pos } }\n            // const popoverDeepCopy = JSON.parse(JSON.stringify(popover))\n            return { ...state, popover }\n        case 'TOGGLE_POPOVER':\n            return { ...state, popover: { ...state.popover, isOpen: !state.popover.isOpen } }\n        case 'SET_POPOVER':\n            return { ...state, popover: { ...state.popover, isOpen: action.isOpen } }\n        case 'SET_POPOVER_MENU':\n            return { ...state, popover: { ...state.popover, isOpen: false, isMenu: action.isMenu } }\n        default:\n            return state\n    }\n}\n","// const { createStore, applyMiddleware, combineReducers, compose } = Redux\r\n// const thunk = ReduxThunk.default\r\n\r\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\n\r\nimport { boardReducer } from './board.reducer.js'\r\nimport { userReducer } from './user.reducer.js'\r\nimport { appReducer } from './app.reducer.js'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    boardModule: boardReducer,\r\n    userModule: userReducer,\r\n    appModule: appReducer,\r\n    // systemModule: systemReducer,\r\n    // reviewModule: reviewReducer,\r\n})\r\n\r\n\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n// window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__();\r\n// Lets wire up thunk and also redux-dev-tools:\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/hero.e8878a54.png\";","import React, { Component } from \"react\";\r\nimport heroImg from \"../assets/img/hero.png\";\r\n// import { HomeProfile } from \"../cmps/Home/HomeProfile\";\r\n// import reactImg from \"../assets/img/reactRedux.jpg\"\r\n// import nodeImg from \"../assets/img/nodejs.png\";\r\n// import mongoImg from \"../assets/img/mongo.png\";\r\n// import socketImg from \"../assets/img/socket.jpg\";\r\n// import expressImg from \"../assets/img/express.png\";\r\n// import rbdndImg from \"../assets/img/rbdnd.png\";\r\n\r\nexport class Homepage extends Component {\r\n  render() {\r\n    return (\r\n      <section className=\"homepage\">\r\n        <div className=\"hero flex main-layout\">\r\n          <div className=\"hero-content flex column\">\r\n            <h1>\r\n              <span>Trellex</span> helps teams move work forward.\r\n            </h1>\r\n            <p>\r\n              Collaborate, manage projects, and reach new productivity peaks.\r\n              From high rises to the home office, the way your team works is\r\n              unique—accomplish it all with Trellex.\r\n            </p>\r\n            <button onClick={() => this.props.history.push(\"/workspace\")}>\r\n              To Demo\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <img src={heroImg} className=\"hero-img\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n        {/* <section className=\"about main-layout\">\r\n          <h1>Made with</h1>\r\n          <div className=\"tech flex align-center\">\r\n            <img src={reactImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={nodeImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={expressImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={socketImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={mongoImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={rbdndImg} alt=\"logo\" className=\"tech-logo\" />\r\n          </div>\r\n          <h1>Created by</h1>\r\n          <div className=\" profiles-wrapper flex\">\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C5603AQG9slGN5Fgxug/profile-displayphoto-shrink_800_800/0/1516840011642?e=1639008000&v=beta&t=xThiLyo5L33mzpMZwW4bejYp6AOxWmN5mkVMSYDzg1w\"\r\n              ghUrl=\"https://github.com/bcd82\"\r\n              liUrl=\"https://www.linkedin.com/in/barak-sidi-4632003a/\"\r\n              name=\"Barak Sidi\"\r\n            />\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C4E03AQFlupY8tXNbnA/profile-displayphoto-shrink_800_800/0/1622442415599?e=1639008000&v=beta&t=7jgIHBeZftuCwkVx-HtY1tbwtcJnPRLebgx4LLUtZU0\"\r\n              ghUrl=\"https://github.com/Tomerre1\"\r\n              liUrl=\"https://www.linkedin.com/in/tomer-revah-software-engineering/\"\r\n              name=\"Tomer Revah\"\r\n            />\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C4D03AQEEFClr3HeA9w/profile-displayphoto-shrink_800_800/0/1575055172966?e=1639008000&v=beta&t=n8WEpc1GPYeK78vRTmU6_Q4p2hvWL-AGQLpDxW5DVKk\"\r\n              ghUrl=\"https://github.com/matan3857\"\r\n              liUrl=\"https://www.linkedin.com/in/matan-levi-561115199/\"\r\n              name=\"Matan Levi\"\r\n            />\r\n          </div>\r\n        </section> */}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import io from 'socket.io-client'\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n// export const socketService = createDummySocketService()\r\n// window.socketService = socketService\r\n\r\nsocketService.setup()\r\n\r\nfunction createSocketService() {\r\n  var socket = null;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb=null) {\r\n      if (!socket) return;\r\n      if (!cb) socket.removeAllListeners(eventName)\r\n      else socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    listenersMap,\r\n    setup() {\r\n      listenersMap = {}\r\n    },\r\n    terminate() {\r\n      this.setup()\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return\r\n      if (!cb) delete listenersMap[eventName]\r\n      else listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      })\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  window.listenersMap = listenersMap;\r\n  return socketService\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n\r\nexport function BoardPreview(props) {\r\n  const { board, saveBoard } = props;\r\n\r\n  const onToggleStar = async () => {\r\n    const newBoard = { ...board };\r\n    newBoard.isFavorite = !newBoard.isFavorite;\r\n    try {\r\n      saveBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(\"error setting favorite\", err);\r\n    }\r\n  };\r\n  return (\r\n    <article className=\"board-preview\">\r\n      <Link to={`/board/${board._id}`}>\r\n        <div\r\n          className=\"board-content\"\r\n          style={{\r\n            background: board.style.bgImg\r\n              ? `url(${board.style.bgImg})`\r\n              : board.style.bgClr,\r\n          }}\r\n        ></div>\r\n        <p className=\"board-title\">{board.title}</p>\r\n      </Link>\r\n      <div className={`hover-actions flex ${board?.isFavorite ? 'show' :''}`}>\r\n     \r\n       {board?.isFavorite ? <StarBorderIcon className=\"action-icon\"  style={{color:'gold'}} onClick={onToggleStar}/> : <StarBorderIcon className=\"action-icon\" onClick={onToggleStar} />}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import {useState} from 'react'\r\n\r\nexport function BoardAddPalette({ setBgClr, setBgImg, bgClr, bgImg }) {\r\n\r\n    const [selected,setSelected] = useState(\"linear-gradient(to bottom, #000000, #434343\")\r\n    \r\n    const clrs = [\r\n        \"linear-gradient(to bottom, #000000, #434343)\",\r\n        \"linear-gradient(to right, #2980b9, #2c3e50)\",\r\n        \"linear-gradient(to right, #3494e6, #ec6ead)\",\r\n        \"linear-gradient(to left, #2f7336, #aa3a38)\",\r\n        \"linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)\",\r\n        \"linear-gradient(to bottom, #e52d27, #b31217)\",\r\n    ];\r\n\r\n    const imgs = [\r\n    \"https://www.incimages.com/uploaded_files/image/1920x1080/getty_509107562_2000133320009280346_351827.jpg\",\r\n    \"http://all4desktop.com/data_images/original/4238112-background.jpg\",\r\n    \"https://c.pxhere.com/photos/4f/ee/candy_toppings_sweet_colorful_sugar-883692.jpg!d\",\r\n    \"http://www.pngmagic.com/product_images/creative-banner-design-background-images.jpg\",\r\n    \"https://cdn.wallpapersafari.com/22/29/fdqrYk.jpg\",\r\n    \"https://img2.goodfon.com/wallpaper/nbig/2/73/texture-lines-colours-cveta.jpg\"\r\n    \r\n];\r\n\r\n  return (\r\n    <div className=\"palettes\">\r\n      <div className=\"clrs\">\r\n        {clrs.map((color) => {\r\n          return (\r\n            <label\r\n              key={color}\r\n              className=\"flex align-center justify-center palette-icon\"\r\n              style={{ background: color , border: selected === color ? '2px solid white' : ''}}\r\n              name=\"label-color\"\r\n              htmlFor={`color-${color}`}\r\n            >\r\n              <input\r\n                type=\"radio\"\r\n                name=\"color\"\r\n                id={`color-${color}`}\r\n                value={color}\r\n                onClick={(ev) =>{ \r\n                    setBgClr(ev.target.value)\r\n                    setBgImg('')\r\n                    setSelected(ev.target.value)\r\n\r\n                }}\r\n              />\r\n           \r\n            </label>\r\n          );\r\n        })}\r\n        <div className=\"imgs\">\r\n          {imgs.map((imgUrl) => {\r\n            return (\r\n              <label\r\n                key={imgUrl}\r\n                className=\"flex align-center justify-center palette-icon\"\r\n                style={{\r\n                  background: `url(${imgUrl})`,\r\n                  backgroundSize: \"cover\",\r\n                  border: selected === imgUrl ? '2px solid white' : ''\r\n                }}\r\n                name=\"label-color\"\r\n                htmlFor={`color-${imgUrl}`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"color\"\r\n                  id={`color-${imgUrl}`}\r\n                  value={imgUrl}\r\n                  onClick={(ev) =>{ \r\n                      setBgImg(ev.target.value)\r\n                      setSelected(ev.target.value)\r\n                }}\r\n                />\r\n          \r\n              </label>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { BoardAddPalette } from \"../Workspace/BoardAddPalette\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\n\r\nexport function BoardPreviewAdd(props) {\r\n  const [bgClr, setBgClr] = useState(\r\n    \"linear-gradient(to bottom, #000000, #434343)\"\r\n  );\r\n  const [bgImg, setBgImg] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [isEditMode, toggleEditMode] = useState(false);\r\n  // const [bgClrs, setBgClrs] = useState([]);\r\n  // if(props.boardMode === true) toggleEditMode(true)\r\n  return (\r\n    <article className={`board-preview-add ${props.boardMode ? 'on-board' : ''}`}>\r\n      <div\r\n        className=\"board-content flex column\"\r\n        style={{\r\n          background: `${bgImg ? `url(${bgImg})` : bgClr} center`,\r\n        }}\r\n      >\r\n        {!isEditMode && !props.boardMode ? (\r\n          <div\r\n            className=\"add-inactive\"\r\n            onClick={() => toggleEditMode(!isEditMode)}\r\n          >\r\n            <p>Add a board</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"add-active fade-in\">\r\n            <div className=\"title-box flex\">\r\n              <form>\r\n                <input\r\n                  className=\"board-title\"\r\n                  value={title}\r\n                  onChange={(ev) => setTitle(ev.target.value)}\r\n                  placeholder=\"New board title\"\r\n                />\r\n                <button\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    if (!title.trim()) return;\r\n                    props.onAdd(title, bgClr, bgImg);\r\n                    setBgClr(\"linear-gradient(to bottom, #000000, #434343)\");\r\n                    setBgImg(\"\");\r\n                    setTitle(\"\");\r\n                    toggleEditMode();\r\n                  }}\r\n                >\r\n                  Create\r\n                </button>\r\n              </form>\r\n              <button\r\n                className=\"closer\"\r\n                onClick={() =>\r\n                  !props.boardMode\r\n                    ? toggleEditMode(!isEditMode)\r\n                    : props.setCreateShown(false)\r\n                }\r\n              >\r\n                <CloseIcon />\r\n              </button>\r\n            </div>\r\n            <div className=\"color-box\">\r\n              <BoardAddPalette\r\n                bgClr={bgClr}\r\n                setBgClr={setBgClr}\r\n                setBgImg={setBgImg}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BoardPreview } from \"./BoardPreview\";\r\nimport { BoardPreviewAdd } from \"./BoardPreviewAdd\";\r\n\r\nexport function BoardList(props) {\r\n  const { boards, onAdd, onRemove } = props;\r\n  return (\r\n    <div className=\"board-list\">\r\n      {boards &&\r\n        boards.map((board, idx) => (\r\n          <BoardPreview\r\n            board={board}\r\n            key={idx}\r\n            onRemove={onRemove}\r\n            saveBoard={props.saveBoard}\r\n          />\r\n        ))}\r\n      {!props.starred && <BoardPreviewAdd onAdd={onAdd} />}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nexport  function LoaderSpinner() {\r\n    return (\r\n        <Loader\r\n        type=\"Grid\"\r\n        color=\"#0079bf\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} \r\n        className=\"loader fade-in\"\r\n      />\r\n    )\r\n}\r\n","export const utilService = {\r\n    makeId,\r\n    makeLorem,\r\n    getRandomIntInclusive,\r\n    delay,\r\n    timeSince\r\n}\r\n\r\nfunction makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return txt;\r\n}\r\n\r\nfunction makeLorem(size = 100) {\r\n    var words = ['The sky', 'above', 'the port', 'was', 'the color of television', 'tuned', 'to', 'a dead channel', '.', 'All', 'this happened', 'more or less', '.', 'I', 'had', 'the story', 'bit by bit', 'from various people', 'and', 'as generally', 'happens', 'in such cases', 'each time', 'it', 'was', 'a different story', '.', 'It', 'was', 'a pleasure', 'to', 'burn'];\r\n    var txt = '';\r\n    while (size > 0) {\r\n        size--;\r\n        txt += words[Math.floor(Math.random() * words.length)] + ' ';\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction getRandomIntInclusive(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive \r\n}\r\n\r\nfunction delay(ms = 1500) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms)\r\n    })\r\n}\r\n\r\nfunction timeSince(date)  {\r\n    var seconds = Math.floor((new Date() - date) / 1000);\r\n\r\n    var interval = seconds / 31536000;\r\n\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a year ago\";\r\n        return Math.floor(interval) + \" years ago\";\r\n    }\r\n    interval = seconds / 2592000;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a month ago\";\r\n        return Math.floor(interval) + \" months ago\";\r\n    }\r\n    interval = seconds / 86400;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a day ago\";\r\n        return Math.floor(interval) + \" days ago\";\r\n    }\r\n    interval = seconds / 3600;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"an hour ago\";\r\n        return Math.floor(interval) + \" hours ago\";\r\n    }\r\n    interval = seconds / 60;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"an minute ago\";\r\n        return Math.floor(interval) + \" minutes ago\";\r\n    }\r\n    if (Math.floor(seconds) === 0) return \"a few seconds ago\";\r\n    return Math.floor(seconds) + \" seconds ago\";\r\n}\r\n\r\n","\r\nimport { socketService } from '../services/socket.service'\r\nimport { utilService } from './util.service.js'\r\nimport { httpService } from './http.service.js'\r\nimport { userService } from './user.service'\r\nimport axios from 'axios'\r\n\r\nconst APP_ID = 'IwjSlLYB-kEXeOlDvuifDixGryX1CK64CwapeKeJC8w'\r\n\r\nexport const boardService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    updateTask,\r\n    addTask,\r\n    removeTask,\r\n    addGroup,\r\n    removeGroup,\r\n    createActivity,\r\n    updateTaskByIds,\r\n    queryPhotos\r\n}\r\n\r\nasync function query() {\r\n    const boards = await httpService.get('board')\r\n    return boards\r\n}\r\n\r\nasync function queryPhotos(query = 'random') {\r\n    const photos = await axios.get(`https://api.unsplash.com/search/photos/?query=${query}&client_id=${APP_ID}`)\r\n    return photos.data.results\r\n}\r\n\r\nasync function getById(boardId) {\r\n    const board = await httpService.get(`board/${boardId}`)\r\n    return board\r\n}\r\n\r\nasync function save(board) {\r\n    if (board._id) {\r\n        const updatedBoard = await httpService.put('board', board)\r\n        socketService.emit(\"board-change\")\r\n        return updatedBoard\r\n    } else {\r\n        const newBoard = {\r\n            \"title\": board.title,\r\n            \"createdAt\": Date.now(),\r\n            \"createdBy\": userService.getLoggedinUser(),\r\n            \"groups\": [],\r\n            \"tasks\": [],\r\n            \"labels\": [],\r\n            \"activities\": [],\r\n            \"members\": [],\r\n            \"style\": {\r\n                \"bgClr\": board.style.bgClr,\r\n                \"bgImg\": board.style.bgImg\r\n            },\r\n        }\r\n        const savedBoard = await httpService.post('board', newBoard)\r\n        socketService.emit(\"board-change\")\r\n        return savedBoard\r\n    }\r\n}\r\n\r\n\r\nfunction createActivity(activityType, currTask, txt = null) {\r\n    const task = {\r\n        id: currTask.id,\r\n        title: currTask.title\r\n    }\r\n    const activity = {\r\n        id: utilService.makeId(),\r\n        createdAt: Date.now(),\r\n        byMember: userService.getLoggedinUser(),\r\n        task,\r\n        type: activityType,\r\n        txt\r\n    }\r\n    return activity\r\n}\r\n\r\nfunction updateTask(board, group, task) {\r\n    const groupNeedToUpdate = board.groups.find(currGroup => currGroup.id === group.id)\r\n    const groupIndex = board.groups.indexOf(groupNeedToUpdate)\r\n    const taskNeedToUpdate = board.groups[groupIndex].tasks.find(currTask => currTask.id === task.id)\r\n    const taskIndex = board.groups[groupIndex].tasks.indexOf(taskNeedToUpdate)\r\n    board.groups[groupIndex].tasks[taskIndex] = task\r\n    return { ...board }\r\n}\r\n\r\n\r\n\r\nasync function addTask(taskTitle, boardId, groupId, audioUrl, videoUrl) {\r\n    if (!taskTitle)\r\n        return\r\n    const newTask =\r\n    {\r\n        \"id\": `t-${utilService.makeId()}`,\r\n        \"title\": taskTitle,\r\n        \"description\": \"\",\r\n        \"createdAt\": Date.now(),\r\n        \"byMember\": userService.getLoggedinUser(),\r\n        \"style\": {},\r\n        \"labelIds\": [],\r\n        \"members\": [],\r\n        \"media\": {},\r\n        \"attachments\": (audioUrl || videoUrl) ? [{\r\n            id: utilService.makeId(),\r\n            name: 'Media url',\r\n            url: (audioUrl) ? audioUrl : videoUrl,\r\n            createdAt: Date.now(),\r\n            isWeb: true\r\n        }] : [],\r\n    }\r\n    if (audioUrl) newTask.media.audioUrl = audioUrl\r\n    else if (videoUrl) newTask.media.videoUrl = videoUrl\r\n\r\n    const board = await getById(boardId)\r\n    const idx = board.groups.findIndex((group) => group.id === groupId)\r\n    board.groups[idx].tasks.push(newTask)\r\n    save(board)\r\n    return board\r\n}\r\n\r\nasync function removeTask(boardId, groupId, taskId) {\r\n    try {\r\n        const board = await getById(boardId)\r\n        const groupIdx = board.groups.findIndex(group => groupId === group.id)\r\n        board.groups[groupIdx].tasks = board.groups[groupIdx].tasks.filter(task => taskId !== task.id)\r\n        save(board)\r\n        return board\r\n    }\r\n\r\n    catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\n\r\nasync function addGroup(boardId, title = \"Untitled group\") {\r\n    if (!boardId) return\r\n    const newGroup = {\r\n        \"id\": `g-${utilService.makeId()}`,\r\n        \"title\": title,\r\n        tasks: [],\r\n        \"style\": {\r\n            bgImg: \"\",\r\n            bgClr: \"\"\r\n        }\r\n    }\r\n    try {\r\n        const board = await getById(boardId)\r\n        board.groups.push(newGroup)\r\n        save(board)\r\n\r\n        return board\r\n    }\r\n    catch (err) {\r\n        console.log('couldnt add group', err)\r\n    }\r\n}\r\n\r\nasync function removeGroup(boardId, groupId) {\r\n    try {\r\n        const board = await getById(boardId)\r\n        board.groups = board.groups.filter(group => group.id !== groupId)\r\n        save(board)\r\n        return board\r\n    }\r\n\r\n    catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\nasync function updateTaskByIds(boardId, groupId, task) {\r\n    const board = await getById(boardId)\r\n    const groupIdx = board.groups.findIndex(group => groupId === group.id)\r\n    const taskIdx = board.groups[groupIdx].tasks.findIndex(taskToFind => taskToFind.id === task.id)\r\n    board.groups[groupIdx].tasks[taskIdx] = task\r\n    save(board)\r\n    return board\r\n\r\n}\r\n\r\n","import { boardService } from '../services/board.service';\r\nimport { socketService } from '../services/socket.service'\r\n\r\nexport const loadBoards = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const boards = await boardService.query()\r\n            dispatch({\r\n                type: \"SET_BOARDS\",\r\n                boards,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant set boards', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const loadBoard = (boardId, filterBy = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.getById(boardId, filterBy)\r\n            if (board)\r\n                dispatch({\r\n                    type: \"SET_BOARD\",\r\n                    board,\r\n                });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant set board', err)\r\n            throw Error(err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const saveBoard = (board) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n            await boardService.save(board)\r\n            socketService.emit(\"board-change\")\r\n        }\r\n        catch (err) {\r\n            console.log('cant save board', err)\r\n            throw err\r\n        }\r\n    }\r\n}\r\n\r\nexport const addBoard = (title = \"new board\", bgClr = \"black\", bgImg) => {\r\n    return async (dispatch) => {\r\n        const board = { title, style: { bgClr, bgImg } }\r\n        try {\r\n            const newBoard = await boardService.save(board)\r\n            dispatch({\r\n                type: \"ADD_BOARD\",\r\n                board: newBoard,\r\n            });\r\n            return newBoard\r\n        }\r\n        catch (err) {\r\n            console.log('cant add board', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const handleDrag = (\r\n    board,\r\n    droppableIdStart,\r\n    droppableIdEnd,\r\n    droppableIndexStart,\r\n    droppableIndexEnd,\r\n    draggableId,\r\n    type\r\n) => {\r\n    return async (dispatch) => {\r\n        const tempBoard = JSON.parse(JSON.stringify(board))\r\n        if (type === 'group') {\r\n            const group = tempBoard.groups.splice(droppableIndexStart, 1)\r\n            tempBoard.groups.splice(droppableIndexEnd, 0, ...group)\r\n        } else {\r\n            if (droppableIdStart === droppableIdEnd) {\r\n                const group = tempBoard.groups.find(group => group.id === droppableIdStart)\r\n                const task = group.tasks.splice(droppableIndexStart, 1)\r\n                group.tasks.splice(droppableIndexEnd, 0, ...task)\r\n            }\r\n            if (droppableIdStart !== droppableIdEnd) {\r\n                const groupStart = tempBoard.groups.find(group => group.id === droppableIdStart)\r\n                const task = groupStart.tasks.splice(droppableIndexStart, 1)\r\n                const groupEnd = tempBoard.groups.find(group => group.id === droppableIdEnd)\r\n                groupEnd.tasks.splice(droppableIndexEnd, 0, ...task)\r\n            }\r\n        }\r\n        boardService.save(tempBoard)\r\n        dispatch({\r\n            type: \"SAVE_BOARD\",\r\n            board: tempBoard\r\n        });\r\n\r\n        return\r\n    }\r\n\r\n}\r\n\r\nexport const removeBoard = (boardId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            await boardService.remove(boardId)\r\n            dispatch({\r\n                type: \"REMOVE_BOARD\",\r\n                boardId: boardId,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant remove board', err)\r\n        }\r\n    }\r\n}\r\nexport const addTask = (taskTitle, boardId, groupId, audioUrl = null, videoUrl = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.addTask(taskTitle, boardId, groupId, audioUrl, videoUrl)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n        }\r\n        catch (err) {\r\n            console.log('cant add task', err)\r\n        }\r\n    }\r\n}\r\nexport const removeTask = (boardId, groupId, taskId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.removeTask(boardId, groupId, taskId)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant remove task', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const addGroup = (boardId, title) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.addGroup(boardId, title)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        } catch (err) {\r\n            console.log('cant add group', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeGroup = (boardId, groupId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.removeGroup(boardId, groupId)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        } catch (err) {\r\n            console.log('cant remove group', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const clearBoard = () => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"SET_BOARD\",\r\n            board: null\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport const toggleExpandLabels = () => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"TOGGLE_LABELS\",\r\n        });\r\n    }\r\n}\r\n\r\nexport const addActivity = (board, currTaskDetails, activityType, txt = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            board.activities.push(boardService.createActivity(activityType, currTaskDetails, txt))\r\n            const newBoard = await boardService.save(board)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const saveTaskDetails = (board, currGroup, currTask) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const updatedBoard = boardService.updateTask(board, currGroup, currTask)\r\n            // move after await if causes issues\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: updatedBoard,\r\n            })\r\n            await boardService.save(updatedBoard)\r\n\r\n            // dispatch({\r\n            //     type: \"SET_TASK_DETAILS\",\r\n            //     currTaskDetails: currTask\r\n            // });\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const updateTask = (boardId, groupId, task) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const updatedBoard = await boardService.updateTaskByIds(boardId, groupId, task)\r\n            const newBoard = await boardService.save(updatedBoard)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const setFilterBy = (filterBy) => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"SET_FILTER\",\r\n            filterBy\r\n        });\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { socketService } from '../services/socket.service'\r\nimport { BoardList } from \"../cmps/Workspace/BoardList\";\r\nimport { LoaderSpinner } from \"../cmps/LoaderSpinner\";\r\nimport {\r\n  loadBoards,\r\n  addBoard,\r\n  removeBoard,\r\n  saveBoard,\r\n} from \"../store/board.actions\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n\r\nclass _Workspace extends Component {\r\n\r\n  componentDidMount = () => {\r\n    socketService.on(\"new-board-added\", this.props.loadBoards)\r\n    this.props.loadBoards();\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    socketService.off(\"new-board-added\")\r\n    // socketService.terminate()\r\n  }\r\n\r\n  addBoard = async (title, bgClr = \"black\", bgImg = \"\") => {\r\n    if (!title || !title.trim()) return;\r\n    try {\r\n      this.props.addBoard(title, bgClr, bgImg);\r\n      socketService.emit(\"new-board\");\r\n    } catch (err) {\r\n      console.log(\"problem adding board\", err);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { boards } = this.props;\r\n    return (\r\n      <section className=\"workspace-page main-layout flex column\">\r\n        <h1>Your Workspace</h1>\r\n        <h2 className=\"flex align-center\">\r\n          {this.props.boards.some(board => board.isFavorite) && <><StarBorderIcon style={{ height: '35px', width: '35px' }} /> Starred boards</>}\r\n        </h2>\r\n        <div className=\"board-lists flex column\">\r\n            <BoardList\r\n              starred={true}\r\n              boards={boards.filter((board) => board.isFavorite)}\r\n              onAdd={this.addBoard}\r\n              onRemove={this.props.removeBoard}\r\n              saveBoard={this.props.saveBoard}\r\n            />\r\n         \r\n          {boards.length ? (\r\n            <BoardList\r\n              boards={boards.filter((board) => !board.isFavorite)}\r\n              onAdd={this.addBoard}\r\n              onRemove={this.props.removeBoard}\r\n              saveBoard={this.props.saveBoard}\r\n            />\r\n          ) : (\r\n            <LoaderSpinner />\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    boards: state.boardModule.boards,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  loadBoards,\r\n  addBoard,\r\n  removeBoard,\r\n  saveBoard,\r\n};\r\nexport const Workspace = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_Workspace);\r\n","function on(eventName, listener) {\r\n\r\n    const callListener = ({ detail }) => {\r\n        listener(detail);\r\n    };\r\n\r\n    window.addEventListener(eventName, callListener);\r\n\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener);\r\n    };\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\nexport const eventBusService = { on, emit };\r\n\r\nexport function showUserMsg(txt, type = '') {\r\n    eventBusService.emit('show-user-msg', { txt, type })\r\n}\r\nexport function showSuccessMsg(txt) {\r\n    showUserMsg(txt, 'success')\r\n}\r\nexport function showErrorMsg(txt) {\r\n    showUserMsg(txt, 'danger')\r\n}\r\n\r\nwindow.myBus = eventBusService;\r\nwindow.showUserMsg = showUserMsg;\r\n\r\n// eventBusService.on('baba', (x)=>console.log('Hi Baba', x))\r\n// eventBusService.on('baba', (x)=>console.log('Hello Baba Ji', x))\r\n// eventBusService.emit('baba', [5, 8, 11])\r\n// setTimeout(()=>{\r\n//     eventBusService.emit('baba', 17)\r\n// }, 2000)\r\n\r\n/* Listening Component...\r\n    import {eventBusService} from 'path...event-bus-service'\r\n    eventBusService.on('some-event', (dataFromEvent) => {\r\n    do something with dataFromEvent\r\n    })\r\n\r\n   Receiving Component...\r\n    eventBusService.emit('some-event', data)\r\n*/","import { userService } from \"../services/user.service.js\";\r\nimport { showErrorMsg } from '../services/event-bus.service.js'\r\n// import { socketService, SOCKET_EMIT_USER_WATCH, SOCKET_EVENT_USER_UPDATED } from \"../services/socket.service.js\";\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            // dispatch({ type: 'LOADING_START' })\r\n            const users = await userService.getUsers()\r\n            dispatch({ type: 'SET_USERS', users })\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err)\r\n        } finally {\r\n            // dispatch({ type: 'LOADING_DONE' })\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeUser(userId) {\r\n    return async dispatch => {\r\n        try {\r\n            await userService.remove(userId)\r\n            dispatch({ type: 'REMOVE_USER', userId })\r\n        } catch (err) {\r\n            console.log('UserActions: err in removeUser', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function onLogin(credentials) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.login(credentials)\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                user\r\n            })\r\n        } catch (err) {\r\n            showErrorMsg('Cannot login')\r\n            console.log('Cannot login', err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function onSignup(credentials) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.signup(credentials)\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                user\r\n            })\r\n\r\n        } catch (err) {\r\n            console.log('error when signing up', err)\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function onLogout() {\r\n    return (dispatch) => {\r\n        userService.logout()\r\n            .then(() => dispatch({\r\n                type: 'SET_USER',\r\n                user: null\r\n            }))\r\n            .catch(err => {\r\n                showErrorMsg('Cannot logout')\r\n                console.log('Cannot logout', err)\r\n            })\r\n    }\r\n}\r\n\r\n// export function loadAndWatchUser(userId) {\r\n//     return async (dispatch) => {\r\n//         try {\r\n//             const user = await userService.getById(userId);\r\n//             dispatch({ type: 'SET_WATCHED_USER', user })\r\n//             socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n//             socketService.off(SOCKET_EVENT_USER_UPDATED)\r\n//             socketService.on(SOCKET_EVENT_USER_UPDATED, user => {\r\n//                 console.log('USER UPADTED FROM SOCKET');\r\n//                 dispatch({ type: 'SET_WATCHED_USER', user })\r\n//             })\r\n//         } catch (err) {\r\n//             showErrorMsg('Cannot load user')\r\n//             console.log('Cannot load user', err)\r\n//         }\r\n//     }\r\n// }\r\n\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogout } from \"../store/user.actions\";\r\nimport { saveBoard } from \"../store/board.actions\";\r\n\r\nconst _MemberPopup = ({\r\n  member,\r\n  togglePopOpen,\r\n  isInHeader,\r\n  isInBoardList,\r\n  onLogout,\r\n  user,\r\n  board,\r\n  saveBoard,\r\n}) => {\r\n  const removeUserFromBoard = async () => {\r\n    // if (member._id === user?._id) {\r\n      const newBoard = JSON.parse(JSON.stringify(board));\r\n      const userIdx = newBoard.members.findIndex(mmbr => mmbr._id === member._id)\r\n      newBoard.members.splice(userIdx, 1);\r\n      try{\r\n        await saveBoard(newBoard);\r\n        togglePopOpen(false);\r\n\r\n      }\r\n      catch(err){\r\n        console.log('error when deleting user from board',err)\r\n      // }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`popup-container flex column`}>\r\n      <div\r\n        className=\"pop-overlay\"\r\n        style={{\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          inset: 0,\r\n          height: \"100vh\",\r\n          width: \"100%\",\r\n          backgroundColor: \"transparent\",\r\n          zIndex: 4,\r\n        }}\r\n        onClick={() => togglePopOpen(false)}\r\n      ></div>\r\n      <div className={`wrap  ${isInHeader ? \"header\" : \"\"}`}>\r\n        <div className=\"member-popup\">\r\n          {member?.imgUrl ? (\r\n            <img src={member.imgUrl} className=\"member-img\" alt=\"member-img\" />\r\n          ) : (\r\n            <div\r\n              className=\"member-img\"\r\n              style={{ background: \"rgb(223, 225, 230)\", color: \"inherit\" }}\r\n            >\r\n              <p className={`member-letter preview`}>\r\n                {member?.fullname?.[0].toUpperCase() || \"\"}\r\n              </p>\r\n            </div>\r\n          )}\r\n          <div className=\"member-info flex column\">\r\n            <p className=\"fullname\">{member.fullname}</p>\r\n            <p className=\"username\">{member.username}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"member-footer\">\r\n          {isInHeader && (\r\n            <p className=\"logout\" onClick={onLogout}>\r\n              Logout\r\n            </p>\r\n          )}\r\n          {isInBoardList && (\r\n            <p className=\"logout\" onClick={removeUserFromBoard}>Remove from board</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onLogout,\r\n  saveBoard,\r\n};\r\nconst mapStateToProps = ({ userModule, boardModule }) => {\r\n  return {\r\n    user: userModule.loggedinUser,\r\n    board: boardModule.board,\r\n  };\r\n};\r\nexport const MemberPopup = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MemberPopup);\r\n","\nexport const setCurrTaskDetails = (currTaskDetails) => {\n    return async (dispatch) => {\n        dispatch({\n            type: \"SET_TASK_DETAILS\",\n            currTaskDetails\n        });\n    }\n}\n\n\nexport const toggleDragDisable = () => {\n    return (dispatch) => {\n        dispatch({\n            type: \"TOGGLE_DRAGGING\",\n        });\n    }\n}\n\nexport const setPosition = ({ pos, type }) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POSITION\",\n            pos: { ...pos, type },\n        })\n    }\n}\n\nexport const togglePopover = () => {\n    return (dispatch) => {\n        dispatch({\n            type: \"TOGGLE_POPOVER\",\n        });\n    }\n}\nexport const setPopover = (isOpen) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POPOVER\",\n            isOpen\n        });\n    }\n}\nexport const setPopoverMenu = (isMenu) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POPOVER_MENU\",\n            isMenu\n        });\n    }\n}\n","import React, { useState } from \"react\";\r\nimport { MemberPopup } from \"./MemberPopup\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu\r\n} from \"../store/app.actions\";\r\n\r\nfunction _MemberPreview({\r\n  member,\r\n  isInPreview,\r\n  isEditMode,\r\n  isInHeader,\r\n  isInBoardList,\r\n  task,\r\n  setPosition,\r\n  setCurrTaskDetails,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n  onLogout,\r\n}) {\r\n  const [isPopOpen, togglePopOpen] = useState(false);\r\n\r\n  const openPop = (ev) => {\r\n    togglePopOpen(!isPopOpen);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <article\r\n        className=\"member-wrapper\"\r\n        onClick={(ev) => {\r\n          ev.preventDefault();\r\n          //   ev.stopPropagation();\r\n          if (isEditMode) return;\r\n          if (isInPreview) {\r\n            setCurrTaskDetails(task);\r\n            setPosition({\r\n              pos: { pageX: ev.pageX, pageY: ev.pageY },\r\n              type: \"MEMBERS\",\r\n            });\r\n            setPopoverMenu(false)\r\n\r\n            togglePopover();\r\n            return;\r\n          }\r\n          openPop(ev);\r\n        }}\r\n      >\r\n        {member?.imgUrl ? (\r\n          <img src={member.imgUrl} className=\"member-img\" alt={member.fullname[0].toUpperCase()} />\r\n        ) : (\r\n          <div\r\n            className=\"member-img\"\r\n            style={{ background: \"rgb(223, 225, 230)\", color: \"inherit\" }}\r\n          >\r\n            <p className={`member-letter ${isInPreview ? \"preview\" : \"\"}`}>\r\n              {member?.fullname?.[0].toUpperCase() || \"\"}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </article>\r\n      {isPopOpen && (\r\n        <MemberPopup\r\n          member={member}\r\n          togglePopOpen={togglePopOpen}\r\n          isInPreview={isInPreview}\r\n          isInHeader={isInHeader}\r\n          isInBoardList={isInBoardList}\r\n          onLogout={onLogout}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu\r\n};\r\nexport const MemberPreview = connect(null, mapDispatchToProps)(_MemberPreview);\r\n","import AddIcon from \"@mui/icons-material/Add\";\r\nimport { MemberPreview } from \"./MemberPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport { setPosition, togglePopover,setPopoverMenu } from \"../store/app.actions\";\r\n\r\nexport function _MemberList(props) {\r\n  const {\r\n    members,\r\n    isInPreview,\r\n    isInDetails,\r\n    isInHeader,\r\n    togglePopover,\r\n    isEditMode,\r\n    isInBoardList,\r\n    task,\r\n  } = props;\r\n  return (\r\n    <div\r\n      className={`members ${isInPreview ? \"preview\" : \"\"}${\r\n        isInHeader ? \"in-header\" : \"\"\r\n      } ${task?.members.length >= 5 ? 'many':''}`}\r\n    >\r\n      {members &&\r\n        members.map((member, idx) => (\r\n          <MemberPreview\r\n            isInPreview={isInPreview}\r\n            isEditMode={isEditMode}\r\n            isInHeader={isInHeader}\r\n            isInBoardList={isInBoardList}\r\n            member={member}\r\n            key={idx}\r\n            task={task}\r\n          />\r\n        ))}\r\n      {isInDetails && (\r\n        <button\r\n          className=\"secondary-btn\"\r\n          onClick={(event) => {\r\n            props.setPosition({\r\n              pos: { pageX: event.pageX, pageY: event.pageY },\r\n              type: \"MEMBERS\",\r\n            });\r\n            togglePopover();\r\n          }}\r\n        >\r\n          <AddIcon />\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currTaskDetails: state.appModule.currTaskDetails,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n  \r\n};\r\n\r\nexport const MemberList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MemberList);\r\n","import React from 'react'\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport function PopoverMemberPreview({ member, selectedMembersIds, toggleMemberCheck }) {\n    return (\n        <li className=\"member-pop-over-preview flex\" onClick={() => { toggleMemberCheck(member) }}>\n            {member.imgUrl &&\n                <img className=\"profile-picture\" style={{ marginInlineEnd: '8px' }} src={member.imgUrl} alt='member' />\n            }\n            {!member.imgUrl &&\n                <div className=\"profile-picture\" style={{ background: \"#dfe1e6\", marginInlineEnd: '8px' }}>\n                    <p className=\"profile-picture letter\" >{member.fullname[0]}</p>\n                </div>\n            }\n\n            <span>{member.fullname}</span>\n\n            {selectedMembersIds.includes(member._id) &&\n                <span className=\"icon-check flex\">\n                    <CheckIcon />\n                </span>\n            }\n\n        </li >\n    )\n}\n\n\n","import React, { Component } from \"react\";\r\nimport { PopoverMemberPreview } from \"./Popover/PopoverMemberPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../store/board.actions\";\r\n\r\nexport class _MembersAddToBoard extends Component {\r\n  state = {\r\n    search: \"\",\r\n  };\r\n\r\n  handleSearch = (e) => {\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      search: e.target.value,\r\n    }));\r\n  };\r\n  boardUsers = [];\r\n\r\n  addUserToBoard = async (member) => {\r\n    const { board, saveBoard } = this.props;\r\n    delete member.password;\r\n    const newBoard = { ...board, members: [...board.members, member] };\r\n    await saveBoard(newBoard);\r\n  };\r\n\r\n  getFilteredUsers = () => {\r\n    const { board, users } = this.props;\r\n    const fUsers =\r\n      users.filter((user) =>\r\n        board.members.every((member) => member._id !== user._id)\r\n      ) || [];\r\n    return fUsers;\r\n  };\r\n\r\n  filteredUsers = this.getFilteredUsers();\r\n\r\n  componentDidUpdate = (prevProps) => {\r\n    if (this.props.board.members.length !== prevProps.board.members.length) {\r\n      this.filteredUsers = this.getFilteredUsers();\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, users, setMembersPopup } =\r\n      this.props;\r\n    const { search } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          className={`overlay show`}\r\n          onClick={() => setMembersPopup(false)}\r\n        ></div>\r\n        <div title={title} className=\" board-member-add flex column\">\r\n          <div className=\"members-popover\">\r\n            <h4>ADD TO BOARD</h4>\r\n            <input\r\n              type=\"search\"\r\n              placeholder=\"Search members\"\r\n              onChange={this.handleSearch}\r\n            />\r\n            <ul className=\"clean-list flex column\">\r\n              {this.filteredUsers.length > 0 ? (\r\n                this.filteredUsers\r\n                  .filter((member) =>\r\n                    member.fullname.toLowerCase().includes(search.toLowerCase())\r\n                  )\r\n                  .map((member, idx) => (\r\n                    <PopoverMemberPreview\r\n                      toggleMemberCheck={() => this.addUserToBoard(member)}\r\n                      member={member}\r\n                      key={idx}\r\n                      selectedMembersIds={\r\n                        this.boardUsers?.map((member) => member._id) || []\r\n                      }\r\n                      members={users}\r\n                    />\r\n                  ))\r\n              ) : (\r\n                <p>No members available</p>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    users: state.userModule.users,\r\n    popover: state.appModule.popover,\r\n    board: state.boardModule.board,\r\n    loggedinUser: state.userModule.loggedinUser,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n};\r\n\r\nexport const MembersAddToBoard = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MembersAddToBoard);\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard, setFilterBy } from \"../store/board.actions\";\r\nimport { MemberList } from \"./MemberList\";\r\nimport { MembersAddToBoard } from \"../cmps/MembersAddToBoard\";\r\nimport MoreHorizOutlinedIcon from \"@mui/icons-material/MoreHorizOutlined\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\nimport BarChartIcon from \"@mui/icons-material/BarChart\";\r\nimport PersonAddAlt1Icon from \"@mui/icons-material/PersonAddAlt1\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  togglePopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n} from \"../store/app.actions\";\r\n\r\n\r\nfunction _BoardHeader(props) {\r\n  const { board, setFilterBy } = props;\r\n  const [isTitleEdit, setTitleEdit] = useState(false);\r\n  const [title, setTitle] = useState(board.title);\r\n  const [width, setWidth] = useState(board.title.length * 9.5);\r\n  const [isMembersPopup, setMembersPopup] = useState(false);\r\n  const spanRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!spanRef) return;\r\n    if (typeof spanRef.current?.offsetWidth === \"number\")\r\n      setWidth(spanRef.current?.offsetWidth);\r\n  }, [title]);\r\n\r\n  const onToggleStar = async () => {\r\n    const newBoard = { ...board };\r\n    newBoard.isFavorite = !newBoard.isFavorite;\r\n    try {\r\n      props.saveBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(\"error setting favorite\", err);\r\n    }\r\n  };\r\n\r\n  const handleText = (ev) => {\r\n    setTitle(ev.target.value);\r\n  };\r\n  const updateTitle = () => {\r\n    const newBoard = { ...board };\r\n    newBoard.title = title.trim();\r\n    setTitle(title.trim());\r\n    props.saveBoard(newBoard);\r\n  };\r\n  if (!board) return <h2>Loading</h2>;\r\n  return (\r\n    <header className={`main-header board-header flex align-center`}>\r\n      <div className=\"header-btn-container flex\">\r\n        {!isTitleEdit ? (\r\n          <h2 className=\"title\" onClick={() => setTitleEdit(true)}>\r\n            {title}\r\n          </h2>\r\n        ) : (\r\n          <form\r\n            onSubmit={(ev) => {\r\n              ev.preventDefault();\r\n            }}\r\n          >\r\n            <span ref={spanRef}>{title}</span>\r\n            <input\r\n              autoFocus\r\n              className={`title ${!title?.length && \"height-adjust\"}`}\r\n              onBlur={() => {\r\n                setTitleEdit(false);\r\n                updateTitle();\r\n              }}\r\n              value={title}\r\n              onChange={(ev) => {\r\n                handleText(ev);\r\n              }}\r\n              style={{\r\n                width: width + 10,\r\n                minWidth: \"40px\",\r\n              }}\r\n            ></input>\r\n          </form>\r\n        )}\r\n        <div className=\"header-btn-container flex\">\r\n          <button className=\"header-btn star\">\r\n            {board.isFavorite ? (\r\n              <StarBorderIcon\r\n                className=\"icon star gold\"\r\n                onClick={onToggleStar}\r\n              />\r\n            ) : (\r\n              <StarBorderIcon className=\"icon star\" onClick={onToggleStar} />\r\n            )}\r\n          </button>\r\n          {board?.members && (\r\n            <MemberList members={board.members} isInBoardList={true} />\r\n          )}\r\n        </div>\r\n        <button\r\n          className=\"header-btn\"\r\n          onClick={() => setMembersPopup(!isMembersPopup)}\r\n        >\r\n          <PersonAddAlt1Icon className=\"icon\" />\r\n        </button>\r\n        {isMembersPopup && (\r\n          <MembersAddToBoard setMembersPopup={setMembersPopup} />\r\n        )}\r\n      </div>\r\n      <div className=\"header-btn-container flex \">\r\n        <Link to={`/board/${board._id}/dashboard`} className=\"clean-link\">\r\n          <button className=\"header-btn dash\">\r\n            <BarChartIcon className=\"icon\" />\r\n            <span className=\"btn-txt\">Dashboard</span>\r\n          </button>\r\n        </Link>\r\n        {(props.filterBy.search ||\r\n          props.filterBy.labels.length > 0 ||\r\n          props.filterBy.members.length > 0) && (\r\n          <div className=\"flex results\">\r\n            <button\r\n              className=\"header-btn btn-results\"\r\n              onClick={(event) => {\r\n                props.setPosition({\r\n                  pos: { pageX: event.pageX, pageY: event.pageY },\r\n                  type: \"BOARD_FILTER_CARDS\",\r\n                });\r\n                props.setPopoverMenu(true);\r\n                props.togglePopover(false);\r\n              }}\r\n            >\r\n              Change Filter\r\n            </button>\r\n            <span\r\n              className=\"flex\"\r\n              style={{ alignItems: \"center\", backgroundColor: \"#61bd4f\" }}\r\n            >\r\n              <Close\r\n                className=\"icon clean-btn\"\r\n                onClick={(event) => {\r\n                  event.stopPropagation();\r\n                  setFilterBy({ labels: [], members: [], search: \"\" });\r\n                }}\r\n              />\r\n            </span>\r\n          </div>\r\n        )}\r\n        <button\r\n          className=\"header-btn last-in-row menu\"\r\n          onClick={(event) => {\r\n            props.setPosition({\r\n              pos: { pageX: event.pageX, pageY: event.pageY },\r\n              type: \"BOARD_SHOW_MENU\",\r\n            });\r\n            props.setPopoverMenu(true);\r\n            props.togglePopover(false);\r\n          }}\r\n        >\r\n          <MoreHorizOutlinedIcon className=\"icon menu\" />\r\n          <span className=\"btn-txt\">Show menu</span>\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  togglePopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n  setFilterBy,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    filterBy: state.boardModule.filterBy,\r\n  };\r\n}\r\nexport const BoardHeader = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_BoardHeader);\r\n","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { addGroup } from \"../../store/board.actions\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Close } from \"@mui/icons-material\";\r\n\r\nfunction _AddNewGroup(props) {\r\n  const boardId = props.match.params.boardId;\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [btnText, setBtnText] = useState(\"Add list\");\r\n  const toggleIsClicked = () => {\r\n    if (isClicked) setTitle(\"\");\r\n    setIsClicked(!isClicked);\r\n  };\r\n\r\n  const addGroup = async () => {\r\n    try {\r\n      if(!title.trim()) return;\r\n      setBtnText(<Loader type=\"Grid\" color={\"white\"} height={14} width={14} />);\r\n      await props.addGroup(boardId, title.trim());\r\n      setBtnText(\"Add list\");\r\n      setTitle(\"\");\r\n      toggleIsClicked();\r\n    } catch (err) {\r\n      setBtnText(\"Add list\");\r\n    }\r\n  };\r\n  // if(isClicked) {\r\n  return (\r\n    <div className=\"add-group-wrapper\">\r\n      {!isClicked ? (\r\n        <article\r\n          className=\"group-details add-new\"\r\n          onClick={() => {\r\n            toggleIsClicked();\r\n          }}\r\n        >\r\n          <div className=\"flex align-center\">\r\n            <AddIcon className=\"icon\" />\r\n            Add a list\r\n          </div>\r\n        </article>\r\n      ) : (\r\n        <form\r\n          onSubmit={(ev) => {\r\n            ev.preventDefault();\r\n          }}\r\n        >\r\n          <div className=\"add-group-active group-details flex column scale-up-ver-top\">\r\n            <input\r\n              value={title}\r\n              placeholder=\"Enter list title...\"\r\n              onChange={(ev) => setTitle(ev.target.value)}\r\n              className=\"group-preview\"\r\n              autoFocus\r\n              // onBlur={toggleIsClicked}\r\n            />\r\n\r\n            <div className={`group-btns flex align-center`}>\r\n              <button\r\n                onClick={addGroup}\r\n                className=\"group-btn save-group-title-btn\"\r\n              >\r\n                {btnText}\r\n              </button>\r\n              <button\r\n                className=\"group-btn close-group-title-btn\"\r\n                onClick={toggleIsClicked}\r\n              >\r\n                <Close />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  addGroup,\r\n};\r\nexport const AddNewGroup = withRouter(\r\n  connect(null, mapDispatchToProps)(_AddNewGroup)\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { toggleExpandLabels } from \"../../store/board.actions\";\r\n\r\nfunction _TaskLabels(props) {\r\n  const { labelIds, boardLabels, areLabelsExpanded, toggleExpandLabels } =\r\n    props\r\n  return (\r\n    <div className=\"task-labels-container flex\">\r\n      {labelIds &&\r\n        labelIds.map((labelId, idx) => {\r\n          const label = boardLabels.find((label) => label.id === labelId);\r\n          if (label){\r\n            return (\r\n              <div\r\n                className={`label flex justify-center ${areLabelsExpanded ? \"expanded\" : \"\"\r\n                  }`}\r\n                style={{ background: label.color }}\r\n                key={idx}\r\n                onClick={(ev) => {\r\n                  ev.preventDefault();\r\n                  ev.stopPropagation();\r\n                  toggleExpandLabels();\r\n                }}\r\n              >\r\n                <span>{label.title}</span>\r\n              </div>\r\n            );} \r\n            else return null\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    areLabelsExpanded: state.boardModule.areLabelsExpanded,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  toggleExpandLabels,\r\n};\r\n\r\nexport const TaskLabels = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskLabels);\r\n","import React from \"react\";\r\n\r\nexport const TaskDetailsPreview = (props) => {\r\n  if (props.txt === \"0/0\") return <></>;\r\n  return (\r\n    <span\r\n      className={` flex align-center ${\r\n        props.isDone ? \"checklist done checklist\" : \"\"\r\n      }`}\r\n    >\r\n      {props.icon}\r\n      {props.txt && <p>{props.txt}</p>}\r\n    </span>\r\n  );\r\n};\r\n","import React, { useState ,useEffect} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../../store/board.actions\";\r\nimport AccessTimeOutlinedIcon from \"@mui/icons-material/AccessTimeOutlined\";\r\nimport CheckBoxOutlineBlankOutlinedIcon from \"@mui/icons-material/CheckBoxOutlineBlankOutlined\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\n\r\nconst _TaskDatePreview = (props) => {\r\n  const [isMouseOver, setMouseOver] = useState(false);\r\n  const [isDone, setIsDone] = useState(props.isDone);\r\n\r\n  const toggleIsDone = async (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    setIsDone(!isDone)\r\n    const newBoard = { ...props.board };\r\n    const groupIdx = newBoard.groups.findIndex((group)=>props.groupId === group.id);\r\n    const taskIdx = newBoard.groups[groupIdx].tasks.findIndex((task)=>props.taskId === task.id);\r\n    newBoard.groups[groupIdx].tasks[taskIdx].isDone = !props.isDone\r\n    try {\r\n      await props.saveBoard(newBoard)\r\n    }\r\n    catch(err){\r\n      console.log('cant change task status',err)\r\n      setIsDone(!isDone)\r\n\r\n    }\r\n  };\r\n  useEffect(()=>{\r\n    if(isDone !== props.isDone) {\r\n      setIsDone(props.isDone)\r\n    }\r\n  },[props.isDone,isDone])\r\n  return (\r\n    <span\r\n      className={`due-date ${\r\n        !isDone && props.dueDate < Date.now() ? \"overdue\" : \"\"\r\n      }${isDone ? \"done\" : \"\"} `}\r\n      onMouseEnter={() => setMouseOver(props.noHover ? false : true)}\r\n      onMouseLeave={() => setMouseOver(false)}\r\n      onClick={toggleIsDone}\r\n    >\r\n      {!isDone && (\r\n        <>\r\n          {!isMouseOver ? (\r\n            <AccessTimeOutlinedIcon className=\"icon\" />\r\n          ) : (\r\n            <CheckBoxOutlineBlankOutlinedIcon className=\"icon\" />\r\n          )}\r\n        </>\r\n      )}\r\n      {isDone && (\r\n        <>\r\n          {!isMouseOver ? (\r\n            <CheckBoxOutlinedIcon className=\"icon\" />\r\n          ) : (\r\n            <CheckBoxOutlineBlankOutlinedIcon className=\"icon\" />\r\n          )}\r\n        </>\r\n      )}\r\n      <p>\r\n        {new Date(props.dueDate).toLocaleDateString(undefined, {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        })}\r\n      </p>\r\n    </span>\r\n  );\r\n};\r\nconst mapDispatchToProps = {\r\n  saveBoard\r\n}\r\nfunction mapStateToProps({ boardModule }) {\r\n  return {\r\n    board: boardModule.board,\r\n  };\r\n}\r\nexport const TaskDatePreview = connect(mapStateToProps,mapDispatchToProps)(_TaskDatePreview);\r\n","import { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateTask, addActivity } from \"../../store/board.actions\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ArchiveIcon from \"@mui/icons-material/Archive\";\r\nimport PictureInPictureIcon from \"@mui/icons-material/PictureInPicture\";\r\nimport LabelIcon from \"@material-ui/icons/LocalOfferOutlined\";\r\nimport PersonOutlineIcon from \"@mui/icons-material/PersonOutline\";\r\nimport CoverIcon from \"@material-ui/icons/VideoLabel\";\r\nimport CopyIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\r\nimport ScheduleIcon from \"@mui/icons-material/Schedule\";\r\nimport {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n} from \"../../store/app.actions\";\r\n\r\nclass _TaskActions extends Component {\r\n  state = { selectedAction: \"\" };\r\n\r\n  componentWillUnmount = () => {\r\n    if (this.props.isPopoverOpen) this.props.togglePopover();\r\n    this.setState({ selectedAction: \"\" });\r\n  };\r\n\r\n  setActiveAction = (ev) => {\r\n    ev.stopPropagation();\r\n    this.setState({ selectedAction: ev.target.parentElement.dataset.type });\r\n  };\r\n\r\n  sendToArchive = async () => {\r\n    const newTask = { ...this.props.task };\r\n    newTask.isArchive = true;\r\n    await this.props.addActivity(\r\n      this.props.board,\r\n      this.props.task,\r\n      \"add-to-archive\",\r\n      newTask.title\r\n    );\r\n    try {\r\n      await this.props.updateTask(\r\n        this.props.boardId,\r\n        this.props.groupId,\r\n        newTask\r\n      );\r\n      this.props.toggleMenu();\r\n    } catch (err) {\r\n      console.log(\"error when sending to archive\", err);\r\n    }\r\n  };\r\n\r\n  popoverDispatch = (ev, type) => {\r\n    this.props.task.style = this.props.task.style\r\n      ? this.props.task.style\r\n      : (this.props.task.style = {});\r\n    this.props.setCurrTaskDetails(this.props.task);\r\n    this.props.setPosition({\r\n      pos: { pageX: ev.pageX, pageY: ev.pageY },\r\n      type,\r\n    });\r\n    this.props.togglePopover();\r\n  };\r\n\r\n  render() {\r\n    const { menuPos, toggleMenu, taskUrl } = this.props;\r\n\r\n    return (\r\n      <div className=\"task-actions flex column slide-in-left\" style={menuPos}>\r\n        <Link to={taskUrl} onClick={toggleMenu} className=\"clean-link\">\r\n          <button>\r\n            <PictureInPictureIcon className=\"action-icon\" />\r\n            <p>Open card</p>\r\n          </button>\r\n        </Link>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"labels\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"labels\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"LABELS\");\r\n          }}\r\n        >\r\n          <LabelIcon className=\"action-icon\" />\r\n          <p>Edit labels</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"members\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"members\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"MEMBERS\");\r\n          }}\r\n        >\r\n          <PersonOutlineIcon className=\"action-icon\" />\r\n          <p>Change members</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"cover\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"cover\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"COVER\");\r\n          }}\r\n        >\r\n          <CoverIcon className=\"action-icon\" />\r\n          <p>Change cover</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"move\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"move\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"MOVE\");\r\n          }}\r\n        >\r\n          <ArrowForwardIcon className=\"action-icon\" />\r\n          <p>Move</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"copy\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"copy\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"COPY\");\r\n          }}\r\n        >\r\n          <CopyIcon className=\"action-icon\" />\r\n          <p>Copy</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"date\" && this.props.isPopoverOpen\r\n              ? \"\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"date\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"DATE\");\r\n          }}\r\n        >\r\n          <ScheduleIcon className=\"action-icon\" />\r\n          <p>Edit date</p>\r\n        </button>\r\n        <button onClick={this.sendToArchive}>\r\n          <ArchiveIcon className=\"action-icon\" />\r\n          <p>Archive</p>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  updateTask,\r\n  setPosition,\r\n  setCurrTaskDetails,\r\n  togglePopover,\r\n  addActivity,\r\n};\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isPopoverOpen: state.appModule.popover.isOpen,\r\n    board: state.boardModule.board,\r\n  };\r\n};\r\nexport const TaskActions = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskActions);\r\n","import { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateTask, addActivity } from \"../../store/board.actions\";\r\nimport { TaskLabels } from \"./TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskDetailsPreview\";\r\nimport { TaskDatePreview } from \"./TaskDatePreview\";\r\nimport { MemberList } from \"../MemberList\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\nimport { TaskActions } from \"./TaskActions\";\r\n\r\nexport function _TaskPreviewEdit({\r\n  task,\r\n  groupId,\r\n  boardId,\r\n  boardLabels,\r\n  getChecklistData,\r\n  menuPos,\r\n  toggleMenu,\r\n  updateTask,\r\n  taskUrl,\r\n  addActivity,\r\n  board,\r\n}) {\r\n  const {\r\n    style,\r\n    labelIds,\r\n    dueDate,\r\n    title,\r\n    description,\r\n    comments,\r\n    attachments,\r\n    checklists,\r\n    todos,\r\n  } = task;\r\n\r\n  const [editTitle, setEditTitle] = useState(title);\r\n\r\n  const updateTaskName = async () => {\r\n    const newTask = { ...task };\r\n    if (newTask.title === editTitle) return;\r\n    newTask.title = editTitle;\r\n\r\n    try {\r\n      await updateTask(boardId, groupId, newTask);\r\n      toggleMenu();\r\n    } catch (err) {\r\n      console.log(\"error when setting title\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <article\r\n        className=\"task-preview-container edit\"\r\n        style={{ zIndex: 100, borderRadius: 3 }}\r\n      >\r\n        {style?.bgUrl && (\r\n          <img\r\n            className=\"task-cover-img\"\r\n            src={style.bgUrl}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"3px\",\r\n              objectFit: \"contain\",\r\n              maxHeight: 240,\r\n            }}\r\n            alt=\"\"\r\n          />\r\n        )}\r\n\r\n        {style?.bgColor && !style?.bgUrl && (\r\n          <div\r\n            className=\"task-cover\"\r\n            style={{ background: task.style.bgColor }}\r\n          ></div>\r\n        )}\r\n\r\n        <div\r\n          className=\"task-preview clean-link \"\r\n          style={\r\n            style?.bgUrl && {\r\n              position: \"relative\",\r\n              top: \"-8px\",\r\n              marginBottom: \"-8px\",\r\n              borderRadius: \"0 0 3px 3px\",\r\n            }\r\n          }\r\n        >\r\n          {labelIds?.length > 0 && (\r\n            <TaskLabels labelIds={labelIds} boardLabels={boardLabels} />\r\n          )}\r\n          <textarea\r\n            className=\"task-title\"\r\n            value={editTitle}\r\n            autoFocus\r\n            onChange={(ev) => setEditTitle(ev.target.value)}\r\n          />\r\n          <div className=\"task-preview-icons flex align-center\">\r\n            {dueDate && (\r\n              <TaskDatePreview\r\n                dueDate={dueDate}\r\n                isDone={task.isDone}\r\n                taskId={task.id}\r\n                groupId={groupId}\r\n              />\r\n            )}\r\n            {description?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<SubjectOutlinedIcon className=\"icon\" />}\r\n              />\r\n            )}\r\n            {comments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<ChatBubbleOutlineRoundedIcon className=\"icon msg\" />}\r\n                txt={comments.length}\r\n              />\r\n            )}\r\n            {attachments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<AttachFileIcon className=\"icon attach\" />}\r\n                txt={attachments.length}\r\n              />\r\n            )}\r\n            {checklists?.length > 0 && todos !== 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                txt={getChecklistData()}\r\n                isDone={getChecklistData(true)}\r\n              />\r\n            )}\r\n            {task?.members && (\r\n              <MemberList\r\n                members={task.members}\r\n                isInPreview={true}\r\n                isEditMode={true}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </article>\r\n      <button\r\n        className=\"save-btn\"\r\n        onClick={() => {\r\n          updateTaskName();\r\n        }}\r\n      >\r\n        Save\r\n      </button>\r\n      <TaskActions\r\n        toggleMenu={toggleMenu}\r\n        menuPos={menuPos}\r\n        groupId={groupId}\r\n        boardId={boardId}\r\n        task={task}\r\n        taskUrl={taskUrl}\r\n      />\r\n    </>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  updateTask,\r\n  addActivity,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n  };\r\n}\r\nexport const TaskPreviewEdit = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreviewEdit);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { setPopoverMenu } from \"../store/app.actions\";\r\nimport { TaskPreviewEdit } from \"./TaskPreview/TaskPreviewEdit\";\r\nimport { TaskLabels } from \"./TaskPreview/TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskPreview/TaskDetailsPreview\";\r\nimport { toggleDragDisable } from \"../store/app.actions\";\r\nimport { TaskDatePreview } from \"./TaskPreview/TaskDatePreview\";\r\nimport { MemberList } from \"../cmps/MemberList\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport ModeEditOutlinedIcon from \"@mui/icons-material/ModeEditOutlined\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\n\r\nfunction _TaskPreview(props) {\r\n  const {\r\n    task,\r\n    taskUrl,\r\n    boardLabels,\r\n    groupId,\r\n    boardId,\r\n    index,\r\n    isDragDisabled,\r\n    toggleDragDisable,\r\n  } = props;\r\n  const {\r\n    labelIds,\r\n    title,\r\n    dueDate,\r\n    comments,\r\n    checklists,\r\n    description,\r\n    attachments,\r\n    style,\r\n    media,\r\n  } = task;\r\n\r\n  const [isMenuShown, toggleMenuShown] = useState(false);\r\n  const [menuPos, setMenuPos] = useState();\r\n\r\n  const calcPos = (ev) => {\r\n    if (!ev) return;\r\n    let { top, right } =\r\n      ev.target.parentElement.parentElement.getBoundingClientRect();\r\n    if (top > window.innerHeight - 318) {\r\n      setMenuPos({\r\n        position: \"absolute\",\r\n        left: `${right}px`,\r\n        bottom: 50,\r\n      });\r\n    } else {\r\n      setMenuPos({\r\n        position: \"fixed\",\r\n        left: `${right}px`,\r\n        top,\r\n      });\r\n    }\r\n  };\r\n  const toggleMenu = (ev) => {\r\n    calcPos(ev);\r\n    toggleMenuShown(!isMenuShown);\r\n    toggleDragDisable();\r\n    props.setPopoverMenu(false);\r\n  };\r\n\r\n  let todos;\r\n  let doneTodos;\r\n\r\n  const getChecklistData = (isDone) => {\r\n    todos = 0;\r\n    doneTodos = 0;\r\n    checklists.forEach((checklist) => {\r\n      todos += checklist.todos.length;\r\n      checklist.todos.forEach((todo) => {\r\n        if (todo.isDone) doneTodos++;\r\n      });\r\n    });\r\n    if (isDone) return todos === doneTodos;\r\n    return `${doneTodos}/${todos}`;\r\n  };\r\n  // full cover image\r\n  if (style?.bgUrl && style?.coverMode === \"full\" && !isMenuShown) {\r\n    return (\r\n      <Draggable\r\n        draggableId={task.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided) => (\r\n          <article\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n          >\r\n            <Link to={taskUrl} className=\"clean-link\">\r\n              <div\r\n                className={`task-preview-container full-cover img`}\r\n                src={style.bgUrl}\r\n              >\r\n                <img className=\"\" src={style.bgUrl} alt=\"\" />\r\n                <div className=\"img-overlay\" />\r\n                <p>{task.title}</p>\r\n                <div\r\n                  className=\"edit-icon\"\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    toggleMenu(ev);\r\n                  }}\r\n                >\r\n                  <ModeEditOutlinedIcon className=\"icon\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </article>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  }\r\n\r\n  // full color cover\r\n  if (style && style?.coverMode === \"full\" && !isMenuShown)\r\n    return (\r\n      <Draggable\r\n        draggableId={task.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided) => (\r\n          <article\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n          >\r\n            <div\r\n              className=\"task-preview-container full-cover\"\r\n              style={{ background: style.bgColor }}\r\n            >\r\n              <Link to={taskUrl} className=\"clean-link\">\r\n                <div className=\"task-preview\">\r\n                  <p>{task.title}</p>\r\n                </div>\r\n              </Link>\r\n              <div className=\"edit-icon\" onClick={toggleMenu}>\r\n                <ModeEditOutlinedIcon className=\"icon\" />\r\n              </div>\r\n            </div>\r\n          </article>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  // normal\r\n  if (!isMenuShown)\r\n    return (\r\n      <>\r\n        <Draggable\r\n          draggableId={task.id}\r\n          index={index}\r\n          isDragDisabled={isDragDisabled}\r\n        >\r\n          {(provided) => (\r\n            <div\r\n              ref={provided.innerRef}\r\n              {...provided.draggableProps}\r\n              {...provided.dragHandleProps}\r\n            >\r\n              <article\r\n                className=\"task-preview-container\"\r\n                style={{ boxShadow: \"none\", zIndex: isMenuShown ? 55 : 0 }}\r\n              >\r\n                {style?.bgUrl && (\r\n                  <Link to={taskUrl} className=\"clean-link\">\r\n                    <img\r\n                      className=\"task-cover-img\"\r\n                      src={style.bgUrl}\r\n                      style={{\r\n                        backgroundColor: \"white\",\r\n                        borderRadius: \"3px\",\r\n                        objectFit: \"cover\",\r\n                        maxHeight: 240,\r\n                      }}\r\n                      alt=\"\"\r\n                    />\r\n                  </Link>\r\n                )}\r\n\r\n                <Link to={taskUrl} className=\"clean-link\">\r\n                  {style?.bgColor && !style?.bgUrl && (\r\n                    <div\r\n                      className=\"task-cover\"\r\n                      style={{ background: task.style.bgColor }}\r\n                    ></div>\r\n                  )}\r\n                  <div\r\n                    className=\"task-preview clean-link \"\r\n                    style={\r\n                      style?.bgUrl && {\r\n                        position: \"relative\",\r\n                        top: \"-8px\",\r\n                        marginBottom: \"-8px\",\r\n                        borderRadius: \"0 0 3px 3px\",\r\n                      }\r\n                    }\r\n                  >\r\n                    {labelIds?.length > 0 && (\r\n                      <TaskLabels\r\n                        labelIds={labelIds}\r\n                        boardLabels={boardLabels}\r\n                      />\r\n                    )}\r\n                    {media?.videoUrl && (\r\n                      <div\r\n                        className=\"video flex\"\r\n                        onDrag={(ev) => ev.stopPropagation()}\r\n                      >\r\n                        <video width={\"100%\"} controls>\r\n                          <source src={task.media.videoUrl} type=\"video/mp4\" />\r\n                        </video>\r\n                      </div>\r\n                    )}\r\n                    {media?.audioUrl && (\r\n                      <div className=\"audio\">\r\n                        <audio controls src={task.media.audioUrl} />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"task-title\">\r\n                      <p>{title}</p>\r\n                    </div>\r\n                    <div className=\"task-preview-icons flex align-center\">\r\n                      {dueDate && (\r\n                        <TaskDatePreview\r\n                          dueDate={dueDate}\r\n                          isDone={task.isDone}\r\n                          taskId={task.id}\r\n                          groupId={groupId}\r\n                        />\r\n                      )}\r\n                      {description?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<SubjectOutlinedIcon className=\"icon desc\" />}\r\n                        />\r\n                      )}\r\n                      {comments?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={\r\n                            <ChatBubbleOutlineRoundedIcon className=\"icon msg\" />\r\n                          }\r\n                          txt={comments.length}\r\n                        />\r\n                      )}\r\n                      {attachments?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<AttachFileIcon className=\"icon attach\" />}\r\n                          txt={attachments.length}\r\n                        />\r\n                      )}\r\n                      {checklists?.length > 0 && todos !== 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                          txt={getChecklistData()}\r\n                          isDone={\r\n                            todos === doneTodos && todos !== 0 ? true : false\r\n                          }\r\n                        />\r\n                      )}\r\n                      {task?.members && (\r\n                        <MemberList\r\n                          members={task.members}\r\n                          isInPreview={true}\r\n                          task={task}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div\r\n                    className=\"edit-icon\"\r\n                    onClick={(ev) => {\r\n                      ev.preventDefault();\r\n                      ev.stopPropagation();\r\n                      toggleMenu(ev);\r\n                    }}\r\n                  >\r\n                    <ModeEditOutlinedIcon className=\"icon\" />\r\n                  </div>\r\n                </Link>\r\n              </article>\r\n            </div>\r\n          )}\r\n        </Draggable>\r\n      </>\r\n    );\r\n  // edit mode\r\n  else\r\n    return (\r\n      <>\r\n        <div\r\n          className={`overlay ${isMenuShown ? \"show\" : \"\"}`}\r\n          onClick={toggleMenu}\r\n          style={{ zIndx: 2 }}\r\n        ></div>\r\n        <TaskPreviewEdit\r\n          task={task}\r\n          getChecklistData={getChecklistData}\r\n          groupId={groupId}\r\n          boardId={boardId}\r\n          boardLabels={boardLabels}\r\n          menuPos={menuPos}\r\n          toggleMenu={toggleMenu}\r\n          taskUrl={taskUrl}\r\n        />\r\n      </>\r\n    );\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isDragDisabled: state.appModule.isDragDisabled,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  toggleDragDisable,\r\n  setPopoverMenu,\r\n};\r\n\r\nexport const TaskPreview = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreview);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { TaskPreview } from \"./TaskPreview\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\n\r\nexport function _TaskPreviewList(props) {\r\n  const { groupId, boardId, boardLabels, tasks, filterBy } = props;\r\n\r\n  let filteredTasks = JSON.parse(JSON.stringify(tasks))\r\n  if (filteredTasks.length) {\r\n    filteredTasks.forEach((task, idx) => task.orgIdx = idx)\r\n    filteredTasks = filteredTasks.filter((task) => task?.isArchive !== true);\r\n  }\r\n\r\n  if (filterBy.search) {\r\n    const search = filterBy.search.toLowerCase()\r\n    filteredTasks = filteredTasks.filter(task => task.title.toLowerCase().includes(search))\r\n  }\r\n\r\n  if (filterBy.labels.length > 0) {\r\n    filteredTasks = filteredTasks.filter(task => task.labelIds.some(labelId => filterBy.labels.every(label => task.labelIds.includes(label))))\r\n  }\r\n\r\n  if (filterBy.members.length > 0) {\r\n    filteredTasks = filteredTasks.filter(task => task.members.some(member => filterBy.members.every(member => {\r\n      const taskMembersIds = task.members.map(member => member._id)\r\n      return taskMembersIds.includes(member)\r\n    })))\r\n  }\r\n\r\n  return (\r\n    <Droppable droppableId={groupId}>\r\n      {(provided) => (\r\n        <div {...provided.droppableProps} ref={provided.innerRef} className=\"task-list\">\r\n          {filteredTasks?.map((task) => (\r\n            <TaskPreview\r\n              task={task}\r\n              key={task.id}\r\n              id={task.id}\r\n              index={task.orgIdx}\r\n              taskUrl={`/board/${boardId}/${groupId}/${task.id}`}\r\n              boardLabels={boardLabels}\r\n              groupId={groupId}\r\n              boardId={boardId}\r\n            />\r\n          ))}\r\n          {provided.placeholder}\r\n          {!filteredTasks.length && <div style={{ visibilty: 'hidden', opacity: '0', height: '1px', width: '1px', color: 'transparent' }}></div>}\r\n        </div>\r\n      )}\r\n    </Droppable>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    filterBy: state.boardModule.filterBy,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n\r\n};\r\n\r\nexport const TaskPreviewList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreviewList);\r\n","export const cloudinaryService = {\n    uploadFile\n}\n\nfunction uploadFile(ev, type = 'image', blob = null) {\n    const CLOUD_NAME = 'dusakec3z'\n    const PRESET_NAME = 'pjprwzkr'\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/${type}/upload`\n\n    const formData = new FormData();\n    // console.log('target', ev.target)\n    (type === 'image') ? formData.append('file', ev.target.files[0]) : formData.append('file', blob)\n    // console.log('ev.target.files[0]):', ev.target.files[0])\n    formData.append('upload_preset', PRESET_NAME);\n    // console.log('formData:', formData)\n\n    return fetch(UPLOAD_URL, {\n        method: 'POST',\n        body: formData\n    })\n        .then(res => res.json())\n        .then(res => {\n            return res\n        })\n        .catch(err => console.error(err))\n}\n\n// const CLOUD_NAME = 'dswmustlv'\n// const PRESET_NAME = 'f7cyi5ho'\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport VideoRecorder from \"react-video-recorder\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { ReactMic } from 'react-mic';\nimport { cloudinaryService } from '../services/cloudinary-service'\nimport { addTask } from '../store/board.actions';\nimport StopIcon from \"@material-ui/icons/Stop\";\nimport Fab from \"@material-ui/core/Fab\";\nimport styled from \"styled-components\";\nimport MicIcon from \"@material-ui/icons/Mic\";\n\nexport class _MediaRecord extends React.Component {\n    state = {\n        record: false,\n        isOverlay: true\n    };\n\n    componentDidMount() {\n        this.setOverlay(true)\n    }\n\n    compoentWillUnmount() {\n        this.stopRecording()\n    }\n\n    startRecording = () => {\n        this.setState({\n            record: true\n        });\n    };\n\n    stopRecording = () => {\n        this.setState({\n            record: false\n        });\n    };\n\n    onStop = async (blob, type) => {\n        this.props.setMediaType('')\n        const res = await cloudinaryService.uploadFile(null, 'video', type === 'video' ? blob : blob.blob);\n        const url = res.secure_url\n        if (type === 'video') this.props.addTask('Media Video', this.props.boardId, this.props.groupId, null, url)\n        else this.props.addTask('Media Audio', this.props.boardId, this.props.groupId, url, null)\n    }\n\n    setOverlay = (isOverlay) => {\n        this.setState({ isOverlay })\n    }\n\n    render() {\n        const StyledFab = styled(Fab)`\n        position: relative;\n        background-color: ${!this.state.record ? \"#272727\" : \"#8f3934\"};\n        color: white;\n        opacity: 1;\n        margin: 12px;\n        z-index: 3;\n        transition: all 0.2s;\n        :hover {\n          background-color: ${!this.state.record ? \"#272727\" : \"#8f3934\"};\n          opacity: 0.9;\n        }\n      `;\n\n        const { setAudioPath } = this.props;\n        return (\n            <>\n                {\n                    <div className=\"media\" style={{ width: \"100%\", maxWidth: 400, height: 400, padding: '0 20px' }}>\n                        <div className=\"media-container\">\n                            {this.props.type === 'video' && <VideoRecorder\n                                className=\"video-recorder\"\n                                isFlipped={false}\n                                countdownTime={0}\n                                mimeType=\"video/webm;codecs=vp8,opus\"\n                                constraints={{\n                                    audio: true,\n                                    video: {\n                                        resizeMode: \"crop-and-scale\",\n                                        width: { exact: 480, ideal: 480 },\n                                        height: { exact: 640, ideal: 640 },\n                                        aspectRatio: { exact: 0.7500000001, ideal: 0.7500000001 },\n                                    }\n                                }}\n                                onRecordingComplete={(blob) => this.onStop(blob, 'video')}\n                            />}\n                        </div>\n                    </div>\n\n                }\n                {\n                    this.props.type === 'audio' && <div className=\"media\">\n                        <div className=\"media-container\">\n\n                            <ReactMic\n                                record={this.state.record}\n                                className=\"sound-wave\"\n                                onStop={(blob) => this.onStop(blob, 'audio')}\n                                strokeColor=\"white\"\n                                backgroundColor=\"black\"\n                                setAudioPath={setAudioPath}\n                                height={240}\n                                width={370}\n                            />\n                            <Grid item container justify=\"center\" xs={12}>\n                                {!this.state.record && <StyledFab\n                                    onClick={this.startRecording}\n                                    color=\"secondary\" aria-label=\"record\">\n                                    <MicIcon />\n                                </StyledFab>}\n                                {this.state.record && <StyledFab color=\"secondary\" aria-label=\"record\"\n                                    onClick={this.stopRecording}>\n                                    <StopIcon />\n                                </StyledFab>}\n                            </Grid>\n                        </div>\n\n                    </div>\n                }\n                <div className={`overlay ${this.state.isOverlay ? 'show' : ''} `} onClick={() => { this.props.setMediaType('') }} style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}></div>\n            </>\n        );\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    addTask\n};\n\nexport const MediaRecord = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_MediaRecord);\n","import React, { useState } from \"react\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { addTask } from \"../../store/board.actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport VideoCallIcon from \"@mui/icons-material/VideoCall\";\r\nimport MicNoneIcon from \"@mui/icons-material/MicNone\";\r\nimport { MediaRecord } from \"../MediaRecord\";\r\n\r\nexport function _GroupFooter(props) {\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [taskTitle, setTaskTitle] = useState(\"\");\r\n  const [btnText, setBtnText] = useState(\"Add task\");\r\n  const [mediaType, setType] = useState(\"\");\r\n\r\n  const toggleIsClicked = () => {\r\n    setIsClicked(!isClicked);\r\n  };\r\n\r\n  const onAddTask = async () => {\r\n    try {\r\n      if (!taskTitle.trim()) return;\r\n      setBtnText(<Loader type=\"Grid\" color={\"white\"} height={14} width={14} />);\r\n      await props.addTask(\r\n        taskTitle.trim(),\r\n        props.ids.boardId,\r\n        props.ids.groupId\r\n      );\r\n      setTaskTitle(\"\");\r\n      setBtnText(\"Add task\");\r\n      props.scrollToBottom();\r\n    } catch (err) {\r\n      console.log(\"error when saving task\", err);\r\n      setBtnText(\"Add task\");\r\n    }\r\n  };\r\n  const setMediaType = (type) => {\r\n    setType(type);\r\n    type ? props.toggleDragDisable(true) : props.toggleDragDisable(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grp-add-task\">\r\n        {!isClicked ? (\r\n          <div className=\"add-task-inactive flex space-between\">\r\n            <div\r\n              className=\"add-btn flex align-center\"\r\n              onClick={toggleIsClicked}\r\n            >\r\n              <AddIcon className=\"icon\" />\r\n              <p>Add a task</p>\r\n            </div>\r\n            <div className=\"media-btns flex align-center\">\r\n              <VideoCallIcon\r\n                className=\"media-icon\"\r\n                onClick={() => setMediaType(\"video\")}\r\n              />\r\n              <MicNoneIcon\r\n                className=\"media-icon\"\r\n                onClick={() => setMediaType(\"audio\")}\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"add-task-active flex column\">\r\n            <textarea\r\n              value={taskTitle}\r\n              placeholder=\"Enter a title for this task...\"\r\n              onChange={(ev) => setTaskTitle(ev.target.value)}\r\n              className=\"task-preview\"\r\n              onClick={props.scrollToBottom}\r\n            />\r\n\r\n            <div className={`task-btns flex align-center`}>\r\n              <button\r\n                className=\"task-btn save-task-title-btn\"\r\n                onClick={onAddTask}\r\n              >\r\n                {btnText}\r\n              </button>\r\n              <button\r\n                className=\"task-btn close-task-title-btn\"\r\n                onClick={toggleIsClicked}\r\n              >\r\n                <Close />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {mediaType && (\r\n        <MediaRecord\r\n          boardId={props.ids.boardId}\r\n          groupId={props.ids.groupId}\r\n          type={mediaType}\r\n          setMediaType={setMediaType}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addTask,\r\n};\r\n\r\nexport const GroupFooter = connect(null, mapDispatchToProps)(_GroupFooter);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../../store/board.actions\";\r\n\r\nconst _HeaderTitle = (props) => {\r\n  const group = { ...props.group };\r\n  const [groupTitle, setTitle] = useState(group.title);\r\n  useEffect(() => {\r\n    setTitle(props.group.title)\r\n }, [props.group.title]);\r\n\r\n  const saveTitle = async () => {\r\n    const newBoard = { ...props.board };\r\n    const grpIdx = newBoard.groups.findIndex((grp) => group.id === grp.id);\r\n    newBoard.groups[grpIdx].title = groupTitle;\r\n    try {\r\n      await props.saveBoard(newBoard);\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  return (\r\n    <input\r\n      className=\"group-title flex column\"\r\n      value={groupTitle}\r\n      onChange={(ev) => setTitle(ev.target.value)}\r\n      onBlur={saveTitle}\r\n    />\r\n  );\r\n};\r\nfunction mapStateToProps({ boardModule }) {\r\n  return {\r\n    board: boardModule.board,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n};\r\nexport const HeaderTitle = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_HeaderTitle);\r\n","import React from \"react\";\r\nexport function GroupActions(props) {\r\n\r\n  return (\r\n    <div className=\"group-menu\" style={props.menuPos}>\r\n      <h3>List actions</h3>\r\n      <button\r\n        onClick={() => {\r\n          props.removeGroup(props.boardId, props.groupId);\r\n          props.toggleMenuShown(false);\r\n        }}\r\n      >\r\n         Delete list\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AddNewGroup } from \"./Group/AddNewGroup\";\r\nimport { TaskPreviewList } from \"./TaskPreviewList\";\r\nimport { GroupFooter } from \"./Group/GroupFooter\";\r\nimport { HeaderTitle } from \"./Group/HeaderTitle\";\r\nimport { removeGroup } from \"../store/board.actions\";\r\nimport { toggleDragDisable } from \"../store/app.actions\";\r\nimport MoreHorizOutlinedIcon from \"@mui/icons-material/MoreHorizOutlined\";\r\nimport { GroupActions } from \"./Group/GroupActions\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport NaturalDragAnimation from \"natural-drag-animation-rbdnd\";\r\n\r\nconst _GroupDetails = (props) => {\r\n  const {\r\n    group,\r\n    isAddNew,\r\n    boardId,\r\n    boardLabels,\r\n    index,\r\n    isDragDisabled,\r\n    toggleDragDisable,\r\n  } = props;\r\n  const elRef = useRef();\r\n  const [isMenuShown, toggleMenuShown] = useState(false);\r\n  const [menuPos, setMenuPos] = useState({});\r\n\r\n  const toggleMenu = (ev) => {\r\n    let posX = window.innerWidth - ev.pageX > 200 ? ev.pageX : ev.pageX - 200;\r\n    setMenuPos({\r\n      position: \"fixed\",\r\n      top: `${ev.pageY}px`,\r\n      left: `${posX}px`,\r\n    });\r\n    toggleMenuShown(!isMenuShown);\r\n    toggleDragDisable();\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    elRef.current.scrollTo({\r\n      top: elRef.current.scrollHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  if (isAddNew) return <AddNewGroup />;\r\n\r\n  return (\r\n    <div>\r\n      <Draggable\r\n        draggableId={group.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided, snapshot) => (\r\n          <NaturalDragAnimation\r\n            style={provided.draggableProps.style}\r\n            snapshot={snapshot}\r\n          >\r\n            {(style) => (\r\n              <article\r\n                ref={provided.innerRef}\r\n                {...provided.draggableProps}\r\n                {...provided.dragHandleProps}\r\n                // style={style}\r\n                style={{...style}}\r\n\r\n                className=\"group-details flex column\"\r\n              >\r\n                <div className=\"group-header flex space-between align-center\">\r\n                  <HeaderTitle group={group} />\r\n                  <MoreHorizOutlinedIcon\r\n                    fontSize={\"small\"}\r\n                    onClick={toggleMenu}\r\n                    className=\"dots\"\r\n                  />\r\n\r\n                  {isMenuShown && (\r\n                    <GroupActions\r\n                      menuPos={menuPos}\r\n                      removeGroup={props.removeGroup}\r\n                      toggleMenuShown={toggleMenuShown}\r\n                      boardId={boardId}\r\n                      groupId={group.id}\r\n                    />\r\n                  )}\r\n                  <div\r\n                    className={`overlay ${isMenuShown ? \"show\" : \"\"}`}\r\n                    onClick={toggleMenu}\r\n                  />\r\n                </div>\r\n                <div className={`group-main flex column `} ref={elRef}>\r\n                  <TaskPreviewList\r\n                    tasks={group.tasks}\r\n                    boardId={boardId}\r\n                    groupId={group.id}\r\n                    boardLabels={boardLabels}\r\n                    toggleDragDisable={toggleDragDisable}\r\n                  />\r\n                </div>\r\n                <div className=\"group-footer\">\r\n                  <GroupFooter\r\n                    ids={{ groupId: group.id, boardId }}\r\n                    scrollToBottom={scrollToBottom}\r\n                    toggleDragDisable={toggleDragDisable}\r\n                  />\r\n                </div>\r\n              </article>\r\n            )}\r\n          </NaturalDragAnimation>\r\n        )}\r\n      </Draggable>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  removeGroup,\r\n  toggleDragDisable,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isDragDisabled: state.appModule.isDragDisabled,\r\n  };\r\n}\r\nexport const GroupDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_GroupDetails);\r\n","import React from \"react\";\r\nimport { GroupDetails } from \"./GroupDetails\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\n\r\nexport function GroupList(props) {\r\n  const { groups, boardId, boardLabels } = props;\r\n\r\n  return (\r\n    <>\r\n      <Droppable\r\n        droppableId={\"all-groups\"}\r\n        type=\"group\"\r\n        direction={\"horizontal\"}\r\n      >\r\n        {(provided) => (\r\n          <div\r\n            className=\"group-list\"\r\n            {...provided.droppableProps}\r\n            ref={provided.innerRef}\r\n          >\r\n            {groups.map((group, idx) => (\r\n              <div key={group.id}>\r\n                <GroupDetails\r\n                  group={group}\r\n                  boardId={boardId}\r\n                  index={idx}\r\n                  id={group.id}\r\n                  boardLabels={boardLabels}\r\n                />\r\n              </div>\r\n            ))}\r\n            {provided.placeholder}\r\n            <GroupDetails isAddNew={true} />\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { BoardHeader } from \"../cmps/BoardHeader\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogin } from \"../store/user.actions\"\r\nimport { loadBoard, loadBoards, clearBoard, handleDrag, setFilterBy } from \"../store/board.actions\";\r\nimport { loadUsers } from \"../store/user.actions\";\r\nimport { GroupList } from \"../cmps/GroupList\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport { socketService } from '../services/socket.service'\r\n\r\n\r\nclass _BoardApp extends Component {\r\n  state = {\r\n    isMenuOpen: false,\r\n    currentTarget: null,\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    this.props.setFilterBy({ labels: [], members: [], search: '' })\r\n    const { boardId } = this.props.match.params\r\n    if (!this.props.user) this.props.onLogin({ username: 'guest', password: '1' })\r\n    this._loadBoard();\r\n    if (!this.props.boards.length) this.props.loadBoards()\r\n    this.props.loadUsers();\r\n    socketService.emit('join-board', boardId)\r\n    socketService.on(\"updated-board\", () => { this.props.loadBoard(boardId) })\r\n\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    this.props.clearBoard();\r\n    socketService.off(\"updated-board\")\r\n    this.props.setFilterBy({ labels: [], members: [], search: '' })\r\n\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    if (this.props.match.params?.boardId !== this.props.board?._id) {\r\n      this.props.clearBoard();\r\n      this._loadBoard();\r\n      this.props.loadUsers();\r\n\r\n    }\r\n  };\r\n\r\n  toggleMenu = (ev) => {\r\n    this.setState(prevState => ({ ...prevState, isMenuOpen: !this.state.isMenuOpen }))\r\n    this.setCurrentTarget(ev)\r\n  }\r\n\r\n  setCurrentTarget = (event) => {\r\n    this.setState(prevState => ({ ...prevState, currentTarget: event }))\r\n  }\r\n\r\n  _loadBoard = async () => {\r\n    const id = this.props.match.params.boardId;\r\n    if (!id) this.props.history.push('/workspace')\r\n    if (id) {\r\n      try {\r\n        await this.props.loadBoard(id);\r\n        if (!this.props.board)\r\n          this.props.history.push('/workspace')\r\n\r\n      } catch (err) {\r\n        console.log(\"cant load board\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  onDragEnd = (result) => {\r\n    const { destination, source, draggableId, type } = result;\r\n    if (!destination) return;\r\n    this.props.handleDrag(\r\n      { ...this.props.board },\r\n      source.droppableId,\r\n      destination.droppableId,\r\n      source.index,\r\n      destination.index,\r\n      draggableId,\r\n      type\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { board } = this.props;\r\n    if (!board) return <></>;\r\n    return (<>\r\n      <DragDropContext onDragEnd={this.onDragEnd}>\r\n        <section\r\n          className=\"board-app flex column\"\r\n          style={{\r\n            background: board.style.bgImg\r\n              ? `url(${board.style.bgImg})`\r\n              : board.style.bgClr,\r\n          }}\r\n        >\r\n          <BoardHeader board={{ ...board }} toggleMenu={this.toggleMenu} />\r\n          <GroupList\r\n            groups={[...board.groups]}\r\n            boardId={board._id}\r\n            boardLabels={[...board.labels]}\r\n          />\r\n        </section>\r\n      </DragDropContext>\r\n    </>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    boards: state.boardModule.boards,\r\n    user: state.userModule.loggedinUser\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  loadBoards,\r\n  clearBoard,\r\n  loadUsers,\r\n  handleDrag,\r\n  onLogin,\r\n  setFilterBy\r\n};\r\n\r\nexport const BoardApp = connect(mapStateToProps, mapDispatchToProps)(_BoardApp);\r\n","import React, { useState } from 'react'\nimport VideoLabel from '@mui/icons-material/VideoLabel';\n\nexport function TaskHeader({ taskTitle, setTaksDetailsTitle, taskList }) {\n    const [title, setTitle] = useState(taskTitle);\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        setTaksDetailsTitle(title);\n    }\n\n    return (\n        <header className=\"task-header\">\n            <div className=\"header-content\">\n                <div className=\"header-name flex\">\n                    <VideoLabel className=\"LabelSvg\" />\n                    <textarea\n                        style={{ width: '100%' }}\n                        onKeyDown={(ev) => {\n                            if (ev.key === 'Enter') {\n                                ev.preventDefault();\n                            }\n                        }}\n                        onChange={(e) => { setTitle(e.target.value) }}\n                        onBlur={(e) => { setTitle(e.target.value); handleSubmit(e) }}\n                        value={title}>\n                    </textarea>\n                </div>\n                <p className=\"list-name\">in list <span style={{ textDecoration: 'underline', fontWeight: 600 }}>{taskList}</span></p>\n            </div>\n        </header >\n    )\n}\n\n\n","import React from 'react'\nimport VideoLabel from '@mui/icons-material/VideoLabel';\nimport { connect } from 'react-redux';\nimport { setPosition, togglePopover } from '../store/app.actions';\n\nexport function _TaskCardCover({ setPosition, currTaskDetails, togglePopover }) {\n    const { bgColor, bgUrl } = currTaskDetails.style\n    return (\n        <div className=\"card-cover flex\" style={{ backgroundColor: bgColor ? bgColor : '' }}>\n            {bgUrl && <img src={bgUrl} style={{ backgroundColor: bgColor ? bgColor : '' }} alt='background' />}\n            <button className=\"cover-btn flex\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COVER' }); togglePopover() }}><VideoLabel /> Cover</button>\n        </div >\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover\n};\n\nexport const TaskCardCover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskCardCover);\n","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport SubjectIcon from '@mui/icons-material/Subject';\n\nexport class TaskDescription extends Component {\n    state = {\n        description: '',\n        isEditMode: false\n    }\n\n    componentDidMount() {\n        const description = this.props.currTask.description ? this.props.currTask.description : ''\n        this.setState(prevState => ({ ...prevState, description }))\n    }\n\n    onSaveDescription = () => {\n        const { description } = this.state\n        const { currTask, updateTaskDetails } = this.props\n        currTask.description = description\n        updateTaskDetails(currTask)\n        this.setState({ isEditMode: false })\n    }\n    handleChange = ({ target: { value } }) => {\n        this.setState({ description: value })\n    }\n\n    onToggleEdit = () => {\n        this.setState({ isEditMode: !this.state.isEditMode })\n    }\n    onEditMode = () => {\n        this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    render() {\n        const { isEditMode, description } = this.state\n        return (\n            <div className=\"task-description flex column\">\n                <div className=\"window-modal-title flex align-center\">\n                    <SubjectIcon />\n                    <h3>Description</h3>\n                    <button\n                        className={`task-btns edit-task-description-btn ${!isEditMode ? 'full-opacity' : 'none-opacity'}`}\n                        onClick={() => this.onEditMode()}>\n                        Edit\n                    </button>\n                </div>\n                <div className=\"card-description-edit flex column\">\n                    <textarea onClick={this.onEditMode}\n                        ref={(input) => { this.selectedInput = input; }}\n                        onBlur={this.onSaveDescription}\n                        value={description}\n                        placeholder=\"Add a more detailed description...\"\n                        onChange={this.handleChange}>\n                    </textarea>\n\n                    <div className={`description-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                        <button className='task-btns save-task-description-btn' onClick={() => this.onSaveDescription()}>Save</button>\n                        <button className='task-btns close-task-description-btn' onClick={() => this.onToggleEdit()}><Close /></button>\n                    </div>\n                </div>\n            </div>)\n    }\n\n}","import React from \"react\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport { connect } from \"react-redux\";\nimport { togglePopover, setPosition, setPopover } from '../../store/app.actions'\n\nexport class _Popover extends React.Component {\n    state = {\n        visible: false,\n        top: 0,\n        left: 0,\n    };\n    contentEl = null;\n\n    componentDidMount() {\n        this.onSetPopoverPos()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.popover !== this.props.popover) {\n            this.onSetPopoverPos()\n        }\n    }\n\n    toggleVisibility = () =>\n        this.setState((prevState) => ({ visible: !prevState.visible }));\n\n    onSetPopoverPos = () => {\n        if (!this.contentEl) return\n        const elRect = this.contentEl.getBoundingClientRect()\n        let { left, top } = this.setPopoverPos(elRect)\n        this.setState({ top, left })\n    }\n\n    setPopoverPos(elRect) {\n        const { pos } = this.props.popover\n        const { width, height } = elRect\n        let posX = (window.innerWidth - pos.pageX > 200) ? pos.pageX - 200 : pos.pageX - 200;\n        let posY = (window.innerHeight - pos.pageY > 200) ? pos.pageY + 20 : pos.pageY - 200;\n        posX = (posX + width > window.innerWidth) ? window.innerWidth - width - 10 : posX;\n        posY = (posY + height > window.innerHeight) ? window.innerHeight - height - 20 : posY;\n        if (posX < 0) posX = 10;\n        return { left: posX, top: posY }\n    }\n\n    getContentStyles = () => {\n        const { top, left } = this.state;\n        const { popover } = this.props\n        return {\n            position: \"fixed\",\n            opacity: 1,\n            top: `${top}px`,\n            left: `${left}px`,\n            transition: \"opacity 0.3s, visibility 0.3s\",\n            backgroundColor: `${(popover.isMenu) ? '#f4f5f7' : '#fff'}`,\n            border: \"1px solid lightgray\",\n            zIndex: 100,\n            padding: \"0 12px 12px\",\n            borderRadius: \"3px\",\n            marginRight: \"4px\",\n            maxWidth: \"100%\",\n            boxShadow: \"0 8px 16px -4px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08)\",\n        };\n    };\n\n    render() {\n        const { title, children, popover } = this.props;\n        return (\n            <>\n                {(popover.isOpen) &&\n                    <>\n                        <div\n\n                            className={`popover ${popover.isMenu ? 'slide-in-right' : ''}`}\n                            ref={(el) => (this.contentEl = el)}\n                            style={this.getContentStyles()}\n                        >\n                            <div className=\"popover-header\">\n                                {/* <h3>{title}</h3> */}\n                                <span>{title}</span>\n                                <button className=\"clean-btn\" onClick={this.props.togglePopover}>\n                                    <CloseIcon />\n                                </button>\n                            </div>\n                            <div className=\"popover-content\">\n                                {children}\n                            </div>\n                        </div>\n                        <div className=\"popover-overlay\" style={{ position: \"fixed\", inset: 0, height: \"100vh\", zIndex: 90 }} onClick={this.props.togglePopover}></div>\n                    </>\n                }\n            </>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    togglePopover,\n    setPosition,\n    setPopover\n};\n\nexport const Popover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_Popover);\n","import React, { Component } from 'react'\nimport { Popover } from './Popover/Popover'\nimport { connect } from 'react-redux'\n\nexport class _CheckDeletePopover extends Component {\n    state = {\n        typeTitle: ''\n    }\n\n    componentDidMount() {\n        this.setState(prevState => ({\n            ...prevState,\n            typeTitle: this.props.typeTitle\n        }))\n    }\n\n    componentWillUnmount() {\n        this.props.setIsPopover(false)\n        this.props.setIsEditPopover(false)\n    }\n\n    render() {\n        const { type, remove } = this.props\n        let { typeTitle } = this.state\n        if (typeTitle.length > 15) typeTitle = typeTitle.substr(0, 15) + '...'\n        const title = `Delete ${typeTitle}?`\n        return (\n            <div className=\"no-back-container\">\n                <Popover title={title} >\n                    <div className=\"no-back\">\n                        <p>Deleting a {type} is permanent and there<br></br>is no way to get it back.</p>\n                        <button className=\"delete-checklist-btn danger-btn\" onClick={() => { remove() }}>Delete {type}</button>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return {}\n}\n\nexport const CheckDeletePopover = connect(mapStateToProps, null)(_CheckDeletePopover)\n","import React, { Component } from 'react'\nimport { Popover } from './Popover/Popover'\n\nexport class EditAttachmentPopover extends Component {\n    state = {\n        url: '',\n        urlName: '',\n    }\n\n    componentDidMount = () => {\n        const { attachment } = this.props\n        this.setState(prevState => ({ ...prevState, url: attachment.url, urlName: attachment.name }))\n    }\n\n    componentWillUnmount() {\n        this.props.setIsPopover(false)\n        this.props.setIsEditPopover(false)\n    }\n\n    handleChange = (ev) => {\n        const { value, name } = ev.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    onAttachmentUpdate = () => {\n        const { url, urlName } = this.state\n        this.props.updateAttachment(url, urlName)\n    }\n\n    render() {\n        const { attachment } = this.props\n        const { url, urlName } = this.state\n\n        let attachName = attachment.name\n        if (attachName.length > 15) attachName = attachName.substr(0, 15) + '...'\n\n        const title = `Update ${attachName}`\n        return (\n            <div className=\"edit-attach-container\">\n                <Popover title={title} >\n                    <div className=\"attachment-container\">\n                        {attachment.isWeb &&\n                            <>\n                                <label htmlFor=\"url-upload\">Link</label>\n                                <input type=\"text\" id=\"url-upload\" placeholder=\"Enter link url\" value={url} name='url' onChange={this.handleChange} />\n                            </>\n                        }\n                        <label htmlFor=\"url-name-optional\">Link name (optional)</label>\n                        <input\n                            type=\"text\"\n                            id=\"url-name-optional\"\n                            name=\"urlName\"\n                            value={urlName}\n                            placeholder=\"Enter link name\"\n                            onChange={this.handleChange}\n                        />\n                        <button className=\"primary-btn\" onClick={this.onAttachmentUpdate}>Update</button>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { utilService } from '../services/util.service';\nimport VideoLabel from '@mui/icons-material/VideoLabel';\nimport { CheckDeletePopover } from './CheckDeletePopover'\nimport { EditAttachmentPopover } from './EditAttachmentPopover'\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { Link } from 'react-router-dom';\nimport { saveBoard, saveTaskDetails, addActivity } from '../store/board.actions'\nimport { setPosition, setPopover, setCurrTaskDetails, togglePopover } from '../store/app.actions';\n\nexport class _TaskAttachmentPreview extends Component {\n    state = {\n        isPopover: false,\n        isEditPopover: false,\n        bgUrl: null,\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const bgUrl = currTaskDetails.style && currTaskDetails.style.bgUrl\n        this.setState(prevState => ({ ...prevState, bgUrl, currGroup }))\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { currTaskDetails } = this.props\n        const bgUrl = currTaskDetails.style && currTaskDetails.style.bgUrl\n        if (bgUrl !== prevState.bgUrl) {\n            this.setState(prevState => ({ ...prevState, bgUrl }))\n        }\n    }\n\n    toggleBgUrl = () => {\n        this.setState(prevState => ({ ...prevState, bgUrl: !prevState.bgUrl }))\n    }\n\n    removeAttach = async () => {\n        const { board, currTaskDetails, saveTaskDetails, addActivity, attachment, setCurrTaskDetails, togglePopover } = this.props\n        const { currGroup } = this.state\n        const attachs = currTaskDetails.attachments.filter(currAttach => currAttach.id !== attachment.id)\n        currTaskDetails.attachments = attachs\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        togglePopover()\n        this.setIsPopover(false)\n        addActivity(board, currTaskDetails, 'remove-attachment', attachment.name)\n    }\n\n    setCover = async () => {\n        const { board, saveTaskDetails, currTaskDetails, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.style.bgUrl = attachment.url\n        this.toggleBgUrl()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeCover = async () => {\n        const { board, saveTaskDetails, currTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.style.coverMode = null\n        currTaskDetails.style.bgColor = null\n        currTaskDetails.style.bgUrl = null\n        this.toggleBgUrl()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    setIsEditPopover = (isEditPopover) => {\n        this.setState(prevState => ({ ...prevState, isEditPopover }))\n    }\n    setIsPopover = (isPopover) => {\n        this.setState(prevState => ({ ...prevState, isPopover }))\n    }\n\n    updateAttachment = async (url, urlName) => {\n        const { board, saveTaskDetails, currTaskDetails, attachment, setCurrTaskDetails, togglePopover } = this.props\n        const { currGroup } = this.state\n        if (!urlName) urlName = 'Attachment'\n        attachment.url = url\n        attachment.name = urlName\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        togglePopover()\n        this.setIsEditPopover(false)\n    }\n\n    render() {\n        const { attachment, popover } = this.props\n        const { isPopover, isEditPopover, bgUrl } = this.state\n        const { isWeb } = attachment\n\n        return (\n            <div className=\"attachment-preview flex\">\n                {(isWeb) ?\n                    <Link className=\"attachment-thumbnail flex\" to={{ pathname: `${attachment.url}` }} target=\"_blank\" title={`${attachment.name}`}>\n                        <AttachFileIcon />\n                    </Link> :\n                    <img src={attachment.url} alt={attachment.name} />\n                }\n                <div className=\"attachment-content\">\n                    <div className=\"attachment-details\">\n                        <span className=\"attachment-title\">{(attachment.name.length > 15) ? attachment.name.substr(0, 15) + '...' : attachment.name}</span>\n                        <div className=\"attachment-actions\">\n                            <span className=\"attachment-date\">Added {utilService.timeSince(attachment.createdAt)}</span>\n                            <button className=\"activity-toggle-btn\" onClick={(event) => {\n                                this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                                this.props.setPopover(true)\n                                this.setIsPopover(true)\n                            }}>\n                                Delete\n                            </button>\n                            <button className=\"activity-toggle-btn\" onClick={(event) => {\n                                this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                                this.props.setPopover(true)\n                                this.setIsEditPopover(true)\n                            }}>\n                                Edit\n                            </button>\n                        </div>\n\n                        {!isWeb && !bgUrl &&\n                            <span>\n                                <VideoLabel className=\"make-cover-icon\" />\n                                <span onClick={this.setCover}>Make cover</span>\n                            </span>\n                        }\n                        {!isWeb && bgUrl &&\n                            <span>\n                                <VideoLabel className=\"make-cover-icon\" />\n                                <span onClick={this.removeCover}>Remove cover</span>\n                            </span>\n                        }\n\n                    </div>\n                </div>\n                {popover.isOpen && isPopover &&\n                    <CheckDeletePopover\n                        remove={this.removeAttach}\n                        type={'attachment'}\n                        typeTitle={attachment.name}\n                        setIsPopover={this.setIsPopover}\n                        setIsEditPopover={this.setIsEditPopover}\n                    />\n                }\n                {popover.isOpen && isEditPopover &&\n                    <EditAttachmentPopover\n                        setIsPopover={this.setIsPopover}\n                        setIsEditPopover={this.setIsEditPopover}\n                        updateAttachment={this.updateAttachment}\n                        attachment={attachment}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    setPosition,\n    setPopover,\n    addActivity,\n    setCurrTaskDetails,\n    togglePopover\n};\n\nexport const TaskAttachmentPreview = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskAttachmentPreview);","import React from \"react\";\nimport { TaskAttachmentPreview } from './TaskAttachmentPreview'\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { connect } from \"react-redux\";\n\nexport function _TaskAttachment({ currTaskDetails }) {\n    if (!currTaskDetails.attachments || !currTaskDetails.attachments.length) return <React.Fragment></React.Fragment>\n    return (\n        <div className=\"task-attach\">\n            <div className=\"window-modal-title flex align-center\">\n                <AttachFileIcon />\n                <h3>Attachment</h3>\n            </div>\n            <div className=\"attachments\">\n                {currTaskDetails.attachments.map(attachment => {\n                    return <TaskAttachmentPreview\n                        key={attachment.id}\n                        attachment={attachment}\n                    />\n                })}\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskAttachment = connect(\n    mapStateToProps,\n    null\n)(_TaskAttachment);\n","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { connect } from \"react-redux\";\nimport { addActivity } from '../store/board.actions'\n\nexport class _TodoPreview extends Component {\n    state = {\n        todo: null,\n        todoTitle: '',\n        isEditMode: false\n    }\n    selectedInput = null;\n\n    componentDidMount() {\n        const { todo } = this.props\n        this.setState(prevState => ({ ...prevState, todo, todoTitle: todo.title }))\n    }\n\n    handleChange = ({ target: { value } }) => {\n        this.setState(prevState => ({ ...prevState, todo: { ...this.state.todo, title: value } }))\n    }\n\n    onEditMode = () => {\n        if (this.selectedInput) this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    onToggleEditMode = () => {\n        this.setState(prevState => ({ ...prevState, isEditMode: !this.state.isEditMode }))\n    }\n\n    onSaveTodo = () => {\n        const { todo } = this.state\n        this.props.onSaveTodo(todo)\n        this.onToggleEditMode()\n    }\n\n    onToggleTodoIsDone = () => {\n        const { todo } = this.state\n        const { addActivity, board, currTaskDetails } = this.props\n        todo.isDone = !todo.isDone\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.props.onSaveTodo(todo)\n        if (todo.isDone) addActivity(board, currTaskDetails, 'complete-todo', todo.title)\n        else addActivity(board, currTaskDetails, 'incomplete-todo', todo.title)\n    }\n\n    onRemoveTodo = () => {\n        const { todo } = this.state\n        this.props.onRemoveTodo(todo)\n    }\n\n    onUndoChange = () => {\n        const { todo } = this.props\n        const { todoTitle } = this.state\n        todo.title = todoTitle\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.onToggleEditMode()\n    }\n\n    render() {\n        const { todo, isEditMode } = this.state\n        if (!todo) return <div>Loading...</div>\n        const { title } = todo\n\n        return (\n\n            <div className=\"todo-preview-container flex column\">\n                <div className=\"todo-preview flex align-center\">\n                    {todo.isDone && <CheckBoxIcon onClick={this.onToggleTodoIsDone} className=\"todo-check\" />}\n                    {!todo.isDone && <CheckBoxOutlineBlankIcon onClick={this.onToggleTodoIsDone} />}\n                    {isEditMode &&\n                        <textarea onClick={this.onEditMode}\n                            className=\"default-textarea\"\n                            ref={(input) => { this.selectedInput = input; }}\n                            // onBlur={this.onUndoChange}\n                            value={title}\n                            onChange={this.handleChange}>\n                        </textarea>\n                    }\n                    {!isEditMode && <div className=\"checklist-txt-and-btn\">\n                        <span className={`${todo.isDone ? 'done' : ''}`} onClick={this.onEditMode}>{title}</span>\n                        <DeleteIcon className=\"todo-remove-icon\" onClick={this.onRemoveTodo}  />\n                    </div>}\n                </div>\n                <div className={`checklist-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                    <button onClick={this.onSaveTodo} className=\"nch-btn primary-btn\">Save</button>\n                    <Close onClick={this.onUndoChange} className=\"close-btn\" />\n                </div >\n            </div >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    addActivity\n};\n\nexport const TodoPreview = connect(mapStateToProps, mapDispatchToProps)(_TodoPreview);","import { TodoPreview } from './TodoPreview'\nexport function TodoList({ todos, onSaveTodo, onRemoveTodo }) {\n    return (\n        <div className=\"todo-list\">\n            {todos.map(todo => {\n                return <TodoPreview\n                    key={todo.id}\n                    todo={todo}\n                    onSaveTodo={onSaveTodo}\n                    onRemoveTodo={onRemoveTodo}\n                />\n            })}\n        </div>\n    )\n}","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport { utilService } from '../services/util.service'\n\nexport class TodoAdd extends Component {\n    state = {\n        isEditMode: false,\n        todo: {\n            title: ''\n        }\n    }\n    selectedInput = null\n\n    handleChange = (ev) => {\n        const { value } = ev.target\n        this.setState(prevState => ({ ...prevState, todo: { title: value } }))\n    }\n    onToggleEditMode = () => {\n        const { isEditMode } = this.state\n        this.setState(prevState => ({ ...prevState, isEditMode: !isEditMode }))\n    }\n\n    onTodoAdd = () => {\n        const { todo } = this.state\n        if (!todo.title) return\n        todo.id = utilService.makeId()\n        todo.isDone = false\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.props.addTodo(todo)\n        this.clearState()\n    }\n\n    clearState = () => {\n        this.selectedInput.focus()\n        this.setState(prevState => ({ ...prevState, todo: { title: '' } }))\n    }\n\n    render() {\n        const { isEditMode, todo } = this.state\n        return (\n            <div className=\"todo-add-container\">\n                <button\n                    className={`task-btns nch-btn todo-add-btn ${isEditMode ? 'hidden' : 'show'}`}\n                    onClick={() => this.onToggleEditMode()}>\n                    Add an item\n                </button>\n                {isEditMode &&\n                    <div className=\"todo-edit flex column\">\n                        <textarea onClick={this.onEditMode}\n                            ref={(input) => { this.selectedInput = input; }}\n                            autoFocus\n                            value={todo.title}\n                            placeholder=\"Add an item\"\n                            onChange={this.handleChange}>\n                        </textarea>\n                        <div className={`todo-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                            <button className='task-btns todo-save-btn' onClick={() => this.onTodoAdd()}>Add</button>\n                            <button className='task-btns todo-close-btn' onClick={() => this.onToggleEditMode()}><Close /></button>\n                        </div>\n                    </div>\n\n                }\n            </div>\n        )\n    }\n}","import { Component } from \"react\";\n\nexport class ProgressBar extends Component {\n\n    state = {\n        completed: 0,\n        style: {\n            width: '',\n            backgroundColor: ''\n        }\n    }\n\n    componentDidMount = () => {\n        const completed = this.props.doneTodosCalc()\n        const backgroundColor = (completed === 100) ? '#61bd4f' : '#5ba4cf'\n        this.setState(prevState => ({ ...prevState, completed, style: { width: `${completed}%`, backgroundColor } }))\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.state.completed !== this.props.doneTodosCalc()) {\n            const completed = this.props.doneTodosCalc()\n            const backgroundColor = (completed === 100) ? '#61bd4f' : '#5ba4cf'\n            this.setState(prevState => ({ ...prevState, completed, style: { width: `${completed}%`, backgroundColor } }))\n        }\n    }\n\n    render() {\n        const { style, completed } = this.state\n        return (\n            <div className=\"checklist-progress\" >\n                <span className=\"checklist-progress-percentage js-checklist-progress-percent\">{parseInt(completed)}%</span>\n                <div className=\"checklist-progress-bar\">\n                    <div className=\"checklist-progress-bar-current js-checklist-progress-bar\" style={style}>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { TodoList } from './TodoList'\nimport { CheckDeletePopover } from './CheckDeletePopover'\nimport { TodoAdd } from './TodoAdd'\nimport CheckBoxOutlinedIcon from '@mui/icons-material/CheckBoxOutlined';\nimport { ProgressBar } from './ProgressBar'\nimport { saveBoard, saveTaskDetails, addActivity } from '../store/board.actions'\nimport { togglePopover } from '../store/app.actions'\nimport { setPosition, setPopover, setCurrTaskDetails } from '../store/app.actions';\n\nexport class _TaskChecklistPreview extends Component {\n\n    state = {\n        isPopover: false\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    togglePopover = () => {\n        this.setState(prevState => ({ ...prevState, isPopover: !prevState.isPopover }))\n    }\n\n    onSaveTodo = async (todo) => {\n        const { board, currTaskDetails, checklist, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        const todoIdx = currTaskDetails.checklists[checklistIdx].todos.findIndex((currTodo) => {\n            return currTodo.id === todo.id\n        })\n        currTaskDetails.checklists[checklistIdx].todos[todoIdx] = todo\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    onRemoveTodo = async (todo) => {\n        const { board, currTaskDetails, saveTaskDetails, checklist, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        const todoIdx = currTaskDetails.checklists[checklistIdx].todos.findIndex((currTodo) => {\n            return currTodo.id === todo.id\n        })\n        currTaskDetails.checklists[checklistIdx].todos.splice(todoIdx, 1)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    addTodo = async (todo) => {\n        const { board, currTaskDetails, saveTaskDetails, checklist, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        currTaskDetails.checklists[checklistIdx].todos.push(todo)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    doneTodosCalc = () => {\n        const { checklist } = this.props\n        const { todos } = checklist\n        if (!todos.length) return 0\n\n        let isDoneTodos = 0\n        todos.forEach(todo => {\n            if (todo.isDone) isDoneTodos++\n        })\n        return (isDoneTodos / checklist.todos.length) * 100\n    }\n\n    removeChecklist = async () => {\n        const { board, saveTaskDetails, currTaskDetails, checklist, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        currTaskDetails.checklists.splice(checklistIdx, 1)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.togglePopover()\n        addActivity(board, currTaskDetails, 'remove-checklist')\n    }\n\n    render() {\n        const { checklist, popover } = this.props\n        const { isPopover } = this.state\n        if (!checklist) return <div></div>\n\n        return (\n            <div className=\"task-activities flex column\">\n                <div className=\"window-modal-title flex space-between\">\n                    <div className=\"task-activities-header flex align-center\">\n                        <CheckBoxOutlinedIcon />\n                        <h3>{checklist.title}</h3>\n                    </div>\n                    <button className=\"activity-toggle-btn\" onClick={(event) => {\n                        this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                        this.props.setPopover(true)\n                        this.togglePopover()\n                    }}>\n                        Delete\n                    </button>\n                </div>\n                <ProgressBar doneTodosCalc={this.doneTodosCalc} />\n                <TodoList\n                    todos={checklist.todos}\n                    onSaveTodo={this.onSaveTodo}\n                    onRemoveTodo={this.onRemoveTodo}\n                />\n                {popover.isOpen && isPopover &&\n                    <CheckDeletePopover\n                        remove={this.removeChecklist}\n                        type={'checklist'}\n                        typeTitle={checklist.title}\n                        togglePopover={this.togglePopover}\n                    />\n                }\n                <TodoAdd addTodo={this.addTodo} />\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    setPosition,\n    setPopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskChecklistPreview = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskChecklistPreview);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { TaskChecklistPreview } from './TaskChecklistPreview'\n\nexport class _TaskChecklist extends Component {\n    state = {\n    }\n\n    render() {\n        const { currTaskDetails } = this.props\n        if (!currTaskDetails.checklists) return <React.Fragment></React.Fragment>\n        return (\n            <div className=\"task-checklists\" >\n                {currTaskDetails.checklists.map(checklist => {\n                    return <TaskChecklistPreview\n                        key={checklist.id}\n                        checklist={checklist}\n                    />\n                })}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskChecklist = connect(mapStateToProps)(_TaskChecklist);","import React, { Component } from 'react';\n\nexport class AddComment extends Component {\n    state = {\n        txt: '',\n        isEditMode: false\n    }\n\n    handleChange = (ev) => {\n        const { value } = ev.target\n        this.setState(prevState => ({ ...prevState, txt: value }))\n    }\n\n    onEditMode = () => {\n        if (this.selectedInput) this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    onAddComment = () => {\n        const { txt } = this.state\n        const { loggedinUser } = this.props\n        this.props.addComment(txt, loggedinUser)\n        this.setState(prevState => ({ ...prevState, txt: '', isEditMode: false }))\n    }\n\n    render() {\n        const { loggedinUser } = this.props\n        const { isEditMode, txt } = this.state\n\n        return (\n            <div className=\"add-comment flex\">\n                <article className=\"member-wrapper\">\n                    {loggedinUser?.imgUrl ? (\n                        <img\n                            src={loggedinUser.imgUrl}\n                            className=\"member-img\"\n                            alt={loggedinUser.fullname[0].toUpperCase()}\n                        />\n                    ) :\n                        (\n                            <div className=\"member-img\" style={{ background: 'rgb(223, 225, 230)', color: 'inherit' }}>\n                                <p className={`member-letter preview`}>{loggedinUser?.fullname?.[0] || ''}</p>\n                            </div>\n                        )}\n                </article>\n\n                <div className=\"comment-frame\">\n                    <textarea onClick={this.onEditMode}\n                        className=\"default-textarea\"\n                        ref={(input) => { this.selectedInput = input; }}\n                        value={txt}\n                        onChange={this.handleChange}\n                        placeholder=\"Write a comment\">\n                    </textarea>\n\n                    {isEditMode && <button\n                        className=\"primary-btn\"\n                        onClick={this.onAddComment}>\n                        Save\n                    </button>}\n\n                </div>\n            </div>\n        )\n    }\n\n}\n","import React, { Component } from 'react'\nimport { utilService } from '../services/util.service';\n\nexport class ActivityPreview extends Component {\n    state = {}\n\n    get activityToShow() {\n        let { activity, currTask } = this.props\n        if (!currTask) currTask = activity.task\n        if (activity.txt && activity.txt.length > 20) activity.txt = activity.txt.substr(0, 12) + '...'\n        switch (activity.type) {\n            case 'due-date-complete':\n                return 'marked the due date complete'\n            case 'due-date-incomplete':\n                return 'marked the due date incomplete'\n            case 'set-date':\n                return `set the due date to of ${currTask.title} to ${activity.txt}`\n            case 'remove-date':\n                return `removed the due date from ${currTask.title}`\n            case 'add-checklist':\n                return `added Checklist to ${currTask.title}`\n            case 'remove-checklist':\n                return `removed Checklist from ${currTask.title}`\n            case 'add-member':\n                return `added ${activity.txt} to ${currTask.title}`\n            case 'remove-member':\n                return `removed ${activity.txt} from ${currTask.title}`\n            case 'add-self':\n                return `joined task ${currTask.title}`\n            case 'remove-self':\n                return `left task ${currTask.title}`\n            case 'add-to-archive':\n                return `archived ${currTask.title}`\n            case 'remove-from-archive':\n                return `returned ${currTask.title} to board `\n            case 'remove-task':\n                return `deleted ${currTask.title} from board`\n            case 'complete-todo':\n                return `completed ${activity.txt} on ${currTask.title}`\n            case 'incomplete-todo':\n                return `marked ${activity.txt} incomplete on ${currTask.title}`\n            case 'remove-attachment':\n                return `deleted the ${activity.txt} attachment from ${currTask.title}`\n            case 'change-title':\n                return `changed task title to ${activity.txt} `\n            default:\n                return ''\n        }\n    }\n\n    render() {\n        const { activity, isShowActivities, selectNotification } = this.props\n        const { byMember } = activity\n        if ((!isShowActivities && activity.type !== 'comment') || (!byMember)) return <></>\n        return (\n            <div className={`activity-preview-container flex ${activity.isNotRead ? 'unread' : ''} ${activity.isNotify ? 'notify' : ''}`}\n                onClick={activity.isNotify ? () => { selectNotification(activity) } : undefined}>\n                <article className=\"member-wrapper\">\n                    {byMember?.imgUrl ? (\n                        <img\n                            src={byMember.imgUrl}\n                            className=\"member-img\"\n                            alt={byMember.fullname[0].toUpperCase()}\n                        />\n                    ) :\n                        (\n                            <div className=\"member-img\" style={{ background: 'rgb(223, 225, 230)', color: 'inherit' }}>\n                                <p className={`member-letter preview`}>{byMember?.fullname?.[0] || ''}</p>\n                            </div>\n                        )}\n                </article>\n\n                {activity.type === 'comment' &&\n                    <div className=\"comment-preview\">\n                        <div className=\"comment-by-user\">\n                            <span className=\"member-name\">{byMember.fullname}</span>\n                            <span className=\"comment-created-at\">{utilService.timeSince(activity.createdAt)}</span>\n                        </div>\n                        <div className=\"comment-content\">\n                            <p className=\"comment-txt\">{activity.txt}</p>\n                        </div>\n                    </div>\n                }\n                {activity.type !== 'comment' &&\n                    <div className=\"activity-preview\">\n                        <div className=\"activity-by-user\">\n                            <span className=\"member-name\">{byMember.fullname}</span>\n                            <span className=\"activity-content\">{this.activityToShow}</span>\n                        </div>\n                        <div className=\"activity-created-at-container\">\n                            <span className=\"activity-created-at\">{utilService.timeSince(activity.createdAt)}</span>\n                        </div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import { ActivityPreview } from './ActivityPreview'\n\nexport function ActivitiesList({ CommAndAct, isShowActivities, currTask, selectNotification }) {\n    return (\n        <div className=\"activities-list\">\n            {CommAndAct.map(activity => {\n                return <ActivityPreview key={activity.id} activity={activity} isShowActivities={isShowActivities} currTask={currTask} selectNotification={selectNotification}/>\n            })}\n\n        </div>\n    )\n}","import React, { Component } from 'react';\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport { AddComment } from './AddComment'\nimport { ActivitiesList } from './ActivitiesList'\nimport { utilService } from '../services/util.service'\n\nexport class TaskActivities extends Component {\n    state = {\n        isShowActivities: false\n    }\n\n    onToggleComments = () => {\n        this.setState({ isShowActivities: !this.state.isShowActivities })\n    }\n\n    getTaskCommentsAndActivitiesSorted = () => {\n        const { currTask, activities } = this.props\n        let CommAndAct = []\n\n        if (currTask.comments && currTask.comments.length) {\n            CommAndAct.push(...currTask.comments)\n        }\n\n        if (activities && activities.length) {\n            activities.forEach((activity) => {\n                if (activity.task.id === currTask.id) CommAndAct.push(activity)\n            })\n        }\n        if (!CommAndAct.length) return null\n        CommAndAct.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        return CommAndAct\n    }\n\n    addComment = (txt, byMember) => {\n        const { currTask } = this.props\n        if (!currTask.comments) currTask.comments = []\n        const comment = {\n            id: utilService.makeId(),\n            txt,\n            createdAt: Date.now(),\n            type: 'comment',\n            byMember\n        }\n        currTask.comments.push(comment)\n        this.props.updateTaskDetails(currTask)\n    }\n\n    render() {\n        const { isShowActivities } = this.state\n        const { currTask, loggedinUser } = this.props\n        const CommAndAct = this.getTaskCommentsAndActivitiesSorted()\n\n        return (\n            <div className=\"task-activities flex column\">\n                <div className=\"window-modal-title flex space-between\">\n                    <div className=\"task-activities-header flex align-center\">\n                        <FormatListBulletedIcon />\n                        <h3>Activity</h3>\n                    </div>\n                    <button className=\"activity-toggle-btn\" onClick={this.onToggleComments}>\n                        {isShowActivities ? 'Hide details' : 'Show details'}\n                    </button>\n                </div>\n                <AddComment currTask={currTask} loggedinUser={loggedinUser} addComment={this.addComment} />\n                {CommAndAct && CommAndAct.length && <ActivitiesList CommAndAct={CommAndAct} isShowActivities={isShowActivities} currTask={currTask}/>}\n            </div>\n        )\n    }\n\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PersonOutlineIcon from '@mui/icons-material/PersonOutline';\nimport LabelIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CheckboxIcon from '@material-ui/icons/CheckBoxOutlined'\nimport CoverIcon from '@material-ui/icons/VideoLabel';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport CopyIcon from '@material-ui/icons/FileCopyOutlined';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport PersonAddAltIcon from '@mui/icons-material/PersonAddAlt';\nimport ScheduleIcon from '@mui/icons-material/Schedule';\nimport ArchiveIcon from '@mui/icons-material/Archive';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport { setPosition, togglePopover, setPopoverMenu } from '../store/app.actions';\nexport class _TaskActionsMenu extends Component {\n    render() {\n        const { joinTask, toggleIsArchive, deleteTask, isArchive, currTaskDetails, loggedinUser, setPosition, togglePopover } = this.props\n        const loggedinUserIsJoin = (currTaskDetails && loggedinUser) ?\n            currTaskDetails.members?.find((member) => member._id === loggedinUser._id) ? true : false || false :\n            null\n        return (\n            <aside className=\"task-details-sidebar flex column full\">\n                <div className=\"actions-wrapper flex\">\n                    {!loggedinUserIsJoin && <div className=\"suggested flex column\">\n                        <h4>SUGGESTED</h4>\n                        <button className=\"secondary-btn action-btn\" onClick={joinTask}>\n                            <div className=\"action-btn-content flex\" >\n                                <PersonOutlineIcon />\n                                <span>Join</span>\n                            </div>\n                        </button>\n                    </div>}\n                    <div className=\"add-to-card flex column\">\n                        <h4>ADD TO CARD</h4>\n\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'MEMBERS' }); togglePopover(); }}>\n                            <div className=\" action-btn-content flex\" >\n                                <PersonAddAltIcon />\n                                <span>Members</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <LabelIcon />\n                                <span>Labels</span>\n                            </div>\n                        </button>\n\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'CHECKLIST' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <CheckboxIcon />\n                                <span>Checklist</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'DATE' }); togglePopover() }}>\n                            <div className=\" action-btn-content flex \" >\n                                <ScheduleIcon />\n                                <span>Date</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'ATTACHMENT' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <AttachFileIcon />\n                                <span>Attachment</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COVER' }); togglePopover() }}>\n                            <div className=\" action-btn-content flex \" >\n                                <CoverIcon />\n                                <span>Cover</span>\n                            </div>\n                        </button>\n                    </div>\n                    <div className=\"actions flex column\">\n                        <h4>ACTIONS</h4>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'MOVE' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <ArrowForwardIcon />\n                                <span>Move</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COPY' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <CopyIcon />\n                                <span>Copy</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={toggleIsArchive}>\n                            <div className=\"action-btn-content flex \" >\n                                {isArchive ? <ArrowBackIcon /> : <ArchiveIcon />}\n                                <span>{isArchive ? 'Return to board' : 'Archive'}</span>\n                            </div>\n                        </button>\n                        {isArchive &&\n                            <button className=\"secondary-btn action-btn danger-btn\" style={{ color: '#fff' }} onClick={deleteTask}>\n                                <div className=\"action-btn-content flex \" >\n                                    <RemoveIcon style={{ color: '#fff' }} />\n                                    <span>Delete</span>\n                                </div>\n                            </button>\n                        }\n                    </div>\n                </div>\n\n            </aside>\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        loggedinUser: state.userModule.loggedinUser,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover,\n    setPopoverMenu\n};\n\nexport const TaskActionsMenu = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskActionsMenu);\n","import { connect } from 'react-redux';\nimport React from 'react'\nimport AddIcon from '@mui/icons-material/Add';\nimport { setPosition, togglePopover } from '../store/app.actions';\n\nexport function _TaskHeaderLabels({ currTaskDetails, board, setPosition, togglePopover }) {\n    const labels = board.labels.filter((label) => currTaskDetails.labelIds.includes(label.id))\n    if (labels.length === 0) return <></>\n    return (\n        <div className=\"task-details-header-labels item-container flex column\">\n            <h3 className=\"task-details-header-title\">Labels</h3>\n            <div className=\"labels-container flex wrap\">\n                {labels.map(label => {\n                    return <span\n                        onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover(); }}\n                        key={label.id} className=\"label\" style={{ backgroundColor: label.color }}>\n                        {label.title}\n                    </span>\n                })}\n                <button className=\"secondary-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover(); }}><AddIcon /></button>\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover\n};\n\nexport const TaskHeaderLabels = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskHeaderLabels);\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { MemberList } from './MemberList'\n\nexport function _TaskHeaderMembers({ currTaskDetails }) {\n    if (!currTaskDetails.members||currTaskDetails.members.length === 0) return <></>\n    return (\n        <div className=\"task-details-header-members flex column\">\n            <h4 className=\"task-details-header-title\"> Members</h4>\n            <div className=\"container flex wrap\">\n                <MemberList members={currTaskDetails.members} isInDetails={true} />\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskHeaderMembers = connect(\n    mapStateToProps,\n    null\n)(_TaskHeaderMembers);\n\n\n","import { connect } from 'react-redux'\nimport React, { Component } from 'react'\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport { saveTaskDetails, addActivity } from '../store/board.actions'\nimport { setPosition, togglePopover, setCurrTaskDetails } from '../store/app.actions';\n\nexport class _TaskHeaderDate extends Component {\n    state = {\n        formatedDate: '',\n        dueDate: null,\n        isTaskDone: false\n    }\n    componentDidMount = () => {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n\n        const dueDate = currTaskDetails.dueDate\n        const isTaskDone = currTaskDetails.isDone\n        const formatedDate = this.dueDateFormat(currTaskDetails.dueDate)\n        this.setState(prevState => ({ ...prevState, formatedDate, dueDate, isTaskDone, currGroup }))\n    }\n\n    componentDidUpdate(prevProps) {\n        const { dueDate } = this.state\n        const { currTaskDetails } = this.props\n        if (dueDate !== currTaskDetails.dueDate) {\n            const dueDate = currTaskDetails.dueDate\n            const formatedDate = this.dueDateFormat(currTaskDetails.dueDate)\n            this.setState(prevState => ({ ...prevState, dueDate, formatedDate }))\n        }\n    }\n\n    onToggleTaskDone = async () => {\n        const isTaskDone = !this.state.isTaskDone\n        this.setState(prevState => ({ ...prevState, isTaskDone }))\n        const { board, saveTaskDetails, currTaskDetails, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.isDone = !currTaskDetails.isDone;\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        if (isTaskDone) addActivity(board, currTaskDetails, 'due-date-complete')\n        else addActivity(board, currTaskDetails, 'due-date-incomplete')\n    }\n\n    dueDateFormat = (dueDate) => {\n        const currYear = new Date().getFullYear()\n        const dueYear = new Date(dueDate).getFullYear()\n        let strDate = ''\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { day: 'numeric' })} `\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { month: 'short' })} at `\n        if (dueYear !== currYear) {\n            strDate += `${dueYear} `\n        }\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { hour: 'numeric', minute: 'numeric', hour12: true }).toLocaleUpperCase()}`\n        return strDate\n    }\n\n    getDueStatus = () => {\n        const now = Date.now()\n        const { currTaskDetails } = this.props\n        let dueStatus = '';\n        if (currTaskDetails.isDone) dueStatus = 'done';\n        else if (now > currTaskDetails.dueDate) dueStatus = 'overdue';\n        else {\n            const timeDiff = currTaskDetails.dueDate - now;\n            if (timeDiff < 86400000) dueStatus = 'due-soon'\n        }\n        return dueStatus\n    }\n\n    get dueMsg() {\n        switch (this.getDueStatus()) {\n            case 'done': return 'COMPLETE';\n            case 'due-soon': return 'DUE SOON';\n            case 'overdue': return 'OVERDUE';\n            default: return ''\n        }\n    }\n\n    render() {\n        const { currTaskDetails, setPosition, togglePopover } = this.props\n        const { formatedDate, isTaskDone } = this.state\n        const dueStatus = this.getDueStatus();\n        if (!currTaskDetails.dueDate || currTaskDetails.dueDate.length === 0) return <></>\n\n        return (\n            <div className=\"task-details-header-date item-container flex column\">\n                <h3 className=\"task-details-header-title\">DUE DATE</h3>\n                <div className=\"date-container flex wrap align-center\">\n                    {isTaskDone && <CheckBoxIcon onClick={this.onToggleTaskDone} className=\"todo-check pointer\" />}\n                    {!isTaskDone && <CheckBoxOutlineBlankIcon onClick={this.onToggleTaskDone} className=\"pointer\" />}\n                    <button className=\"secondary-btn date-btn flex align-center\">\n                        <span\n                            className=\"date-context\"\n                            onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'DATE' }); togglePopover(); }}>\n                            {formatedDate}\n                        </span>\n                        <span className=\"drop-down-icon\"><ArrowDropDownIcon /></span>\n                        <span className={`due-msg ${dueStatus}`}>{this.dueMsg}</span>\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    saveTaskDetails,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskHeaderDate = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskHeaderDate);\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { TaskHeaderLabels } from './TaskHeaderLabels'\nimport { TaskHeaderMembers } from './TaskHeaderMembers'\nimport { TaskHeaderDate } from './TaskHeaderDate'\n\nexport class _TaskHeaderDetails extends Component {\n    state = {\n        selectedMembers: null,\n        selectedLabels: null,\n        selectedDate: null,\n    }\n\n    componentDidMount() {\n        const { selectedDate, } = this.props\n        this.setState(prevState => ({\n            ...prevState,\n            selectedDate\n        }))\n    }\n\n    render() {\n        return (\n            <div className=\"task-details-header flex\">\n                <TaskHeaderMembers />\n                <TaskHeaderLabels />\n                <TaskHeaderDate />\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskHeaderDetails = connect(\n    mapStateToProps,\n    null\n)(_TaskHeaderDetails);\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { TaskHeader } from \"../cmps/TaskHeader\";\r\nimport { TaskCardCover } from \"../cmps/TaskCardCover\";\r\nimport { TaskDescription } from \"../cmps/TaskDescription\";\r\nimport { TaskAttachment } from \"../cmps/TaskAttachment\";\r\nimport { TaskChecklist } from \"../cmps/TaskChecklist\";\r\nimport { TaskActivities } from \"../cmps/TaskActivities\";\r\nimport { TaskActionsMenu } from \"../cmps/TaskActionsMenu\";\r\nimport { TaskHeaderDetails } from \"../cmps/TaskHeaderDetails\";\r\nimport { saveBoard, saveTaskDetails, addActivity, loadBoard } from \"../store/board.actions\";\r\nimport { setCurrTaskDetails, setPopover, setPosition, setPopoverMenu } from '../store/app.actions'\r\n\r\nexport class _TaskDetails extends Component {\r\n  state = {\r\n    currTask: null,\r\n    currGroup: null\r\n  };\r\n  contentEl = null;\r\n\r\n  componentDidMount = async () => {\r\n    const { boardId, taskId, listId } = this.props.match.params;\r\n    const { board, setCurrTaskDetails, setPopoverMenu } = this.props;\r\n    if (!board) await this.props.loadBoard(boardId)\r\n    const currGroup = this.props.board?.groups.find((list) => list.id === listId);\r\n    const currTask = currGroup?.tasks.find((task) => task.id === taskId);\r\n    setCurrTaskDetails(currTask)\r\n    setPopoverMenu(false)\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      currGroup,\r\n      currTask,\r\n    }));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.setCurrTaskDetails(null)\r\n    this.props.setPosition({ pageX: null, pageY: null, type: null })\r\n    this.props.setPopover(false)\r\n  }\r\n\r\n  updateTaskDetails = async (currTask) => {\r\n    const { currGroup } = this.state;\r\n    const { board, saveTaskDetails } = this.props;\r\n    await saveTaskDetails(board, currGroup, currTask);\r\n  };\r\n\r\n  toggleOverlay = () => {\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  setTaksDetailsTitle = (title) => {\r\n    const { currTaskDetails, setCurrTaskDetails } = this.props;\r\n    currTaskDetails.title = title;\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  };\r\n\r\n  joinTask = async () => {\r\n    const { board, currTaskDetails, loggedinUser, addActivity, setCurrTaskDetails } = this.props;\r\n    let { members } = currTaskDetails;\r\n    members = members || [];\r\n    const boardMemberIds = board.members.map(member => member._id)\r\n    if (!loggedinUser) return\r\n    if (!boardMemberIds.includes(loggedinUser._id)) {\r\n      board.members.push(loggedinUser)\r\n    }\r\n    const selectedMembersIds = members.map((member) => member._id);\r\n    if (!selectedMembersIds.includes(loggedinUser._id)) {\r\n      members.push(loggedinUser);\r\n    }\r\n    currTaskDetails.members = members;\r\n    addActivity(board, currTaskDetails, 'add-self')\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  };\r\n\r\n  deleteTask = async () => {\r\n    const { currGroup } = this.state;\r\n    const { board, currTaskDetails, saveBoard, addActivity } = this.props;\r\n    const currGroupIdx = board.groups.indexOf(currGroup)\r\n    currGroup.tasks = currGroup.tasks.filter((task) => task.id !== currTaskDetails.id);\r\n    board.groups[currGroupIdx] = currGroup\r\n    addActivity(board, currTaskDetails, 'remove-task')\r\n    await saveBoard(board);\r\n    this.props.history.goBack();\r\n  }\r\n\r\n  toggleIsArchive = () => {\r\n    const { board, currTaskDetails, addActivity, setCurrTaskDetails } = this.props;\r\n    currTaskDetails.isArchive = currTaskDetails?.isArchive || false\r\n    currTaskDetails.isArchive = !currTaskDetails.isArchive;\r\n    (currTaskDetails.isArchive) ? addActivity(board, currTaskDetails, 'add-to-archive') : addActivity(board, currTaskDetails, 'remove-from-archive')\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  }\r\n\r\n  render() {\r\n    const { currGroup } = this.state;\r\n    const { board, currTaskDetails, loggedinUser } = this.props;\r\n    if (!currTaskDetails || !board || !currGroup) return <></>;\r\n\r\n    const { style } = currTaskDetails;\r\n    currTaskDetails.style = (style) ? style : { bgColor: null, bgUrl: null }\r\n    const { bgColor, bgUrl } = currTaskDetails.style\r\n    const { isArchive } = currTaskDetails\r\n\r\n    const taskOverlay = {\r\n      position: \"fixed\",\r\n      inset: 0,\r\n      height: \"100vh\",\r\n      overflowY: \"auto\",\r\n      zIndex: 90,\r\n    };\r\n\r\n    return (\r\n      <div style={taskOverlay}>\r\n        <div\r\n          className=\"overlay show\"\r\n          onClick={() => this.props.history.push(`/board/${board._id}`)}>\r\n        </div>\r\n\r\n        <section className=\"task-details flex column\">\r\n          <button\r\n            onClick={() => this.props.history.push(`/board/${board._id}`)}\r\n            className={`close-task-details ${bgColor ? \"cover\" : \"\"}`}>\r\n            <Close />\r\n          </button>\r\n          {(bgColor || bgUrl) && (<TaskCardCover />)}\r\n\r\n          {isArchive &&\r\n            <div className=\"task-details-archived flex\">\r\n              <i className=\"fas fa-archive icon-sm\"></i>\r\n              <h3>This card is archived.</h3>\r\n            </div>\r\n          }\r\n\r\n          <TaskHeader\r\n            taskTitle={currTaskDetails.title}\r\n            setTaksDetailsTitle={this.setTaksDetailsTitle}\r\n            taskList={board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))?.title || ''}\r\n          />\r\n          <div className=\"task-details-body flex\">\r\n            <div className=\"task-details-main flex column\">\r\n\r\n              <TaskHeaderDetails\r\n                toggleTaskDone={this.toggleTaskDone}\r\n              />\r\n\r\n              <TaskDescription\r\n                currTask={currTaskDetails}\r\n                updateTaskDetails={this.updateTaskDetails}\r\n              />\r\n              <TaskAttachment />\r\n              <TaskChecklist />\r\n              <TaskActivities\r\n                currTask={currTaskDetails}\r\n                loggedinUser={loggedinUser}\r\n                activities={board.activities}\r\n                updateTaskDetails={this.updateTaskDetails}\r\n              />\r\n            </div>\r\n            <TaskActionsMenu\r\n              joinTask={this.joinTask}\r\n              deleteTask={this.deleteTask}\r\n              toggleIsArchive={this.toggleIsArchive}\r\n              isArchive={isArchive}\r\n            />\r\n          </div>\r\n\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    loggedinUser: state.userModule.loggedinUser,\r\n    currTaskDetails: state.appModule.currTaskDetails\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  saveTaskDetails,\r\n  setCurrTaskDetails,\r\n  setPopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n  addActivity,\r\n  loadBoard\r\n};\r\n\r\nexport const TaskDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskDetails);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogin, onSignup } from \"../store/user.actions\";\r\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\r\nimport { GoogleLogin } from \"react-google-login\";\r\n\r\nfunction _LoginSignup(props) {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [fullname, setFullname] = useState(\"\");\r\n  const [isLogin, setIsLogin] = useState(true);\r\n\r\n  const CLIENT_ID =\r\n    \"1066940480428-m4n85h2lafgf2m7v5j7prda0tmigel93.apps.googleusercontent.com\";\r\n\r\n  const onSuccess = async (res) => {\r\n    const fullname = res.profileObj.name;\r\n    const username = `${res.profileObj.givenName} `;\r\n    const password = res.profileObj.googleId;\r\n    const imgUrl = res.profileObj.imageUrl;\r\n    isLogin\r\n      ? await props.onLogin({ username, password })\r\n      : await props.onSignup({ username, password, imgUrl, fullname });\r\n    props.history.push(\"/workspace/\");\r\n  };\r\n\r\n  const onFail = (response) => {\r\n    console.dir(response);\r\n  };\r\n\r\n  const onSubmit = async (ev) => {\r\n    ev.preventDefault();\r\n    if (username.trim() && password.trim()) {\r\n      if (!isLogin) {\r\n         props.onSignup({ username, password, fullname, imgUrl: \"\" });\r\n        props.history.push(\"/workspace\");\r\n      } else {\r\n        props.onLogin({ username, password });\r\n        props.history.push(\"/workspace\");\r\n      }\r\n    }\r\n    // props.history.push(\"/workspace\");\r\n  };\r\n  return (\r\n    <div className=\"login-signup  flex column align-center\">\r\n      <div className=\"logo flex \">\r\n        <DashboardIcon className=\"logo-icon\" />\r\n        <h1>Trellex</h1>\r\n      </div>\r\n      <div className=\"login-container flex column\">\r\n        {isLogin ? <p>Log in to Trellex</p> : <p>Sign up</p>}\r\n        <form className=\"flex column\" onSubmit={onSubmit}>\r\n          <input\r\n            type=\"txt\"\r\n            value={username}\r\n            onChange={(ev) => setUsername(ev.target.value)}\r\n            placeholder=\"Enter Username\"\r\n          />\r\n          {!isLogin && (\r\n            <input\r\n              type=\"txt\"\r\n              value={fullname}\r\n              onChange={(ev) => setFullname(ev.target.value)}\r\n              placeholder=\"Enter Full Name\"\r\n            />\r\n          )}\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(ev) => setPassword(ev.target.value)}\r\n            placeholder=\"Enter Password\"\r\n          />\r\n          <button className=\"login-submit\">\r\n            {isLogin ? \"Log me in\" : \"Sign me up\"}\r\n          </button>\r\n          <GoogleLogin\r\n            clientId={CLIENT_ID}\r\n            buttonText={isLogin ? \"Login with Google \": \"Sign up with Google\"}\r\n            onSuccess={onSuccess}\r\n            onFailure={onFail}\r\n            cookiePolicy={\"single_host_origin\"}\r\n          />\r\n        </form>\r\n\r\n        <p onClick={() => setIsLogin(!isLogin)}>\r\n          {isLogin ? \"Or sign up...\" : \"Back to Login\"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  onLogin,\r\n  onSignup,\r\n};\r\nexport const LoginSignup = connect(null, mapDispatchToProps)(_LoginSignup);\r\n","import React from 'react';\nimport { Bar } from 'react-chartjs-2';\n\nexport function BarChart({ board }) {\n    const { members } = board\n    const taskPerMember = {}\n    members.forEach(member => {\n        taskPerMember[member.fullname] = 0\n    })\n\n    for (let i = 0; i < members.length; i++) {\n        board.groups.forEach(group => {\n            group.tasks.forEach(task => {\n                if (!task.members || !task.members.length) return\n                task.members.forEach(currMember => {\n                    if (currMember.fullname === members[i].fullname) taskPerMember[currMember.fullname]++\n                })\n            })\n        })\n    }\n\n    const data = {\n        labels: Object.keys(taskPerMember),\n        datasets: [\n            {\n                label: 'Tasks per member',\n                data: Object.values(taskPerMember),\n                backgroundColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)',\n                    'rgba(75, 192, 192, 1)',\n                    'rgba(153, 102, 255, 1)',\n                    'rgba(255, 159, 64, 1)',\n                ],\n                borderColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)',\n                    'rgba(75, 192, 192, 1)',\n                    'rgba(153, 102, 255, 1)',\n                    'rgba(255, 159, 64, 1)',\n                ],\n                borderWidth: 1,\n\n            },\n        ],\n    };\n\n    const options = {\n        scales: {\n            x: {\n                ticks: {\n                    color: \"white\",\n                    font: {\n                        family: \"Segoe UI\",\n                        size: 15,\n                    },\n                },\n            },\n            y: {\n                ticks: {\n                    color: \"white\",\n                    font: {\n                        family: \"Segoe UI\",\n                        size: 15,\n                    },\n                },\n            },\n        },\n        elements: {\n            bar: {\n                borderWidth: 2,\n            },\n        },\n        responsive: true,\n        plugins: {\n            title: {\n                display: true,\n                text: \"Tasks per member\",\n                color: 'rgba(255, 255, 255, 0.897)',\n                font: {\n                    size: '30',\n                    family: 'Segoe UI'\n                }\n            },\n            datalabels: {\n                anchor: \"end\",\n                align: \"end\",\n                offset: -2,\n                color: \"#000000\",\n                font: { size: 12 }\n            },\n            legend: {\n\n                display: false\n\n            }\n        },\n        maintainAspectRatio: false,\n    };\n\n    return (\n        <Bar data={data} options={options} width={250} height={450} />\n    )\n\n}","import React from 'react';\r\nimport { Doughnut } from 'react-chartjs-2';\r\n\r\nexport function DoughnutChart({ board }) {\r\n\r\n    const calcTasksByLabel = () => {\r\n        const labelIds = board.labels.map(label => label.id);\r\n        const labelCounts = [];\r\n\r\n        for (let i = 0; i < labelIds.length; i++) {\r\n            labelCounts.push(0);\r\n        }\r\n\r\n        for (let i = 0; i < board.groups.length; i++) {\r\n            for (let j = 0; j < board.groups[i].tasks.length; j++) {\r\n                for (let k = 0; k < board.groups[i].tasks[j].labelIds.length; k++) {\r\n                    if (labelIds.includes(board.groups[i].tasks[j].labelIds[k])) {\r\n                        labelCounts[labelIds.indexOf(board.groups[i].tasks[j].labelIds[k])]++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return labelCounts;\r\n    }\r\n\r\n\r\n\r\n    const labelsData = {\r\n        labels: board.labels.map(label => label.title),\r\n        datasets: [\r\n            {\r\n                label: '# of labels',\r\n                data: calcTasksByLabel(),\r\n                backgroundColor: [\r\n                    ...board.labels.map(label => label.color),\r\n                ],\r\n                borderColor: [\r\n                    ...board.labels.map(label => label.color),\r\n                ],\r\n                borderWidth: 3,\r\n            },\r\n        ],\r\n    };\r\n    const options = {\r\n\r\n        responsive: true,\r\n        plugins: {\r\n            title: {\r\n                display: true,\r\n                text: \"Tasks by labels\",\r\n                color: 'rgba(255, 255, 255, 0.897)',\r\n                font: {\r\n                    size: '30',\r\n                    family: 'Segoe UI'\r\n                }\r\n            },\r\n            legend: {\r\n                position: 'right',\r\n                labels: {\r\n                    color: 'rgba(255, 255, 255, 0.897)',\r\n                    boxWidth: 14,\r\n                    boxHeight: 14,\r\n                    // This more specific font property overrides the global property\r\n                    font: {\r\n                        size: 14,\r\n                        family: 'Segoe UI'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        maintainAspectRatio: false,\r\n\r\n    };\r\n\r\n    return (\r\n        <Doughnut\r\n            data={labelsData}\r\n            width={350}\r\n            height={350}\r\n            options={options} />\r\n    )\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\n\r\nexport const ActivityChart = (props) => {\r\n  const data = {\r\n    labels: [...props.taskDetails.sortedNames],\r\n    datasets: [\r\n      {\r\n        label: \"Activities\",\r\n        data: [...props.taskDetails.sortedAmount],\r\n        backgroundColor: [\"#c277e0\", \"#61bd4f\", \"#ff9e1a\", \"#334563\"],\r\n        borderColor: [\"#c277e0\", \"darkgreen\", \"#ff9e1a\", \"#334563\"],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options1 = {\r\n    indexAxis: \"x\",\r\n    elements: {\r\n      bar: {\r\n        borderWidth: 2,\r\n      },\r\n    },\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: \"Member activity\",\r\n        color: \"rgba(255, 255, 255, 0.897)\",\r\n        font: {\r\n          size: \"30\",\r\n          family: \"Segoe UI\",\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        ticks: {\r\n          color: \"rgba(255, 255, 255, 0.897)\",\r\n\r\n          font: {\r\n            family: \"Segoe UI\",\r\n            size: 15,\r\n          },\r\n        },\r\n      },\r\n      y: {\r\n        ticks: {\r\n          color: \"rgba(255, 255, 255, 0.897)\",\r\n          title: 'Activity',\r\n          font: {\r\n            family: \"Segoe UI\",\r\n            size: 15,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      color: \"rgba(255, 255, 255, 0.897)\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"chart-activity\">\r\n      <Line data={data} options={options1} height={280} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Close } from \"@mui/icons-material\";\nimport { loadBoard } from \"../../store/board.actions\";\nimport { BarChart } from \"./BarChart\";\nimport { DoughnutChart } from \"./DoughnutChart\";\nimport { ActivityChart } from \"./ActivityChart\";\nimport { LoaderSpinner } from \"../LoaderSpinner\";\nimport PeopleIcon from \"@mui/icons-material/People\";\n\n\nexport function _Dashboard(props) {\n  const onBack = () => {\n    props.history.goBack();\n  };\n\n  useEffect(() => {\n    if (!props?.board) {\n      const { boardId } = props.match.params;\n      props.loadBoard(boardId);\n    }\n  }, [props]);\n  const { board } = props;\n\n  const getTaskDetails = () => {\n    if (!props.board) return;\n    let tasks = 0;\n    let archivedTasks = 0;\n    let overDueTasks = 0;\n    let doneTasks = 0;\n    let checklists = 0;\n    let doneChecklists = 0;\n    let todos = 0;\n    let doneTodos = 0;\n    let membersActivity = {};\n\n    if (board.groups.length) {\n      board?.activities.forEach((activity) => {\n        if (activity.byMember) {\n          membersActivity[activity.byMember?.fullname] = membersActivity[\n            activity.byMember.fullname\n          ]\n            ? membersActivity[activity.byMember.fullname] + 1\n            : 1;\n        }\n      });\n      board.groups.forEach((group) => {\n        group?.tasks.forEach((task) => {\n          if (task.checklists) {\n            checklists += task.checklists.length;\n            task.checklists.forEach((checklist) => {\n              let inTodos = checklist.todos.length;\n              let inDoneTodos = 0;\n              todos += checklist.todos.length;\n              checklist.todos.forEach((todo) => {\n                if (todo.isDone) {\n                  doneTodos++;\n                  inDoneTodos++;\n                }\n              });\n              if (inTodos === inDoneTodos) doneChecklists++;\n            });\n          }\n          task.isArchive ? (archivedTasks += 1) : (tasks += 1);\n          doneTasks += task?.isDone ? 1 : 0;\n          overDueTasks += task?.dueDate < Date.now() && !task.isDone ? 1 : 0;\n        });\n      });\n    }\n    const sortedActivity = Object.entries(membersActivity).sort(\n      (a, b) => b[1] - a[1]\n    );\n    const sortedNames = sortedActivity.map(activity => activity[0])\n    const sortedAmount = sortedActivity.map(activity => activity[1])\n    return {\n      tasks,\n      archivedTasks,\n      overDueTasks,\n      doneTasks,\n      checklists,\n      doneChecklists,\n      todos,\n      doneTodos,\n      sortedNames,\n      sortedAmount\n    };\n  };\n\n  const taskDetails = getTaskDetails(props);\n  if (!props.board)\n    return (\n      <section className=\"dashboard-overlay flex column \">\n        <LoaderSpinner />\n      </section>\n    );\n  return (\n    <section className=\"dashboard-overlay flex column fade-in\">\n      <button onClick={onBack} className=\"close-btn clean-btn\">\n        <Close />\n      </button>\n      <div className=\"dashboard-container flex column \">\n        <div className=\"header flex column justify-center align-center\">\n          <h1 className=\"dash-title\">{board.title}</h1>\n          <p className=\"date\">\n            Created at {new Date(board.createdAt).toLocaleString()}\n          </p>\n        </div>\n        <div className=\"info-container flex align-center\">\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{board.members?.length}</p>\n              <p className=\"below-num\">Members</p>\n            </div>\n            <div className=\"flex column details\">\n              <PeopleIcon className=\"icon\" />\n            </div>\n          </div>\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{taskDetails.tasks}</p>\n              <p className=\"below-num\">Tasks</p>\n            </div>\n            <div className=\"flex column details\">\n              <p className=\"green\">{taskDetails.doneTasks} Completed</p>\n              <p className=\"red\">{taskDetails.overDueTasks} Overdue </p>\n              <p className=\"yellow\">{taskDetails.archivedTasks} Archived </p>\n            </div>\n          </div>\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{taskDetails.checklists}</p>\n              <p className=\"below-num\">{`Checklist${taskDetails.checklists !== 1 ? \"s\" : \"\"\n                }`}</p>\n            </div>\n            <div className=\"flex column details\">\n              <p className=\"green\">{taskDetails.doneChecklists} Completed</p>\n              <p className=\"yellow\">{taskDetails.todos} Todos </p>\n              <p className=\"red\">\n                {taskDetails.todos - taskDetails.doneTodos} Open todos\n              </p>\n            </div>\n          </div>\n        </div>\n        <div className=\"chart-container flex \">\n          <div className=\"chart flex align-center\">\n            <DoughnutChart board={board} />\n          </div>\n          <div className=\"chart flex align-center\">\n            <ActivityChart taskDetails={taskDetails} />\n          </div>\n          <div className=\"chart flex align-center\">\n            <BarChart board={board} />\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    board: state.boardModule.board,\n  };\n}\nconst mapDispatchToProps = {\n  loadBoard,\n};\nexport const Dashboard = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(_Dashboard);\n","import { Homepage } from './pages/Homepage'\r\nimport { Workspace } from './pages/Workspace'\r\nimport { BoardApp } from './pages/BoardApp'\r\nimport { TaskDetails } from './pages/TaskDetails'\r\nimport { LoginSignup } from './pages/LoginSignup'\r\nimport { Dashboard } from './cmps/Dashboard/Dashboard'\r\n\r\n\r\nconst routes = [\r\n    {\r\n        path: '/workspace',\r\n        component: Workspace,\r\n        label: 'Workspace',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/board/:boardId',\r\n        component: BoardApp,\r\n        label: 'Board'\r\n    },\r\n    {\r\n        path: '/board/:boardId/dashboard',\r\n        component: Dashboard,\r\n        label: 'Board',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/board/:boardId/:listId/:taskId',\r\n        component: TaskDetails,\r\n        label: 'Task Details'\r\n    },\r\n    {\r\n        path: '/board/',\r\n        component: BoardApp,\r\n        label: 'Board',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/login',\r\n        component: LoginSignup,\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/',\r\n        component: Homepage,\r\n        label: 'Home 🏠',\r\n        isExact: true\r\n\r\n    },\r\n\r\n]\r\n\r\nexport default routes;","import React, { useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { MemberList } from \"../cmps/MemberList\";\r\nimport { BoardPreviewAdd } from \"./Workspace/BoardPreviewAdd\";\r\nimport { addBoard } from \"../store/board.actions\";\r\nimport HomeOutlinedIcon from \"@mui/icons-material/HomeOutlined\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\r\nimport NotificationsNoneIcon from \"@mui/icons-material/NotificationsNone\";\r\nimport {\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n} from \"../store/app.actions\";\r\n\r\nfunction _AppHeader(props) {\r\n  const [isCreateShown, setCreateShown] = useState(false);\r\n  const onAddBoard = async (title, bgClr, bgImg) => {\r\n    const board = await props.addBoard(title, bgClr, bgImg);\r\n    setCreateShown(false);\r\n    props.history.push(`/board/${board._id}`);\r\n  };\r\n\r\n  // const getNotifyCount = () => {\r\n  //   if (!props.userNotifications) return 0\r\n  //   const notifyCount = props.userNotifications.reduce((acc, notify) => {\r\n  //     if (notify.isNotRead) acc++\r\n  //     return acc;\r\n  //   }, 0)\r\n  //   return notifyCount\r\n  // };\r\n  const isOnBoard = props.location.pathname.includes(\"board\");\r\n  return (\r\n    <>\r\n      <header\r\n        className={`main-header flex align-center ${isOnBoard ? \"on-board\" : \"\"\r\n          }`}\r\n      >\r\n        <div className=\"header-btn-container flex\">\r\n          <Link to=\"/\" className=\"header-btn\">\r\n            <HomeOutlinedIcon />\r\n          </Link>\r\n          <Link to=\"/workspace\" className=\"header-btn boards\">\r\n            <DashboardIcon className=\"icon\" />\r\n            Boards\r\n          </Link>\r\n        </div>\r\n        <Link to=\"/\" className=\"clean-link\">\r\n          <div className=\"logo\">\r\n            <DashboardIcon className=\"logo-icon\" />\r\n            <h1>Trellex</h1>\r\n          </div>\r\n        </Link>\r\n        {props.user ? (\r\n          <div className=\"header-btn-container flex\">\r\n            <button\r\n              className=\"header-btn\"\r\n              onClick={() => setCreateShown(!isCreateShown)}\r\n            >\r\n              <AddIcon className=\"icon\" />\r\n            </button>\r\n\r\n            <button\r\n              className=\"header-btn notify-btn\"\r\n              style={{\r\n                opacity: isOnBoard ? 1 : 0.4,\r\n                pointerEvents: isOnBoard ? 'auto' : 'none',\r\n              }}\r\n              onClick={(event) => {\r\n                if (!isOnBoard) return\r\n                props.setPosition({\r\n\r\n                  pos: { pageX: event.pageX, pageY: event.pageY },\r\n                  type: \"NOTIFICATION\",\r\n                });\r\n                props.setPopoverMenu(true);\r\n                props.togglePopover();\r\n              }}\r\n            >\r\n              <NotificationsNoneIcon className=\"icon\" />\r\n              {/* {props.userNotifications && props.userNotifications.length > 0 &&\r\n                <div className=\"notify-count\">{props.userNotifications ? getNotifyCount() : 0}</div>\r\n              } */}\r\n\r\n            </button>\r\n            <MemberList members={[props.user]} isInHeader={true} />\r\n          </div>\r\n        ) : (\r\n          <div className=\"header-btn-container flex login\">\r\n            <Link className=\"clean-link\" to=\"/login\">\r\n              <button className=\"header-btn boards\">Login</button>\r\n            </Link>\r\n          </div>\r\n        )}\r\n        <div\r\n          className={`overlay ${isCreateShown ? \"show\" : \"\"}`}\r\n          onClick={() => setCreateShown(false)}\r\n        ></div>\r\n      </header>\r\n      {isCreateShown && (\r\n        <BoardPreviewAdd\r\n          boardMode=\"true\"\r\n          setCreateShown={setCreateShown}\r\n          onAdd={onAddBoard}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.loggedinUser,\r\n    boards: state.boardModule.boards,\r\n    userNotifications: state.userModule.userNotifications,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  addBoard,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n};\r\n\r\nexport const AppHeader = withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(_AppHeader)\r\n);\r\n","import React from 'react'\nimport EditIcon from '@material-ui/icons/Edit';\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport function PopoverLabelPreview({ label, labelsId, toggleLabelCheck, toggleIsEditCreate, setLabelEdit, isFilter, isLabelFilterSelected }) {\n    return (\n        <>\n            {(!isFilter) ?\n                <li className=\"flex\" key={label.id} onClick={() => { toggleLabelCheck(label.id) }}>\n                    <div className=\"label-popover-preview flex\" style={{ backgroundColor: label.color }}>\n                        <span>{label.title}</span>\n                        {labelsId.length > 0 && labelsId.includes(label.id) &&\n                            <span style={{ lineHeight: '1rem' }}>\n                                <CheckIcon style={{ width: '16px', height: '16px' }} />\n                            </span>\n                        }\n                    </div>\n                    <div className=\"flex align-center justify-center\">\n                        <EditIcon style={{ width: '16px', height: '16px', color: '#42526e' }}\n                            onClick={(event) => { event.stopPropagation(); toggleIsEditCreate(); setLabelEdit(label) }} />\n                    </div>\n                </li >\n                :\n                <li className=\"flex\" key={label.id} onClick={() => { toggleLabelCheck(label.id) }}>\n                    <div className=\"label-popover-preview flex\" style={{ backgroundColor: label.color }}>\n                        <span>{label.title}</span>\n                        {labelsId.length > 0 && labelsId.includes(label.id) &&\n                            <span style={{ lineHeight: '1rem' }}>\n                                <CheckIcon style={{ width: '16px', height: '16px' }} />\n                            </span>\n                        }\n                    </div>\n                </li>\n            }\n        </>\n    )\n}\n\n","import React from 'react'\nimport { PopoverLabelPreview } from './PopoverLabelPreview'\n\nexport function PopoverLabelsListPreview({ labelIds, labels, handleChange, toggleIsCreate, toggleLabelCheck, search, setLabelEdit, toggleIsEditCreate }) {\n    return (\n        <div className=\"popover-labels\">\n            <input type=\"search\" placeholder=\"Search Labels\" onChange={handleChange} value={search} />\n            <h4>LABELS</h4>\n            <ul className=\"clean-list\">\n                {labels && labels.length > 0 && labels.filter(label => label.title.toLowerCase().includes(search.toLowerCase()))\n                    .map(label =>\n                        <PopoverLabelPreview\n                            key={label.id}\n                            label={label}\n                            labelsId={labelIds}\n                            toggleLabelCheck={toggleLabelCheck}\n                            toggleIsEditCreate={toggleIsEditCreate}\n                            setLabelEdit={setLabelEdit}\n                            toggleIsCreate={toggleIsCreate}\n\n                        />\n                    )}\n            </ul>\n            <button className=\"secondary-btn\" onClick={toggleIsEditCreate}>Create a new label</button>\n        </div>\n    )\n}\n\n","import CheckIcon from '@material-ui/icons/Check';\nimport React from 'react';\nimport { boardService } from '../services/board.service';\n\nexport class ColorPalette extends React.Component {\n    state = {\n        photos: null,\n\n    }\n    colors = [\n        '#61bd4f',\n        '#f2d600',\n        '#ff9e1a',\n        '#eb5a46',\n        '#c277e0',\n        '#0279bf',\n        '#52e898',\n        '#ff78cb',\n        '#334563',\n        '#b3bac5',\n    ]\n\n    gradients = [\n        \"linear-gradient(to bottom, #000000, #434343)\",\n        \"linear-gradient(to right, #2980b9, #2c3e50)\",\n        \"linear-gradient(to right, #3494e6, #ec6ead)\",\n        \"linear-gradient(to left, #2f7336, #aa3a38)\",\n        \"linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)\",\n        \"linear-gradient(to bottom, #e52d27, #b31217)\",\n    ]\n\n    async componentDidMount() {\n        const photos = await boardService.queryPhotos();\n        this.setState(prevState => ({ ...prevState, photos }))\n    }\n\n    async componentDidUpdate(prevProps) {\n        if (prevProps.search !== this.props.search) {\n            const photos = await boardService.queryPhotos(this.props.search);\n            this.setState(prevState => ({ ...prevState, photos }))\n        }\n    }\n\n    render() {\n        const { handleChange, selectedColor, isGradient, isImages } = this.props\n        const { photos } = this.state\n        return <div className=\"color-palette\">\n            {!isImages &&\n                this.colors.map(colorCode => {\n                    return <label key={colorCode} className=\"flex align-center justify-center\" style={{ background: colorCode }} name=\"label-color\" htmlFor={`color-${colorCode}`}>\n                        <input type=\"radio\" name=\"color\" id={`color-${colorCode}`} value={colorCode} onClick={handleChange} />\n                        {selectedColor === colorCode && <CheckIcon key={colorCode} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n            {\n                isGradient && !isImages &&\n                this.gradients.map(gradient => {\n                    return <label key={gradient} className=\"flex align-center justify-center\" style={{ background: gradient }} name=\"label-color\" htmlFor={`gradient-${gradient}`}>\n                        <input type=\"radio\" name=\"color\" id={`gradient-${gradient}`} value={gradient} onClick={handleChange} />\n                        {selectedColor === gradient && <CheckIcon key={gradient} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n            {\n                isImages && photos && photos.map((photo, idx) => {\n                    return <label key={idx} className=\"flex align-center justify-center\" style={{ width: '155px', height: '110px', backgroundImage: `url(${photo.urls.regular}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }} name=\"label-color\" htmlFor={`photo-${idx}`}>\n                        <input type=\"radio\" name=\"color\" id={`photo-${idx}`} value={photo.urls.full} onClick={handleChange} />\n                        {selectedColor === photo.url && <CheckIcon key={idx} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n\n        </div >\n    }\n}","import { Component } from \"react\";\nimport { ColorPalette } from \"../ColorPalette\";\n\nexport class PopoverLabelCreateEdit extends Component {\n    state = {\n        title: '',\n        color: ''\n    }\n\n    componentDidMount() {\n        const { label } = this.props\n        this.setState({\n            title: label?.title || '',\n            color: label?.color || '',\n            id: label?.id || ''\n        })\n    }\n\n    componentWillUnmount() {\n        this.setState({\n            title: '',\n            color:  '',\n            id:  ''\n        })\n    }\n\n    handleChange = ({ target }) => {\n        const { name, value } = target\n        this.setState({ [name]: value })\n    }\n\n    onSubmitEditLabel = () => {\n        if (!this.state.title || !this.state.color) return\n        this.props.submitLabel({ ...this.state })\n    }\n\n    onSubmitCreate = () => {\n        if (!this.state.title || !this.state.color) return\n        this.props.submitCreateLabel({ ...this.state })\n    }\n\n    onRemoveLabel = () => {\n        this.props.removeLabel({ ...this.state })\n    }\n\n    render() {\n        const { title, color } = this.state\n        const { label } = this.props\n        return <>\n            <div className=\"label-add-content\">\n                <label htmlFor=\"label-input\">Name</label>\n                <input\n                    id=\"label-input\"\n                    type=\"text\"\n                    name=\"title\"\n                    value={title}\n                    onChange={this.handleChange}\n                    className=\"pop-over-input\"\n                />\n                <h4>Color</h4>\n                <ColorPalette handleChange={this.handleChange} selectedColor={color} />\n                <div className=\"flex space-between\">\n                    <button className=\"primary-btn\" onClick={this.onSubmitEditLabel} >\n                        {label && label.title ? 'Save' : 'Create'}\n                    </button>\n                    {label.title && <button className=\"danger-btn\" onClick={this.onRemoveLabel}>\n                        Delete\n                    </button>}\n                </div>\n            </div>\n        </>\n    }\n}","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { PopoverLabelsListPreview } from './PopoverLabelsListPreview'\nimport { PopoverLabelCreateEdit } from './PopoverLabelCreateEdit'\nimport { saveBoard, saveTaskDetails } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverLabels extends Component {\n    state = {\n        search: '',\n        isEditCreate: false,\n        label: {\n            title: '',\n            color: '',\n        },\n        labels: null,\n        labelIds: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({\n            ...prevState,\n            labels: this.props.board.labels,\n            labelIds: this.props.currTaskDetails.labelIds,\n            currGroup\n        }))\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.isEditCreate) {\n            this.setState(prevState => ({ ...prevState, isEditCreate: false, label: { color: '', title: '' } }))\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState(prevState => ({\n            ...prevState,\n            search: e.target.value\n        }))\n    }\n\n    toggleLabelCheck = async (labelId) => {\n        const { currTaskDetails, board, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const updatedLabelsId = (currTaskDetails.labelIds.includes(labelId)) ?\n            currTaskDetails.labelIds.filter(currLabelId => currLabelId !== labelId) :\n            [...currTaskDetails.labelIds, labelId]\n        currTaskDetails.labelIds = updatedLabelsId\n        this.setState(prevState => ({ ...prevState, labelIds: updatedLabelsId }))\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    setLabelEdit = (label) => {\n        this.setState(prevState => ({ ...prevState, label }))\n    }\n\n    submitLabel = async (label) => {\n        const { board, saveBoard } = this.props\n        let labels;\n        if (label.id) {\n            labels = board.labels.map(currLabel => (currLabel.id === label.id) ? label : currLabel)\n        } else {\n            label.id = utilService.makeId()\n            labels = [...board.labels, label]\n        }\n        this.setState(prevState => ({ ...prevState, labels: labels }))\n        this.toggleIsEditCreate()\n        board.labels = labels\n        await saveBoard(board)\n    }\n\n    removeLabel = async (label) => {\n        const { board, saveBoard, currTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const labels = board.labels.filter(currLabel => currLabel.id !== label.id)\n        currTaskDetails.labelIds = currTaskDetails.labelIds.filter(currLabelId => currLabelId !== label.id)\n        this.setState(prevState => ({ ...prevState, labels: labels }))\n        this.toggleIsEditCreate()\n        board.labels = labels\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        await saveBoard(board)\n    }\n\n    toggleIsEditCreate = () => {\n        this.setState(prevState => ({ ...prevState, isEditCreate: !this.state.isEditCreate }))\n    }\n\n    render() {\n        const { currTaskDetails, title } = this.props\n        const { search, label, labels, isEditCreate, } = this.state\n        if (!currTaskDetails || !labels) return <></>\n        return (\n            <>\n                <Popover title={title} >\n                    {!isEditCreate &&\n                        <PopoverLabelsListPreview\n                            labels={labels}\n                            labelIds={currTaskDetails.labelIds}\n                            search={search}\n                            handleChange={this.handleChange}\n                            toggleLabelCheck={this.toggleLabelCheck}\n                            toggleIsEditCreate={this.toggleIsEditCreate}\n                            setLabelEdit={this.setLabelEdit}\n                        />\n                    }\n                    {isEditCreate && <PopoverLabelCreateEdit label={label} removeLabel={this.removeLabel} submitLabel={this.submitLabel} />}\n                </Popover >\n            </>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    setCurrTaskDetails\n};\n\nexport const PopoverLabels = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverLabels);\n","import React, { Component } from 'react'\nimport { PopoverMemberPreview } from './PopoverMemberPreview'\nimport { Popover } from './Popover'\nimport { connect } from 'react-redux'\nimport { saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\nexport class _PopoverMembers extends Component {\n    state = {\n        search: '',\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({\n            ...prevState,\n            currGroup,\n        }))\n    }\n\n    handleSearch = (e) => {\n        this.setState(prevState => ({\n            ...prevState,\n            search: e.target.value\n        }))\n    }\n\n    toggleMemberCheck = async (member) => {\n        const { board, currTaskDetails, addActivity, loggedinUser, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.members = currTaskDetails?.members || []\n        const selectedMembersIds = currTaskDetails.members.map(member => member._id) || []\n        const updatedMembers = (selectedMembersIds.includes(member._id)) ?\n            currTaskDetails.members.filter(currMember => currMember._id !== member._id) :\n            [...currTaskDetails.members, member]\n        currTaskDetails.members = updatedMembers\n        this.setState(prevState => ({ ...prevState, selectedMembers: updatedMembers, selectedMembersIds }))\n        setCurrTaskDetails(currTaskDetails)\n        if (member._id === loggedinUser._id) {\n            await addActivity(board, currTaskDetails, (selectedMembersIds.includes(member._id)) ? 'remove-self' : 'add-self')\n        } else {\n            await addActivity(board, currTaskDetails, (selectedMembersIds.includes(member._id)) ? 'remove-member' : 'add-member', member.fullname)\n        }\n        await this.props.saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    render() {\n        const { title, board, currTaskDetails } = this.props\n        const { search } = this.state\n\n        return (\n            <Popover title={title} >\n                <div className=\"members-popover\">\n                    <input type=\"search\" placeholder=\"Search members\" onChange={this.handleSearch} />\n                    <h4>BOARD MEMBERS</h4>\n\n                    <ul className=\"clean-list\">\n                        {board && board.members.length > 0 &&\n                            board.members.filter(member => member.fullname.toLowerCase().includes(search.toLowerCase()))\n                                .map((member, idx) => <PopoverMemberPreview\n                                    toggleMemberCheck={this.toggleMemberCheck}\n                                    member={member}\n                                    selectedMembersIds={currTaskDetails.members?.map(member => member._id) || []}\n                                    members={board.members}\n                                    key={idx}\n                                />)\n                        }\n                    </ul>\n                </div>\n            </Popover >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        popover: state.appModule.popover,\n        board: state.boardModule.board,\n        loggedinUser: state.userModule.loggedinUser,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverMembers = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverMembers);\n","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverChecklist extends Component {\n    state = {\n        txt: ''\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    handlechange = (ev) => {\n        const txt = ev.target.value\n        this.setState(prevState => ({ ...prevState, txt }))\n    }\n\n    clearState = () => {\n        this.setState(prevState => ({ ...prevState, txt: '' }))\n    }\n\n    onAddChecklist = async (ev) => {\n        ev.preventDefault()\n        const { board, saveTaskDetails, currTaskDetails, togglePopover, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n\n        if (!currTaskDetails.checklists) currTaskDetails.checklists = []\n        const newList = {\n            id: utilService.makeId(),\n            title: this.state.txt,\n            todos: []\n        }\n        if (!newList.title) newList.title = 'Checklist'\n        currTaskDetails.checklists.push(newList)\n        togglePopover()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.clearState()\n        addActivity(board, currTaskDetails, 'add-checklist')\n    }\n\n    render() {\n        const { title } = this.props\n        const { txt } = this.state\n        return (\n            <div className=\"checklist-container\">\n                <Popover title={title} >\n                    <div>\n                        <form className=\"checklist-form\" onSubmit={this.onAddChecklist}>\n                            <label htmlFor=\"checklist\" className=\"pop-over-label\">Title</label>\n                            <input className=\"checklist-input\" id=\"checklist\" type=\"text\" value={txt} onChange={this.handlechange} placeholder=\"Enter a title...\" autoFocus />\n                            <button type=\"submit\" className=\"nch-button add-checklist-btn\">Add</button>\n                        </form>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverChecklist = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverChecklist);\n","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverDate extends Component {\n    state = {\n        date: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const date = currTaskDetails.dueDate ? new Date(currTaskDetails.dueDate) : new Date()\n        this.setState(prevState => ({ ...prevState, date, currGroup }))\n    }\n\n    handleChange = (ev) => {\n        this.setState({ date: ev })\n    }\n\n    onSaveDueDate = async (date) => {\n        const { board, togglePopover, saveTaskDetails, currTaskDetails, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.dueDate = date ? Date.parse(date) : null;\n        togglePopover()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        if (date) addActivity(board, currTaskDetails, 'set-date', this.dueDateFormat(currTaskDetails.dueDate))\n        else addActivity(board, currTaskDetails, 'remove-date')\n    }\n\n    dueDateFormat = (dueDate) => {\n        const currYear = new Date().getFullYear()\n        const dueYear = new Date(dueDate).getFullYear()\n        let strDate = ''\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { day: 'numeric' })} `\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { month: 'short' })} at `\n        if (dueYear !== currYear) {\n            strDate += `${dueYear} `\n        }\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { hour: 'numeric', minute: 'numeric', hour12: true }).toLocaleUpperCase()}`\n        return strDate\n    }\n\n    onRemoveDate = () => {\n        this.onSaveDueDate(null)\n    }\n\n    render() {\n        const { title } = this.props\n        const { date } = this.state\n        return (\n            <div className=\"date-picker-container\">\n                <Popover title={title} >\n                    <div>\n                        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                            <DatePicker\n                                autoOk\n                                variant=\"static\"\n                                value={date}\n                                openTo=\"date\"\n                                color='white'\n                                onChange={this.handleChange} />\n                        </MuiPickersUtilsProvider>\n                    </div>\n                    <div className=\"btn-container flex column\">\n                        <button className=\"primary-btn\" onClick={() => this.onSaveDueDate(date)} >Save</button>\n                        <button className=\"secondary-btn\" onClick={this.onRemoveDate}>Remove</button>\n                    </div>\n                </Popover >\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverDate = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverDate);\n\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\";\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { cloudinaryService } from '../../services/cloudinary-service'\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverAttachment extends Component {\n    state = {\n        webUrlSrc: '',\n        webUrlName: ''\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    uploadFile = async (ev) => {\n        const { board, currTaskDetails, saveTaskDetails, togglePopover, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const { attachments } = currTaskDetails\n        try {\n            const res = await cloudinaryService.uploadFile(ev)\n            const attach = { name: res.original_filename, id: res.asset_id, createdAt: Date.now(), url: res.secure_url }\n            currTaskDetails.attachments = (attachments) ? [...attachments, attach] : [attach]\n            togglePopover()\n            setCurrTaskDetails(currTaskDetails)\n            await saveTaskDetails(board, currGroup, currTaskDetails)\n        }\n        catch (err) {\n            console.log('error while connect server', err)\n        }\n    }\n\n    clearState = () => {\n        this.setState(prevState => ({ ...prevState, webUrlSrc: '', webUrlName: '' }))\n    }\n\n    handleChange = (ev) => {\n        const { value, name } = ev.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    onAttachmentClick = async () => {\n        const { webUrlSrc, webUrlName, currGroup } = this.state\n        const { board, currTaskDetails, saveTaskDetails, togglePopover, setCurrTaskDetails } = this.props\n        const { attachments } = currTaskDetails\n        if (webUrlSrc) {\n            const attach = {\n                id: utilService.makeId(),\n                name: (webUrlName) ? webUrlName : webUrlSrc,\n                url: (webUrlSrc.startsWith('http' || 'https')) ? webUrlSrc : 'https://' + webUrlSrc,\n                createdAt: Date.now(),\n                isWeb: true,\n            }\n            currTaskDetails.attachments = (attachments) ? [...attachments, attach] : [attach]\n            togglePopover()\n            setCurrTaskDetails(currTaskDetails)\n            await saveTaskDetails(board, currGroup, currTaskDetails)\n            this.clearState()\n        }\n    }\n\n    render() {\n        const { title } = this.props\n        const { webUrlSrc, webUrlName } = this.state\n        return (\n            <Popover title={title} >\n                <div className=\"attachment-container\">\n                    <div className=\"upload-preview\" >\n                        <label htmlFor=\"file-upload\">Computer</label>\n                        <input type=\"file\" onChange={this.uploadFile} accept=\"img/*\" id=\"file-upload\" />\n                    </div>\n                    <label htmlFor=\"url-upload\">Attach a link</label>\n                    <input type=\"text\" id=\"url-upload\" placeholder=\"Enter link url\" value={webUrlSrc} name='webUrlSrc' onChange={this.handleChange} />\n                    {webUrlSrc &&\n                        <>\n                            <label htmlFor=\"url-name-optional\">Link name (optional)</label>\n                            <input\n                                type=\"text\"\n                                id=\"url-name-optional\"\n                                name=\"webUrlName\"\n                                value={webUrlName}\n                                placeholder=\"Enter link name\"\n                                onChange={this.handleChange}\n                            />\n                        </>\n                    }\n                    <button className=\"primary-btn\" onClick={this.onAttachmentClick}>Attach</button>\n                </div>\n            </Popover >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverAttachment = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverAttachment);\n\n\n","import React from 'react'\nimport { ColorPalette } from '../ColorPalette'\nimport { cloudinaryService } from '../../services/cloudinary-service'\nimport { Popover } from './Popover'\nimport { connect } from 'react-redux'\nimport { saveTaskDetails } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverCover extends React.Component {\n    state = {\n        isHeaderSelected: null,\n        isFullSelected: false,\n        selectedColor: false,\n        selectedPhoto: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        if (!currTaskDetails.style) {\n            currTaskDetails.style = {\n                coverMode: '',\n                bgColor: null,\n                bgUrl: null\n            }\n        }\n        switch (currTaskDetails.style.coverMode) {\n            case 'header':\n                this.setState(prevState => ({\n                    ...prevState,\n                    isHeaderSelected: true,\n                    selectedColor: currTaskDetails.style?.bgColor || 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n\n                }))\n                break;\n            case 'full':\n                this.setState(prevState => ({\n                    ...prevState,\n                    isFullSelected: true,\n                    selectedColor: currTaskDetails.style?.bgColor || 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n                }))\n                break;\n            default:\n                this.setState(prevState => ({\n                    ...prevState,\n                    selectedColor: 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n                }\n                ))\n                break;\n        }\n    }\n\n    setHeaderSelected = async () => {\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isHeaderSelected: true,\n            isFullSelected: false,\n        }))\n        currTaskDetails.style.coverMode = 'header'\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n\n    }\n\n    setFullSelected = async () => {\n        const { currTaskDetails, board, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isFullSelected: true,\n            isHeaderSelected: false,\n        }))\n        currTaskDetails.style.coverMode = 'full'\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeCover = async () => {\n        const { saveTaskDetails, currTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isFullSelected: false,\n            isHeaderSelected: false,\n        }))\n        currTaskDetails.style.coverMode = null\n        currTaskDetails.style.bgColor = null\n        currTaskDetails.style.bgUrl = null\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n\n    }\n\n    uploadFile = async (ev) => {\n        ev.preventDefault()\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const res = await cloudinaryService.uploadFile(ev)\n        currTaskDetails.style.bgUrl = res.secure_url\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeFile = async (attachId) => {\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const { attachments } = currTaskDetails\n        const attachs = attachments.filter(currAttach => currAttach.id !== attachId)\n        currTaskDetails.attachments = attachs\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    handleChange = async (event) => {\n        const { saveTaskDetails, currTaskDetails, board, setCurrTaskDetails } = this.props\n        const { isFullSelected, isHeaderSelected, currGroup } = this.state\n        const { value } = event.target\n        if (!isFullSelected && !isHeaderSelected) {\n            this.setState(prevState => ({\n                ...prevState,\n                isHeaderSelected: true,\n                selectedColor: value\n            }))\n            currTaskDetails.style.coverMode = 'header'\n        }\n        else {\n            this.setState(prevState => ({\n                ...prevState,\n                selectedColor: value\n            }))\n        }\n        currTaskDetails.style.bgColor = value\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    render() {\n        const { isHeaderSelected, isFullSelected } = this.state\n        const { title, currTaskDetails } = this.props\n        const { bgColor, bgUrl } = currTaskDetails.style\n        return (\n            <Popover title={title} >\n                <div className=\"cover-popover\" >\n                    <h4>SIZE</h4>\n                    <div className=\"cover-options flex space-between align-center\">\n                        <div className={`header-cover-preview ${isHeaderSelected ? 'selected' : ''}`} onClick={() => { this.setHeaderSelected() }}>\n                            {(bgUrl) ?\n                                <>\n                                    <div className=\"header-section\" style={{ backgroundImage: `url(${bgUrl}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }}></div>\n                                    <div style={{ padding: '6px 4px 4px 6px', position: 'relative' }}>\n                                        <div className=\"line\" style={{ width: '122px' }}></div>\n                                        <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                        <div className=\"dot\"></div>\n\n                                    </div>\n                                </>\n                                :\n                                <>\n                                    <div className=\"header-section\" style={{ backgroundColor: bgColor }}>\n                                    </div>\n                                    <div style={{ padding: '6px 4px 4px 6px', position: 'relative' }}>\n                                        <div className=\"line\" style={{ width: '122px' }}></div>\n                                        <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                        <div className=\"dot\"></div>\n                                    </div>\n                                </>\n                            }\n                        </div>\n\n                        {(bgUrl) ?\n                            <div onClick={() => this.setFullSelected()} className={`full-cover-preview ${isFullSelected ? 'selected' : ''}`} style={{ display: 'flex', backgroundImage: `url(${bgUrl}`, backgroundSize: 'contain' }}>\n                                <div style={{ padding: '6px 4px 4px 6px', position: 'relative', alignSelf: 'flex-end' }}>\n                                    <div className=\"line\" style={{ width: '122px' }}></div>\n                                    <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                </div>\n                            </div>\n                            :\n                            <div onClick={() => this.setFullSelected()} className={`full-cover-preview ${isFullSelected ? 'selected' : ''}`} style={{ backgroundColor: bgColor, display: 'flex' }}>\n                                <div style={{ padding: '6px 4px 4px 6px', position: 'relative', alignSelf: 'flex-end' }}>\n                                    <div className=\"line\" style={{ width: '122px' }}></div>\n                                    <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                </div>\n                            </div>\n                        }\n\n                    </div>\n                    <div className=\"flex\">\n                        <button className=\"secondary-btn full\" onClick={this.removeCover}>Remove Cover</button>\n                    </div>\n                    <h4>COLOR</h4>\n                    <ColorPalette handleChange={this.handleChange} selectedColor={bgColor} />\n                    <h4>ATTACHMENT</h4>\n                    <div className=\"upload-preview\">\n                        <label className=\"secondary-btn\" htmlFor=\"file-upload\">Upload a cover image</label>\n                        <input type=\"file\" onChange={this.uploadFile} accept=\"img/*\" id=\"file-upload\" />\n                    </div>\n                </div>\n            </Popover >\n        )\n\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    setCurrTaskDetails\n};\n\nexport const PopoverCover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverCover);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport { setCurrTaskDetails, togglePopover } from '../../store/app.actions'\nimport { saveBoard } from '../../store/board.actions'\n\nexport class _PopoverMoveCopy extends Component {\n    state = {\n        selectedGroup: null,\n        selectedBoard: null,\n        selectedPosition: null,\n        taskTitle: ''\n\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const task = currGroup.tasks.find(task => currTaskDetails.id === task.id)\n        const selectedPosition = currGroup.tasks.indexOf(task)\n        this.setState(prevState => ({\n            ...prevState,\n            selectedBoard: board,\n            selectedGroup: currGroup,\n            selectedPosition,\n            taskTitle: currTaskDetails.title,\n            currGroup\n        }))\n    }\n\n    handleChange = (e) => {\n        const { value, name } = e.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    handleBoardChange = (e) => {\n        const { value } = e.target\n        const { boards } = this.props\n        const selectedBoard = boards.find(board => board._id === value)\n        this.setState(prevState => ({ ...prevState, selectedBoard }))\n    }\n\n    handleGroupChange = (e) => {\n        const { value } = e.target\n        const { selectedBoard } = this.state\n        const selectedGroup = selectedBoard.groups.find(group => group.id === value)\n        this.setState(prevState => ({ ...prevState, selectedGroup }))\n    }\n\n\n    submitMoveSameBoard = async () => {\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle, currGroup } = this.state\n        const { currTaskDetails, saveBoard, isCopy, togglePopover } = this.props\n        const fromGroup = selectedBoard.groups.find(group => group.id === currGroup.id)\n        const fromGroupIdx = selectedBoard.groups.indexOf(fromGroup)\n        const fromTask = selectedBoard.groups[fromGroupIdx].tasks.find(task => task.id === currTaskDetails.id)\n        const fromTaskIdx = selectedBoard.groups[fromGroupIdx].tasks.indexOf(fromTask)\n        const task = (isCopy) ? { ...currTaskDetails, id: utilService.makeId(), title: taskTitle } :\n            selectedBoard.groups[fromGroupIdx].tasks.splice(fromTaskIdx, 1)\n        const toGroupIdx = selectedBoard.groups.indexOf(selectedGroup)\n        selectedBoard.groups[toGroupIdx].tasks.splice(selectedPosition, 0, isCopy ? task : task[0])\n        this.setState(prevState => ({ ...prevState, currGroup: selectedGroup }))\n        togglePopover()\n        await saveBoard(selectedBoard);\n    }\n\n    submitMoveAnotherBoard = async () => {\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle, currGroup } = this.state\n        const { currTaskDetails, saveBoard, board, boards, isCopy, togglePopover } = this.props\n        const currBoard = boards.find(currBoard => currBoard._id === board._id)\n        const fromBoardIdx = boards.indexOf(currBoard)\n        const fromGroup = boards[fromBoardIdx].groups.find(group => group.id === currGroup.id)\n        const fromGroupIdx = boards[fromBoardIdx].groups.indexOf(fromGroup)\n        const fromTask = boards[fromBoardIdx].groups[fromGroupIdx].tasks.find(task => task.id === currTaskDetails.id)\n        const fromTaskIdx = boards[fromBoardIdx].groups[fromGroupIdx].tasks.indexOf(fromTask)\n        const task = (isCopy) ? { ...currTaskDetails, id: utilService.makeId(), title: taskTitle } : boards[fromBoardIdx].groups[fromGroupIdx].tasks.splice(fromTaskIdx, 1)\n        const toBoardIdx = boards.indexOf(selectedBoard)\n        const toGroup = boards[toBoardIdx].groups.find(group => group.id === selectedGroup.id)\n        const toGroupIdx = boards[toBoardIdx].groups.indexOf(toGroup)\n        boards[toBoardIdx].groups[toGroupIdx].tasks.splice(selectedPosition, 0, isCopy ? task : task[0])\n        this.setState(prevState => ({ ...prevState, currGroup: selectedGroup, selectedBoard: boards[toBoardIdx] }))\n        togglePopover()\n        await saveBoard(boards[fromBoardIdx])\n        await saveBoard(boards[toBoardIdx])\n    }\n\n    onSubmit = () => {\n        const { selectedBoard, selectedGroup, taskTitle } = this.state\n        const { board } = this.props\n        if (!selectedBoard || !selectedGroup || !taskTitle) return\n        if (board._id !== selectedBoard._id) this.submitMoveAnotherBoard()\n        else this.submitMoveSameBoard()\n    }\n\n    render() {\n        const { title, boards, isCopy } = this.props\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle } = this.state\n        if (!(selectedBoard)) return <></>\n        return (\n            <Popover title={title} >\n                <div className=\"popover-move-content\">\n                    {isCopy && <>\n                        <label>Title</label>\n                        <input type=\"text\" value={taskTitle} name=\"taskTitle\" onChange={this.handleChange} />\n                        <label>Copy to</label>\n                    </>}\n                    <div className=\"move-section flex wrap column\">\n                        <FormControl variant=\"filled\" className=\"choose-board clean-mui-arrow full\" >\n                            <InputLabel id=\"selectedBoard\">Board</InputLabel>\n                            <Select\n                                labelId=\"selectedBoard\"\n                                id=\"selectedBoard\"\n                                value={selectedBoard._id}\n                                name=\"selectedBoard\"\n                                inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                onChange={this.handleBoardChange}\n                            >\n                                {boards.map(board => <MenuItem key={board._id} value={board._id}>{board.title}</MenuItem>)}\n                            </Select>\n                        </FormControl>\n\n                        <div className=\"flex\">\n                            <FormControl variant=\"filled\" className=\"choose-list clean-mui-arrow full\" >\n                                <InputLabel id=\"selectedGroup\">List</InputLabel>\n                                <Select\n                                    name=\"selectedGroup\"\n                                    labelId=\"selectedGroup\"\n                                    id=\"selectedGroup\"\n                                    value={selectedGroup.id}\n                                    inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                    disableUnderline={true}\n                                    onChange={this.handleGroupChange}\n                                >\n                                    {selectedBoard.groups.map(group => <MenuItem key={group.id} value={group.id}>{group.title}</MenuItem>)}\n                                </Select>\n                            </FormControl>\n                            <FormControl variant=\"filled\" className=\"choose-position clean-mui-arrow \" >\n                                <InputLabel id=\"position-select\">Position</InputLabel>\n                                <Select\n                                    name=\"selectedPosition\"\n                                    labelId=\"position-select\"\n                                    id=\"position-select\"\n                                    value={selectedPosition}\n                                    inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                    disableUnderline={true}\n                                    onChange={this.handleChange}\n                                >\n                                    {(selectedGroup.tasks.length > 0) ?\n                                        Array.from(Array(selectedGroup.tasks.length + 1), (e, i) => <MenuItem key={i} value={i}>{i}</MenuItem>) :\n                                        <MenuItem value={0}>{0}</MenuItem>\n                                    }\n                                </Select>\n                            </FormControl>\n                        </div>\n                    </div>\n                    <button className=\"primary-btn\" onClick={this.onSubmit}>{!isCopy ? 'Move' : 'Create card'}</button>\n                </div>\n            </Popover >\n\n        )\n\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        boards: state.boardModule.boards,\n        currTaskDetails: state.appModule.currTaskDetails,\n    };\n}\n\nconst mapDispatchToProps = {\n    setCurrTaskDetails,\n    saveBoard,\n    togglePopover\n};\n\nexport const PopoverMoveCopy = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverMoveCopy);","import { Component } from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ActivitiesList } from \"../ActivitiesList\"\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport RestoreFromTrashIcon from '@mui/icons-material/RestoreFromTrash';\nimport { setPosition } from '../../store/app.actions'\nimport SearchIcon from '@mui/icons-material/Search';\n\nclass _PopoverMenu extends Component {\n    render() {\n        const { board } = this.props\n        const { title, setPosition } = this.props\n        if (!board) return <div></div>\n        const CommAndAct = board.activities\n        CommAndAct.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        const { bgImg } = board.style\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <div className=\"menu-details \">\n                    <ul className=\"clean-list menu-list\">\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_BACKGROUND' }); }}>\n                            {(bgImg) ?\n                                <span className=\"menu-bg-span\" style={{ backgroundImage: `url(${bgImg}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }}></span> :\n                                <span className=\"menu-bg-span\" style={{ background: board.style.bgClr }}></span>\n                            }\n\n                            <span className=\"menu-title\">Change background</span>\n                        </li>\n\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_FILTER_CARDS' }); }}>\n                            <SearchIcon />\n                            <span className=\"menu-title\" >Search cards</span>\n                        </li>\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_ARCHIVE' }); }}>\n                            <RestoreFromTrashIcon />\n                            <span className=\"menu-title\" >Archive</span>\n                        </li>\n                    </ul>\n                    <div className=\"task-activities-header flex align-center\">\n                        <FormatListBulletedIcon />\n                        <h3 className=\"menu-activity\">Activity</h3>\n                    </div>\n                    <ActivitiesList CommAndAct={CommAndAct} isShowActivities={true} currTask={null} />\n\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n\n    }\n}\n\nconst mapDispatchToProps = {\n    setPosition,\n}\n\nexport const PopoverMenu = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenu)\n\n","import { Link } from \"react-router-dom\";\r\nimport { TaskLabels } from \"./TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskDetailsPreview\";\r\nimport { TaskDatePreview } from \"./TaskDatePreview\";\r\nimport { MemberList } from \"../MemberList\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\n\r\nexport function TaskMenuPreview({ task, groupId, boardLabels, taskUrl }) {\r\n  const {\r\n    style,\r\n    labelIds,\r\n    dueDate,\r\n    title,\r\n    description,\r\n    comments,\r\n    attachments,\r\n    checklists,\r\n    media\r\n  } = task;\r\n\r\n  const getChecklistData = (isDone) => {\r\n    let todos = 0;\r\n    let doneTodos = 0;\r\n    checklists.forEach((checklist) => {\r\n      todos += checklist.todos.length;\r\n      checklist.todos.forEach((todo) => {\r\n        if (todo.isDone) doneTodos += 1;\r\n      });\r\n    });\r\n    if (isDone) return todos === doneTodos;\r\n    return `${doneTodos}/${todos}`;\r\n  };\r\n\r\n  return (\r\n    <Link to={taskUrl} className=\"clean-link\">\r\n      <article\r\n        className=\"task-preview-container edit\"\r\n        style={{ borderRadius: 3, minWidth: 240 }}\r\n      >\r\n        {style?.bgUrl && (\r\n          <img\r\n            className=\"task-cover-img\"\r\n            src={style.bgUrl}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"3px\",\r\n              objectFit: \"contain\",\r\n              maxHeight: 240,\r\n            }}\r\n            alt=\"\"\r\n          />\r\n        )}\r\n\r\n        {style?.bgColor && !style?.bgUrl && (\r\n          <div\r\n            className=\"task-cover\"\r\n            style={{ background: task.style.bgColor }}\r\n          ></div>\r\n        )}\r\n\r\n        <div\r\n          className=\"task-preview clean-link \"\r\n          style={\r\n            style?.bgUrl && {\r\n              position: \"relative\",\r\n              top: \"-8px\",\r\n              marginBottom: \"-8px\",\r\n              borderRadius: \"0 0 3px 3px\",\r\n            }\r\n          }\r\n        >\r\n          {labelIds?.length > 0 && (\r\n            <TaskLabels labelIds={labelIds} boardLabels={boardLabels} />\r\n          )}\r\n          {media?.videoUrl && (\r\n            <div className=\"video flex\" onDrag={(ev) => ev.stopPropagation()}>\r\n              <video width={\"100%\"} controls>\r\n                <source src={task.media.videoUrl} type=\"video/mp4\" />\r\n              </video>\r\n            </div>\r\n          )}\r\n          {media?.audioUrl && (\r\n            <div className=\"audio\">\r\n              <audio controls src={task.media.audioUrl} />\r\n            </div>\r\n          )}\r\n          <p className=\"task-title\">{title}</p>\r\n          <div className=\"task-preview-icons flex align-center\">\r\n            {dueDate && (\r\n              <TaskDatePreview\r\n                dueDate={dueDate}\r\n                isDone={task.isDone}\r\n                taskId={task.id}\r\n                groupId={groupId}\r\n                noHover={true}\r\n              />\r\n            )}\r\n            {description?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<SubjectOutlinedIcon className=\"icon\" />}\r\n              />\r\n            )}\r\n            {comments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<ChatBubbleOutlineRoundedIcon className=\"icon msg\" />}\r\n                txt={comments.length}\r\n              />\r\n            )}\r\n            {attachments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<AttachFileIcon className=\"icon attach\" />}\r\n                txt={attachments.length}\r\n              />\r\n            )}\r\n            {checklists?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                txt={getChecklistData()}\r\n                isDone={getChecklistData(true)}\r\n              />\r\n            )}\r\n            {task?.members && (\r\n              <MemberList members={task.members} isInPreview={true} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </article>\r\n    </Link>\r\n  );\r\n}\r\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { TaskMenuPreview } from \"../TaskPreview/TaskMenuPreview\"\nimport { setPosition } from '../../store/app.actions'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\n\nfunction _PopoverMenuArchive({ board, setPosition }) {\n    let tasks = board.groups.map(group => group.tasks).flat()\n    tasks = tasks.filter(task => task.isArchive)\n\n    return <div className=\"board-menu\">\n        <Popover title='Archive'>\n            <div className=\"pop-over-archive\">\n                <span\n                    className=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div className=\"card-preview-container\">\n                    {tasks.map(task => {\n                        const taskGroup = board.groups.find(group => group.tasks.some(currTask => currTask.id === task.id));\n                        return <TaskMenuPreview\n                            task={task}\n                            id={task.id}\n                            key={task.id}\n                            index={task.orgIdx}\n                            groupId={taskGroup.id}\n                            boardId={board._id}\n                            boardLabels={board.labels}\n                            taskUrl={`/board/${board._id}/${taskGroup.id}/${task.id}`}\n                        />\n                    })}\n                </div>\n            </div>\n        </Popover>\n    </div>\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n\n    }\n}\nconst mapDispatchToProps = {\n    setPosition\n};\n\nexport const PopoverMenuArchive = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuArchive)\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ColorPalette } from '../ColorPalette'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport { setPosition } from '../../store/app.actions'\nimport { saveBoard } from '../../store/board.actions'\n\nclass _PopoverMenuBackground extends React.Component {\n    state = {\n        search: ''\n    }\n\n    handleChange = (event) => {\n        const { board, saveBoard } = this.props\n        const { value } = event.target\n        if (value.includes('http' || 'https')) {\n            board.style.bgImg = value\n            board.style.bgClr = null\n        }\n        else {\n            board.style.bgClr = value\n            board.style.bgImg = null\n        }\n        saveBoard(board)\n    }\n\n    handleSearch = (event) => {\n        const { value } = event.target\n        this.setState(prevState => ({\n            ...prevState,\n            search: value\n        }))\n\n    }\n\n    render() {\n        const { board, title, setPosition } = this.props\n        if (!board) return <></>\n        const { search } = this.state\n\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <span\n                    className=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div className=\"pop-over-background\">\n                    <div className=\"background-styles-container\">\n                        <h4>Colors</h4>\n                        <ColorPalette selectedColor={board.style.bgClr} isGradient={true} handleChange={this.handleChange} />\n                        <h4>Images</h4>\n                        <input type=\"search\" value={search} name=\"search\" onChange={this.handleSearch} />\n                        <ColorPalette selectedColor={board.style.bgClr} isImages={true} search={search} handleSearch={this.handleSearch} handleChange={this.handleChange} />\n\n                    </div>\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n    }\n}\nconst mapDispatchToProps = {\n    saveBoard,\n    setPosition\n};\n\nexport const PopoverMenuBackground = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuBackground)\n","import React from \"react\";\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ActivitiesList } from '../ActivitiesList'\nimport { withRouter } from \"react-router\";\n\nclass _PopoverNotification extends React.Component {\n    state = {\n        userNotifications: null,\n        boardId: null\n    }\n\n    componentDidMount = () => {\n        this.setNotifications()\n    }\n\n    setNotifications = () => {\n        const { board } = this.props\n        const { loggedinUser } = this.props\n        if (!board) return\n        const userTasks = []\n        board.groups.forEach(group => {\n            group.tasks.forEach(task => {\n                if (!task.members || !task.members.length) return\n                task.members.forEach(currMember => {\n                    if (currMember._id === loggedinUser._id) userTasks.push(task.id)\n                })\n            })\n        })\n\n        let userNotifications = board.activities.filter(activity => {\n            return userTasks.includes(activity.task.id)\n        })\n\n        userNotifications = JSON.parse(JSON.stringify(userNotifications))\n        userNotifications.forEach(notify => {\n            notify.isNotRead = true;\n            notify.isNotify = true;\n        });\n        userNotifications.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        this.setState(prevState => ({ ...prevState, userNotifications, boardId: board._id }))\n    }\n\n    componentDidUpdate = () => {\n        const { board } = this.props\n        const { boardId } = this.state\n        if (!board) return\n        if (board._id !== boardId) {\n            this.setNotifications()\n        }\n    }\n    selectNotification = (notify) => {\n        const { board } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === notify.task.id))\n        notify.isNotRead = false\n        this.NotifyUpdate(notify)\n        this.props.history.push(`/board/${board._id}/${currGroup.id}/${notify.task.id}`)\n    }\n\n    NotifyUpdate = (notify) => {\n        const { userNotifications } = this.state\n        const notifyIdx = userNotifications.findIndex(currNotify => currNotify.id === notify.id)\n        userNotifications[notifyIdx] = notify\n        this.setState(prevState => ({ ...prevState, userNotifications }))\n    }\n\n    render() {\n        const { title } = this.props\n        const { userNotifications } = this.state\n        if (!userNotifications) return <></>\n\n        return <div className=\"board-menu notification-popover\">\n            <Popover title={title}>\n                <ActivitiesList CommAndAct={userNotifications} isShowActivities={true} currTask={null} selectNotification={this.selectNotification} />\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        loggedinUser: state.userModule.loggedinUser,\n    }\n}\n\nexport const PopoverNotification = withRouter(connect(mapStateToProps, null)(_PopoverNotification))\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport { PopoverLabelPreview } from './PopoverLabelPreview'\nimport { PopoverMemberPreview } from './PopoverMemberPreview'\nimport { setPosition } from '../../store/app.actions'\nimport { loadBoard, setFilterBy } from '../../store/board.actions'\n\nclass _PopoverMenuSearchCard extends React.Component {\n    state = {\n        filterBy: {\n            search: '',\n            labels: [],\n            members: []\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            filterBy: {\n                search: this.props.filterBy?.search || '',\n                labels: this.props.filterBy?.labels || [],\n                members: this.props.filterBy?.members || []\n            }\n        })\n    }\n\n    handleSearch = (event) => {\n        const { loadBoard, board, setFilterBy } = this.props\n        const { value, name } = event.target\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, [name]: value }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    toggleLabelCheck = (labelId) => {\n        const { board, loadBoard, setFilterBy } = this.props\n        const { filterBy } = this.state\n        const labels = filterBy.labels.includes(labelId) ? filterBy.labels.filter(currLabelId => currLabelId !== labelId) : [...filterBy.labels, labelId]\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, labels }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    toggleMemberCheck = (member) => {\n        const { board, loadBoard, setFilterBy } = this.props\n        const { filterBy } = this.state\n        const members = filterBy.members.includes(member._id) ? filterBy.members.filter(currMemeberId => currMemeberId !== member._id) : [...filterBy.members, member._id]\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, members }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    render() {\n        const { board, title, setPosition } = this.props\n        if (!board) return <></>\n        const { filterBy } = this.state\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <span\n                    className=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div className=\"popover-filter\">\n                    <p>Search by task title</p>\n                    <input type=\"search\" value={filterBy.search} name=\"search\" onChange={this.handleSearch} placeholder=\"Enter task title\" autoFocus />\n                    <hr />\n                    <p>Filter by task labels</p>\n                    {board.labels.map(label => <PopoverLabelPreview key={label.id} label={label} labelsId={filterBy.labels} isFilter={true} toggleLabelCheck={this.toggleLabelCheck} />)}\n                    <hr />\n                    <p>Filter by members</p>\n                    {board.members.map(member => <PopoverMemberPreview key={member._id} member={member} selectedMembersIds={filterBy.members} toggleMemberCheck={this.toggleMemberCheck} />)}\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        filterBy: state.boardModule.filterBy\n    }\n}\nconst mapDispatchToProps = {\n    setPosition,\n    loadBoard,\n    setFilterBy\n};\n\nexport const PopoverMenuSearchCard = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuSearchCard)\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PopoverLabels } from \"./PopoverLabels\";\nimport { PopoverMembers } from \"./PopoverMembers\";\nimport { PopoverChecklist } from \"./PopoverChecklist\";\nimport { PopoverDate } from \"./PopoverDate\";\nimport { PopoverAttachment } from \"./PopoverAttachment\";\nimport { PopoverCover } from \"./PopoverCover\";\nimport { PopoverMoveCopy } from \"./PopoverMoveCopy\";\nimport { PopoverMenu } from \"./PopoverMenu\";\nimport { PopoverMenuArchive } from \"./PopoverMenuArchive\";\nimport { PopoverMenuBackground } from \"./PopoverMenuBackground\"\nimport { PopoverNotification } from \"./PopoverNotification\"\nimport { PopoverMenuSearchCard } from './PopoverMenuSearchCard'\n\nconst _PopoverDynamicCmp = (props) => {\n    const { type } = props.popover.pos;\n    switch (type) {\n        case \"LABELS\":\n            return <PopoverLabels  {...props} title=\"Labels\" />\n\n        case \"MEMBERS\":\n            return <PopoverMembers {...props} title=\"Members\" />\n\n        case \"CHECKLIST\":\n            return <PopoverChecklist {...props} title=\"Checklist\" />\n\n        case \"DATE\":\n            return <PopoverDate {...props} title=\"Date\" />\n\n        case \"ATTACHMENT\":\n            return <PopoverAttachment {...props} title=\"Attach from...\" />\n\n        case \"COVER\":\n            return <PopoverCover {...props} title=\"Cover\" />\n\n        case \"MOVE\":\n            return <PopoverMoveCopy {...props} isCopy={false} title=\"Move to\" />\n\n        case \"COPY\":\n            return <PopoverMoveCopy {...props} isCopy={true} title=\"Copy\" />\n\n        case \"BOARD_SHOW_MENU\":\n            return <PopoverMenu {...props} title=\"Menu\" />\n\n        case \"BOARD_SHOW_ARCHIVE\":\n            return <PopoverMenuArchive {...props} title=\"Archive\" />\n\n        case \"BOARD_SHOW_BACKGROUND\":\n            return <PopoverMenuBackground {...props} title=\"Change background\" />\n\n        case \"BOARD_FILTER_CARDS\":\n            return <PopoverMenuSearchCard {...props} title=\"Search cards\" />\n\n        case \"NOTIFICATION\":\n            return <PopoverNotification {...props} title=\"Notifications\" />\n\n        default:\n            return <></>\n    }\n};\n\nfunction mapStateToProps(state) {\n    return {\n        popover: state.appModule.popover,\n    };\n}\n\nexport const PopoverDynamicCmp = connect(\n    mapStateToProps,\n    null\n)(_PopoverDynamicCmp);\n","import React from 'react'\r\nimport { Route } from 'react-router'\r\nimport routes from './routes'\r\nimport { AppHeader } from './cmps/AppHeader'\r\nimport { socketService } from './services/socket.service'\r\nimport { PopoverDynamicCmp } from './cmps/Popover/PopoverDynamicCmp'\r\n\r\nexport class RootCmp extends React.Component {\r\n    componentWillUnmount() {\r\n        socketService.terminate()\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <AppHeader />\r\n                <main>\r\n                    {routes.map(route => <Route key={route.path} exact={route.isExact} component={route.component} path={route.path} />)}\r\n                </main>\r\n                <PopoverDynamicCmp />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { store } from './store/store'\nimport { RootCmp } from './root-cmp';\nimport './assets/styles/main.scss';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <RootCmp />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}