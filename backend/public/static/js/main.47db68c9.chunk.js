(this["webpackJsonptrellex-pwa"]=this["webpackJsonptrellex-pwa"]||[]).push([[0],{491:function(e,t,a){},492:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(24),c=a.n(s),o=a(29),i=a(10),l=a(45),d=a(226),u=a(16),b=a(3),p={boards:[],board:null,filterBy:{search:"",labels:[],members:[]},areLabelsExpanded:!1};var j=a(4),h=a.n(j),v=a(8),f=a(125),m=a.n(f),O="/api/",g=m.a.create({withCredentials:!0}),x=function(e,t){return w(e,"GET",t)},k=function(e,t){return w(e,"POST",t)},y=function(e,t){return w(e,"PUT",t)};function w(e){return N.apply(this,arguments)}function N(){return N=Object(v.a)(h.a.mark((function e(t){var a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,g({url:"".concat(O).concat(t),method:a,data:n,params:"GET"===a?n:null});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&sessionStorage.clear(),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),N.apply(this,arguments)}var C="loggedinUser",D={login:function(e){return T.apply(this,arguments)},logout:function(){return M.apply(this,arguments)},signup:function(e){return S.apply(this,arguments)},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem(C)||"null")},getUsers:function(){return A.apply(this,arguments)}};function A(){return(A=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x("user"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",E(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return sessionStorage.setItem(C,JSON.stringify(e)),e}var I={loggedinUser:D.getLoggedinUser(),users:[]};var B={currTaskDetails:null,isDragDisabled:!1,popover:{pos:{posX:-1,posY:-1,type:""},isOpen:!1,isMenu:!1}};var P=Object(l.c)({boardModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0,n=t;switch(a.type){case"SET_BOARDS":n=Object(b.a)(Object(b.a)({},t),{},{boards:a.boards});break;case"SET_BOARD":n=Object(b.a)(Object(b.a)({},t),{},{board:a.board});break;case"SAVE_BOARD":e=t.boards.map((function(e){return e._id===a.board._id?a.board:e})),n=Object(b.a)(Object(b.a)({},t),{},{boards:e,board:Object(b.a)({},a.board)});break;case"ADD_BOARD":n=Object(b.a)(Object(b.a)({},t),{},{boards:[].concat(Object(u.a)(t.boards),[a.board])});break;case"SET_FILTER":n=Object(b.a)(Object(b.a)({},t),{},{filterBy:Object(b.a)(Object(b.a)({},t.filterBy),a.filterBy)});break;case"REMOVE_BOARD":e=t.boards.filter((function(e){return e._id!==a.boardId})),n=Object(b.a)(Object(b.a)({},t),{},{boards:e});break;case"TOGGLE_LABELS":n=Object(b.a)(Object(b.a)({},t),{},{areLabelsExpanded:!t.areLabelsExpanded})}return console.log("Action:",a),console.log("New State:",n),n},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case"SET_USER":a=Object(b.a)(Object(b.a)({},e),{},{loggedinUser:t.user});break;case"SET_USERS":a=Object(b.a)(Object(b.a)({},e),{},{users:t.users})}return a},appModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TASK_DETAILS":return Object(b.a)(Object(b.a)({},e),{},{currTaskDetails:Object(b.a)({},t.currTaskDetails)});case"TOGGLE_DRAGGING":return Object(b.a)(Object(b.a)({},e),{},{isDragDisabled:!e.isDragDisabled});case"SET_POSITION":var a=Object(b.a)(Object(b.a)({},e.popover),{},{pos:Object(b.a)({},t.pos)});return Object(b.a)(Object(b.a)({},e),{},{popover:a});case"TOGGLE_POPOVER":return Object(b.a)(Object(b.a)({},e),{},{popover:Object(b.a)(Object(b.a)({},e.popover),{},{isOpen:!e.popover.isOpen})});case"SET_POPOVER":return Object(b.a)(Object(b.a)({},e),{},{popover:Object(b.a)(Object(b.a)({},e.popover),{},{isOpen:t.isOpen})});case"SET_POPOVER_MENU":return Object(b.a)(Object(b.a)({},e),{},{popover:Object(b.a)(Object(b.a)({},e.popover),{},{isOpen:!1,isMenu:t.isMenu})});default:return e}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,L=Object(l.e)(P,U(Object(l.a)(d.a))),F=a(6),R=a(7),G=a(12),X=a(11),_=a(26),Y=a.p+"static/media/hero.e8878a54.png",H=a(227),W=a.n(H),V=a(229),z=a.n(V),Q=a(0);function q(e){return Object(Q.jsx)("div",{className:"home-profile",children:Object(Q.jsxs)("div",{className:"profile-details",children:[Object(Q.jsx)("img",{className:"profile-img",src:e.imgUrl,alt:"profile"}),Object(Q.jsx)("h2",{children:e.name}),Object(Q.jsxs)("div",{className:"links",children:[Object(Q.jsx)("a",{href:e.ghUrl,target:"blank",children:Object(Q.jsx)(W.a,{})}),Object(Q.jsx)("a",{href:e.liUrl,target:"blank",children:Object(Q.jsx)(z.a,{})})]})]})})}var J=a.p+"static/media/reactRedux.595c174b.jpg",K=a.p+"static/media/nodejs.7e291bae.png",Z=a.p+"static/media/mongo.95e41129.png",$=a.p+"static/media/socket.6a73d0d3.jpg",ee=a.p+"static/media/express.167f6d66.png",te=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e=this;return Object(Q.jsxs)("section",{className:"homepage",children:[Object(Q.jsxs)("div",{className:"hero flex main-layout",children:[Object(Q.jsxs)("div",{className:"hero-content flex column",children:[Object(Q.jsxs)("h1",{children:[Object(Q.jsx)("span",{children:"Trellex"})," helps teams move work forward."]}),Object(Q.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Trellex."}),Object(Q.jsx)("button",{onClick:function(){return e.props.history.push("/workspace")},children:"To Demo"})]}),Object(Q.jsx)("div",{children:Object(Q.jsx)("img",{src:Y,className:"hero-img",alt:""})})]}),Object(Q.jsxs)("section",{className:"about main-layout",children:[Object(Q.jsx)("h1",{children:"Made with"}),Object(Q.jsxs)("div",{className:"tech flex align-center",children:[Object(Q.jsx)("img",{src:J,alt:"logo",className:"tech-logo"}),Object(Q.jsx)("img",{src:K,alt:"logo",className:"tech-logo"}),Object(Q.jsx)("img",{src:ee,alt:"logo",className:"tech-logo"}),Object(Q.jsx)("img",{src:$,alt:"logo",className:"tech-logo"}),Object(Q.jsx)("img",{src:Z,alt:"logo",className:"tech-logo"}),Object(Q.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV4AAADwCAYAAABISgwwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADiJJREFUeNrs3c1RG00eB+BhyzdftBGsHIFxBIYIDBG8EAFwdxVQ5TsQATgCcATIESyOwHIEy3vw+d1u05SxjeZbo5nR81RNyWV9jRr4zV89Pd1ZBgAAAAAAAAAAAAB0baPsA19ev5+Em01NBq26+7774V4zrJcXFR4bQ/dWk0G7QlGjEUoKB6mNMXyOf/lRAgheAMELgOAFELwAlPOipdeJw2HuNCcMypYmGHbwxrGI25oTaOrl9ft/xv4ZdTUACF4AwQuA4AUQvAAIXgDBC4DgBRC8AIIXAMELMGgvNAEwFC3M4zDrw7wyKl4AwQsgeAEQvACCFwDBCyB4ARC8AIIXQPACIHgBBC8AghdA8AIgeAEEL4DgBUDwAgheAAQvgOAFQPACCF4AwQuA4AUQvAAIXgDBC4DgBRC8AIIXAMELIHgBELwAghcAwQswjuC905QA3Qbv35oSoNvgBUDwAgheAAQvgOAFELwACF4AwQuA4AXorReaoN9eXr+fhJudsL0L2zRsm9nDJdrzsH36vvvhSistpd1jW++F7e2T/76PbR62m9Du91oJwTvOP/4YuJdhm/x212badsJjjsPtfgiCmRZr7UB3mQ52z4n/fxYedxra/FyLoathXAEQq63rZ0L3d7Eyu02Pp1mbx4PZ15zQfTRJ4Xup1RC846t0q7gMz9vSeo0q3TIHuqf2wvPOtB6CdzxfdetQgdV3nL49VHWYKmUQvAO2U7Hqemqqy6H2we6wwUscaEUE77C9a/j8t5qw1sFulc9H8LJiTb+2TjVh52020d2A4F3vEGA1JpoAwTtcc00wSC6oQPAOWNOFQwX3Ctrs++4HC74ieAfsU8Pnf9aElc0aPv9GEyJ4h+2mwdfWubkbalWrseJt0m4XWhHBO+wQiKG7X/Pp+1qwttOaB7wb82QgeMcRvjc1QtREOc2r3u2K4XvnYIfgHVcQxK++u1nxiZ8fgaGLoZU2v0vhW+ZE2Xlqd6MZqMy0kP2vfG/SZcDxirY4VnQrezgZ9GNuWIG7lPB986TN44UR0ycVbmz7i1Qhg+AdefUrYLU5gpexGuL0kvq3GWvwbmmutXE7wH3e8GNz0B8KJ9cABC+A4IW+M6QLwQsdM0ENgpfBm6l4QfDSrfnA9veLHxmCl6Eb2tSSMz8yBC9DN6Qgu3fxBIKXwUvzEAwlzExCjuBlND4OZD9NQo7gZTRV71XW/5NsM2udIXgZm1P7B4KX7qvevlaUltxB8DJafVza5j6z5A6ClxFXvbHiPerZbu1acgfBy9jDN64vdtWXClwXA4KXdQnf/R6E75U15hC8CN/uHKX3B8HLWoZvl32+sS93N3V3gOBlbcM3huCbbPlDzWbxfdIy9zAaVhmmbvjG0H3z8vr9Ybg9DtukxZefh+1Ufy4qXlhc/b7KHsbVNq2AY4UbRy28ErosSS8uCFLx0kb4xn7YGJRXoQKehtudsL0N22bYpgWVbfxD+JQ9zLsw15os2d+ClzGGcAzP87T9EMI4BvDTroi5kB2/8HOfPDkIT9OBePLk2008YH/O1nCyI8FLF2FsBrH1CtwYsscpdBf1/W+l2530nPg7cpENb9kpwQusPHRPws1BVv1ka6yGLwUvQLVuhesnlWxd0yXv6kHY1/mqT94a1QC0Ebq3LYRuF+K+XoZ93hO8wJBdp66CIYnhuyN4gSFWuycDqXQXhe9U8AJDCt0YWsclHjrLHi6wiZd/b4Tbf4dtO3sY+910XuXfXztezLNb8rVjt8PZKtrOyTXgcax1rFxfZ7+e4JqH7Uv2/FjbotD9sVLI73NtpAtuYmDOwvvGdfMua1TNi157nvb5Jr12DNa8LoWd+NmffrYn449jW2w+876xPW6aDJPcqPiVYlFDx+vqT/z6wqDCNgZMnGvjr6zcaIIYaB+znxfH/K8gGLfLhlPYlxi+exVCt83XjvM874fHxfA/KAjqZ9uj6ooouhpgPUM3hsvXVExNSz7tsWvha4mv6PsVK8KjrPwY3u0qr52mMp0VVL3xBOFthdD9pT2qnqgTvLB+oRsrwBg0dWeUmxRUkLOqU3mmivG0xEOvan7FPyr4PE1GOPwYw5zaVfACjb7S1/WxzpPSRQ1FX9kvar52DOtlX7q+VzZ8BS8I3bbNlvXchvN+fOrgs5cKX8EL6xG6hx2FbtZw5rkvSwr0Lu0VXRkneGH8oRv7IMuMt42BGUcsxHGw2+n2PFuTiWueEfup91NbPG5l2+MstfuzjOOF8YvVbtGJtEVDQmP4HBUMJx2b2J2xaFTGrGR7PA7VO1HxwnpWuwcFD9svGoef7o8LnN6PvMli2BYOV0vtsV/wWge6GmA9bRVUu0dlp0hMYXQ64raap9C9L9kesd1yh6ktGt8reGHc3uUFTVqstLT0+NlI2+q06hVoqT3mOQ95K3hh/Uxz7ruo+ZofR9hO9w0mR89rx03BC+snb57cupXrGCveJuODZ4IXeGqS8zW5VtiMdIXoz3WfWNCOE8EL0AOCF0DwAgheAAQvgOAFQPAC9JPZyWBA0pLq8fr/eCnq4xjRedi+ZQ9L7sy0kuAF2gncxzl1D3MedhweF+caiJewVl75FsEL/Bq6cQXczRIPfwzog/C8Ic4kFqv3RVX73Vh+poIX+u+yZOj+HsBnQ/ugaaKaq7H/QJ1cg35Xu3tZs6XHEbxARceaQPAC3VW7sdKdagnBC3Qnb/WIOGLhcQXceBJtrrmGw8k16K+8vt2LJysmzMJ2EirkONTsTLOpeIEaQojGUQx5i1T+sVZaWv9rX+sJXqCe3CV7Fl0ckargc83Xb7oaoJ9e59xXtExN7PPdK6iYGwkBvzG0Bg37fBJuTlS8QJ2K964gYGI1fKUJ+0vwQj/lVatl5mD4qAkFL9BRxZuq3viYuWbsJ328MDAVZh2bZQ99vYORJgRadNC5r7skveAFuvJloJX+bc6BZHsMPxhdDdC/qq9RN0PNxyJ4Ya01PbH2aK4pBS/Qoe+7HzoN3lipp6WJ+vxtYi9sW6veD328QNXwejwBFgMsXugxzX6eEJtlPe2HTV04l+nf8eZx5EfsC+90vTrBC1SVdwKszxXv9JnPEbfHxUM7C15dDUAlBZVhn4M376TlvMsdUfHCuENyWXMqzBeFbOxD7eky83nzX3zrckdUvEDd4K1TWa5SXjXe6YFC8AJ15M2Q9p+e7nNb46MFL6DiLVJwUcp9hcuwBS+M1P0A9nFQwZvldzN0foWf4IWeKZgIZtqTfZzl3D1JY337pDfdDIIXhmfao30ZUtX7Nue+b13vjOAF1iF4pypeYAyGNLJB8AKjcDeEirdgUpzGIxoK+rPnghdo03wIwdtBtVv5UmTBCwMTpzbsw34UjL7o08iGvOD9vIodErzQTzc59x33aD+H0N3wtmbV3kawP9uN0dYkOcfh6HbsbwW6qeB6NBHNPCdg4//3YR+nKwzeLypeGI++FDp5C2q+XvXOpe6OhcHY0sGr8ggOwQvDtNWHJWyy/K6GaQ/2r4s5ePM+50zwwric9WAf8sKrDweGLoJ3q+p7CF4Yrs1Vj3AoGNmQ9WDxy7xugMYjGgpmPVu44KjghWHrQ19vn7sbll3x5lW7s0V3VBnVMM/qn6GMH37ibwRaF0c4nITK6mSF+zDPCbitbLUjG5YdvK/rHJBKB2/4wV6Fm6tltU745fnH3xDUchD+fs67nsz7iTiyYafGV/2lSiMaJjmZ1sYBYSfnvoVdGboaYPhiuKzyRFtfuxqWOgdv6t+d1OlqELwwDnsrHF6WF2JbK2yTZXcz5FW7d3nfQAQvjMflKuZHWHTm/klluKqqN6+b40sLr/+uTrUreGFcYsCtapTDrGC/+lbxNupqSN0Mea//UfDC+jgMobCzgvfNq3q3VtQWWzX3t4y/cu67LxrfLHhhfC6LBvYvQd66ZZ3P2VDUvVEUjCXs5dx3U/RkwQvjE/t5bzsO31nOfdMVtEHeezbtZtjL8kczXAheEL5dyPvqvop5ebdq7msZB3mvXaaafuH3E0YfvtstfLXOCr66z8P75FWJm2X2IV3UsNHCLi1lREMasrfZpNpV8YLKd6zdDdOa+1kkb9RIHLd7JXiBLsO3T90Nk5r7WVTtbuU85KbsZdu6GkC3Q1u+paovvv7nFHDzVSxRFN7zzZOwnKYtrr02Lbrgo2a1G52WfaGNvvxWhAa69bfBGphmq52/IAbj0vt8xyYFeF5GXYU23R9c8AKNw2GSwqHoa73wrd62XwsOmK+qVNL6eGEkUv/idlY8TnUV43yHHLp7BaF7VbX7QvCC8CX/W0TRlJunVV9X8ILwFb6LHWb5IyTO65ysE7wgfIXv89Vu7F4oGrd7Wue1BS8IX+H7vMuC+y/qLrdkVAOMv3Iz2qF6m8WpNa9zHhLHJ7+q+/oqXlD5qnz/PFAVnVA7avIegheEr/D9VezXnebcPwvtedPkDQQvCF/h+7PajZ/5sOBh+03fR/CC8BW+PxWdUDttMNeD4AXhK3x/q3ZPsuIl4c/beC+jGmBNGe3wRxfDfwsett3WTGsqXlD5qnyLuxhu2pzeUvCC8F3r8A2f6ayg6o9ttN/mewpeEL5rG75pnt3CUQx1r1BbRB8v8BhCa9Xnmz7v1yx/EpzYxbDb9nureIF1rXwvC0K39S4GFS/QRuW7n26HJnYxFK2httv0CjXBCywjfMcqzrN7tKwX19UA/KFCt8MYxc98usw3UPECKt+fOjlxqOIFVL4/HXUxWkPwAsL3QVwt+KqLNxK8gPB9+FxHXb2ZPl6gtNTnWzT+dYj225juEQAAAAAAAAAAAADor/8LMAA6pW4RUNitbQAAAABJRU5ErkJggg==",alt:"logo",className:"tech-logo"})]}),Object(Q.jsx)("h1",{children:"Created by"}),Object(Q.jsxs)("div",{className:" profiles-wrapper flex",children:[Object(Q.jsx)(q,{imgUrl:"https://media-exp1.licdn.com/dms/image/C5603AQG9slGN5Fgxug/profile-displayphoto-shrink_800_800/0/1516840011642?e=1639008000&v=beta&t=xThiLyo5L33mzpMZwW4bejYp6AOxWmN5mkVMSYDzg1w",ghUrl:"https://github.com/bcd82",liUrl:"https://www.linkedin.com/in/barak-sidi-4632003a/",name:"Barak Sidi"}),Object(Q.jsx)(q,{imgUrl:"https://media-exp1.licdn.com/dms/image/C4E03AQFlupY8tXNbnA/profile-displayphoto-shrink_800_800/0/1622442415599?e=1639008000&v=beta&t=7jgIHBeZftuCwkVx-HtY1tbwtcJnPRLebgx4LLUtZU0",ghUrl:"https://github.com/Tomerre1",liUrl:"https://www.linkedin.com/in/tomer-revah-software-engineering/",name:"Tomer Revah"}),Object(Q.jsx)(q,{imgUrl:"https://media-exp1.licdn.com/dms/image/C4D03AQEEFClr3HeA9w/profile-displayphoto-shrink_800_800/0/1575055172966?e=1639008000&v=beta&t=n8WEpc1GPYeK78vRTmU6_Q4p2hvWL-AGQLpDxW5DVKk",ghUrl:"https://github.com/matan3857",liUrl:"https://www.linkedin.com/in/matan-levi-561115199/",name:"Matan Levi"})]})]})]})}}]),a}(n.Component),ae=a(230),ne=a.n(ae),re=function(){var e=null,t={setup:function(){e=ne()("")},on:function(t,a){e.on(t,a)},off:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(a?e.off(t,a):e.removeAllListeners(t))},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}};return t}();window.socketService=re,re.setup(),re.on("review-about-you",(function(e){console.log("Review about me!",e)}));var se=a(69),ce=a.n(se);function oe(e){var t=e.board,a=e.saveBoard,n=function(){var e=Object(v.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Object(b.a)({},t)).isFavorite=!n.isFavorite;try{a(n)}catch(r){console.log("error setting favorite",r)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)("article",{className:"board-preview",children:[Object(Q.jsxs)(o.b,{to:"/board/".concat(t._id),children:[Object(Q.jsx)("div",{className:"board-content",style:{background:t.style.bgImg?"url(".concat(t.style.bgImg,")"):t.style.bgClr}}),Object(Q.jsx)("p",{className:"board-title",children:t.title})]}),Object(Q.jsx)("div",{className:"hover-actions flex ".concat((null===t||void 0===t?void 0:t.isFavorite)?"show":""),children:(null===t||void 0===t?void 0:t.isFavorite)?Object(Q.jsx)(ce.a,{className:"action-icon",style:{color:"gold"},onClick:n}):Object(Q.jsx)(ce.a,{className:"action-icon",onClick:n})})]})}var ie=a(15);function le(e){var t=e.setBgClr,a=e.setBgImg,r=(e.bgClr,e.bgImg,Object(n.useState)("linear-gradient(to bottom, #000000, #434343")),s=Object(ie.a)(r,2),c=s[0],o=s[1];return Object(Q.jsx)("div",{className:"palettes",children:Object(Q.jsxs)("div",{className:"clrs",children:[["linear-gradient(to bottom, #000000, #434343)","linear-gradient(to right, #2980b9, #2c3e50)","linear-gradient(to right, #3494e6, #ec6ead)","linear-gradient(to left, #2f7336, #aa3a38)","linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)","linear-gradient(to bottom, #e52d27, #b31217)"].map((function(e){return Object(Q.jsx)("label",{className:"flex align-center justify-center palette-icon",style:{background:e,border:c===e?"2px solid white":""},name:"label-color",htmlFor:"color-".concat(e),children:Object(Q.jsx)("input",{type:"radio",name:"color",id:"color-".concat(e),value:e,onClick:function(e){t(e.target.value),a(""),o(e.target.value)}})},e)})),Object(Q.jsx)("div",{className:"imgs",children:["https://www.incimages.com/uploaded_files/image/1920x1080/getty_509107562_2000133320009280346_351827.jpg","http://all4desktop.com/data_images/original/4238112-background.jpg","https://c.pxhere.com/photos/4f/ee/candy_toppings_sweet_colorful_sugar-883692.jpg!d","http://www.pngmagic.com/product_images/creative-banner-design-background-images.jpg","https://cdn.wallpapersafari.com/22/29/fdqrYk.jpg","https://img2.goodfon.com/wallpaper/nbig/2/73/texture-lines-colours-cveta.jpg"].map((function(e){return Object(Q.jsx)("label",{className:"flex align-center justify-center palette-icon",style:{background:"url(".concat(e,")"),backgroundSize:"cover",border:c===e?"2px solid white":""},name:"label-color",htmlFor:"color-".concat(e),children:Object(Q.jsx)("input",{type:"radio",name:"color",id:"color-".concat(e),value:e,onClick:function(e){a(e.target.value),o(e.target.value)}})},e)}))})]})})}var de=a(128),ue=a.n(de);function be(e){var t=Object(n.useState)("linear-gradient(to bottom, #000000, #434343)"),a=Object(ie.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(ie.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)(""),u=Object(ie.a)(d,2),b=u[0],p=u[1],j=Object(n.useState)(!1),h=Object(ie.a)(j,2),v=h[0],f=h[1];return Object(Q.jsx)("article",{className:"board-preview-add ".concat(e.boardMode?"on-board":""),children:Object(Q.jsx)("div",{className:"board-content flex column",style:{background:"".concat(i?"url(".concat(i,")"):r," center")},children:v||e.boardMode?Object(Q.jsxs)("div",{className:"add-active fade-in",children:[Object(Q.jsxs)("div",{className:"title-box flex",children:[Object(Q.jsxs)("form",{children:[Object(Q.jsx)("input",{className:"board-title",value:b,onChange:function(e){return p(e.target.value)},placeholder:"New board title"}),Object(Q.jsx)("button",{onClick:function(t){t.preventDefault(),b.trim()&&(e.onAdd(b,r,i),s("linear-gradient(to bottom, #000000, #434343)"),l(""),p(""),f())},children:"Create"})]}),Object(Q.jsx)("button",{className:"closer",onClick:function(){return e.boardMode?e.setCreateShown(!1):f(!v)},children:Object(Q.jsx)(ue.a,{})})]}),Object(Q.jsx)("div",{className:"color-box",children:Object(Q.jsx)(le,{bgClr:r,setBgClr:s,setBgImg:l})})]}):Object(Q.jsx)("div",{className:"add-inactive",onClick:function(){return f(!v)},children:Object(Q.jsx)("p",{children:"Add a board"})})})})}function pe(e){var t=e.boards,a=e.onAdd,n=e.onRemove;return Object(Q.jsxs)("div",{className:"board-list",children:[t&&t.map((function(t,a){return Object(Q.jsx)(oe,{board:t,onRemove:n,saveBoard:e.saveBoard},a)})),!e.starred&&Object(Q.jsx)(be,{onAdd:a})]})}a(343);var je=a(94),he=a.n(je);function ve(){return Object(Q.jsx)(he.a,{type:"Grid",color:"#0079bf",height:100,width:100,timeout:3e3,className:"loader fade-in"})}var fe={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],a="";for(;e>0;)e--,a+=t[Math.floor(Math.random()*t.length)]+" ";return a},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},timeSince:function(e){var t=Math.floor((new Date-e)/1e3),a=t/31536e3;if(a>1)return 1===Math.floor(a)?"a year ago":Math.floor(a)+" years ago";if((a=t/2592e3)>1)return 1===Math.floor(a)?"a month ago":Math.floor(a)+" months ago";if((a=t/86400)>1)return 1===Math.floor(a)?"a day ago":Math.floor(a)+" days ago";if((a=t/3600)>1)return 1===Math.floor(a)?"an hour ago":Math.floor(a)+" hours ago";if((a=t/60)>1)return 1===Math.floor(a)?"an minute ago":Math.floor(a)+" minutes ago";return 0===Math.floor(t)?"a few seconds ago":Math.floor(t)+" seconds ago"}};var me="IwjSlLYB-kEXeOlDvuifDixGryX1CK64CwapeKeJC8w",Oe={query:function(){return ge.apply(this,arguments)},getById:ke,save:we,updateTask:function(e,t,a){var n=e.groups.find((function(e){return e.id===t.id})),r=e.groups.indexOf(n),s=e.groups[r].tasks.find((function(e){return e.id===a.id})),c=e.groups[r].tasks.indexOf(s);return e.groups[r].tasks[c]=a,Object(b.a)({},e)},addTask:function(e,t,a,n,r){return Ce.apply(this,arguments)},removeTask:function(e,t,a){return De.apply(this,arguments)},addGroup:function(e){return Ae.apply(this,arguments)},removeGroup:function(e,t){return Te.apply(this,arguments)},createActivity:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={id:t.id,title:t.title},r={id:fe.makeId(),createdAt:Date.now(),byMember:D.getLoggedinUser(),task:n,type:e,txt:a};return r},updateTaskByIds:function(e,t,a){return Se.apply(this,arguments)},queryPhotos:function(){return xe.apply(this,arguments)}};function ge(){return(ge=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("board");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return xe=Object(v.a)(h.a.mark((function e(){var t,a,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"random",e.next=3,m.a.get("https://api.unsplash.com/search/photos/?query=".concat(t,"&client_id=").concat(me));case 3:return a=e.sent,e.abrupt("return",a.data.results);case 5:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function ke(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("board/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(v.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return e.next=3,y("board",t);case 3:return a=e.sent,re.emit("board-change"),e.abrupt("return",a);case 8:return n={title:t.title,createdAt:Date.now(),createdBy:D.getLoggedinUser(),groups:[],tasks:[],labels:[],activities:[],members:[],style:{bgClr:t.style.bgClr,bgImg:t.style.bgImg}},e.next=11,k("board",n);case 11:return r=e.sent,re.emit("board-change"),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(v.a)(h.a.mark((function e(t,a,n,r,s){var c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return c={id:"t-".concat(fe.makeId()),title:t,description:"",createdAt:Date.now(),byMember:D.getLoggedinUser(),style:{},labelIds:[],members:[],media:{},attachments:r||s?[{id:fe.makeId(),name:"Media url",url:r||s,createdAt:Date.now(),isWeb:!0}]:[]},r?c.media.audioUrl=r:s&&(c.media.videoUrl=s),e.next=6,ke(a);case 6:return o=e.sent,i=o.groups.findIndex((function(e){return e.id===n})),o.groups[i].tasks.push(c),we(o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(v.a)(h.a.mark((function e(t,a,n){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke(t);case 3:return r=e.sent,s=r.groups.findIndex((function(e){return a===e.id})),r.groups[s].tasks=r.groups[s].tasks.filter((function(e){return n!==e.id})),we(r),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ae(){return Ae=Object(v.a)(h.a.mark((function e(t){var a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"Untitled group",t){e.next=3;break}return e.abrupt("return");case 3:return n={id:"g-".concat(fe.makeId()),title:a,tasks:[],style:{bgImg:"",bgClr:""}},e.prev=4,e.next=7,ke(t);case 7:return(r=e.sent).groups.push(n),we(r),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(4),console.log("couldnt add group",e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])}))),Ae.apply(this,arguments)}function Te(){return(Te=Object(v.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke(t);case 3:return(n=e.sent).groups=n.groups.filter((function(e){return e.id!==a})),we(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function Se(){return(Se=Object(v.a)(h.a.mark((function e(t,a,n){var r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(t);case 2:return r=e.sent,s=r.groups.findIndex((function(e){return a===e.id})),c=r.groups[s].tasks.findIndex((function(e){return e.id===n.id})),r.groups[s].tasks[c]=n,we(r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Me=function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.query();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("cant set boards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(v.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Oe.getById(e,t);case 3:(r=a.sent)&&n({type:"SET_BOARD",board:r}),a.next=11;break;case 7:throw a.prev=7,a.t0=a.catch(0),console.log("cant set board",a.t0),Error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},Ie=function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.save(e);case 3:n=t.sent,a({type:"SAVE_BOARD",board:n}),re.emit("board-change"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("cant save board",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new board",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",a=arguments.length>2?arguments[2]:void 0;return function(){var n=Object(v.a)(h.a.mark((function n(r){var s,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={title:e,style:{bgClr:t,bgImg:a}},n.prev=1,n.next=4,Oe.save(s);case 4:return c=n.sent,r({type:"ADD_BOARD",board:c}),n.abrupt("return",c);case 9:n.prev=9,n.t0=n.catch(1),console.log("cant add board",n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},Pe=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(){var s=Object(v.a)(h.a.mark((function s(c){var o;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Oe.addTask(e,t,a,n,r);case 3:o=s.sent,c({type:"SAVE_BOARD",board:o}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("cant add task",s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()},Ue=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var r=Object(v.a)(h.a.mark((function r(s){var c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.activities.push(Oe.createActivity(a,t,n)),r.next=4,Oe.save(e);case 4:c=r.sent,console.log("newBoard:",c),s({type:"SAVE_BOARD",board:c}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("cant update task details",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},Le=function(e,t,a){return function(){var n=Object(v.a)(h.a.mark((function n(r){var s,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=Oe.updateTask(e,t,a),n.next=4,Oe.save(s);case 4:c=n.sent,console.log("newBoard:",c),r({type:"SAVE_BOARD",board:c}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("cant update task details",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},Fe=function(e,t,a){return function(){var n=Object(v.a)(h.a.mark((function n(r){var s,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Oe.updateTaskByIds(e,t,a);case 3:return s=n.sent,n.next=6,Oe.save(s);case 6:c=n.sent,console.log("newBoard:",c),r({type:"SAVE_BOARD",board:c}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log("cant update task details",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},Re=function(e){return function(t){t({type:"SET_FILTER",filterBy:e})}},Ge=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){re.on("new-board-added",e.props.loadBoards),e.props.loadBoards()},e.addBoard=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:"black",r=s.length>2&&void 0!==s[2]?s[2]:"",a&&a.trim()){t.next=4;break}return t.abrupt("return");case 4:try{e.props.addBoard(a,n,r),re.emit("new-board")}catch(c){console.log("problem adding board",c)}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){re.off("new-board-added")}},{key:"render",value:function(){var e=this.props.boards;return Object(Q.jsxs)("section",{className:"workspace-page main-layout flex column",children:[Object(Q.jsx)("h1",{children:"Your Workspace"}),Object(Q.jsx)("h2",{className:"flex align-center",children:this.props.boards.some((function(e){return e.isFavorite}))&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ce.a,{style:{height:"35px",width:"35px"}})," Starred boards"]})}),Object(Q.jsxs)("div",{className:"board-lists flex column",children:[Object(Q.jsx)(pe,{starred:!0,boards:e.filter((function(e){return e.isFavorite})),onAdd:this.addBoard,onRemove:this.props.removeBoard,saveBoard:this.props.saveBoard}),e.length?Object(Q.jsx)(pe,{boards:e.filter((function(e){return!e.isFavorite})),onAdd:this.addBoard,onRemove:this.props.removeBoard,saveBoard:this.props.saveBoard}):Object(Q.jsx)(ve,{})]})]})}}]),a}(n.Component);var Xe={loadBoards:Me,addBoard:Be,removeBoard:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.remove(e);case 3:t.sent,a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("cant remove board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},saveBoard:Ie},_e=Object(i.b)((function(e){return{boards:e.boardModule.boards}}),Xe)(Ge),Ye=a(54),He=a.n(Ye);var We={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";We.emit("show-user-msg",{txt:e,type:t})}function ze(e){Ve(e,"danger")}function Qe(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.login(e);case 3:n=t.sent,console.log(n),a({type:"SET_USER",user:n}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),ze("Cannot login"),console.log("Cannot login",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}window.myBus=We,window.showUserMsg=Ve;var qe={onLogout:function(){return function(e){D.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){ze("Cannot logout"),console.log("Cannot logout",e)}))}},saveBoard:Ie},Je=Object(i.b)((function(e){var t=e.userModule,a=e.boardModule;return{user:t.loggedinUser,board:a.board}}),qe)((function(e){var t,a=e.member,n=e.togglePopOpen,r=e.isInHeader,s=e.isInBoardList,c=e.onLogout,o=(e.user,e.board),i=e.saveBoard,l=function(){var e=Object(v.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(JSON.stringify(o)),r=t.members.findIndex((function(e){return e._id===a._id})),t.members.splice(r,1),e.prev=3,e.next=6,i(t);case 6:n(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("error when deleting user from board",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"popup-container flex column",children:[Object(Q.jsx)("div",{className:"pop-overlay",style:{position:"fixed",top:0,left:0,inset:0,height:"100vh",width:"100%",backgroundColor:"transparent",zIndex:4},onClick:function(){return n(!1)}}),Object(Q.jsxs)("div",{className:"wrap  ".concat(r?"header":""),children:[Object(Q.jsxs)("div",{className:"member-popup",children:[(null===a||void 0===a?void 0:a.imgUrl)?Object(Q.jsx)("img",{src:a.imgUrl,className:"member-img",alt:"member-img"}):Object(Q.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(Q.jsx)("p",{className:"member-letter preview",children:(null===a||void 0===a||null===(t=a.fullname)||void 0===t?void 0:t[0].toUpperCase())||""})}),Object(Q.jsxs)("div",{className:"member-info flex column",children:[Object(Q.jsx)("p",{className:"fullname",children:a.fullname}),Object(Q.jsx)("p",{className:"username",children:a.username})]})]}),Object(Q.jsxs)("div",{className:"member-footer",children:[r&&Object(Q.jsx)("p",{className:"logout",onClick:c,children:"Logout"}),s&&Object(Q.jsx)("p",{className:"logout",onClick:l,children:"Remove from board"})]})]})]})})),Ke=function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_TASK_DETAILS",currTaskDetails:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ze=function(){return function(e){e({type:"TOGGLE_DRAGGING"})}},$e=function(e){var t=e.pos,a=e.type;return function(e){e({type:"SET_POSITION",pos:Object(b.a)(Object(b.a)({},t),{},{type:a})})}},et=function(){return function(e){e({type:"TOGGLE_POPOVER"})}},tt=function(e){return function(t){t({type:"SET_POPOVER",isOpen:e})}},at=function(e){return function(t){t({type:"SET_POPOVER_MENU",isMenu:e})}};var nt={setCurrTaskDetails:Ke,setPosition:$e,togglePopover:et,setPopoverMenu:at},rt=Object(i.b)(null,nt)((function(e){var t,a=e.member,r=e.isInPreview,s=e.isEditMode,c=e.isInHeader,o=e.isInBoardList,i=e.task,l=e.setPosition,d=e.setCurrTaskDetails,u=e.togglePopover,b=e.setPopoverMenu,p=e.onLogout,j=Object(n.useState)(!1),h=Object(ie.a)(j,2),v=h[0],f=h[1];return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("article",{className:"member-wrapper",onClick:function(e){if(e.preventDefault(),!s)return r?(d(i),l({pos:{pageX:e.pageX,pageY:e.pageY},type:"MEMBERS"}),b(!1),void u()):void f(!v)},children:(null===a||void 0===a?void 0:a.imgUrl)?Object(Q.jsx)("img",{src:a.imgUrl,className:"member-img",alt:a.fullname[0].toUpperCase()}):Object(Q.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(Q.jsx)("p",{className:"member-letter ".concat(r?"preview":""),children:(null===a||void 0===a||null===(t=a.fullname)||void 0===t?void 0:t[0].toUpperCase())||""})})}),v&&Object(Q.jsx)(Je,{member:a,togglePopOpen:f,isInPreview:r,isInHeader:c,isInBoardList:o,onLogout:p})]})}));var st={setPosition:$e,togglePopover:et,setPopoverMenu:at},ct=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails}}),st)((function(e){var t=e.members,a=e.isInPreview,n=e.isInDetails,r=e.isInHeader,s=e.togglePopover,c=e.isEditMode,o=e.isInBoardList,i=e.task;return Object(Q.jsxs)("div",{className:"members ".concat(a?"preview":"").concat(r?"in-header":""," ").concat((null===i||void 0===i?void 0:i.members.length)>=5?"many":""),children:[t&&t.map((function(e,t){return Object(Q.jsx)(rt,{isInPreview:a,isEditMode:c,isInHeader:r,isInBoardList:o,member:e,task:i},t)})),n&&Object(Q.jsx)("button",{className:"secondary-btn",onClick:function(t){e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"MEMBERS"}),s()},children:Object(Q.jsx)(He.a,{})})]})})),ot=a(63),it=a.n(ot);function lt(e){var t=e.member,a=e.selectedMembersIds,n=e.toggleMemberCheck;return Object(Q.jsxs)("li",{className:"member-pop-over-preview flex",onClick:function(){n(t)},children:[t.imgUrl&&Object(Q.jsx)("img",{className:"profile-picture",style:{marginInlineEnd:"8px"},src:t.imgUrl,alt:"member photo"}),!t.imgUrl&&Object(Q.jsx)("div",{className:"profile-picture",style:{background:"#dfe1e6",marginInlineEnd:"8px"},children:Object(Q.jsx)("p",{className:"profile-picture letter",children:t.fullname[0]})}),Object(Q.jsx)("span",{children:t.fullname}),a.includes(t._id)&&Object(Q.jsx)("span",{className:"icon-check flex",children:Object(Q.jsx)(it.a,{})})]})}var dt=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleSearch=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:t.target.value})}))},e.boardUsers=[],e.addUserToBoard=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.saveBoard,delete a.password,c=Object(b.a)(Object(b.a)({},r),{},{members:[].concat(Object(u.a)(r.members),[a])}),t.next=5,s(c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilteredUsers=function(){var t=e.props,a=t.board;return t.users.filter((function(e){return a.members.every((function(t){return t._id!==e._id}))}))||[]},e.filteredUsers=e.getFilteredUsers(),e.componentDidUpdate=function(t){e.props.board.members.length!==t.board.members.length&&(e.filteredUsers=e.getFilteredUsers(),e.forceUpdate())},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=(t.board,t.currTaskDetails,t.users),r=t.setMembersPopup,s=this.state.search;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"overlay show",onClick:function(){return r(!1)}}),Object(Q.jsx)("div",{title:a,className:" board-member-add flex column",children:Object(Q.jsxs)("div",{className:"members-popover",children:[Object(Q.jsx)("h4",{children:"ADD TO BOARD"}),Object(Q.jsx)("input",{type:"search",placeholder:"Search members",onChange:this.handleSearch}),Object(Q.jsx)("ul",{className:"clean-list flex column",children:this.filteredUsers.length>0?this.filteredUsers.filter((function(e){return e.fullname.toLowerCase().includes(s.toLowerCase())})).map((function(t,a){var r;return Object(Q.jsx)(lt,{toggleMemberCheck:function(){return e.addUserToBoard(t)},member:t,selectedMembersIds:(null===(r=e.boardUsers)||void 0===r?void 0:r.map((function(e){return e._id})))||[],members:n},a)})):Object(Q.jsx)("p",{children:"No members available"})})]})})]})}}]),a}(n.Component);var ut={saveBoard:Ie},bt=Object(i.b)((function(e){return{users:e.userModule.users,popover:e.appModule.popover,board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser}}),ut)(dt),pt=a(131),jt=a.n(pt),ht=a(233),vt=a.n(ht),ft=a(232),mt=a.n(ft),Ot=a(531);var gt={saveBoard:Ie,togglePopover:et,setPosition:$e,setPopoverMenu:at,setFilterBy:Re};var xt=Object(i.b)((function(e){return{board:e.boardModule.board,filterBy:e.boardModule.filterBy}}),gt)((function(e){var t=e.board,a=e.setFilterBy,r=Object(n.useState)(!1),s=Object(ie.a)(r,2),c=s[0],i=s[1],l=Object(n.useState)(t.title),d=Object(ie.a)(l,2),u=d[0],p=d[1],j=Object(n.useState)(9.5*t.title.length),f=Object(ie.a)(j,2),m=f[0],O=f[1],g=Object(n.useState)(!1),x=Object(ie.a)(g,2),k=x[0],y=x[1],w=Object(n.useRef)();Object(n.useEffect)((function(){var e,t;w&&"number"===typeof(null===(e=w.current)||void 0===e?void 0:e.offsetWidth)&&O(null===(t=w.current)||void 0===t?void 0:t.offsetWidth)}),[u]);var N=function(){var a=Object(v.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=Object(b.a)({},t)).isFavorite=!n.isFavorite;try{e.saveBoard(n)}catch(r){console.log("error setting favorite",r)}case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return t?Object(Q.jsxs)("header",{className:"main-header board-header flex align-center",children:[Object(Q.jsxs)("div",{className:"header-btn-container flex",children:[c?Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("span",{ref:w,children:u}),Object(Q.jsx)("input",{autoFocus:!0,className:"title ".concat(!(null===u||void 0===u?void 0:u.length)&&"height-adjust"),onBlur:function(){i(!1),function(){var a=Object(b.a)({},t);a.title=u.trim(),p(u.trim()),e.saveBoard(a)}()},value:u,onChange:function(e){!function(e){p(e.target.value)}(e)},style:{width:m+10,minWidth:"40px"}})]}):Object(Q.jsx)("h2",{className:"title",onClick:function(){return i(!0)},children:u}),Object(Q.jsxs)("div",{className:"header-btn-container flex",children:[Object(Q.jsx)("button",{className:"header-btn star",children:t.isFavorite?Object(Q.jsx)(ce.a,{className:"icon star gold",onClick:N}):Object(Q.jsx)(ce.a,{className:"icon star",onClick:N})}),(null===t||void 0===t?void 0:t.members)&&Object(Q.jsx)(ct,{members:t.members,isInBoardList:!0})]}),Object(Q.jsx)("button",{className:"header-btn",onClick:function(){return y(!k)},children:Object(Q.jsx)(mt.a,{className:"icon"})}),k&&Object(Q.jsx)(bt,{setMembersPopup:y})]}),Object(Q.jsxs)("div",{className:"header-btn-container flex ",children:[Object(Q.jsx)(o.b,{to:"/board/".concat(t._id,"/dashboard"),className:"clean-link",children:Object(Q.jsxs)("button",{className:"header-btn",children:[Object(Q.jsx)(vt.a,{className:"icon"})," ",Object(Q.jsx)("span",{className:"btn-txt",children:"Dashboard"})]})}),(e.filterBy.search||e.filterBy.labels.length>0||e.filterBy.members.length>0)&&Object(Q.jsxs)("div",{className:"flex results",children:[Object(Q.jsx)("button",{className:"header-btn btn-results",onClick:function(t){e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"BOARD_FILTER_CARDS"}),e.setPopoverMenu(!0),e.togglePopover(!1)},children:"Change Filter"}),Object(Q.jsx)("span",{className:"flex",style:{alignItems:"center",backgroundColor:"#61bd4f"},children:Object(Q.jsx)(Ot.a,{className:"icon clean-btn",onClick:function(e){e.stopPropagation(),a({labels:[],members:[],search:""})}})})]}),Object(Q.jsxs)("button",{className:"header-btn last-in-row",onClick:function(t){e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"BOARD_SHOW_MENU"}),e.setPopoverMenu(!0),e.togglePopover(!1)},children:[Object(Q.jsx)(jt.a,{className:"icon menu"})," ",Object(Q.jsx)("span",{className:"btn-txt",children:"Show Menu"})]})]})]}):Object(Q.jsx)("h2",{children:"Loading"})}));var kt={addGroup:function(e,t){return function(){var a=Object(v.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Oe.addGroup(e,t);case 3:r=a.sent,n({type:"SAVE_BOARD",board:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("cant add group",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},yt=Object(_.e)(Object(i.b)(null,kt)((function(e){var t=e.match.params.boardId,a=Object(n.useState)(!1),r=Object(ie.a)(a,2),s=r[0],c=r[1],o=Object(n.useState)(""),i=Object(ie.a)(o,2),l=i[0],d=i[1],u=Object(n.useState)("Add list"),b=Object(ie.a)(u,2),p=b[0],j=b[1],f=function(){s&&d(""),c(!s)},m=function(){var a=Object(v.a)(h.a.mark((function a(){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,l.trim()){a.next=3;break}return a.abrupt("return");case 3:return j(Object(Q.jsx)(he.a,{type:"Grid",color:"white",height:14,width:14})),a.next=6,e.addGroup(t,l.trim());case 6:j("Add list"),d(""),f(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),j("Add list");case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}();return Object(Q.jsx)("div",{className:"add-group-wrapper",children:s?Object(Q.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(Q.jsxs)("div",{className:"add-group-active group-details flex column scale-up-ver-top",children:[Object(Q.jsx)("input",{value:l,placeholder:"Enter list title...",onChange:function(e){return d(e.target.value)},className:"group-preview",autoFocus:!0}),Object(Q.jsxs)("div",{className:"group-btns flex align-center",children:[Object(Q.jsx)("button",{onClick:m,className:"group-btn save-group-title-btn",children:p}),Object(Q.jsx)("button",{className:"group-btn close-group-title-btn",onClick:f,children:Object(Q.jsx)(Ot.a,{})})]})]})}):Object(Q.jsx)("article",{className:"group-details add-new",onClick:function(){f()},children:Object(Q.jsxs)("div",{className:"flex align-center",children:[Object(Q.jsx)(He.a,{className:"icon"}),"Add a list"]})})})})));var wt={toggleExpandLabels:function(){return function(e){e({type:"TOGGLE_LABELS"})}}},Nt=Object(i.b)((function(e){return{areLabelsExpanded:e.boardModule.areLabelsExpanded}}),wt)((function(e){var t=e.labelIds,a=e.boardLabels,n=e.areLabelsExpanded,r=e.toggleExpandLabels;return Object(Q.jsx)("div",{className:"task-labels-container flex",children:t&&t.map((function(e,t){var s=a.find((function(t){return t.id===e}));if(s)return Object(Q.jsx)("div",{className:"label flex justify-center ".concat(n?"expanded":""),style:{background:s.color},onClick:function(e){e.preventDefault(),e.stopPropagation(),r()},children:Object(Q.jsx)("span",{children:s.title})},t)}))})})),Ct=function(e){return"0/0"===e.txt?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)("span",{className:" flex align-center ".concat(e.isDone?"checklist done checklist":""),children:[e.icon,e.txt&&Object(Q.jsx)("p",{children:e.txt})]})},Dt=a(234),At=a.n(Dt),Tt=a(174),St=a.n(Tt),Mt=a(56),Et=a.n(Mt),It={saveBoard:Ie};var Bt=Object(i.b)((function(e){return{board:e.boardModule.board}}),It)((function(e){var t=Object(n.useState)(!1),a=Object(ie.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(e.isDone),o=Object(ie.a)(c,2),i=o[0],l=o[1],d=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.stopPropagation(),l(!i),n=Object(b.a)({},e.board),r=n.groups.findIndex((function(t){return e.groupId===t.id})),s=n.groups[r].tasks.findIndex((function(t){return e.taskId===t.id})),n.groups[r].tasks[s].isDone=!e.isDone,t.prev=7,t.next=10,e.saveBoard(n);case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(7),console.log("cant change task status",t.t0),l(!i);case 16:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){i!==e.isDone&&l(e.isDone)}),[e.isDone,i]),Object(Q.jsxs)("span",{className:"due-date ".concat(!i&&e.dueDate<Date.now()?"overdue":"").concat(i?"done":""," "),onMouseEnter:function(){return s(!e.noHover)},onMouseLeave:function(){return s(!1)},onClick:d,children:[!i&&Object(Q.jsx)(Q.Fragment,{children:r?Object(Q.jsx)(St.a,{className:"icon"}):Object(Q.jsx)(At.a,{className:"icon"})}),i&&Object(Q.jsx)(Q.Fragment,{children:r?Object(Q.jsx)(St.a,{className:"icon"}):Object(Q.jsx)(Et.a,{className:"icon"})}),Object(Q.jsx)("p",{children:new Date(e.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})})),Pt=a(95),Ut=a.n(Pt),Lt=a(96),Ft=a.n(Lt),Rt=a(40),Gt=a.n(Rt),Xt=a(138),_t=a.n(Xt),Yt=a(235),Ht=a.n(Yt),Wt=a(132),Vt=a.n(Wt),zt=a(133),Qt=a.n(zt),qt=a(134),Jt=a.n(qt),Kt=a(136),Zt=a.n(Kt),$t=a(135),ea=a.n($t),ta=a(137),aa=a.n(ta),na=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedAction:""},e.componentWillUnmount=function(){e.props.isPopoverOpen&&e.props.togglePopover(),e.setState({selectedAction:""})},e.setActiveAction=function(t){t.stopPropagation(),e.setState({selectedAction:t.target.parentElement.dataset.type})},e.sendToArchive=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(b.a)({},e.props.task)).isArchive=!0,t.next=4,e.props.addActivity(e.props.board,e.props.task,"add-to-archive",a.title);case 4:return t.prev=4,t.next=7,e.props.updateTask(e.props.boardId,e.props.groupId,a);case 7:e.props.toggleMenu(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log("error when sending to archive",t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])}))),e.popoverDispatch=function(t,a){e.props.task.style=e.props.task.style?e.props.task.style:e.props.task.style={},e.props.setCurrTaskDetails(e.props.task),e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:a}),e.props.togglePopover()},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.menuPos,n=t.toggleMenu,r=t.taskUrl;return Object(Q.jsxs)("div",{className:"task-actions flex column slide-in-left",style:a,children:[Object(Q.jsx)(o.b,{to:r,onClick:n,className:"clean-link",children:Object(Q.jsxs)("button",{children:[Object(Q.jsx)(Ht.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Open card"})]})}),Object(Q.jsxs)("button",{className:"".concat("labels"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"labels",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"LABELS")},children:[Object(Q.jsx)(Vt.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Edit labels"})]}),Object(Q.jsxs)("button",{className:"".concat("members"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"members",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"MEMBERS")},children:[Object(Q.jsx)(Qt.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Change members"})]}),Object(Q.jsxs)("button",{className:"".concat("cover"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"cover",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"COVER")},children:[Object(Q.jsx)(Jt.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Change cover"})]}),Object(Q.jsxs)("button",{className:"".concat("move"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"move",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"MOVE")},children:[Object(Q.jsx)(ea.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Move"})]}),Object(Q.jsxs)("button",{className:"".concat("copy"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"copy",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"COPY")},children:[Object(Q.jsx)(Zt.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Copy"})]}),Object(Q.jsxs)("button",{className:"".concat(("date"===this.state.selectedAction&&this.props.isPopoverOpen,"")),"data-type":"date",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"DATE")},children:[Object(Q.jsx)(aa.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Edit date"})]}),Object(Q.jsxs)("button",{onClick:this.sendToArchive,children:[Object(Q.jsx)(_t.a,{className:"action-icon"}),Object(Q.jsx)("p",{children:"Archive"})]})]})}}]),a}(n.Component),ra={updateTask:Fe,setPosition:$e,setCurrTaskDetails:Ke,togglePopover:et,addActivity:Ue},sa=Object(i.b)((function(e){return{isPopoverOpen:e.appModule.popover.isOpen,board:e.boardModule.board}}),ra)(na);var ca={updateTask:Fe,addActivity:Ue};var oa=Object(i.b)((function(e){return{board:e.boardModule.board}}),ca)((function(e){var t=e.task,a=e.groupId,r=e.boardId,s=e.boardLabels,c=e.getChecklistData,o=e.menuPos,i=e.toggleMenu,l=e.updateTask,d=e.taskUrl,u=(e.addActivity,e.board,t.style),p=t.labelIds,j=t.dueDate,f=t.title,m=t.description,O=t.comments,g=t.attachments,x=t.checklists,k=t.todos,y=(t.doneTodos,Object(n.useState)(f)),w=Object(ie.a)(y,2),N=w[0],C=w[1],D=function(){var e=Object(v.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(b.a)({},t)).title!==N){e.next=3;break}return e.abrupt("return");case 3:return n.title=N,e.prev=4,e.next=7,l(r,a,n);case 7:i(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("error when setting title",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("article",{className:"task-preview-container edit",style:{zIndex:100,borderRadius:3},children:[(null===u||void 0===u?void 0:u.bgUrl)&&Object(Q.jsx)("img",{className:"task-cover-img",src:u.bgUrl,style:{backgroundColor:"white",borderRadius:"3px",objectFit:"contain",maxHeight:240},alt:""}),(null===u||void 0===u?void 0:u.bgColor)&&!(null===u||void 0===u?void 0:u.bgUrl)&&Object(Q.jsx)("div",{className:"task-cover",style:{background:t.style.bgColor}}),Object(Q.jsxs)("div",{className:"task-preview clean-link ",style:(null===u||void 0===u?void 0:u.bgUrl)&&{position:"relative",top:"-8px",marginBottom:"-8px",borderRadius:"0 0 3px 3px"},children:[(null===p||void 0===p?void 0:p.length)>0&&Object(Q.jsx)(Nt,{labelIds:p,boardLabels:s}),Object(Q.jsx)("textarea",{className:"task-title",value:N,autoFocus:!0,onChange:function(e){return C(e.target.value)}}),Object(Q.jsxs)("div",{className:"task-preview-icons flex align-center",children:[j&&Object(Q.jsx)(Bt,{dueDate:j,isDone:t.isDone,taskId:t.id,groupId:a}),(null===m||void 0===m?void 0:m.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Ut.a,{className:"icon"})}),(null===O||void 0===O?void 0:O.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Ft.a,{className:"icon msg"}),txt:O.length}),(null===g||void 0===g?void 0:g.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Gt.a,{className:"icon attach"}),txt:g.length}),(null===x||void 0===x?void 0:x.length)>0&&0!==k&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Et.a,{className:"icon"}),txt:c(),isDone:c(!0)}),(null===t||void 0===t?void 0:t.members)&&Object(Q.jsx)(ct,{members:t.members,isInPreview:!0,isEditMode:!0})]})]})]}),Object(Q.jsx)("button",{className:"save-btn",onClick:function(){D()},children:"Save"}),Object(Q.jsx)(sa,{toggleMenu:i,menuPos:o,groupId:a,boardId:r,task:t,taskUrl:d})]})})),ia=a(44),la=a(143),da=a.n(la);var ua={toggleDragDisable:Ze,setPopoverMenu:at},ba=Object(i.b)((function(e){return{isDragDisabled:e.appModule.isDragDisabled}}),ua)((function(e){var t,a,r=e.task,s=e.taskUrl,c=e.boardLabels,i=e.groupId,l=e.boardId,d=e.index,u=e.isDragDisabled,p=e.toggleDragDisable,j=r.labelIds,h=r.title,v=r.dueDate,f=r.comments,m=r.checklists,O=r.description,g=r.attachments,x=r.style,k=r.media,y=Object(n.useState)(!1),w=Object(ie.a)(y,2),N=w[0],C=w[1],D=Object(n.useState)(),A=Object(ie.a)(D,2),T=A[0],S=A[1],M=function(t){!function(e){if(e){var t=e.target.parentElement.parentElement.getBoundingClientRect(),a=t.top,n=t.right,r=t.height;console.log(a,n,r,window.innerHeight),a>window.innerHeight-318?S({position:"absolute",left:"".concat(n,"px"),bottom:50}):S({position:"fixed",left:"".concat(n,"px"),top:a})}}(t),C(!N),p(),e.setPopoverMenu(!1)},E=function(e){return t=0,a=0,m.forEach((function(e){t+=e.todos.length,e.todos.forEach((function(e){e.isDone&&a++}))})),e?t===a:"".concat(a,"/").concat(t)};return(null===x||void 0===x?void 0:x.bgUrl)&&"full"===(null===x||void 0===x?void 0:x.coverMode)&&!N?Object(Q.jsx)(ia.b,{draggableId:r.id,index:d,isDragDisabled:u,children:function(e){return Object(Q.jsx)("article",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Q.jsx)(o.b,{to:s,className:"clean-link",children:Object(Q.jsxs)("div",{className:"task-preview-container full-cover img",src:x.bgUrl,children:[Object(Q.jsx)("img",{className:"",src:x.bgUrl,alt:""}),Object(Q.jsx)("div",{className:"img-overlay"}),Object(Q.jsx)("p",{children:r.title}),Object(Q.jsx)("div",{className:"edit-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),M(e)},children:Object(Q.jsx)(da.a,{className:"icon"})})]})})}))}}):x&&"full"===(null===x||void 0===x?void 0:x.coverMode)&&!N?Object(Q.jsx)(ia.b,{draggableId:r.id,index:d,isDragDisabled:u,children:function(e){return Object(Q.jsx)("article",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Q.jsxs)("div",{className:"task-preview-container full-cover",style:{background:x.bgColor},children:[Object(Q.jsx)(o.b,{to:s,className:"clean-link",children:Object(Q.jsx)("div",{className:"task-preview",children:Object(Q.jsx)("p",{children:r.title})})}),Object(Q.jsx)("div",{className:"edit-icon",onClick:M,children:Object(Q.jsx)(da.a,{className:"icon"})})]})}))}}):N?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"overlay ".concat(N?"show":""),onClick:M,style:{zIndx:2}}),Object(Q.jsx)(oa,{task:r,getChecklistData:E,groupId:i,boardId:l,boardLabels:c,menuPos:T,toggleMenu:M,taskUrl:s})]}):Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(ia.b,{draggableId:r.id,index:d,isDragDisabled:u,children:function(e){return Object(Q.jsx)("div",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(Q.jsxs)("article",{className:"task-preview-container",style:{boxShadow:"none",zIndex:N?55:0},children:[(null===x||void 0===x?void 0:x.bgUrl)&&Object(Q.jsx)(o.b,{to:s,className:"clean-link",children:Object(Q.jsx)("img",{className:"task-cover-img",src:x.bgUrl,style:{backgroundColor:"white",borderRadius:"3px",objectFit:"cover",maxHeight:240},alt:""})}),Object(Q.jsxs)(o.b,{to:s,className:"clean-link",children:[(null===x||void 0===x?void 0:x.bgColor)&&!(null===x||void 0===x?void 0:x.bgUrl)&&Object(Q.jsx)("div",{className:"task-cover",style:{background:r.style.bgColor}}),Object(Q.jsxs)("div",{className:"task-preview clean-link ",style:(null===x||void 0===x?void 0:x.bgUrl)&&{position:"relative",top:"-8px",marginBottom:"-8px",borderRadius:"0 0 3px 3px"},children:[(null===j||void 0===j?void 0:j.length)>0&&Object(Q.jsx)(Nt,{labelIds:j,boardLabels:c}),(null===k||void 0===k?void 0:k.videoUrl)&&Object(Q.jsx)("div",{className:"video flex",onDrag:function(e){return e.stopPropagation()},children:Object(Q.jsx)("video",{width:"100%",controls:!0,children:Object(Q.jsx)("source",{src:r.media.videoUrl,type:"video/mp4"})})}),(null===k||void 0===k?void 0:k.audioUrl)&&Object(Q.jsx)("div",{className:"audio",children:Object(Q.jsx)("audio",{controls:!0,src:r.media.audioUrl})}),Object(Q.jsx)("div",{className:"task-title",children:Object(Q.jsx)("p",{children:h})}),Object(Q.jsxs)("div",{className:"task-preview-icons flex align-center",children:[v&&Object(Q.jsx)(Bt,{dueDate:v,isDone:r.isDone,taskId:r.id,groupId:i}),(null===O||void 0===O?void 0:O.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Ut.a,{className:"icon desc"})}),(null===f||void 0===f?void 0:f.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Ft.a,{className:"icon msg"}),txt:f.length}),(null===g||void 0===g?void 0:g.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Gt.a,{className:"icon attach"}),txt:g.length}),(null===m||void 0===m?void 0:m.length)>0&&0!==t&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Et.a,{className:"icon"}),txt:E(),isDone:t===a&&0!==t}),(null===r||void 0===r?void 0:r.members)&&Object(Q.jsx)(ct,{members:r.members,isInPreview:!0,task:r})]})]}),Object(Q.jsx)("div",{className:"edit-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),M(e)},children:Object(Q.jsx)(da.a,{className:"icon"})})]})]})}))}})})}));var pa=Object(i.b)((function(e){return{filterBy:e.boardModule.filterBy}}),{})((function(e){var t=e.groupId,a=e.boardId,n=e.boardLabels,r=e.tasks,s=e.filterBy,c=JSON.parse(JSON.stringify(r));if(c.length&&(c.forEach((function(e,t){return e.orgIdx=t})),c=c.filter((function(e){return!0!==(null===e||void 0===e?void 0:e.isArchive)}))),s.search){var o=s.search.toLowerCase();c=c.filter((function(e){return e.title.toLowerCase().includes(o)}))}return s.labels.length>0&&(c=c.filter((function(e){return e.labelIds.some((function(t){return s.labels.every((function(t){return e.labelIds.includes(t)}))}))}))),s.members.length>0&&(c=c.filter((function(e){return e.members.some((function(t){return s.members.every((function(t){var a=e.members.map((function(e){return e._id}));return a.includes(t)}))}))}))),Object(Q.jsx)(ia.c,{droppableId:t,children:function(e){var r;return Object(Q.jsxs)("div",Object(b.a)(Object(b.a)({},e.droppableProps),{},{ref:e.innerRef,className:"task-list",children:[null===(r=c)||void 0===r?void 0:r.map((function(e){return Object(Q.jsx)(ba,{task:e,id:e.id,index:e.orgIdx,taskUrl:"/board/".concat(a,"/").concat(t,"/").concat(e.id),boardLabels:n,groupId:t,boardId:a},e.id)})),e.placeholder,!c.length&&Object(Q.jsx)("div",{style:{visibilty:"hidden",opacity:"0",height:"1px",width:"1px",color:"transparent"}})]}))}})})),ja=a(243),ha=a.n(ja),va=a(244),fa=a.n(va),ma=a(236),Oa=a(237),ga=a.n(Oa),xa=a(533),ka=a(240),ya={uploadFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="dusakec3z",r="pjprwzkr",s="https://api.cloudinary.com/v1_1/".concat(n,"/").concat(t,"/upload"),c=new FormData;return"image"===t?c.append("file",e.target.files[0]):c.append("file",a),c.append("upload_preset",r),fetch(s,{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};var wa,Na=a(242),Ca=a.n(Na),Da=a(532),Aa=a(39),Ta=a(241),Sa=a.n(Ta),Ma=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={record:!1,isOverlay:!0},e.startRecording=function(){e.setState({record:!0})},e.stopRecording=function(){e.setState({record:!1})},e.onStop=function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.setMediaType(""),t.next=3,ya.uploadFile(null,"video","video"===n?a:a.blob);case 3:r=t.sent,s=r.secure_url,"video"===n?e.props.addTask("Media Video",e.props.boardId,e.props.groupId,null,s):e.props.addTask("Media Audio",e.props.boardId,e.props.groupId,s,null);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.setOverlay=function(t){e.setState({isOverlay:t})},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.setOverlay(!0)}},{key:"compoentWillUnmount",value:function(){this.stopRecording()}},{key:"render",value:function(){var e=this,t=Object(Aa.default)(Da.a)(wa||(wa=Object(ma.a)(["\n        position: relative;\n        background-color: ",";\n        color: white;\n        opacity: 1;\n        margin: 12px;\n        z-index: 3;\n        transition: all 0.2s;\n        :hover {\n          background-color: ",";\n          opacity: 0.9;\n        }\n      "])),this.state.record?"#8f3934":"#272727",this.state.record?"#8f3934":"#272727"),a=this.props.setAudioPath;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"media",style:{width:"100%",maxWidth:400,height:400,padding:"0 20px"},children:Object(Q.jsx)("div",{className:"media-container",children:"video"===this.props.type&&Object(Q.jsx)(ga.a,{className:"video-recorder",isFlipped:!1,countdownTime:0,mimeType:"video/webm;codecs=vp8,opus",constraints:{audio:!0,video:{resizeMode:"crop-and-scale",width:{exact:480,ideal:480},height:{exact:640,ideal:640},aspectRatio:{exact:.7500000001,ideal:.7500000001}}},onRecordingComplete:function(t){return e.onStop(t,"video")}})})}),"audio"===this.props.type&&Object(Q.jsx)("div",{className:"media",children:Object(Q.jsxs)("div",{className:"media-container",children:[Object(Q.jsx)(ka.ReactMic,{record:this.state.record,className:"sound-wave",onStop:function(t){return e.onStop(t,"audio")},strokeColor:"white",backgroundColor:"black",setAudioPath:a,height:240,width:370}),Object(Q.jsxs)(xa.a,{item:!0,container:!0,justify:"center",xs:12,children:[!this.state.record&&Object(Q.jsx)(t,{onClick:this.startRecording,color:"secondary","aria-label":"record",children:Object(Q.jsx)(Sa.a,{})}),this.state.record&&Object(Q.jsx)(t,{color:"secondary","aria-label":"record",onClick:this.stopRecording,children:Object(Q.jsx)(Ca.a,{})})]})]})}),Object(Q.jsx)("div",{className:"overlay ".concat(this.state.isOverlay?"show":""," "),onClick:function(){e.props.setMediaType("")},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})]})}}]),a}(r.a.Component);var Ea={addTask:Pe},Ia=Object(i.b)((function(e){return{board:e.boardModule.board}}),Ea)(Ma);var Ba={addTask:Pe},Pa=Object(i.b)(null,Ba)((function(e){var t=Object(n.useState)(!1),a=Object(ie.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(ie.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)("Add task"),u=Object(ie.a)(d,2),b=u[0],p=u[1],j=Object(n.useState)(""),f=Object(ie.a)(j,2),m=f[0],O=f[1],g=function(){s(!r)},x=function(){var t=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i.trim()){t.next=3;break}return t.abrupt("return");case 3:return p(Object(Q.jsx)(he.a,{type:"Grid",color:"white",height:14,width:14})),t.next=6,e.addTask(i.trim(),e.ids.boardId,e.ids.groupId);case 6:l(""),p("Add task"),e.scrollToBottom(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("error when saving task",t.t0),p("Add task");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),k=function(t){O(t),t?e.toggleDragDisable(!0):e.toggleDragDisable(!1)};return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"grp-add-task",children:r?Object(Q.jsxs)("div",{className:"add-task-active flex column",children:[Object(Q.jsx)("textarea",{value:i,placeholder:"Enter a title for this task...",onChange:function(e){return l(e.target.value)},className:"task-preview",onClick:e.scrollToBottom}),Object(Q.jsxs)("div",{className:"task-btns flex align-center",children:[Object(Q.jsx)("button",{className:"task-btn save-task-title-btn",onClick:x,children:b}),Object(Q.jsx)("button",{className:"task-btn close-task-title-btn",onClick:g,children:Object(Q.jsx)(Ot.a,{})})]})]}):Object(Q.jsxs)("div",{className:"add-task-inactive flex space-between",children:[Object(Q.jsxs)("div",{className:"add-btn flex align-center",onClick:g,children:[Object(Q.jsx)(He.a,{className:"icon"}),Object(Q.jsx)("p",{children:"Add a task"})]}),Object(Q.jsxs)("div",{className:"media-btns flex align-center",children:[Object(Q.jsx)(ha.a,{className:"media-icon",onClick:function(){return k("video")}}),Object(Q.jsx)(fa.a,{className:"media-icon",onClick:function(){return k("audio")}})]})]})}),m&&Object(Q.jsx)(Ia,{boardId:e.ids.boardId,groupId:e.ids.groupId,type:m,setMediaType:k})]})}));var Ua={saveBoard:Ie},La=Object(i.b)((function(e){return{board:e.boardModule.board}}),Ua)((function(e){var t=Object(b.a)({},e.group),a=Object(n.useState)(t.title),r=Object(ie.a)(a,2),s=r[0],c=r[1];Object(n.useEffect)((function(){c(e.group.title)}),[e.group.title]);var o=function(){var a=Object(v.a)(h.a.mark((function a(){var n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(b.a)({},e.board),r=n.groups.findIndex((function(e){return t.id===e.id})),n.groups[r].title=s,a.prev=3,a.next=6,e.saveBoard(n);case 6:a.next=10;break;case 8:a.prev=8,a.t0=a.catch(3);case 10:case"end":return a.stop()}}),a,null,[[3,8]])})));return function(){return a.apply(this,arguments)}}();return Object(Q.jsx)("input",{className:"group-title flex column",value:s,onChange:function(e){return c(e.target.value)},onBlur:o})}));function Fa(e){return Object(Q.jsxs)("div",{className:"group-menu",style:e.menuPos,children:[Object(Q.jsx)("h3",{children:"List actions"}),Object(Q.jsx)("button",{onClick:function(){e.removeGroup(e.boardId,e.groupId),e.toggleMenuShown(!1)},children:"Delete list"})]})}var Ra=a(245),Ga=a.n(Ra),Xa={removeGroup:function(e,t){return console.log(t,e),function(){var a=Object(v.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Oe.removeGroup(e,t);case 3:r=a.sent,n({type:"SAVE_BOARD",board:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("cant remove group",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},toggleDragDisable:Ze};var _a=Object(i.b)((function(e){return{isDragDisabled:e.appModule.isDragDisabled}}),Xa)((function(e){var t=e.group,a=e.isAddNew,r=e.boardId,s=e.boardLabels,c=e.index,o=e.isDragDisabled,i=e.toggleDragDisable,l=Object(n.useRef)(),d=Object(n.useState)(!1),u=Object(ie.a)(d,2),p=u[0],j=u[1],h=Object(n.useState)({}),v=Object(ie.a)(h,2),f=v[0],m=v[1],O=function(e){var t=window.innerWidth-e.pageX>200?e.pageX:e.pageX-200;m({position:"fixed",top:"".concat(e.pageY,"px"),left:"".concat(t,"px")}),j(!p),i()},g=function(){l.current.scrollTo({top:l.current.scrollHeight,behavior:"smooth"})};return a?Object(Q.jsx)(yt,{}):Object(Q.jsx)("div",{children:Object(Q.jsx)(ia.b,{draggableId:t.id,index:c,isDragDisabled:o,children:function(a,n){return Object(Q.jsx)(Ga.a,{style:a.draggableProps.style,snapshot:n,children:function(n){return Object(Q.jsxs)("article",Object(b.a)(Object(b.a)(Object(b.a)({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{style:Object(b.a)({},n),className:"group-details flex column",children:[Object(Q.jsxs)("div",{className:"group-header flex space-between align-center",children:[Object(Q.jsx)(La,{group:t}),Object(Q.jsx)(jt.a,{fontSize:"small",onClick:O,className:"dots"}),p&&Object(Q.jsx)(Fa,{menuPos:f,removeGroup:e.removeGroup,toggleMenuShown:j,boardId:r,groupId:t.id}),Object(Q.jsx)("div",{className:"overlay ".concat(p?"show":""),onClick:O})]}),Object(Q.jsx)("div",{className:"group-main flex column ",ref:l,children:Object(Q.jsx)(pa,{tasks:t.tasks,boardId:r,groupId:t.id,boardLabels:s,toggleDragDisable:i})}),Object(Q.jsx)("div",{className:"group-footer",children:Object(Q.jsx)(Pa,{ids:{groupId:t.id,boardId:r},scrollToBottom:g,toggleDragDisable:i})})]}))}})}})})}));function Ya(e){var t=e.groups,a=e.boardId,n=e.boardLabels;return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(ia.c,{droppableId:"all-groups",type:"group",direction:"horizontal",children:function(e){return Object(Q.jsxs)("div",Object(b.a)(Object(b.a)({className:"group-list"},e.droppableProps),{},{ref:e.innerRef,children:[t.map((function(e,t){return Object(Q.jsx)("div",{children:Object(Q.jsx)(_a,{group:e,boardId:a,index:t,id:e.id,boardLabels:n})},e.id)})),e.placeholder,Object(Q.jsx)(_a,{isAddNew:!0})]}))}})})}var Ha=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isMenuOpen:!1,currentTarget:null},e.componentDidMount=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.setFilterBy({labels:[],members:[],search:""}),a=e.props.match.params.boardId,e.props.user||e.props.onLogin({username:"guest",password:"1"}),e._loadBoard(),e.props.boards.length||e.props.loadBoards(),e.props.loadUsers(),re.emit("join-board",a),re.on("updated-board",(function(){e.props.loadBoard(a)}));case 8:case"end":return t.stop()}}),t)}))),e.componentWillUnmount=function(){e.props.clearBoard(),re.off("updated-board"),e.props.setFilterBy({labels:[],members:[],search:""})},e.componentDidUpdate=function(){var t,a;(null===(t=e.props.match.params)||void 0===t?void 0:t.boardId)!==(null===(a=e.props.board)||void 0===a?void 0:a._id)&&(e.props.clearBoard(),e._loadBoard(),e.props.loadUsers())},e.toggleMenu=function(t){e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{isMenuOpen:!e.state.isMenuOpen})})),e.setCurrentTarget(t)},e.setCurrentTarget=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currentTarget:t})}))},e._loadBoard=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.props.match.params.boardId)||e.props.history.push("/workspace"),!a){t.next=12;break}return t.prev=3,t.next=6,e.props.loadBoard(a);case 6:e.props.board||e.props.history.push("/workspace"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log("cant load board",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.onDragEnd=function(t){var a=t.destination,n=t.source,r=t.draggableId,s=t.type;a&&e.props.handleDrag(Object(b.a)({},e.props.board),n.droppableId,a.droppableId,n.index,a.index,r,s)},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.board;return e?Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(ia.a,{onDragEnd:this.onDragEnd,children:Object(Q.jsxs)("section",{className:"board-app flex column",style:{background:e.style.bgImg?"url(".concat(e.style.bgImg,")"):e.style.bgClr},children:[Object(Q.jsx)(xt,{board:Object(b.a)({},e),toggleMenu:this.toggleMenu}),Object(Q.jsx)(Ya,{groups:Object(u.a)(e.groups),boardId:e._id,boardLabels:Object(u.a)(e.labels)})]})})}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(n.Component);var Wa={loadBoard:Ee,loadBoards:Me,clearBoard:function(){return function(e){e({type:"SET_BOARD",board:null})}},loadUsers:function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.getUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}}),e,null,[[0,7,10,12]])})));return function(t){return e.apply(this,arguments)}}()},handleDrag:function(e,t,a,n,r,s,c){return function(){var s=Object(v.a)(h.a.mark((function s(o){var i,l,d,b,p,j,v,f,m,O;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=JSON.parse(JSON.stringify(e)),"group"===c?(d=i.groups.splice(n,1),(l=i.groups).splice.apply(l,[r,0].concat(Object(u.a)(d)))):(t===a&&(p=i.groups.find((function(e){return e.id===t})),j=p.tasks.splice(n,1),(b=p.tasks).splice.apply(b,[r,0].concat(Object(u.a)(j)))),t!==a&&(f=i.groups.find((function(e){return e.id===t})),m=f.tasks.splice(n,1),O=i.groups.find((function(e){return e.id===a})),(v=O.tasks).splice.apply(v,[r,0].concat(Object(u.a)(m))))),Oe.save(i),o({type:"SAVE_BOARD",board:i}),s.abrupt("return");case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},onLogin:Qe,setFilterBy:Re},Va=Object(i.b)((function(e){return{board:e.boardModule.board,boards:e.boardModule.boards,user:e.userModule.loggedinUser}}),Wa)(Ha),za=a(81),Qa=a.n(za);function qa(e){var t=e.taskTitle,a=e.setTaksDetailsTitle,r=e.taskList,s=Object(n.useState)(t),c=Object(ie.a)(s,2),o=c[0],i=c[1];return Object(Q.jsx)("header",{className:"task-header",children:Object(Q.jsxs)("div",{className:"header-content",children:[Object(Q.jsxs)("div",{className:"header-name flex",children:[Object(Q.jsx)(Qa.a,{className:"LabelSvg"}),Object(Q.jsx)("textarea",{style:{width:"100%"},onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(e){i(e.target.value)},onBlur:function(e){i(e.target.value),e.preventDefault(),a(o)},value:o})]}),Object(Q.jsxs)("p",{className:"list-name",children:["in list ",Object(Q.jsx)("span",{style:{textDecoration:"underline",fontWeight:600},children:r})]})]})})}var Ja={setPosition:$e,togglePopover:et},Ka=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Ja)((function(e){var t=e.setPosition,a=e.currTaskDetails,n=e.togglePopover,r=a.style,s=r.bgColor,c=r.bgUrl;return Object(Q.jsxs)("div",{className:"card-cover flex",style:{backgroundColor:s||""},children:[c&&Object(Q.jsx)("img",{src:c,style:{backgroundColor:s||""}}),Object(Q.jsxs)("button",{className:"cover-btn flex",onClick:function(e){t({pos:{pageX:e.pageX,pageY:e.pageY},type:"COVER"}),n()},children:[Object(Q.jsx)(Qa.a,{})," Cover"]})]})})),Za=a(246),$a=a.n(Za),en=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={description:"",isEditMode:!1},e.onSaveDescription=function(){var t=e.state.description,a=e.props,n=a.currTask,r=a.updateTaskDetails;n.description=t,r(n),e.setState({isEditMode:!1})},e.handleChange=function(t){var a=t.target.value;e.setState({description:a})},e.onToggleEdit=function(){e.setState({isEditMode:!e.state.isEditMode})},e.onEditMode=function(){e.selectedInput.focus(),e.setState({isEditMode:!0})},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.currTask.description?this.props.currTask.description:"";this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{description:e})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditMode,n=t.description;return Object(Q.jsxs)("div",{className:"task-description flex column",children:[Object(Q.jsxs)("div",{className:"window-modal-title flex align-center",children:[Object(Q.jsx)($a.a,{}),Object(Q.jsx)("h3",{children:"Description"}),Object(Q.jsx)("button",{className:"task-btns edit-task-description-btn ".concat(a?"none-opacity":"full-opacity"),onClick:function(){return e.onEditMode()},children:"Edit"})]}),Object(Q.jsxs)("div",{className:"card-description-edit flex column",children:[Object(Q.jsx)("textarea",{onClick:this.onEditMode,ref:function(t){e.selectedInput=t},onBlur:this.onSaveDescription,value:n,placeholder:"Add a more detailed description...",onChange:this.handleChange}),Object(Q.jsxs)("div",{className:"description-btns flex align-center ".concat(a?"show":"hidden"),children:[Object(Q.jsx)("button",{className:"task-btns save-task-description-btn",onClick:function(){return e.onSaveDescription()},children:"Save"}),Object(Q.jsx)("button",{className:"task-btns close-task-description-btn",onClick:function(){return e.onToggleEdit()},children:Object(Q.jsx)(Ot.a,{})})]})]})]})}}]),a}(n.Component),tn=a(18),an=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,top:0,left:0},e.contentEl=null,e.toggleVisibility=function(){return e.setState((function(e){return{visible:!e.visible}}))},e.onSetPopoverPos=function(){if(e.contentEl){var t=e.contentEl.getBoundingClientRect(),a=e.setPopoverPos(t),n=a.left,r=a.top;e.setState({top:r,left:n})}},e.getContentStyles=function(){var t,a=e.state,n=a.top,r=a.left,s=e.props,c=(s.title,s.popover);return t={position:"fixed",opacity:1,top:"".concat(n,"px"),left:"".concat(r,"px"),transition:"opacity 0.3s, visibility 0.3s",backgroundColor:"".concat(c.isMenu?"#f4f5f7":"#fff"),border:"1px solid lightgray",padding:"15px",zIndex:100},Object(tn.a)(t,"padding","0 12px 12px"),Object(tn.a)(t,"borderRadius","3px"),Object(tn.a)(t,"marginRight","4px"),Object(tn.a)(t,"maxWidth","100%"),Object(tn.a)(t,"boxShadow","0 8px 16px -4px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08)"),t},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.onSetPopoverPos()}},{key:"componentDidUpdate",value:function(e){e.popover!==this.props.popover&&this.onSetPopoverPos()}},{key:"setPopoverPos",value:function(e){var t=this.props.popover.pos,a=e.width,n=e.height,r=(window.innerWidth,t.pageX,t.pageX-200),s=window.innerHeight-t.pageY>200?t.pageY+20:t.pageY-200;return(r=r+a>window.innerWidth?window.innerWidth-a-10:r)<0&&(r=10),{left:r,top:s=s+n>window.innerHeight?window.innerHeight-n-20:s}}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.children,r=t.popover;return Object(Q.jsx)(Q.Fragment,{children:r.isOpen&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("div",{className:"popover ".concat(r.isMenu?"slide-in-right":""),ref:function(t){return e.contentEl=t},style:this.getContentStyles(),children:[Object(Q.jsxs)("div",{className:"popover-header",children:[Object(Q.jsx)("span",{children:a}),Object(Q.jsx)("button",{className:"clean-btn",onClick:this.props.togglePopover,children:Object(Q.jsx)(ue.a,{})})]}),Object(Q.jsx)("div",{className:"popover-content",children:n})]}),Object(Q.jsx)("div",{className:"popover-overlay",style:{position:"fixed",inset:0,height:"100vh",zIndex:90},onClick:this.props.togglePopover})]})})}}]),a}(r.a.Component);var nn={togglePopover:et,setPosition:$e,setPopover:tt},rn=Object(i.b)((function(e){return{popover:e.appModule.popover}}),nn)(an),sn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={typeTitle:""},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{typeTitle:e.props.typeTitle})}))}},{key:"componentWillUnmount",value:function(){this.props.togglePopover()}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.remove,n=this.state.typeTitle;n.length>15&&(n=n.substr(1,15)+"...");var r="Delete ".concat(n,"?");return Object(Q.jsx)("div",{className:"no-back-container",children:Object(Q.jsx)(rn,{title:r,children:Object(Q.jsxs)("div",{className:"no-back",children:[Object(Q.jsxs)("p",{children:["Deleting a ",t," is permanent and there",Object(Q.jsx)("br",{}),"is no way to get it back."]}),Object(Q.jsxs)("button",{className:"delete-checklist-btn danger-btn",onClick:function(){a()},children:["Delete ",t]})]})})})}}]),a}(n.Component);var cn=Object(i.b)((function(e){return{}}),null)(sn),on=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={url:"",urlName:""},e.componentDidMount=function(){var t=e.props.attachment;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{url:t.url,urlName:t.name})}))},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(tn.a)({},r,n))}))},e.onAttachmentUpdate=function(){var t=e.state,a=t.url,n=t.urlName;e.props.updateAttachment(a,n)},e}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){this.props.togglePopover()}},{key:"render",value:function(){var e=this.props.attachment,t=this.state,a=t.url,n=t.urlName,r=e.name;r.length>15&&(r=r.substr(1,15)+"...");var s="Update ".concat(r);return Object(Q.jsx)("div",{className:"edit-attach-container",children:Object(Q.jsx)(rn,{title:s,children:Object(Q.jsxs)("div",{className:"attachment-container",children:[e.isWeb&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("label",{htmlFor:"url-upload",children:"Link"}),Object(Q.jsx)("input",{type:"text",id:"url-upload",placeholder:"Enter link url",value:a,name:"url",onChange:this.handleChange})]}),Object(Q.jsx)("label",{htmlFor:"url-name-optional",children:"Link name (optional)"}),Object(Q.jsx)("input",{type:"text",id:"url-name-optional",name:"urlName",value:n,placeholder:"Enter link name",onChange:this.handleChange}),Object(Q.jsx)("button",{class:"primary-btn",onClick:this.onAttachmentUpdate,children:"Update"})]})})})}}]),a}(n.Component),ln=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isPopover:!1,isEditPopover:!1,bgUrl:null},e.toggleBgUrl=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{bgUrl:!e.bgUrl})}))},e.togglePopover=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isEditPopover:!1,isPopover:!e.isPopover})}))},e.toggleEditPopover=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isPopover:!1,isEditPopover:!e.isEditPopover})}))},e.removeAttach=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.currTaskDetails,s=a.saveTaskDetails,c=a.addActivity,o=a.attachment,i=e.state.currGroup,l=r.attachments.filter((function(e){return e.id!==o.id})),r.attachments=l,t.next=6,s(n,i,r);case 6:e.togglePopover(),c(n,r,"remove-attachment",o.name);case 8:case"end":return t.stop()}}),t)}))),e.setCover=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.saveTaskDetails,s=a.currTaskDetails,c=a.attachment,o=e.state.currGroup,s.style.bgUrl=c.url,e.toggleBgUrl(),t.next=6,r(n,o,s);case 6:case"end":return t.stop()}}),t)}))),e.removeCover=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.saveTaskDetails,s=a.currTaskDetails,c=e.state.currGroup,s.style.coverMode=null,s.style.bgColor=null,s.style.bgUrl=null,e.toggleBgUrl(),t.next=8,r(n,c,s);case 8:case"end":return t.stop()}}),t)}))),e.updateAttachment=function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,s=r.board,c=r.saveTaskDetails,o=r.currTaskDetails,i=r.attachment,l=e.state.currGroup,i.url=a,i.name=n,t.next=6,c(s,l,o);case 6:e.toggleEditPopover();case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))})),r=a.style&&a.style.bgUrl;this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{bgUrl:r,currGroup:n})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.currTaskDetails,n=a.style&&a.style.bgUrl;n!==t.bgUrl&&this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{bgUrl:n})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.attachment,n=t.popover,r=this.state,s=r.isPopover,c=r.isEditPopover,i=r.bgUrl,l=a.isWeb;return Object(Q.jsxs)("div",{className:"attachment-preview flex",children:[l?Object(Q.jsx)(o.b,{className:"attachment-thumbnail flex",to:{pathname:"".concat(a.url)},target:"_blank",title:"".concat(a.name),children:Object(Q.jsx)(Gt.a,{})}):Object(Q.jsx)("img",{src:a.url,alt:a.name}),Object(Q.jsx)("div",{className:"attachment-content",children:Object(Q.jsxs)("div",{className:"attachment-details",children:[Object(Q.jsx)("span",{className:"attachment-title",children:a.name.length>15?a.name.substr(1,15)+"...":a.name}),Object(Q.jsxs)("div",{className:"attachment-actions",children:[Object(Q.jsxs)("span",{className:"attachment-date",children:["Added ",fe.timeSince(a.createdAt)]}),Object(Q.jsx)("button",{className:"activity-toggle-btn",onClick:function(t){e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:""}),e.props.setPopover(!0),e.togglePopover()},children:"Delete"}),Object(Q.jsx)("button",{className:"activity-toggle-btn",onClick:function(t){e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:""}),e.props.setPopover(!0),e.toggleEditPopover()},children:"Edit"})]}),!l&&!i&&Object(Q.jsxs)("span",{children:[Object(Q.jsx)(Qa.a,{className:"make-cover-icon"}),Object(Q.jsx)("span",{onClick:this.setCover,children:"Make cover"})]}),!l&&i&&Object(Q.jsxs)("span",{children:[Object(Q.jsx)(Qa.a,{className:"make-cover-icon"}),Object(Q.jsx)("span",{onClick:this.removeCover,children:"Remove cover"})]})]})}),n.isOpen&&s&&Object(Q.jsx)(cn,{remove:this.removeAttach,type:"attachment",typeTitle:a.name,togglePopover:this.togglePopover}),n.isOpen&&c&&Object(Q.jsx)(on,{togglePopover:this.toggleEditPopover,updateAttachment:this.updateAttachment,attachment:a})]})}}]),a}(n.Component);var dn={saveTaskDetails:Le,saveBoard:Ie,setPosition:$e,setPopover:tt,addActivity:Ue},un=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board,popover:e.appModule.popover}}),dn)(ln);var bn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),{})((function(e){var t=e.currTaskDetails;return t.attachments&&t.attachments.length?Object(Q.jsxs)("div",{className:"task-attach",children:[Object(Q.jsxs)("div",{className:"window-modal-title flex align-center",children:[Object(Q.jsx)(Gt.a,{}),Object(Q.jsx)("h3",{children:"Attachment"})]}),Object(Q.jsx)("div",{className:"attachments",children:t.attachments.map((function(e){return Object(Q.jsx)(un,{attachment:e},e.id)}))})]}):Object(Q.jsx)(r.a.Fragment,{})})),pn=a(140),jn=a.n(pn),hn=a(139),vn=a.n(hn),fn=a(247),mn=a.n(fn),On=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={todo:null,todoTitle:"",isEditMode:!1},e.selectedInput=null,e.handleChange=function(t){var a=t.target.value;e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{todo:Object(b.a)(Object(b.a)({},e.state.todo),{},{title:a})})}))},e.onEditMode=function(){e.selectedInput&&e.selectedInput.focus(),e.setState({isEditMode:!0})},e.onToggleEditMode=function(){e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{isEditMode:!e.state.isEditMode})}))},e.onSaveTodo=function(){var t=e.state.todo;e.props.onSaveTodo(t),e.onToggleEditMode()},e.onToggleTodoIsDone=function(){var t=e.state.todo,a=e.props,n=a.addActivity,r=a.board,s=a.currTaskDetails;t.isDone=!t.isDone,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:t})})),e.props.onSaveTodo(t),t.isDone?n(r,s,"complete-todo",t.title):n(r,s,"incomplete-todo",t.title)},e.onRemoveTodo=function(){var t=e.state.todo;e.props.onRemoveTodo(t)},e.onUndoChange=function(){var t=e.props.todo,a=e.state.todoTitle;t.title=a,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:t})})),e.onToggleEditMode()},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.todo;this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{todo:e,todoTitle:e.title})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.todo,n=t.isEditMode;if(!a)return Object(Q.jsx)("div",{children:"Loading..."});var r=a.title;return Object(Q.jsxs)("div",{className:"todo-preview-container flex column",children:[Object(Q.jsxs)("div",{className:"todo-preview flex align-center",children:[a.isDone&&Object(Q.jsx)(vn.a,{onClick:this.onToggleTodoIsDone,className:"todo-check"}),!a.isDone&&Object(Q.jsx)(jn.a,{onClick:this.onToggleTodoIsDone}),n&&Object(Q.jsx)("textarea",{onClick:this.onEditMode,className:"default-textarea",ref:function(t){e.selectedInput=t},value:r,onChange:this.handleChange}),!n&&Object(Q.jsxs)("div",{className:"checklist-txt-and-btn",children:[Object(Q.jsx)("span",{className:"".concat(a.isDone?"done":""),onClick:this.onEditMode,children:r}),Object(Q.jsx)(mn.a,{className:"todo-remove-icon",onClick:this.onRemoveTodo})]})]}),Object(Q.jsxs)("div",{className:"checklist-btns flex align-center ".concat(n?"show":"hidden"),children:[Object(Q.jsx)("button",{onClick:this.onSaveTodo,className:"nch-btn primary-btn",children:"Save"}),Object(Q.jsx)(Ot.a,{onClick:this.onUndoChange,className:"close-btn"})]})]})}}]),a}(n.Component);var gn={addActivity:Ue},xn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),gn)(On);function kn(e){var t=e.todos,a=e.onSaveTodo,n=e.onRemoveTodo;return Object(Q.jsx)("div",{className:"todo-list",children:t.map((function(e){return Object(Q.jsx)(xn,{todo:e,onSaveTodo:a,onRemoveTodo:n},e.id)}))})}var yn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isEditMode:!1,todo:{title:""}},e.selectedInput=null,e.handleChange=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:{title:a}})}))},e.onToggleEditMode=function(){var t=e.state.isEditMode;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isEditMode:!t})}))},e.onTodoAdd=function(){var t=e.state.todo;t.title&&(t.id=fe.makeId(),t.isDone=!1,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:t})})),e.props.addTodo(t),e.clearState())},e.clearState=function(){e.selectedInput.focus(),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:{title:""}})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.isEditMode,n=t.todo;return Object(Q.jsxs)("div",{className:"todo-add-container",children:[Object(Q.jsx)("button",{className:"task-btns nch-btn todo-add-btn ".concat(a?"hidden":"show"),onClick:function(){return e.onToggleEditMode()},children:"Add an item"}),a&&Object(Q.jsxs)("div",{className:"todo-edit flex column",children:[Object(Q.jsx)("textarea",{onClick:this.onEditMode,ref:function(t){e.selectedInput=t},autoFocus:!0,value:n.title,placeholder:"Add an item",onChange:this.handleChange}),Object(Q.jsxs)("div",{className:"todo-btns flex align-center ".concat(a?"show":"hidden"),children:[Object(Q.jsx)("button",{className:"task-btns todo-save-btn",onClick:function(){return e.onTodoAdd()},children:"Add"}),Object(Q.jsx)("button",{className:"task-btns todo-close-btn",onClick:function(){return e.onToggleEditMode()},children:Object(Q.jsx)(Ot.a,{})})]})]})]})}}]),a}(n.Component),wn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={completed:0,style:{width:"",backgroundColor:""}},e.componentDidMount=function(){var t=e.props.doneTodosCalc(),a=100===t?"#61bd4f":"#5ba4cf";e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{completed:t,style:{width:"".concat(t,"%"),backgroundColor:a}})}))},e}return Object(R.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.state.completed!==this.props.doneTodosCalc()){var t=this.props.doneTodosCalc(),a=100===t?"#61bd4f":"#5ba4cf";this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{completed:t,style:{width:"".concat(t,"%"),backgroundColor:a}})}))}}},{key:"render",value:function(){var e=this.state,t=e.style,a=e.completed;return Object(Q.jsxs)("div",{className:"checklist-progress",children:[Object(Q.jsxs)("span",{className:"checklist-progress-percentage js-checklist-progress-percent",children:[parseInt(a),"%"]}),Object(Q.jsx)("div",{className:"checklist-progress-bar",children:Object(Q.jsx)("div",{className:"checklist-progress-bar-current js-checklist-progress-bar",style:t})})]})}}]),a}(n.Component),Nn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isPopover:!1},e.togglePopover=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isPopover:!e.isPopover})}))},e.onSaveTodo=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.checklist,o=n.saveTaskDetails,i=e.state.currGroup,l=s.checklists.indexOf(c),d=s.checklists[l].todos.findIndex((function(e){return e.id===a.id})),s.checklists[l].todos[d]=a,t.next=7,o(r,i,s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTodo=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveTaskDetails,o=n.checklist,i=e.state.currGroup,l=s.checklists.indexOf(o),d=s.checklists[l].todos.findIndex((function(e){return e.id===a.id})),s.checklists[l].todos.splice(d,1),t.next=7,c(r,i,s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addTodo=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveTaskDetails,o=n.checklist,i=e.state.currGroup,l=s.checklists.indexOf(o),s.checklists[l].todos.push(a),t.next=6,c(r,i,s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doneTodosCalc=function(){var t=e.props.checklist,a=t.todos;if(!a.length)return 0;var n=0;return a.forEach((function(e){e.isDone&&n++})),n/t.todos.length*100},e.removeChecklist=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.saveTaskDetails,s=a.currTaskDetails,c=a.checklist,o=a.addActivity,i=e.state.currGroup,l=s.checklists.indexOf(c),s.checklists.splice(l,1),t.next=6,r(n,i,s);case 6:e.togglePopover(),o(n,s,"remove-checklist");case 8:case"end":return t.stop()}}),t)}))),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.checklist,n=t.popover,r=this.state.isPopover;return a?Object(Q.jsxs)("div",{className:"task-activities flex column",children:[Object(Q.jsxs)("div",{className:"window-modal-title flex space-between",children:[Object(Q.jsxs)("div",{className:"task-activities-header flex align-center",children:[Object(Q.jsx)(Et.a,{}),Object(Q.jsx)("h3",{children:a.title})]}),Object(Q.jsx)("button",{className:"activity-toggle-btn",onClick:function(t){e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:""}),e.props.setPopover(!0),e.togglePopover()},children:"Delete"})]}),Object(Q.jsx)(wn,{doneTodosCalc:this.doneTodosCalc}),Object(Q.jsx)(kn,{todos:a.todos,onSaveTodo:this.onSaveTodo,onRemoveTodo:this.onRemoveTodo}),n.isOpen&&r&&Object(Q.jsx)(cn,{remove:this.removeChecklist,type:"checklist",typeTitle:a.title,togglePopover:this.togglePopover}),Object(Q.jsx)(yn,{addTodo:this.addTodo})]}):Object(Q.jsx)("div",{})}}]),a}(n.Component);var Cn={saveTaskDetails:Le,saveBoard:Ie,togglePopover:et,setPosition:$e,setPopover:tt,addActivity:Ue},Dn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board,popover:e.appModule.popover}}),Cn)(Nn),An=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.currTaskDetails;return e.checklists?Object(Q.jsx)("div",{className:"task-checklists",children:e.checklists.map((function(e){return Object(Q.jsx)(Dn,{checklist:e},e.id)}))}):Object(Q.jsx)(r.a.Fragment,{})}}]),a}(n.Component);var Tn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}))(An),Sn=a(141),Mn=a.n(Sn),En=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1},e.handleChange=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:a})}))},e.onEditMode=function(){e.selectedInput&&e.selectedInput.focus(),e.setState({isEditMode:!0})},e.onAddComment=function(){var t=e.state.txt,a=e.props.loggedinUser;e.props.addComment(t,a),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:"",isEditMode:!1})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.loggedinUser,n=this.state,r=n.isEditMode,s=n.txt;return Object(Q.jsxs)("div",{className:"add-comment flex",children:[Object(Q.jsx)("article",{className:"member-wrapper",children:(null===a||void 0===a?void 0:a.imgUrl)?Object(Q.jsx)("img",{src:a.imgUrl,className:"member-img",alt:a.fullname[0].toUpperCase()}):Object(Q.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(Q.jsx)("p",{className:"member-letter preview",children:(null===a||void 0===a||null===(e=a.fullname)||void 0===e?void 0:e[0])||""})})}),Object(Q.jsxs)("div",{className:"comment-frame",children:[Object(Q.jsx)("textarea",{onClick:this.onEditMode,className:"default-textarea",ref:function(e){t.selectedInput=e},value:s,onChange:this.handleChange,placeholder:"Write a comment"}),r&&Object(Q.jsx)("button",{className:"primary-btn",onClick:this.onAddComment,children:"Save"})]})]})}}]),a}(n.Component),In=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(R.a)(a,[{key:"activityToShow",get:function(){var e=this.props,t=e.activity,a=e.currTask;switch(a||(a=t.task),t.txt&&t.txt.length>20&&(t.txt=t.txt.substr(1,12)+"..."),t.type){case"due-date-complete":return"marked the due date complete";case"due-date-incomplete":return"marked the due date incomplete";case"set-date":return"set the due date to of ".concat(a.title," to ").concat(t.txt);case"remove-date":return"removed the due date from ".concat(a.title);case"add-checklist":return"added Checklist to ".concat(a.title);case"remove-checklist":return"removed Checklist from ".concat(a.title);case"add-member":return"added ".concat(t.txt," to ").concat(a.title);case"remove-member":return"removed ".concat(t.txt," from ").concat(a.title);case"add-self":return"joined task ".concat(a.title);case"remove-self":return"left task ".concat(a.title);case"add-to-archive":return"archived ".concat(a.title);case"remove-from-archive":return"returned ".concat(a.title," to board ");case"remove-task":return"deleted ".concat(a.title," from board");case"complete-todo":return"completed ".concat(t.txt," on ").concat(a.title);case"incomplete-todo":return"marked ".concat(t.txt," incomplete on ").concat(a.title);case"remove-attachment":return"deleted the ".concat(t.txt," attachment from ").concat(a.title);case"change-title":return"changed task title to ".concat(t.txt," ");default:return""}}},{key:"render",value:function(){var e,t=this.props,a=t.activity,n=t.isShowActivities,r=t.selectNotification,s=a.byMember;return n||"comment"===a.type?Object(Q.jsxs)("div",{className:"activity-preview-container flex ".concat(a.isNotRead?"unread":""," ").concat(a.isNotify?"notify":""),onClick:a.isNotify?function(){r(a)}:void 0,children:[Object(Q.jsx)("article",{className:"member-wrapper",children:(null===s||void 0===s?void 0:s.imgUrl)?Object(Q.jsx)("img",{src:s.imgUrl,className:"member-img",alt:s.fullname[0].toUpperCase()}):Object(Q.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(Q.jsx)("p",{className:"member-letter preview",children:(null===s||void 0===s||null===(e=s.fullname)||void 0===e?void 0:e[0])||""})})}),"comment"===a.type&&Object(Q.jsxs)("div",{className:"comment-preview",children:[Object(Q.jsxs)("div",{className:"comment-by-user",children:[Object(Q.jsx)("span",{className:"member-name",children:s.fullname}),Object(Q.jsx)("span",{className:"comment-created-at",children:fe.timeSince(a.createdAt)})]}),Object(Q.jsx)("div",{className:"comment-content",children:Object(Q.jsx)("p",{className:"comment-txt",children:a.txt})})]}),"comment"!==a.type&&Object(Q.jsxs)("div",{className:"activity-preview",children:[Object(Q.jsxs)("div",{className:"activity-by-user",children:[Object(Q.jsx)("span",{className:"member-name",children:s.fullname}),Object(Q.jsx)("span",{className:"activity-content",children:this.activityToShow})]}),Object(Q.jsx)("div",{className:"activity-created-at-container",children:Object(Q.jsx)("span",{className:"activity-created-at",children:fe.timeSince(a.createdAt)})})]})]}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(n.Component);function Bn(e){var t=e.CommAndAct,a=e.isShowActivities,n=e.currTask,r=e.selectNotification;return Object(Q.jsx)("div",{className:"activities-list",children:t.map((function(e){return Object(Q.jsx)(In,{activity:e,isShowActivities:a,currTask:n,selectNotification:r},e.id)}))})}var Pn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isShowActivities:!1},e.onToggleComments=function(){e.setState({isShowActivities:!e.state.isShowActivities})},e.getTaskCommentsAndActivitiesSorted=function(){var t=e.props,a=t.currTask,n=t.activities,r=[];return a.comments&&a.comments.length&&r.push.apply(r,Object(u.a)(a.comments)),n&&n.length&&n.forEach((function(e){e.task.id===a.id&&r.push(e)})),r.length?(r.sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0})),r):null},e.addComment=function(t,a){var n=e.props.currTask;n.comments||(n.comments=[]);var r={id:fe.makeId(),txt:t,createdAt:Date.now(),type:"comment",byMember:a};n.comments.push(r),e.props.updateTaskDetails(n)},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.state.isShowActivities,t=this.props,a=t.currTask,n=t.loggedinUser,r=this.getTaskCommentsAndActivitiesSorted();return Object(Q.jsxs)("div",{className:"task-activities flex column",children:[Object(Q.jsxs)("div",{className:"window-modal-title flex space-between",children:[Object(Q.jsxs)("div",{className:"task-activities-header flex align-center",children:[Object(Q.jsx)(Mn.a,{}),Object(Q.jsx)("h3",{children:"Activity"})]}),Object(Q.jsx)("button",{className:"activity-toggle-btn",onClick:this.onToggleComments,children:e?"Hide details":"Show details"})]}),Object(Q.jsx)(En,{currTask:a,loggedinUser:n,addComment:this.addComment}),r&&r.length&&Object(Q.jsx)(Bn,{CommAndAct:r,isShowActivities:e,currTask:a})]})}}]),a}(n.Component),Un=a(249),Ln=a.n(Un),Fn=a(248),Rn=a.n(Fn),Gn=a(250),Xn=a.n(Gn),_n=a(251),Yn=a.n(_n),Hn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.joinTask,n=t.toggleIsArchive,r=t.deleteTask,s=t.isArchive,c=t.currTaskDetails,o=t.loggedinUser,i=t.setPosition,l=t.togglePopover,d=c&&o?!!(null===(e=c.members)||void 0===e?void 0:e.find((function(e){return e._id===o._id}))):null;return Object(Q.jsx)("aside",{className:"task-details-sidebar flex column full",children:Object(Q.jsxs)("div",{className:"actions-wrapper flex",children:[!d&&Object(Q.jsxs)("div",{className:"suggested flex column",children:[Object(Q.jsx)("h4",{children:"SUGGESTED"}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:a,children:Object(Q.jsxs)("div",{className:"action-btn-content flex",children:[Object(Q.jsx)(Qt.a,{}),Object(Q.jsx)("span",{children:"Join"})]})})]}),Object(Q.jsxs)("div",{className:"add-to-card flex column",children:[Object(Q.jsx)("h4",{children:"ADD TO CARD"}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"MEMBERS"}),l()},children:Object(Q.jsxs)("div",{className:" action-btn-content flex",children:[Object(Q.jsx)(Rn.a,{}),Object(Q.jsx)("span",{children:"Members"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"LABELS"}),l()},children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[Object(Q.jsx)(Vt.a,{}),Object(Q.jsx)("span",{children:"Labels"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"CHECKLIST"}),l()},children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[Object(Q.jsx)(Ln.a,{}),Object(Q.jsx)("span",{children:"Checklist"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"DATE"}),l()},children:Object(Q.jsxs)("div",{className:" action-btn-content flex ",children:[Object(Q.jsx)(aa.a,{}),Object(Q.jsx)("span",{children:"Date"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"ATTACHMENT"}),l()},children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[Object(Q.jsx)(Gt.a,{}),Object(Q.jsx)("span",{children:"Attachment"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"COVER"}),l()},children:Object(Q.jsxs)("div",{className:" action-btn-content flex ",children:[Object(Q.jsx)(Jt.a,{}),Object(Q.jsx)("span",{children:"Cover"})]})})]}),Object(Q.jsxs)("div",{className:"actions flex column",children:[Object(Q.jsx)("h4",{children:"ACTIONS"}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"MOVE"}),l()},children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[Object(Q.jsx)(ea.a,{}),Object(Q.jsx)("span",{children:"Move"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"COPY"}),l()},children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[Object(Q.jsx)(Zt.a,{}),Object(Q.jsx)("span",{children:"Copy"})]})}),Object(Q.jsx)("button",{className:"secondary-btn action-btn",onClick:n,children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[s?Object(Q.jsx)(Xn.a,{}):Object(Q.jsx)(_t.a,{}),Object(Q.jsx)("span",{children:s?"Return to board":"Archive"})]})}),s&&Object(Q.jsx)("button",{className:"secondary-btn action-btn danger-btn",style:{color:"#fff"},onClick:r,children:Object(Q.jsxs)("div",{className:"action-btn-content flex ",children:[Object(Q.jsx)(Yn.a,{style:{color:"#fff"}}),Object(Q.jsx)("span",{children:"Delete"})]})})]})]})})}}]),a}(n.Component);var Wn={setPosition:$e,togglePopover:et,setPopoverMenu:at},Vn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,loggedinUser:e.userModule.loggedinUser,board:e.boardModule.board}}),Wn)(Hn);var zn={setPosition:$e,togglePopover:et},Qn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),zn)((function(e){var t=e.currTaskDetails,a=e.board,n=e.setPosition,r=e.togglePopover,s=a.labels.filter((function(e){return t.labelIds.includes(e.id)}));return 0===s.length?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)("div",{className:"task-details-header-labels item-container flex column",children:[Object(Q.jsx)("h3",{className:"task-details-header-title",children:"Labels"}),Object(Q.jsxs)("div",{className:"labels-container flex wrap",children:[s.map((function(e){return Object(Q.jsx)("span",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"LABELS"}),r()},className:"label",style:{backgroundColor:e.color},children:e.title},e.id)})),Object(Q.jsx)("button",{className:"secondary-btn",onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"LABELS"}),r()},children:Object(Q.jsx)(He.a,{})})]})]})}));var qn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),null)((function(e){var t=e.currTaskDetails;return t.members&&0!==t.members.length?Object(Q.jsxs)("div",{className:"task-details-header-members flex column",children:[Object(Q.jsx)("h4",{className:"task-details-header-title",children:" Members"}),Object(Q.jsx)("div",{className:"container flex wrap",children:Object(Q.jsx)(ct,{members:t.members,isInDetails:!0})})]}):Object(Q.jsx)(Q.Fragment,{})})),Jn=a(252),Kn=a.n(Jn),Zn=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={formatedDate:"",dueDate:null,isTaskDone:!1},e.componentDidMount=function(){var t=e.props,a=t.board,n=t.currTaskDetails,r=a.groups.find((function(e){return e.tasks.some((function(e){return e.id===n.id}))})),s=n.dueDate,c=n.isDone,o=e.dueDateFormat(n.dueDate);e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{formatedDate:o,dueDate:s,isTaskDone:c,currGroup:r})}))},e.onToggleTaskDone=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!e.state.isTaskDone,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isTaskDone:a})})),n=e.props,r=n.board,s=n.saveTaskDetails,c=n.currTaskDetails,o=n.addActivity,i=e.state.currGroup,c.isDone=!c.isDone,t.next=7,s(r,i,c);case 7:o(r,c,a?"due-date-complete":"due-date-incomplete");case 8:case"end":return t.stop()}}),t)}))),e.dueDateFormat=function(e){var t=(new Date).getFullYear(),a=new Date(e).getFullYear(),n="";return n+="".concat(new Date(e).toLocaleString("en-GB",{day:"numeric"})," "),n+="".concat(new Date(e).toLocaleString("en-GB",{month:"short"})," at "),a!==t&&(n+="".concat(a," ")),n+="".concat(new Date(e).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0}).toLocaleUpperCase())},e.getDueStatus=function(){var t=Date.now(),a=e.props.currTaskDetails,n="";if(a.isDone)n="done";else if(t>a.dueDate)n="overdue";else{a.dueDate-t<864e5&&(n="due-soon")}return n},e}return Object(R.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.state.dueDate,a=this.props.currTaskDetails;if(t!==a.dueDate){var n=a.dueDate,r=this.dueDateFormat(a.dueDate);this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{dueDate:n,formatedDate:r})}))}}},{key:"dueMsg",get:function(){switch(this.getDueStatus()){case"done":return"COMPLETE";case"due-soon":return"DUE SOON";case"overdue":return"OVERDUE";default:return""}}},{key:"render",value:function(){var e=this.props,t=e.currTaskDetails,a=e.setPosition,n=e.togglePopover;console.log("currTaskDetails",t);var r=this.state,s=r.formatedDate,c=r.isTaskDone,o=this.getDueStatus();return t.dueDate&&0!==t.dueDate.length?Object(Q.jsxs)("div",{className:"task-details-header-date item-container flex column",children:[Object(Q.jsx)("h3",{className:"task-details-header-title",children:"DUE DATE"}),Object(Q.jsxs)("div",{className:"date-container flex wrap align-center",children:[c&&Object(Q.jsx)(vn.a,{onClick:this.onToggleTaskDone,className:"todo-check pointer"}),!c&&Object(Q.jsx)(jn.a,{onClick:this.onToggleTaskDone,className:"pointer"}),Object(Q.jsxs)("button",{className:"secondary-btn date-btn flex align-center",children:[Object(Q.jsx)("span",{className:"date-context",onClick:function(e){a({pos:{pageX:e.pageX,pageY:e.pageY},type:"DATE"}),n()},children:s}),Object(Q.jsx)("span",{className:"drop-down-icon",children:Object(Q.jsx)(Kn.a,{})}),Object(Q.jsx)("span",{className:"due-msg ".concat(o),children:this.dueMsg})]})]})]}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(n.Component);var $n={setPosition:$e,saveTaskDetails:Le,togglePopover:et,addActivity:Ue},er=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),$n)(Zn),tr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedMembers:null,selectedLabels:null,selectedDate:null},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.selectedDate;this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{selectedDate:e})}))}},{key:"render",value:function(){return Object(Q.jsxs)("div",{className:"task-details-header flex",children:[Object(Q.jsx)(qn,{}),Object(Q.jsx)(Qn,{}),Object(Q.jsx)(er,{})]})}}]),a}(n.Component);var ar=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),null)(tr),nr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currTask:null,currGroup:null},e.contentEl=null,e.componentDidMount=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.match.params,r=n.boardId,s=n.taskId,c=n.listId,o=e.props,i=o.board,l=o.setCurrTaskDetails,d=o.setPopoverMenu,i){t.next=5;break}return t.next=5,e.props.loadBoard(r);case 5:u=null===(a=e.props.board)||void 0===a?void 0:a.groups.find((function(e){return e.id===c})),p=null===u||void 0===u?void 0:u.tasks.find((function(e){return e.id===s})),l(p),d(!1),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:u,currTask:p})}));case 10:case"end":return t.stop()}}),t)}))),e.updateTaskDetails=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.currGroup,r=e.props,s=r.board,c=r.saveTaskDetails,t.next=4,c(s,n,a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleOverlay=function(){e.props.history.goBack()},e.setTaksDetailsTitle=function(t){var a=e.props.currTaskDetails;a.title=t,e.updateTaskDetails(a)},e.joinTask=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.board,r=a.currTaskDetails,s=a.loggedinUser,c=a.addActivity,o=a.setCurrTaskDetails,i=(i=r.members)||[],l=n.members.map((function(e){return e._id})),s){t.next=6;break}return t.abrupt("return");case 6:l.includes(s._id)||n.members.push(s),i.map((function(e){return e._id})).includes(s._id)||i.push(s),r.members=i,c(n,r,"add-self"),o(r),e.updateTaskDetails(r);case 13:case"end":return t.stop()}}),t)}))),e.deleteTask=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.currGroup,n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveBoard,o=n.addActivity,i=r.groups.indexOf(a),a.tasks=a.tasks.filter((function(e){return e.id!==s.id})),r.groups[i]=a,o(r,s,"remove-task"),t.next=8,c(r);case 8:e.props.history.goBack();case 9:case"end":return t.stop()}}),t)}))),e.toggleIsArchive=function(){var t=e.props,a=(t.board,t.currTaskDetails),n=t.addActivity;a.isArchive=(null===a||void 0===a?void 0:a.isArchive)||!1,a.isArchive=!a.isArchive,n(a.isArchive?"add-to-archive":"remove-from-archive"),e.updateTaskDetails(a)},e}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){this.props.setCurrTaskDetails(null),this.props.setPosition({pageX:null,pageY:null,type:null}),this.props.setPopover(!1)}},{key:"render",value:function(){var e,t=this,a=this.state.currGroup,n=this.props,r=n.board,s=n.currTaskDetails,c=n.loggedinUser;if(!s||!r||!a)return Object(Q.jsx)(Q.Fragment,{});var o=s.style;s.style=o||{bgColor:null,bgUrl:null};var i=s.style,l=i.bgColor,d=i.bgUrl,u=s.isArchive;return Object(Q.jsxs)("div",{style:{position:"fixed",inset:0,height:"100vh",overflowY:"auto",zIndex:90},children:[Object(Q.jsx)("div",{className:"overlay show",onClick:function(){return t.props.history.push("/board/".concat(r._id))}}),Object(Q.jsxs)("section",{className:"task-details flex column",children:[Object(Q.jsx)("button",{onClick:function(){return t.props.history.push("/board/".concat(r._id))},className:"close-task-details ".concat(l?"cover":""),children:Object(Q.jsx)(Ot.a,{})}),(l||d)&&Object(Q.jsx)(Ka,{}),u&&Object(Q.jsxs)("div",{className:"task-details-archived flex",children:[Object(Q.jsx)("i",{class:"fas fa-archive icon-sm"}),Object(Q.jsx)("h3",{children:"This card is archived."})]}),Object(Q.jsx)(qa,{taskTitle:s.title,setTaksDetailsTitle:this.setTaksDetailsTitle,taskList:(null===(e=r.groups.find((function(e){return e.tasks.some((function(e){return e.id===s.id}))})))||void 0===e?void 0:e.title)||""}),Object(Q.jsxs)("div",{className:"task-details-body flex",children:[Object(Q.jsxs)("div",{className:"task-details-main flex column",children:[Object(Q.jsx)(ar,{toggleTaskDone:this.toggleTaskDone}),Object(Q.jsx)(en,{currTask:s,updateTaskDetails:this.updateTaskDetails}),Object(Q.jsx)(bn,{}),Object(Q.jsx)(Tn,{}),Object(Q.jsx)(Pn,{currTask:s,loggedinUser:c,activities:r.activities,updateTaskDetails:this.updateTaskDetails})]}),Object(Q.jsx)(Vn,{joinTask:this.joinTask,deleteTask:this.deleteTask,toggleIsArchive:this.toggleIsArchive,isArchive:u})]})]})]})}}]),a}(n.Component);var rr={saveBoard:Ie,saveTaskDetails:Le,setCurrTaskDetails:Ke,setPopover:tt,setPosition:$e,setPopoverMenu:at,addActivity:Ue,loadBoard:Ee},sr=Object(i.b)((function(e){return{board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser,currTaskDetails:e.appModule.currTaskDetails}}),rr)(nr),cr=a(82),or=a.n(cr),ir=a(253);var lr={onLogin:Qe,onSignup:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error when signing up",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},dr=Object(i.b)(null,lr)((function(e){var t=Object(n.useState)(""),a=Object(ie.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(ie.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)(""),u=Object(ie.a)(d,2),b=u[0],p=u[1],j=Object(n.useState)(!0),f=Object(ie.a)(j,2),m=f[0],O=f[1],g=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("success"),n=a.profileObj.name,r="".concat(a.profileObj.givenName," "),s=a.profileObj.googleId,c=a.profileObj.imageUrl,!m){t.next=10;break}return t.next=8,e.onLogin({username:r,password:s});case 8:t.next=12;break;case 10:return t.next=12,e.onSignup({username:r,password:s,imgUrl:c,fullname:n});case 12:e.history.push("/workspace/");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),r.trim()&&i.trim()&&(m?(e.onLogin({username:r,password:i}),e.history.push("/workspace")):(e.onSignup({username:r,password:i,fullname:b,imgUrl:""}),e.history.push("/workspace")));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"login-signup  flex column align-center",children:[Object(Q.jsxs)("div",{className:"logo flex ",children:[Object(Q.jsx)(or.a,{className:"logo-icon"}),Object(Q.jsx)("h1",{children:"Trellex"})]}),Object(Q.jsxs)("div",{className:"login-container flex column",children:[m?Object(Q.jsx)("p",{children:"Log in to Trellex"}):Object(Q.jsx)("p",{children:"Sign up"}),Object(Q.jsxs)("form",{className:"flex column",onSubmit:x,children:[Object(Q.jsx)("input",{type:"txt",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Enter Username"}),!m&&Object(Q.jsx)("input",{type:"txt",value:b,onChange:function(e){return p(e.target.value)},placeholder:"Enter Full Name"}),Object(Q.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},placeholder:"Enter Password"}),Object(Q.jsx)("button",{className:"login-submit",children:m?"Log me in":"Sign me up"}),Object(Q.jsx)(ir.GoogleLogin,{clientId:"1066940480428-m4n85h2lafgf2m7v5j7prda0tmigel93.apps.googleusercontent.com",buttonText:m?"Login with Google ":"Sign up with Google",onSuccess:g,onFailure:function(e){console.log("failed"),console.dir(e)},cookiePolicy:"single_host_origin"})]}),Object(Q.jsx)("p",{onClick:function(){return O(!m)},children:m?"Or sign up...":"Back to Login"})]})]})})),ur=a(78);function br(e){var t=e.board,a=t.members,n={};a.forEach((function(e){n[e.fullname]=0}));for(var r=function(e){t.groups.forEach((function(t){t.tasks.forEach((function(t){t.members&&t.members.length&&t.members.forEach((function(t){t.fullname===a[e].fullname&&n[t.fullname]++}))}))}))},s=0;s<a.length;s++)r(s);var c={labels:Object.keys(n),datasets:[{label:"Tasks per member",data:Object.values(n),backgroundColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};return Object(Q.jsx)(ur.a,{data:c,options:{scales:{x:{ticks:{color:"white",font:{family:"Segoe UI",size:15}}},y:{ticks:{color:"white",font:{family:"Segoe UI",size:15}}}},elements:{bar:{borderWidth:2}},responsive:!0,plugins:{title:{display:!0,text:"Tasks per member",color:"rgba(255, 255, 255, 0.897)",font:{size:"30",family:"Segoe UI"}},datalabels:{anchor:"end",align:"end",offset:-2,color:"#000000",font:{size:12}},legend:{display:!1}},maintainAspectRatio:!1},width:250,height:450})}function pr(e){var t=e.board,a={labels:t.labels.map((function(e){return e.title})),datasets:[{label:"# of labels",data:function(){for(var e=t.labels.map((function(e){return e.id})),a=[],n=0;n<e.length;n++)a.push(0);for(var r=0;r<t.groups.length;r++)for(var s=0;s<t.groups[r].tasks.length;s++)for(var c=0;c<t.groups[r].tasks[s].labelIds.length;c++)e.includes(t.groups[r].tasks[s].labelIds[c])&&a[e.indexOf(t.groups[r].tasks[s].labelIds[c])]++;return a}(),backgroundColor:Object(u.a)(t.labels.map((function(e){return e.color}))),borderColor:Object(u.a)(t.labels.map((function(e){return e.color}))),borderWidth:3}]};return Object(Q.jsx)(ur.b,{data:a,width:350,height:350,options:{responsive:!0,plugins:{title:{display:!0,text:"Tasks by labels",color:"rgba(255, 255, 255, 0.897)",font:{size:"30",family:"Segoe UI"}},legend:{labels:{color:"rgba(255, 255, 255, 0.897)",boxWidth:14,boxHeight:14,font:{size:14,family:"Segoe UI"}}}},maintainAspectRatio:!1}})}var jr=function(e){var t=e.membersActivity,a={labels:Object(u.a)(Object.keys(t)),datasets:[{label:"Amount",data:Object(u.a)(Object.values(t)),backgroundColor:["#c277e0","#61bd4f","#ff9e1a","#334563"],borderColor:["#c277e0","darkgreen","#ff9e1a","#334563"],borderWidth:1}]};return Object(Q.jsx)("div",{className:"chart-activity",children:Object(Q.jsx)(ur.a,{data:a,options:{indexAxis:"x",elements:{bar:{borderWidth:2}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Member activity",color:"rgba(255, 255, 255, 0.897)",font:{size:"30",family:"Segoe UI"}}},scales:{x:{ticks:{color:"rgba(255, 255, 255, 0.897)",font:{family:"Segoe UI",size:15}}},y:{ticks:{color:"rgba(255, 255, 255, 0.897)",font:{family:"Segoe UI",size:15}}}},grid:{color:"rgba(255, 255, 255, 0.897)"}},height:280})})},hr=a(256),vr=a.n(hr),fr=a(257),mr=a.n(fr);var Or={loadBoard:Ee},gr=[{path:"/workspace",component:_e,label:"Workspace",isExact:!0},{path:"/board/:boardId",component:Va,label:"Board"},{path:"/board/:boardId/dashboard",component:Object(i.b)((function(e){return{board:e.boardModule.board}}),Or)((function(e){var t;Object(n.useEffect)((function(){if(!(null===e||void 0===e?void 0:e.board)){var t=e.match.params.boardId;e.loadBoard(t)}}),[e]);var a=e.board,r=function(){if(e.board){var t=0,n=0,r=0,s=0,c=0,o=0,i=0,l=0,d={};return a.groups.length&&(null===a||void 0===a||a.activities.forEach((function(e){d[e.byMember.fullname]=d[e.byMember.fullname]?d[e.byMember.fullname]+1:1})),a.groups.forEach((function(e){null===e||void 0===e||e.tasks.forEach((function(e){e.checklists&&(c+=e.checklists.length,e.checklists.forEach((function(e){var t=e.todos.length,a=0;i+=e.todos.length,e.todos.forEach((function(e){e.isDone&&(l++,a++)})),t===a&&o++}))),e.isArchive?n+=1:t+=1,s+=(null===e||void 0===e?void 0:e.isDone)?1:0,r+=(null===e||void 0===e?void 0:e.dueDate)<Date.now()&&!e.isDone?1:0}))}))),{tasks:t,archivedTasks:n,overDueTasks:r,doneTasks:s,checklists:c,doneChecklists:o,todos:i,doneTodos:l,membersActivity:d}}}();return e.board?Object(Q.jsxs)("section",{className:"dashboard-overlay flex column fade-in",children:[Object(Q.jsx)("button",{onClick:function(){e.history.goBack()},class:"close-btn clean-btn",children:Object(Q.jsx)(Ot.a,{})}),Object(Q.jsxs)("div",{className:"dashboard-container flex column ",children:[Object(Q.jsxs)("div",{className:"header flex column justify-center align-center",children:[Object(Q.jsx)("h1",{className:"dash-title",children:a.title}),Object(Q.jsxs)("p",{className:"date",children:["Created at ",new Date(a.createdAt).toLocaleString()]})]}),Object(Q.jsxs)("div",{className:"info-container flex align-center",children:[Object(Q.jsx)("div",{className:"info-box flex",children:Object(Q.jsxs)("div",{className:"flex column big-num-box",children:[Object(Q.jsx)("p",{className:"info-num",children:null===(t=a.members)||void 0===t?void 0:t.length}),Object(Q.jsxs)("p",{className:"below-num",children:[Object(Q.jsx)(vr.a,{className:"icon"}),"Members"]})]})}),Object(Q.jsxs)("div",{className:"info-box flex",children:[Object(Q.jsxs)("div",{className:"flex column big-num-box",children:[Object(Q.jsx)("p",{className:"info-num",children:r.tasks}),Object(Q.jsxs)("p",{className:"below-num",children:[Object(Q.jsx)(or.a,{className:"icon"}),"Tasks"]})]}),Object(Q.jsxs)("div",{className:"flex column details",children:[Object(Q.jsxs)("p",{className:"green",children:[r.doneTasks," Completed"]}),Object(Q.jsxs)("p",{className:"red",children:[r.overDueTasks," Overdue "]}),Object(Q.jsxs)("p",{className:"yellow",children:[r.archivedTasks," Archived "]})]})]}),Object(Q.jsxs)("div",{className:"info-box flex",children:[Object(Q.jsxs)("div",{className:"flex column big-num-box",children:[Object(Q.jsx)("p",{className:"info-num",children:r.checklists}),Object(Q.jsxs)("p",{className:"below-num",children:[Object(Q.jsx)(mr.a,{className:"icon"}),"Checklist".concat(1!==r.checklists?"s":"")]})]}),Object(Q.jsxs)("div",{className:"flex column details",children:[Object(Q.jsxs)("p",{className:"green",children:[r.doneChecklists," Completed"]}),Object(Q.jsxs)("p",{className:"yellow",children:[r.todos," Todos "]}),Object(Q.jsxs)("p",{className:"red",children:[r.todos-r.doneTodos," Unresolved todos"," "]})]})]})]}),Object(Q.jsxs)("div",{className:"chart-container flex ",children:[Object(Q.jsx)("div",{className:"chart flex align-center",children:Object(Q.jsx)(pr,{board:a})}),Object(Q.jsx)("div",{className:"chart flex align-center",children:Object(Q.jsx)(jr,{membersActivity:r.membersActivity})}),Object(Q.jsx)("div",{className:"chart flex align-center",children:Object(Q.jsx)(br,{board:a})})]})]})]}):Object(Q.jsx)("section",{className:"dashboard-overlay flex column ",children:Object(Q.jsx)(ve,{})})})),label:"Board",isExact:!0},{path:"/board/:boardId/:listId/:taskId",component:sr,label:"Task Details"},{path:"/board/",component:Va,label:"Board",isExact:!0},{path:"/login",component:dr,isExact:!0},{path:"/",component:te,label:"Home \ud83c\udfe0",isExact:!0}],xr=a(258),kr=a.n(xr),yr=a(259),wr=a.n(yr);var Nr={addBoard:Be,setPosition:$e,togglePopover:et,setPopoverMenu:at},Cr=Object(_.e)(Object(i.b)((function(e){return{user:e.userModule.loggedinUser,boards:e.boardModule.boards,userNotifications:e.userModule.userNotifications}}),Nr)((function(e){var t=Object(n.useState)(!1),a=Object(ie.a)(t,2),r=a[0],s=a[1],c=function(){var t=Object(v.a)(h.a.mark((function t(a,n,r){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addBoard(a,n,r);case 2:c=t.sent,s(!1),e.history.push("/board/".concat(c._id));case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),i=e.location.pathname.includes("board");return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("header",{className:"main-header flex align-center ".concat(i?"on-board":""),children:[Object(Q.jsxs)("div",{className:"header-btn-container flex",children:[Object(Q.jsx)(o.b,{to:"/",className:"header-btn",children:Object(Q.jsx)(kr.a,{})}),Object(Q.jsxs)(o.b,{to:"/workspace",className:"header-btn boards",children:[Object(Q.jsx)(or.a,{className:"icon"}),"Boards"]})]}),Object(Q.jsx)(o.b,{to:"/",className:"clean-link",children:Object(Q.jsxs)("div",{className:"logo",children:[Object(Q.jsx)(or.a,{className:"logo-icon"}),Object(Q.jsx)("h1",{children:"Trellex"})]})}),e.user?Object(Q.jsxs)("div",{className:"header-btn-container flex",children:[Object(Q.jsx)("button",{className:"header-btn",onClick:function(){return s(!r)},children:Object(Q.jsx)(He.a,{className:"icon"})}),Object(Q.jsx)("button",{className:"header-btn notify-btn",style:{opacity:i?1:.4,pointerEvents:i?"auto":"none"},onClick:function(t){i&&(e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"NOTIFICATION"}),e.setPopoverMenu(!0),e.togglePopover())},children:Object(Q.jsx)(wr.a,{className:"icon"})}),Object(Q.jsx)(ct,{members:[e.user],isInHeader:!0})]}):Object(Q.jsx)("div",{className:"header-btn-container flex login",children:Object(Q.jsx)(o.b,{className:"clean-link",to:"/login",children:Object(Q.jsx)("button",{className:"header-btn boards",children:"Login"})})}),Object(Q.jsx)("div",{className:"overlay ".concat(r?"show":""),onClick:function(){return s(!1)}})]}),r&&Object(Q.jsx)(be,{boardMode:"true",setCreateShown:s,onAdd:c})]})}))),Dr=a(260),Ar=a.n(Dr);function Tr(e){var t=e.label,a=e.labelsId,n=e.toggleLabelCheck,r=e.toggleIsEditCreate,s=e.setLabelEdit,c=e.isFilter;e.isLabelFilterSelected;return Object(Q.jsx)(Q.Fragment,{children:c?Object(Q.jsx)("li",{className:"flex",onClick:function(){n(t.id)},children:Object(Q.jsxs)("div",{className:"label-popover-preview flex",style:{backgroundColor:t.color},children:[Object(Q.jsx)("span",{children:t.title}),a.length>0&&a.includes(t.id)&&Object(Q.jsx)("span",{style:{lineHeight:"1rem"},children:Object(Q.jsx)(it.a,{style:{width:"16px",height:"16px"}})})]})},t.id):Object(Q.jsxs)("li",{className:"flex",onClick:function(){n(t.id)},children:[Object(Q.jsxs)("div",{className:"label-popover-preview flex",style:{backgroundColor:t.color},children:[Object(Q.jsx)("span",{children:t.title}),a.length>0&&a.includes(t.id)&&Object(Q.jsx)("span",{style:{lineHeight:"1rem"},children:Object(Q.jsx)(it.a,{style:{width:"16px",height:"16px"}})})]}),Object(Q.jsx)("div",{className:"flex align-center justify-center",children:Object(Q.jsx)(Ar.a,{style:{width:"16px",height:"16px",color:"#42526e"},onClick:function(e){e.stopPropagation(),r(),s(t)}})})]},t.id)})}function Sr(e){var t=e.labelIds,a=e.labels,n=e.handleChange,r=e.toggleIsCreate,s=e.toggleLabelCheck,c=e.search,o=e.setLabelEdit,i=e.toggleIsEditCreate;return Object(Q.jsxs)("div",{className:"popover-labels",children:[Object(Q.jsx)("input",{type:"search",placeholder:"Search Labels",onChange:n,value:c}),Object(Q.jsx)("h4",{children:"LABELS"}),Object(Q.jsx)("ul",{className:"clean-list",children:a&&a.length>0&&a.filter((function(e){return e.title.toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(Q.jsx)(Tr,{label:e,labelsId:t,toggleLabelCheck:s,toggleIsEditCreate:i,setLabelEdit:o,toggleIsCreate:r},e.id)}))}),Object(Q.jsx)("button",{className:"secondary-btn",onClick:i,children:"Create a new label"})]})}var Mr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={photos:null},e.colors=["#61bd4f","#f2d600","#ff9e1a","#eb5a46","#c277e0","#0279bf","#52e898","#ff78cb","#334563","#b3bac5"],e.gradients=["linear-gradient(to bottom, #000000, #434343)","linear-gradient(to right, #2980b9, #2c3e50)","linear-gradient(to right, #3494e6, #ec6ead)","linear-gradient(to left, #2f7336, #aa3a38)","linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)","linear-gradient(to bottom, #e52d27, #b31217)"],e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.queryPhotos();case 2:t=e.sent,this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{photos:t})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.search===this.props.search){e.next=6;break}return console.log("%c  this.props.search.length:","color: #00000;background: #aaefe5;",this.props.search.length),e.next=4,Oe.queryPhotos(this.props.search);case 4:a=e.sent,this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{photos:a})}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.selectedColor,n=e.isGradient,r=e.isImages,s=(e.handleSearch,e.search,this.state.photos);return Object(Q.jsxs)("div",{className:"color-palette",children:[!r&&this.colors.map((function(e){return Object(Q.jsxs)("label",{className:"flex align-center justify-center",style:{background:e},name:"label-color",htmlFor:"color-".concat(e),children:[Object(Q.jsx)("input",{type:"radio",name:"color",id:"color-".concat(e),value:e,onClick:t}),a===e&&Object(Q.jsx)(it.a,{style:{width:"16px",height:"16px",color:"white"}},e)]},e)})),n&&!r&&this.gradients.map((function(e){return Object(Q.jsxs)("label",{className:"flex align-center justify-center",style:{background:e},name:"label-color",htmlFor:"gradient-".concat(e),children:[Object(Q.jsx)("input",{type:"radio",name:"color",id:"gradient-".concat(e),value:e,onClick:t}),a===e&&Object(Q.jsx)(it.a,{style:{width:"16px",height:"16px",color:"white"}},e)]},e)})),r&&s&&s.map((function(e,n){return Object(Q.jsxs)("label",{className:"flex align-center justify-center",style:{width:"155px",height:"110px",backgroundImage:"url(".concat(e.urls.regular),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},name:"label-color",htmlFor:"photo-".concat(n),children:[Object(Q.jsx)("input",{type:"radio",name:"color",id:"photo-".concat(n),value:e.urls.full,onClick:t}),a===e.url&&Object(Q.jsx)(it.a,{style:{width:"16px",height:"16px",color:"white"}},n)]},n)}))]})}}]),a}(r.a.Component),Er=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",color:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(tn.a)({},n,r))},e.onSubmitEditLabel=function(){e.state.title&&e.state.color&&e.props.submitLabel(Object(b.a)({},e.state))},e.onSubmitCreate=function(){e.state.title&&e.state.color&&e.props.submitCreateLabel(Object(b.a)({},e.state))},e.onRemoveLabel=function(){e.props.removeLabel(Object(b.a)({},e.state))},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.label;this.setState({title:(null===e||void 0===e?void 0:e.title)||"",color:(null===e||void 0===e?void 0:e.color)||"",id:(null===e||void 0===e?void 0:e.id)||""})}},{key:"componentWillUnmount",value:function(){this.setState({title:"",color:"",id:""})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.color,n=this.props.label;return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)("div",{className:"label-add-content",children:[Object(Q.jsx)("label",{htmlFor:"label-input",children:"Name"}),Object(Q.jsx)("input",{id:"label-input",type:"text",name:"title",value:t,onChange:this.handleChange,className:"pop-over-input"}),Object(Q.jsx)("h4",{children:"Color"}),Object(Q.jsx)(Mr,{handleChange:this.handleChange,selectedColor:a}),Object(Q.jsxs)("div",{className:"flex space-between",children:[Object(Q.jsx)("button",{className:"primary-btn",onClick:this.onSubmitEditLabel,children:n&&n.title?"Save":"Create"}),n.title&&Object(Q.jsx)("button",{className:"danger-btn",onClick:this.onRemoveLabel,children:"Delete"})]})]})})}}]),a}(n.Component),Ir=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:"",isEditCreate:!1,label:{title:"",color:""},labels:null,labelIds:null},e.handleChange=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:t.target.value})}))},e.toggleLabelCheck=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currTaskDetails,s=n.board,c=n.saveTaskDetails,o=e.state.currGroup,i=r.labelIds.includes(a)?r.labelIds.filter((function(e){return e!==a})):[].concat(Object(u.a)(r.labelIds),[a]),r.labelIds=i,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{labelIds:i})})),t.next=7,c(s,o,r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setLabelEdit=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{label:t})}))},e.submitLabel=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.saveBoard,a.id?c=r.labels.map((function(e){return e.id===a.id?a:e})):(a.id=fe.makeId(),c=[].concat(Object(u.a)(r.labels),[a])),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{labels:c})})),e.toggleIsEditCreate(),r.labels=c,t.next=7,s(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeLabel=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.saveBoard,c=n.currTaskDetails,o=e.state.currGroup,i=r.labels.filter((function(e){return e.id!==a.id})),c.labelIds=c.labelIds.filter((function(e){return e!==a.id})),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{labels:i})})),e.toggleIsEditCreate(),r.labels=i,t.next=9,Le(r,o,c);case 9:return t.next=11,s(r);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleIsEditCreate=function(){e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{isEditCreate:!e.state.isEditCreate})}))},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.board,n=t.currTaskDetails,r=a.groups.find((function(e){return e.tasks.some((function(e){return e.id===n.id}))}));this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{labels:e.props.board.labels,labelIds:e.props.currTaskDetails.labelIds,currGroup:r})}))}},{key:"componentDidUpdate",value:function(e,t){t.isEditCreate&&this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isEditCreate:!1,label:{color:"",title:""}})}))}},{key:"render",value:function(){var e=this.props,t=e.currTaskDetails,a=e.title,n=this.state,r=n.search,s=n.label,c=n.labels,o=n.isEditCreate;return t&&c?Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)(rn,{title:a,children:[!o&&Object(Q.jsx)(Sr,{labels:c,labelIds:t.labelIds,search:r,handleChange:this.handleChange,toggleLabelCheck:this.toggleLabelCheck,toggleIsEditCreate:this.toggleIsEditCreate,setLabelEdit:this.setLabelEdit}),o&&Object(Q.jsx)(Er,{label:s,removeLabel:this.removeLabel,submitLabel:this.submitLabel})]})}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(n.Component);var Br={saveTaskDetails:Le,saveBoard:Ie},Pr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Br)(Ir),Ur=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleSearch=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:t.target.value})}))},e.toggleMemberCheck=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.addActivity,o=n.loggedinUser,i=e.state.currGroup,s.members=(null===s||void 0===s?void 0:s.members)||[],l=s.members.map((function(e){return e._id}))||[],d=l.includes(a._id)?s.members.filter((function(e){return e._id!==a._id})):[].concat(Object(u.a)(s.members),[a]),s.members=d,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedMembers:d,selectedMembersIds:l})})),a._id===o._id?c(r,s,l.includes(a._id)?"remove-self":"add-self"):c(r,s,l.includes(a._id)?"remove-member":"add-member",a.fullname),t.next=10,e.props.saveTaskDetails(r,i,s);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.board,r=t.currTaskDetails,s=this.state.search;return Object(Q.jsx)(rn,{title:a,children:Object(Q.jsxs)("div",{className:"members-popover",children:[Object(Q.jsx)("input",{type:"search",placeholder:"Search members",onChange:this.handleSearch}),Object(Q.jsx)("h4",{children:"BOARD MEMBERS"}),Object(Q.jsx)("ul",{className:"clean-list",children:n&&n.members.length>0&&n.members.filter((function(e){return e.fullname.toLowerCase().includes(s.toLowerCase())})).map((function(t,a){var s;return Object(Q.jsx)(lt,{toggleMemberCheck:e.toggleMemberCheck,member:t,selectedMembersIds:(null===(s=r.members)||void 0===s?void 0:s.map((function(e){return e._id})))||[],members:n.members},a)}))})]})})}}]),a}(n.Component);var Lr={saveTaskDetails:Le,addActivity:Ue},Fr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,popover:e.appModule.popover,board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser}}),Lr)(Ur),Rr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handlechange=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:a})}))},e.clearState=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:""})}))},e.onAddChecklist=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,r=n.board,s=n.saveTaskDetails,c=n.currTaskDetails,o=n.togglePopover,i=n.addActivity,l=e.state.currGroup,c.checklists||(c.checklists=[]),d={id:fe.makeId(),title:e.state.txt,todos:[]},c.checklists.push(d),t.next=8,s(r,l,c);case 8:e.clearState(),o(),i(r,c,"add-checklist");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this.props.title,t=this.state.txt;return Object(Q.jsx)("div",{className:"checklist-container",children:Object(Q.jsx)(rn,{title:e,children:Object(Q.jsx)("div",{children:Object(Q.jsxs)("form",{className:"checklist-form",onSubmit:this.onAddChecklist,children:[Object(Q.jsx)("label",{htmlFor:"checklist",className:"pop-over-label",children:"Title"}),Object(Q.jsx)("input",{className:"checklist-input",id:"checklist",type:"text",value:t,onChange:this.handlechange,placeholder:"Enter a title...",autoFocus:!0}),Object(Q.jsx)("button",{type:"submit",className:"nch-button add-checklist-btn",children:"Add"})]})})})})}}]),a}(n.Component);var Gr={saveTaskDetails:Le,saveBoard:Ie,togglePopover:et,addActivity:Ue},Xr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Gr)(Rr),_r=a(33),Yr=a(538),Hr=a(263),Wr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={date:null},e.handleChange=function(t){e.setState({date:t})},e.onSaveDueDate=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.togglePopover,c=n.saveTaskDetails,o=n.currTaskDetails,i=n.addActivity,l=e.state.currGroup,o.dueDate=a?Date.parse(a):null,t.next=5,c(r,l,o);case 5:s(),a?i(r,o,"set-date",e.dueDateFormat(o.dueDate)):i(r,o,"remove-date");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dueDateFormat=function(e){var t=(new Date).getFullYear(),a=new Date(e).getFullYear(),n="";return n+="".concat(new Date(e).toLocaleString("en-GB",{day:"numeric"})," "),n+="".concat(new Date(e).toLocaleString("en-GB",{month:"short"})," at "),a!==t&&(n+="".concat(a," ")),n+="".concat(new Date(e).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0}).toLocaleUpperCase())},e.onRemoveDate=function(){e.onSaveDueDate(null)},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))})),r=a.dueDate?new Date(a.dueDate):new Date;this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{date:r,currGroup:n})}))}},{key:"render",value:function(){var e=this,t=this.props.title,a=this.state.date;return Object(Q.jsx)("div",{className:"date-picker-container",children:Object(Q.jsxs)(rn,{title:t,children:[Object(Q.jsx)("div",{children:Object(Q.jsx)(_r.a,{utils:Hr.a,children:Object(Q.jsx)(Yr.a,{autoOk:!0,variant:"static",value:a,openTo:"date",onChange:this.handleChange})})}),Object(Q.jsxs)("div",{className:"btn-container flex column",children:[Object(Q.jsx)("button",{className:"primary-btn",onClick:function(){return e.onSaveDueDate(a)},children:"Save"}),Object(Q.jsx)("button",{className:"secondary-btn",onClick:this.onRemoveDate,children:"Remove"})]})]})})}}]),a}(n.Component);var Vr={saveTaskDetails:Le,saveBoard:Ie,togglePopover:et,addActivity:Ue},zr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Vr)(Wr),Qr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={webUrlSrc:"",webUrlName:""},e.uploadFile=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,b;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveTaskDetails,o=n.togglePopover,i=e.state.currGroup,l=s.attachments,t.next=5,ya.uploadFile(a);case 5:return d=t.sent,b={name:d.original_filename,id:d.asset_id,createdAt:Date.now(),url:d.secure_url},s.attachments=l?[].concat(Object(u.a)(l),[b]):[b],t.next=10,c(r,i,s);case 10:o();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clearState=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{webUrlSrc:"",webUrlName:""})}))},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(tn.a)({},r,n))}))},e.onAttachmentClick=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,b,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.webUrlSrc,r=a.webUrlName,s=a.currGroup,c=e.props,o=c.board,i=c.currTaskDetails,l=c.saveTaskDetails,d=c.togglePopover,b=i.attachments,!n){t.next=10;break}return p={id:fe.makeId(),name:r||n,url:n.startsWith("http")?n:"https://"+n,createdAt:Date.now(),isWeb:!0},i.attachments=b?[].concat(Object(u.a)(b),[p]):[p],t.next=8,l(o,s,i);case 8:e.clearState(),d();case 10:case"end":return t.stop()}}),t)}))),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this.props.title,t=this.state,a=t.webUrlSrc,n=t.webUrlName;return Object(Q.jsx)(rn,{title:e,children:Object(Q.jsxs)("div",{className:"attachment-container",children:[Object(Q.jsxs)("div",{className:"upload-preview",children:[Object(Q.jsx)("label",{htmlFor:"file-upload",children:"Computer"}),Object(Q.jsx)("input",{type:"file",onChange:this.uploadFile,accept:"img/*",id:"file-upload"})]}),Object(Q.jsx)("label",{htmlFor:"url-upload",children:"Attach a link"}),Object(Q.jsx)("input",{type:"text",id:"url-upload",placeholder:"Enter link url",value:a,name:"webUrlSrc",onChange:this.handleChange}),a&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("label",{htmlFor:"url-name-optional",children:"Link name (optional)"}),Object(Q.jsx)("input",{type:"text",id:"url-name-optional",name:"webUrlName",value:n,placeholder:"Enter link name",onChange:this.handleChange})]}),Object(Q.jsx)("button",{class:"primary-btn",onClick:this.onAttachmentClick,children:"Attach"})]})})}}]),a}(n.Component);var qr={saveTaskDetails:Le,saveBoard:Ie,togglePopover:et,addActivity:Ue},Jr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),qr)(Qr),Kr=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isHeaderSelected:null,isFullSelected:!1,selectedColor:!1,selectedPhoto:null},e.setHeaderSelected=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.currTaskDetails,r=a.saveTaskDetails,s=a.board,c=e.state.currGroup,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isHeaderSelected:!0,isFullSelected:!1})})),n.style.coverMode="header",t.next=6,r(s,c,n);case 6:case"end":return t.stop()}}),t)}))),e.setFullSelected=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.currTaskDetails,r=a.board,s=a.saveTaskDetails,c=e.state.currGroup,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isFullSelected:!0,isHeaderSelected:!1})})),n.style.coverMode="full",t.next=6,s(r,c,n);case 6:case"end":return t.stop()}}),t)}))),e.removeCover=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.saveTaskDetails,r=a.currTaskDetails,s=a.board,c=e.state.currGroup,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isFullSelected:!1,isHeaderSelected:!1})})),r.style.coverMode=null,r.style.bgColor=null,r.style.bgUrl=null,t.next=8,n(s,c,r);case 8:case"end":return t.stop()}}),t)}))),e.uploadFile=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,r=n.currTaskDetails,s=n.saveTaskDetails,c=n.board,o=e.state.currGroup,t.next=5,ya.uploadFile(a);case 5:return i=t.sent,r.style.bgUrl=i.secure_url,t.next=9,s(c,o,r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFile=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currTaskDetails,s=n.saveTaskDetails,c=n.board,o=e.state.currGroup,i=r.attachments,l=i.filter((function(e){return e.id!==a})),r.attachments=l,t.next=7,s(c,o,r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.saveTaskDetails,s=n.currTaskDetails,c=n.board,o=e.state,i=o.isFullSelected,l=o.isHeaderSelected,d=o.currGroup,u=a.target.value,i||l?e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedColor:u})})):(e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isHeaderSelected:!0,selectedColor:u})})),s.style.coverMode="header"),s.style.bgColor=u,t.next=7,r(c,d,s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));switch(a.style||(a.style={coverMode:"",bgColor:null,bgUrl:null}),a.style.coverMode){case"header":this.setState((function(e){var t,r;return Object(b.a)(Object(b.a)({},e),{},{isHeaderSelected:!0,selectedColor:(null===(t=a.style)||void 0===t?void 0:t.bgColor)||"rgba(94, 108, 132, 0.3)",selectedPhoto:(null===(r=a.style)||void 0===r?void 0:r.bgUrl)||null,currGroup:n})}));break;case"full":this.setState((function(e){var t,r;return Object(b.a)(Object(b.a)({},e),{},{isFullSelected:!0,selectedColor:(null===(t=a.style)||void 0===t?void 0:t.bgColor)||"rgba(94, 108, 132, 0.3)",selectedPhoto:(null===(r=a.style)||void 0===r?void 0:r.bgUrl)||null,currGroup:n})}));break;default:this.setState((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},{selectedColor:"rgba(94, 108, 132, 0.3)",selectedPhoto:(null===(t=a.style)||void 0===t?void 0:t.bgUrl)||null,currGroup:n})}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.isHeaderSelected,n=t.isFullSelected,r=(t.selectedColor,t.selectedPhoto,this.props),s=r.title,c=r.currTaskDetails.style,o=c.bgColor,i=c.bgUrl;return Object(Q.jsx)(rn,{title:s,children:Object(Q.jsxs)("div",{className:"cover-popover",children:[Object(Q.jsx)("h4",{children:"SIZE"}),Object(Q.jsxs)("div",{className:"cover-options flex space-between align-center",children:[Object(Q.jsx)("div",{className:"header-cover-preview ".concat(a?"selected":""),onClick:function(){e.setHeaderSelected()},children:i?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"header-section",style:{backgroundImage:"url(".concat(i),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),Object(Q.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative"},children:[Object(Q.jsx)("div",{className:"line",style:{width:"122px"}}),Object(Q.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}}),Object(Q.jsx)("div",{className:"dot"})]})]}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"header-section",style:{backgroundColor:o}}),Object(Q.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative"},children:[Object(Q.jsx)("div",{className:"line",style:{width:"122px"}}),Object(Q.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}}),Object(Q.jsx)("div",{className:"dot"})]})]})}),i?Object(Q.jsx)("div",{onClick:function(){return e.setFullSelected()},className:"full-cover-preview ".concat(n?"selected":""),style:{display:"flex",backgroundImage:"url(".concat(i),backgroundSize:"contain"},children:Object(Q.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative",alignSelf:"flex-end"},children:[Object(Q.jsx)("div",{className:"line",style:{width:"122px"}}),Object(Q.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}})]})}):Object(Q.jsx)("div",{onClick:function(){return e.setFullSelected()},className:"full-cover-preview ".concat(n?"selected":""),style:{backgroundColor:o,display:"flex"},children:Object(Q.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative",alignSelf:"flex-end"},children:[Object(Q.jsx)("div",{className:"line",style:{width:"122px"}}),Object(Q.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}})]})})]}),Object(Q.jsx)("div",{className:"flex",children:Object(Q.jsx)("button",{className:"secondary-btn full",onClick:this.removeCover,children:"Remove Cover"})}),Object(Q.jsx)("h4",{children:"COLOR"}),Object(Q.jsx)(Mr,{handleChange:this.handleChange,selectedColor:o}),Object(Q.jsx)("h4",{children:"ATTACHMENT"}),Object(Q.jsxs)("div",{className:"upload-preview",children:[Object(Q.jsx)("label",{className:"secondary-btn",htmlFor:"file-upload",children:"Upload a cover image"}),Object(Q.jsx)("input",{type:"file",onChange:this.uploadFile,accept:"img/*",id:"file-upload"})]})]})})}}]),a}(r.a.Component);var Zr={saveTaskDetails:Le},$r=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Zr)(Kr),es=a(540),ts=a(542),as=a(543),ns=a(537),rs=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedGroup:null,selectedBoard:null,selectedPosition:null,taskTitle:""},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(tn.a)({},r,n))}))},e.handleBoardChange=function(t){var a=t.target.value,n=e.props.boards.find((function(e){return e._id===a}));e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedBoard:n})}))},e.handleGroupChange=function(t){var a=t.target.value,n=e.state.selectedBoard.groups.find((function(e){return e.id===a}));e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedGroup:n})}))},e.submitMoveSameBoard=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u,p,j,v,f,m,O;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.selectedBoard,r=a.selectedGroup,s=a.selectedPosition,c=a.taskTitle,o=a.currGroup,i=e.props,l=i.currTaskDetails,d=i.saveBoard,u=i.isCopy,p=n.groups.find((function(e){return e.id===o.id})),j=n.groups.indexOf(p),v=n.groups[j].tasks.find((function(e){return e.id===l.id})),f=n.groups[j].tasks.indexOf(v),m=u?Object(b.a)(Object(b.a)({},l),{},{id:fe.makeId(),title:c}):n.groups[j].tasks.splice(f,1),O=n.groups.indexOf(r),n.groups[O].tasks.splice(s,0,u?m:m[0]),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:r})})),t.next=12,d(n);case 12:case"end":return t.stop()}}),t)}))),e.submitMoveAnotherBoard=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u,p,j,v,f,m,O,g,x,k,y,w,N;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.selectedBoard,r=a.selectedGroup,s=a.selectedPosition,c=a.taskTitle,o=a.currGroup,i=e.props,l=i.currTaskDetails,d=i.saveBoard,u=i.board,p=i.boards,j=i.isCopy,v=p.find((function(e){return e._id===u._id})),f=p.indexOf(v),m=p[f].groups.find((function(e){return e.id===o.id})),O=p[f].groups.indexOf(m),g=p[f].groups[O].tasks.find((function(e){return e.id===l.id})),x=p[f].groups[O].tasks.indexOf(g),k=j?Object(b.a)(Object(b.a)({},l),{},{id:fe.makeId(),title:c}):p[f].groups[O].tasks.splice(x,1),y=p.indexOf(n),w=p[y].groups.find((function(e){return e.id===r.id})),N=p[y].groups.indexOf(w),p[y].groups[N].tasks.splice(s,0,j?k:k[0]),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:r,selectedBoard:p[y]})})),t.next=16,d(p[f]);case 16:return t.next=18,d(p[y]);case 18:case"end":return t.stop()}}),t)}))),e.onSubmit=function(){var t=e.state,a=t.selectedBoard,n=t.selectedGroup,r=t.taskTitle,s=e.props.board;a&&n&&r&&(s._id!==a._id?e.submitMoveAnotherBoard():e.submitMoveSameBoard())},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))})),r=n.tasks.find((function(e){return a.id===e.id})),s=n.tasks.indexOf(r);this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedBoard:t,selectedGroup:n,selectedPosition:s,taskTitle:a.title,currGroup:n})}))}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.boards,n=e.isCopy,r=this.state,s=r.selectedBoard,c=r.selectedGroup,o=r.selectedPosition,i=r.taskTitle;return s?Object(Q.jsx)(rn,{title:t,children:Object(Q.jsxs)("div",{className:"popover-move-content",children:[n&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("label",{children:"Title"}),Object(Q.jsx)("input",{type:"text",value:i,name:"taskTitle",onChange:this.handleChange}),Object(Q.jsx)("label",{children:"Copy to"})]}),Object(Q.jsxs)("div",{className:"move-section flex wrap column",children:[Object(Q.jsxs)(ns.a,{variant:"filled",className:"choose-board clean-mui-arrow full",children:[Object(Q.jsx)(ts.a,{id:"selectedBoard",children:"Board"}),Object(Q.jsx)(es.a,{labelId:"selectedBoard",id:"selectedBoard",value:s._id,name:"selectedBoard",inputProps:{MenuProps:{disableScrollLock:!0}},onChange:this.handleBoardChange,children:a.map((function(e){return Object(Q.jsx)(as.a,{value:e._id,children:e.title})}))})]}),Object(Q.jsxs)("div",{className:"flex",children:[Object(Q.jsxs)(ns.a,{variant:"filled",className:"choose-list clean-mui-arrow full",children:[Object(Q.jsx)(ts.a,{id:"selectedGroup",children:"List"}),Object(Q.jsx)(es.a,{name:"selectedGroup",labelId:"selectedGroup",id:"selectedGroup",value:c.id,inputProps:{MenuProps:{disableScrollLock:!0}},disableUnderline:!0,onChange:this.handleGroupChange,children:s.groups.map((function(e){return Object(Q.jsx)(as.a,{value:e.id,children:e.title})}))})]}),Object(Q.jsxs)(ns.a,{variant:"filled",className:"choose-position clean-mui-arrow ",children:[Object(Q.jsx)(ts.a,{id:"position-select",children:"Position"}),Object(Q.jsx)(es.a,{name:"selectedPosition",labelId:"position-select",id:"position-select",value:o,inputProps:{MenuProps:{disableScrollLock:!0}},disableUnderline:!0,onChange:this.handleChange,children:c.tasks.length>0?Array.from(Array(c.tasks.length+1),(function(e,t){return Object(Q.jsx)(as.a,{value:t,children:t})})):Object(Q.jsx)(as.a,{value:0,children:0})})]})]})]}),Object(Q.jsx)("button",{className:"primary-btn",onClick:this.onSubmit,children:n?"Create card":"Move"})]})}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(n.Component);var ss={setCurrTaskDetails:Ke,saveBoard:Ie},cs=Object(i.b)((function(e){return{board:e.boardModule.board,boards:e.boardModule.boards,currTaskDetails:e.appModule.currTaskDetails}}),ss)(rs),os=a(262),is=a.n(os),ls=a(261),ds=a.n(ls),us=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.board,t=this.props,a=t.title,n=t.setPosition;if(!e)return Object(Q.jsx)("div",{});var r=e.activities;r.sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0}));var s=e.style,c=(s.bgClr,s.bgImg);return Object(Q.jsx)("div",{className:"board-menu",children:Object(Q.jsx)(rn,{title:a,children:Object(Q.jsxs)("div",{className:"menu-details ",children:[Object(Q.jsxs)("ul",{className:"clean-list menu-list",children:[Object(Q.jsxs)("li",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_BACKGROUND"})},children:[c?Object(Q.jsx)("span",{className:"menu-bg-span",style:{backgroundImage:"url(".concat(c),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}):Object(Q.jsx)("span",{className:"menu-bg-span",style:{background:e.style.bgClr}}),Object(Q.jsx)("span",{className:"menu-title",children:"Change background"})]}),Object(Q.jsxs)("li",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_FILTER_CARDS"})},children:[Object(Q.jsx)(ds.a,{}),Object(Q.jsx)("span",{className:"menu-title",children:"Search cards"})]}),Object(Q.jsxs)("li",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_ARCHIVE"})},children:[Object(Q.jsx)(is.a,{}),Object(Q.jsx)("span",{className:"menu-title",children:"Archive"})]})]}),Object(Q.jsxs)("div",{className:"task-activities-header flex align-center",children:[Object(Q.jsx)(Mn.a,{}),Object(Q.jsx)("h3",{className:"menu-activity",children:"Activity"})]}),Object(Q.jsx)(Bn,{CommAndAct:r,isShowActivities:!0,currTask:null})]})})})}}]),a}(n.Component);var bs={setPosition:$e},ps=Object(i.b)((function(e){return{board:e.boardModule.board}}),bs)(us);function js(e){var t=e.task,a=e.groupId,n=e.boardLabels,r=e.taskUrl,s=t.style,c=t.labelIds,i=t.dueDate,l=t.title,d=t.description,u=t.comments,b=t.attachments,p=t.checklists,j=t.media,h=function(e){var t=0,a=0;return p.forEach((function(e){t+=e.todos.length,e.todos.forEach((function(e){e.isDone&&(a+=1)}))})),e?t===a:"".concat(a,"/").concat(t)};return Object(Q.jsx)(o.b,{to:r,className:"clean-link",children:Object(Q.jsxs)("article",{className:"task-preview-container edit",style:{borderRadius:3,minWidth:240},children:[(null===s||void 0===s?void 0:s.bgUrl)&&Object(Q.jsx)("img",{className:"task-cover-img",src:s.bgUrl,style:{backgroundColor:"white",borderRadius:"3px",objectFit:"contain",maxHeight:240},alt:""}),(null===s||void 0===s?void 0:s.bgColor)&&!(null===s||void 0===s?void 0:s.bgUrl)&&Object(Q.jsx)("div",{className:"task-cover",style:{background:t.style.bgColor}}),Object(Q.jsxs)("div",{className:"task-preview clean-link ",style:(null===s||void 0===s?void 0:s.bgUrl)&&{position:"relative",top:"-8px",marginBottom:"-8px",borderRadius:"0 0 3px 3px"},children:[(null===c||void 0===c?void 0:c.length)>0&&Object(Q.jsx)(Nt,{labelIds:c,boardLabels:n}),(null===j||void 0===j?void 0:j.videoUrl)&&Object(Q.jsx)("div",{className:"video flex",onDrag:function(e){return e.stopPropagation()},children:Object(Q.jsx)("video",{width:"100%",controls:!0,children:Object(Q.jsx)("source",{src:t.media.videoUrl,type:"video/mp4"})})}),(null===j||void 0===j?void 0:j.audioUrl)&&Object(Q.jsx)("div",{className:"audio",children:Object(Q.jsx)("audio",{controls:!0,src:t.media.audioUrl})}),Object(Q.jsx)("p",{className:"task-title",children:l}),Object(Q.jsxs)("div",{className:"task-preview-icons flex align-center",children:[i&&Object(Q.jsx)(Bt,{dueDate:i,isDone:t.isDone,taskId:t.id,groupId:a,noHover:!0}),(null===d||void 0===d?void 0:d.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Ut.a,{className:"icon"})}),(null===u||void 0===u?void 0:u.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Ft.a,{className:"icon msg"}),txt:u.length}),(null===b||void 0===b?void 0:b.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Gt.a,{className:"icon attach"}),txt:b.length}),(null===p||void 0===p?void 0:p.length)>0&&Object(Q.jsx)(Ct,{icon:Object(Q.jsx)(Et.a,{className:"icon"}),txt:h(),isDone:h(!0)}),(null===t||void 0===t?void 0:t.members)&&Object(Q.jsx)(ct,{members:t.members,isInPreview:!0})]})]})]})})}var hs=a(97),vs=a.n(hs),fs=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props,t=e.board,a=e.setPosition,n=t.groups.map((function(e){return e.tasks})).flat();return n=n.filter((function(e){return e.isArchive})),Object(Q.jsx)("div",{className:"board-menu",children:Object(Q.jsx)(rn,{title:"Archive",children:Object(Q.jsxs)("div",{class:"pop-over-archive",children:[Object(Q.jsx)("span",{class:"back",onClick:function(e){a({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_MENU"})},children:Object(Q.jsx)(vs.a,{})}),Object(Q.jsx)("div",{class:"card-preview-container",children:n.map((function(e){var a=t.groups.find((function(t){return t.tasks.some((function(t){return t.id===e.id}))}));return Object(Q.jsx)(js,{task:e,id:e.id,index:e.orgIdx,groupId:a.id,boardId:t._id,boardLabels:t.labels,taskUrl:"/board/".concat(t._id,"/").concat(a.id,"/").concat(e.id)},e.id)}))})]})})})}}]),a}(r.a.Component);var ms={setPosition:$e},Os=Object(i.b)((function(e){return{board:e.boardModule.board}}),ms)(fs),gs=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleChange=function(t){var a=e.props,n=a.board,r=a.saveBoard,s=t.target.value;s.includes("http")?(n.style.bgImg=s,n.style.bgClr=null):(n.style.bgClr=s,n.style.bgImg=null),r(n)},e.handleSearch=function(t){var a=t.target,n=a.value;a.name;console.log("%c  value:","color: #00000;background: #aaefe5;",n),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:n})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props,t=e.board,a=e.title,n=e.setPosition;if(!t)return Object(Q.jsx)(Q.Fragment,{});var r=this.state.search;return Object(Q.jsx)("div",{className:"board-menu",children:Object(Q.jsxs)(rn,{title:a,children:[Object(Q.jsx)("span",{class:"back",onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_MENU"})},children:Object(Q.jsx)(vs.a,{})}),Object(Q.jsx)("div",{class:"pop-over-background",children:Object(Q.jsxs)("div",{class:"background-styles-container",children:[Object(Q.jsx)("h4",{children:"Colors"}),Object(Q.jsx)(Mr,{selectedColor:t.style.bgClr,isGradient:!0,handleChange:this.handleChange}),Object(Q.jsx)("h4",{children:"Images"}),Object(Q.jsx)("input",{type:"search",value:r,name:"search",onChange:this.handleSearch}),Object(Q.jsx)(Mr,{selectedColor:t.style.bgClr,isImages:!0,search:r,handleSearch:this.handleSearch,handleChange:this.handleChange})]})})]})})}}]),a}(r.a.Component);var xs={saveBoard:Ie,setPosition:$e},ks=Object(i.b)((function(e){return{board:e.boardModule.board}}),xs)(gs),ys=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userNotifications:null,boardId:null},e.componentDidMount=function(){e.setNotifications()},e.setNotifications=function(){var t=e.props.board,a=e.props.loggedinUser;if(t){var n=[];t.groups.forEach((function(e){e.tasks.forEach((function(e){e.members&&e.members.length&&e.members.forEach((function(t){t._id===a._id&&n.push(e.id)}))}))}));var r=t.activities.filter((function(e){return n.includes(e.task.id)}));(r=JSON.parse(JSON.stringify(r))).forEach((function(e){e.isNotRead=!0,e.isNotify=!0})),r.sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0})),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{userNotifications:r,boardId:t._id})}))}},e.componentDidUpdate=function(){var t=e.props.board,a=e.state.boardId;t&&t._id!==a&&e.setNotifications()},e.selectNotification=function(t){var a=e.props.board,n=a.groups.find((function(e){return e.tasks.some((function(e){return e.id===t.task.id}))}));t.isNotRead=!1,e.NotifyUpdate(t),e.props.history.push("/board/".concat(a._id,"/").concat(n.id,"/").concat(t.task.id))},e.NotifyUpdate=function(t){var a=e.state.userNotifications,n=a.findIndex((function(e){return e.id===t.id}));a[n]=t,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{userNotifications:a})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.title,t=this.state.userNotifications;return t?Object(Q.jsx)("div",{className:"board-menu notification-popover",children:Object(Q.jsx)(rn,{title:e,children:Object(Q.jsx)(Bn,{CommAndAct:t,isShowActivities:!0,currTask:null,selectNotification:this.selectNotification})})}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(r.a.Component);var ws=Object(_.e)(Object(i.b)((function(e){return{board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser}}),null)(ys)),Ns=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{search:"",labels:[],members:[]}},e.handleSearch=function(t){var a=e.props,n=a.loadBoard,r=a.board,s=a.setFilterBy,c=t.target,o=c.value,i=c.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},Object(tn.a)({},i,o))})}),(function(){s(e.state.filterBy),n(r._id)}))},e.toggleLabelCheck=function(t){var a=e.props,n=a.board,r=a.loadBoard,s=a.setFilterBy,c=e.state.filterBy,o=c.labels.includes(t)?c.labels.filter((function(e){return e!==t})):[].concat(Object(u.a)(c.labels),[t]);e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},{labels:o})})}),(function(){s(e.state.filterBy),r(n._id)}))},e.toggleMemberCheck=function(t){var a=e.props,n=a.board,r=a.loadBoard,s=a.setFilterBy,c=e.state.filterBy,o=c.members.includes(t._id)?c.members.filter((function(e){return e!==t._id})):[].concat(Object(u.a)(c.members),[t._id]);e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},{members:o})})}),(function(){s(e.state.filterBy),r(n._id)}))},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e,t,a;console.log("this.props.filterBy.search :>> ",this.props.filterBy.search),this.setState({filterBy:{search:(null===(e=this.props.filterBy)||void 0===e?void 0:e.search)||"",labels:(null===(t=this.props.filterBy)||void 0===t?void 0:t.labels)||[],members:(null===(a=this.props.filterBy)||void 0===a?void 0:a.members)||[]}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.title,r=t.setPosition;if(!a)return Object(Q.jsx)(Q.Fragment,{});var s=this.state,c=(s.search,s.filterBy);return Object(Q.jsx)("div",{className:"board-menu",children:Object(Q.jsxs)(rn,{title:n,children:[Object(Q.jsx)("span",{class:"back",onClick:function(e){r({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_MENU"})},children:Object(Q.jsx)(vs.a,{})}),Object(Q.jsxs)("div",{className:"popover-filter",children:[Object(Q.jsx)("p",{children:"Search by task title"}),Object(Q.jsx)("input",{type:"search",value:c.search,name:"search",onChange:this.handleSearch,placeholder:"Enter task title",autoFocus:!0}),Object(Q.jsx)("hr",{}),Object(Q.jsx)("p",{children:"Filter by task labels"}),a.labels.map((function(t){return Object(Q.jsx)(Tr,{label:t,labelsId:c.labels,isFilter:!0,toggleLabelCheck:e.toggleLabelCheck},t.id)})),Object(Q.jsx)("hr",{}),Object(Q.jsx)("p",{children:"Filter by members"}),a.members.map((function(t){return Object(Q.jsx)(lt,{member:t,selectedMembersIds:c.members,toggleMemberCheck:e.toggleMemberCheck},t.id)}))]})]})})}}]),a}(r.a.Component);var Cs={setPosition:$e,loadBoard:Ee,setFilterBy:Re},Ds=Object(i.b)((function(e){return{board:e.boardModule.board,filterBy:e.boardModule.filterBy}}),Cs)(Ns);var As=Object(i.b)((function(e){return{popover:e.appModule.popover}}),null)((function(e){switch(e.popover.pos.type){case"LABELS":return Object(Q.jsx)(Pr,Object(b.a)(Object(b.a)({},e),{},{title:"Labels"}));case"MEMBERS":return Object(Q.jsx)(Fr,Object(b.a)(Object(b.a)({},e),{},{title:"Members"}));case"CHECKLIST":return Object(Q.jsx)(Xr,Object(b.a)(Object(b.a)({},e),{},{title:"Checklist"}));case"DATE":return Object(Q.jsx)(zr,Object(b.a)(Object(b.a)({},e),{},{title:"Date"}));case"ATTACHMENT":return Object(Q.jsx)(Jr,Object(b.a)(Object(b.a)({},e),{},{title:"Attach from..."}));case"COVER":return Object(Q.jsx)($r,Object(b.a)(Object(b.a)({},e),{},{title:"Cover"}));case"MOVE":return Object(Q.jsx)(cs,Object(b.a)(Object(b.a)({},e),{},{isCopy:!1,title:"Move to"}));case"COPY":return Object(Q.jsx)(cs,Object(b.a)(Object(b.a)({},e),{},{isCopy:!0,title:"Copy"}));case"BOARD_SHOW_MENU":return Object(Q.jsx)(ps,Object(b.a)(Object(b.a)({},e),{},{title:"Menu"}));case"BOARD_SHOW_ARCHIVE":return Object(Q.jsx)(Os,Object(b.a)(Object(b.a)({},e),{},{title:"Archive"}));case"BOARD_SHOW_BACKGROUND":return Object(Q.jsx)(ks,Object(b.a)(Object(b.a)({},e),{},{title:"Change background"}));case"BOARD_FILTER_CARDS":return Object(Q.jsx)(Ds,Object(b.a)(Object(b.a)({},e),{},{title:"Search cards"}));case"NOTIFICATION":return Object(Q.jsx)(ws,Object(b.a)(Object(b.a)({},e),{},{title:"Notifications"}));default:return Object(Q.jsx)(Q.Fragment,{})}})),Ts=function(e){Object(G.a)(a,e);var t=Object(X.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){re.terminate()}},{key:"render",value:function(){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Cr,{}),Object(Q.jsx)("main",{children:gr.map((function(e){return Object(Q.jsx)(_.a,{exact:e.isExact,component:e.component,path:e.path},e.path)}))}),Object(Q.jsx)(As,{})]})}}]),a}(r.a.Component),Ss=(a(491),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Ms(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(i.a,{store:L,children:Object(Q.jsx)(o.a,{children:Object(Q.jsx)(Ts,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ss?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ms(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ms(t,e)}))}}()}},[[492,1,2]]]);
//# sourceMappingURL=main.47db68c9.chunk.js.map